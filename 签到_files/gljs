
		TMap = window.TMap || {};
		if (!TMap.__load) {
			TMap.__load = function(onLoad) {
				onLoad({"key":"E6YBZ-CTPCG-IEYQJ-IF4JD-EOW7J-YKBFB","version":"1.0.8.5","highQualityRender":false}, 1607217691098);
				delete TMap.__load;
			};
		}
        
/*! @version 1.0.8.5 */
!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=524)}([function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(95),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,o.default)(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()},function(t,e,n){t.exports={default:n(169),__esModule:!0}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=n(159),r=i(o),a=n(94),l=i(a),s=n(26),u=i(s);e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,u.default)(e)));t.prototype=(0,l.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(r.default?(0,r.default)(t,e):t.__proto__=e)}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(26),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,o.default)(e))&&"function"!=typeof e?t:e}},function(t,e){var n=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)},function(t,e,n){var i=n(30),o=n(52),r=n(100),a=n(90),l=n(122),s=function(t,e,n){var u,c,f,d,h=t&s.F,v=t&s.G,p=t&s.S,m=t&s.P,_=t&s.B,g=v?i:p?i[e]||(i[e]={}):(i[e]||{}).prototype,y=v?o:o[e]||(o[e]={}),x=y.prototype||(y.prototype={});v&&(n=e);for(u in n)c=!h&&g&&void 0!==g[u],f=(c?g:n)[u],d=_&&c?l(f,i):m&&"function"==typeof f?l(Function.call,f):f,g&&a(g,u,f,t&s.U),y[u]!=f&&r(y,u,d),m&&x[u]!=f&&(x[u]=f)};i.core=o,s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){t&&(0,d.default)(t).forEach(function(t){e.apply(void 0,(0,c.default)(t))})}var r=n(16),a=i(r),l=n(26),s=i(l),u=n(32),c=i(u),f=n(129),d=i(f),h=n(18),v=i(h),p=n(128),m=i(p),_=n(156),g=i(_),y=n(155);e.getMax=function(t){for(var e=t.length,n=-1/0;e;)e-=1,n=t[e]>n?t[e]:n;return n},e.getMin=function(t){for(var e=t.length,n=1/0;e;)e-=1,n=t[e]<n?t[e]:n;return n},e.isInRange=function(t,e,n){return t>=e&&t<=n},e.clamp=function(t,e,n){return Math.min(n,Math.max(e,t))},e.wrap=function(t,e,n){var i=n-e,o=((t-e)%i+i)%i+e;return o===e?n:o},e.round=function(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n},e.degree_to_radian=m.default,e.radian_to_degree=g.default,e.extend=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=!0,a=!1,l=void 0;try{for(var s,u=(0,v.default)(n);!(r=(s=u.next()).done);r=!0){o(s.value,function(e,n){t[e]=n})}}catch(t){a=!0,l=t}finally{try{!r&&u.return&&u.return()}finally{if(a)throw l}}return t},e.bindAll=function(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})},e.forIn=o,e.endsWith=function(t,e){return-1!==t.indexOf(e,t.length-e.length)},e.isDefined=function(t){return null!==t&&void 0!==t},e.isUndefined=function(t){return void 0===t},e.isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},e.parseJson=function(t){return!JSON||!JSON.stringify?new Function("return "+t)():JSON.parse(t)},e.colorToRGBA=function(t){if(t instanceof Array)return t;var e=t>>0&255,n=t>>8&255,i=t>>16&255,o=t>>24&255;return o/=255,new Array(e,n,i,o)},e.rgbaToGLColor=function(t){t=String(t);var e=t.replace(/ /g,"").substring(t.indexOf("(")+1,t.indexOf(")")).split(",");return 3===e.length&&(e[3]=1),e=e.map(function(t,e){return 3===e?Number(t):Number(t)/255})},e.uniqueId=function(){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),e=new Array(36),n=0,i=void 0;return function(){for(var o=0;o<36;o++)8===o||13===o||18===o||23===o?e[o]="-":14===o?e[o]="4":(n<=2&&(n=33554432+16777216*Math.random()|0),i=15&n,n>>=4,e[o]=t[19===o?3&i|8:i]);return e.join("")}}(),e.objectClone=function(t){var e=this;if("object"!==(void 0===t?"undefined":(0,s.default)(t))||null===t)return t;if(t instanceof Array)return[].concat(t);var n=new Object;return o(t,function(t,i){n[t]=e.objectClone(i)}),n},e.keysDifference=function(t,e){var n=[];return o(t,function(t){t in e||n.push(t)}),n},e.bezier=function(t,e,n,i){var o=new y(t,e,n,i);return function(t){return o.solve(t)}},e.ease=e.bezier(.25,.1,.25,1),e.linearEase=function(t){return t},e.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var i=t.length,o=new Array(t.length),r=null;t.forEach(function(t,a){e(t,function(t,e){t&&(r=t),o[a]=e,0===i&&n(r,o),i-=1})})},e.deepEqual=function(t,n){if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(var i=0;i<t.length;i++)if(!e.deepEqual(t[i],n[i]))return!1;return!0}if("object"===(void 0===t?"undefined":(0,s.default)(t))&&null!==t&&null!==n){if("object"!==(void 0===n?"undefined":(0,s.default)(n)))return!1;if((0,a.default)(t).length!==(0,a.default)(n).length)return!1;for(var o in t)if(t.hasOwnProperty(o)&&!e.deepEqual(t[o],n[o]))return!1;return!0}return t===n};var x={};e.warnOnce=function(t){x[t]||("undefined"!=typeof console&&console.warn(t),x[t]=!0)},e.clone=function(t){if(null===t||"object"!==(void 0===t?"undefined":(0,s.default)(t)))return t;if(t instanceof Date){var e=new Date;return e.setTime(t.getTime()),e}if(t instanceof Array){for(var n=[],i=0,o=t.length;i<o;++i)n[i]=this.clone(t[i]);return n}if(t instanceof Object){var r={};for(var a in t)t.hasOwnProperty(a)&&(r[a]=this.clone(t[a]));return r}throw new Error("Unable to copy obj! Its type isn't supported.")},e.insertSort=function(t,e){for(var n=1,i=n;i<t.length;n+=1,i+=1)for(var o=0;o<n;o++)if(t[i][e]<=t[o][e]){t.splice(o,0,t[i]),t.splice(i+1,1);break}},e.bubbleSort=function(t,e){t.sort(function(t,n){return t[e]-n[e]})}},function(t,e,n){var i=n(10),o=n(5),r=n(22),a=n(23),l=n(25),s=function(t,e,n){var u,c,f,d=t&s.F,h=t&s.G,v=t&s.S,p=t&s.P,m=t&s.B,_=t&s.W,g=h?o:o[e]||(o[e]={}),y=g.prototype,x=h?i:v?i[e]:(i[e]||{}).prototype;h&&(n=e);for(u in n)(c=!d&&x&&void 0!==x[u])&&l(g,u)||(f=c?x[u]:n[u],g[u]=h&&"function"!=typeof x[u]?n[u]:m&&c?r(f,i):_&&x[u]==f?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(f):p&&"function"==typeof f?r(Function.call,f):f,p&&((g.virtual||(g.virtual={}))[u]=f,t&s.R&&y&&!y[u]&&a(y,u,f)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e,n){var i=n(71)("wks"),o=n(55),r=n(10).Symbol,a="function"==typeof r;(t.exports=function(t){return i[t]||(i[t]=a&&r[t]||(a?r:o)("Symbol."+t))}).store=i},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(33)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(15),o=n(105),r=n(73),a=Object.defineProperty;e.f=n(12)?Object.defineProperty:function(t,e,n){if(i(t),e=r(e,!0),i(n),o)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){t.exports={default:n(241),__esModule:!0}},function(t,e,n){var i=n(11);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){t.exports={default:n(170),__esModule:!0}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(){return!(self.navigator.userAgent.indexOf("MiniProgramEnv")<0)}function r(){for(var t=self.navigator.userAgent,e=["iOS","Android","MINA"],n=["Windows","Mac"],i="cannotrecongize",o=0;o<e.length;o++)if(t.indexOf("MiniProgramEnv/"+e[o])>=0){i="mobile";break}for(var r=0;r<n.length;r++)if(t.indexOf("MiniProgramEnv/"+n[r])>=0){i="pc";break}return i}function a(t,e,n){if(e.includes(":")){var i=n,o=e.split(":"),r=o[0].trim();e=o[1].trim(),n=function(t){for(var e=!1,n=t.target;n&&!(e=l(n,r));)n=n.parentNode;e&&(t.selectorTarget=n,i(t))}}return"addEventListener"in t?(t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}}):"attachEvent"in t?(t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}):"on"in t?(t.on(e,n),{remove:function(){t.off&&t.off(e,n),t.removeListener&&t.removeListener(e,n)}}):void 0}function l(t,e){var n=["matches","webkitMatchesSelector","msMatchesSelector","mozMatchesSelector","oMatchesSelector"],i=!0,o=!1,r=void 0;try{for(var a,l=(0,u.default)(n);!(i=(a=l.next()).done);i=!0){var s=a.value;if(t[s]&&"function"==typeof t[s])return t[s](e)}}catch(t){o=!0,r=t}finally{try{!i&&l.return&&l.return()}finally{if(o)throw r}}return!1}var s=n(18),u=i(s),c=n(16),f=i(c),d=n(26),h=i(d),v=n(32),p=i(v);e.now=function(){return self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date)}();var m=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame;e.frame=function(t){return m(t)};var _=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame;e.cancelFrame=function(t){_(t)},e.timed=function(n,i,o,r){function a(i){l||(i=t.exports.now(),i>=s+o?n.call(r,1):(n.call(r,(i-s)/o),e.frame(a)))}if(!o)return n.call(r,1),null;var l=!1,s=t.exports.now();return e.frame(a),function(){l=!0,i&&i.call(r)}},e.getImageData=function(t){var e=self.document.createElement("canvas"),n=e.getContext("2d");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0,t.width,t.height),n.getImageData(0,0,t.width,t.height).data},e.hardwareConcurrency=self.navigator.hardwareConcurrency||4,Object.defineProperty(e,"devicePixelRatio",{get:function(){return Math.round(self.devicePixelRatio)||1}}),e.isPC=function(){var t=self.navigator.userAgent,e=["Android","iPhone","iPad","iPod","SymbianOS","selfs Phone"],n=!0;if(o()){if("mobile"===r())return!1;if("pc"===r())return!0}for(var i=0;i<e.length;i++)if(t.indexOf(e[i])>=0){n=!1;break}return n},e.isMiniProgram=o,e.getMiniProgramEnv=r,e.isLowMobileDevice=function(){var t=self.navigator.userAgent;if(this.isPC())return!1;if(t.includes("SymbianOS")||t.includes("selfs Phone"))return!0;var e=t.includes("Android")&&parseFloat(t.match(/Android (\d+)/)[1]),n=(t.includes("iPhone")||t.includes("iPad")||t.includes("iPod"))&&t.match(/OS ((\d+_?){2,3})\s/)&&parseFloat(String(t.match(/OS ((\d+_?){2,3})\s/)[1]).replace("_","."));return!!(e&&e<6||n&&n<11)},e.debounce=function(t,e){var n=null;return function(){var i=arguments;n&&clearTimeout(n),n=setTimeout(function(){t.apply(void 0,(0,p.default)(i))},e)}},e.throttle=function(t,e){var n=0;return function(){var i=+new Date;if(i-n>e){n=i;for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];t.apply(this,r)}}},e.throttleWithFrame=function(t){var e=null;return function(){for(var n=this,i=arguments.length,o=Array(i),r=0;r<i;r++)o[r]=arguments[r];e||(e=m(function(){t.apply(n,o),e=null}))}};var g=function t(e,n,i,o){if(!e||!n)return void console.warn("arguments is invalid!",e,n,i);if("object"===(void 0===n?"undefined":(0,h.default)(n))){var r=null;return r="length"in n?n.map(function(n){return t(e,n.trim(),i,o)}):(0,f.default)(n).map(function(o){return t(e,o.trim(),n[o],i)}),{remove:function(){r.forEach(function(t){t&&t.remove&&t.remove()})}}}if(-1!==n.indexOf(",")){n=n.split(",");var l=n.map(function(n){return t(e,n.trim(),i,o)});return{remove:function(){l.forEach(function(t){t&&t.remove&&t.remove()})}}}return a(e,n,function(t){return i.call(o||e,t)})},y=function(t,e,n,i){var o=null,r=function(t){return function(){return o&&o.remove&&o.remove(),t.apply(this,arguments)}};return t&&e?("object"===(void 0===e?"undefined":(0,h.default)(e))&&("length"in e?n=r(n):(0,f.default)(e).forEach(function(t){e[t]=r(e[t])})),-1!==e.indexOf(",")&&(e=e.split(","),n=r(n)),o=g(t,e,n,i)):void console.warn("arguments is invalid!",t,e,n)};e.on=g,e.once=y},function(t,e,n){t.exports={default:n(164),__esModule:!0}},,function(t,e,n){"use strict";var i={batchRender:!0,highQualityRender:!1,type:"default",minZoom:3,maxZoom:20,maxDataZoom:18,maxPitch:80,minShowIndoorZoom:17,tileSize:256,checkKeySrc:"https://apikey.map.qq.com/mkey/index.php/mkey/check",prSrc:"https://pr.map.qq.com/pingd?appid=jsapi_v3",verSrc:"https://confinfo.map.qq.com/confinfo",iconSize:16,iconSrc:"https://vectorsdk.map.qq.com/fileupdate/jsapi/icon?id={id}&type=img&version={version}",iconIndexSrc:"https://vectorsdk.map.qq.com/fileupdate/jsapi/icon?id={id}&type=json&version={version}",styleSrc:"https://vectorsdk.map.qq.com/fileupdate/jsapi/style?id={id}&version={version}",batchVectorSrc:["https://rt0.map.gtimg.com/tile?styleid=0&tiles={tiles}&version={version}&style=100&compress=1&mapType=hybrid","https://rt1.map.gtimg.com/tile?styleid=0&tiles={tiles}&version={version}&style=100&compress=1&mapType=hybrid","https://rt2.map.gtimg.com/tile?styleid=0&tiles={tiles}&version={version}&style=100&compress=1&mapType=hybrid","https://rt3.map.gtimg.com/tile?styleid=0&tiles={tiles}&version={version}&style=100&compress=1&mapType=hybrid"],vectorSrc:["https://rt0.map.gtimg.com/tile?styleid=0&z={z}&x={x}&y={y}&version={version}&style=100&compress=1&mapType=hybrid","https://rt1.map.gtimg.com/tile?styleid=0&z={z}&x={x}&y={y}&version={version}&style=100&compress=1&mapType=hybrid","https://rt2.map.gtimg.com/tile?styleid=0&z={z}&x={x}&y={y}&version={version}&style=100&compress=1&mapType=hybrid","https://rt3.map.gtimg.com/tile?styleid=0&z={z}&x={x}&y={y}&version={version}&style=100&compress=1&mapType=hybrid"],satelliteSrc:["https://p0.map.gtimg.com/sateTiles","https://p1.map.gtimg.com/sateTiles","https://p2.map.gtimg.com/sateTiles","https://p3.map.gtimg.com/sateTiles"],roadSrc:["https://rt0.map.gtimg.com/tile","https://rt1.map.gtimg.com/tile","https://rt2.map.gtimg.com/tile","https://rt3.map.gtimg.com/tile"],trafficSrc:["https://rtt2.map.qq.com/rtt/","https://rtt2a.map.qq.com/rtt/","https://rtt2b.map.qq.com/rtt/","https://rtt2c.map.qq.com/rtt/"],handdrawSrc:["https://p0.map.gtimg.com/scenic/","https://p1.map.gtimg.com/scenic/","https://p2.map.gtimg.com/scenic/","https://p3.map.gtimg.com/scenic/"],indoorIndexSrc:" https://mapvectors.map.qq.com/indoormap2/index?type=1",indoorBuildingSrc:"https://mapvectors.map.qq.com/indoormap",indoorStyleSrc:"https://mapvectors.map.qq.com/indoormap/style.js?version={version}",indoorIconSrc:"https://rt%$%.map.gtimg.com/icons/indoor/",dataVersion:{sat:231,tile:405,scenic:157}};t.exports=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=n(2),r=i(o),a=n(280),l=i(a);e.default=function t(e,n,i){null===e&&(e=Function.prototype);var o=(0,l.default)(e,n);if(void 0===o){var a=(0,r.default)(e);return null===a?void 0:t(a,n,i)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(i)}},function(t,e,n){var i=n(53);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var i=n(13),o=n(41);t.exports=n(12)?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(87),o=n(68);t.exports=function(t){return i(o(t))}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=n(162),r=i(o),a=n(161),l=i(a),s="function"==typeof l.default&&"symbol"==typeof r.default?function(t){return typeof t}:function(t){return t&&"function"==typeof l.default&&t.constructor===l.default&&t!==l.default.prototype?"symbol":typeof t};e.default="function"==typeof l.default&&"symbol"===s(r.default)?function(t){return void 0===t?"undefined":s(t)}:function(t){return t&&"function"==typeof l.default&&t.constructor===l.default&&t!==l.default.prototype?"symbol":void 0===t?"undefined":s(t)}},function(t,e,n){t.exports={default:n(242),__esModule:!0}},function(t,e,n){var i=n(31);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(86),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,o.default)(t)}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var i=n(68);t.exports=function(t){return Object(i(t))}},function(t,e){t.exports={}},function(t,e,n){"use strict";var i=n(183)(!0);n(80)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var i=n(109),o=n(69);t.exports=Object.keys||function(t){return i(t,o)}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.AJAXError=e.EnumError=e.ClassTypeError=e.BaseTypeError=void 0;var o=n(26),r=i(o),a=n(2),l=i(a),s=n(4),u=i(s),c=n(3),f=i(c),d=n(0),h=i(d),v=n(1),p=i(v),m=function(){function t(e){(0,h.default)(this,t),this.message=e}return(0,p.default)(t,[{key:"warn",value:function(){console.warn(this.message)}},{key:"error",value:function(){console.error(this.message)}},{key:"throw",value:function(){throw new Error(this.message)}}]),t}(),_=function(t){function e(t,n,i){return(0,h.default)(this,e),(0,u.default)(this,(e.__proto__||(0,l.default)(e)).call(this,"类型错误："+t+" 应该是 "+n.toUpperCase()+" 类型, 实际却是 "+(void 0===i?"undefined":(0,r.default)(i)).toUpperCase()+" 类型。"))}return(0,f.default)(e,t),e}(m),g=function(t){function e(t,n,i){return(0,h.default)(this,e),(0,u.default)(this,(e.__proto__||(0,l.default)(e)).call(this,"类型错误："+t+" 应该是 "+n+" 类型, 实际值为 "+i+"。"))}return(0,f.default)(e,t),e}(m),y=function(t){function e(t,n,i){return(0,h.default)(this,e),(0,u.default)(this,(e.__proto__||(0,l.default)(e)).call(this,"枚举错误："+t+" 的可枚举值为 "+n.join(",")+"，实际却是 "+i))}return(0,f.default)(e,t),e}(m),x=function t(e,n){(0,h.default)(this,t),this.message=e,this.status=n};e.BaseTypeError=_,e.ClassTypeError=g,e.EnumError=y,e.AJAXError=x},function(t,e,n){n(188);for(var i=n(10),o=n(23),r=n(35),a=n(9)("toStringTag"),l="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),s=0;s<l.length;s++){var u=l[s],c=i[u],f=c&&c.prototype;f&&!f[a]&&o(f,a,u),r[u]=r.Array}},function(t,e,n){var i=n(290)("wks"),o=n(206),r=n(30).Symbol,a="function"==typeof r;(t.exports=function(t){return i[t]||(i[t]=a&&r[t]||(a?r:o)("Symbol."+t))}).store=i},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(26),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(7),f=c.wrap,d=n(7),h=d.clamp,v=85.051128,p=180,m=function(){function t(e,n,i){if((0,l.default)(this,t),e=Number(e),n=Number(n),isNaN(n)||isNaN(e))throw new Error("参数错误：LatLng 传入参数 ("+e+", "+n+") 非合法数字。");if(i)e=h(e,-v,v),n=f(n,-p,p);else{if(e>v||e<-v)throw new Error("参数错误：LatLng.lat 取值应在 ["+-v+", "+v+"] 区间内。");if(n>p||n<-p)throw new Error("参数错误：LatLng.lng 取值应在 ["+-p+", "+p+"] 区间内。")}this.lat=e,this.lng=n}return(0,u.default)(t,[{key:"toString",value:function(){return this.lat+", "+this.lng}},{key:"getLat",value:function(){return this.lat}},{key:"getLng",value:function(){return this.lng}},{key:"equals",value:function(t){return this.lat===t.lat&&this.lng===t.lng}}],[{key:"convert",value:function(e){if(e instanceof t)return e;if(Array.isArray(e)&&2===e.length)return new t(Number(e[0]),Number(e[1]),!0);if(!Array.isArray(e)&&"object"===(void 0===e?"undefined":(0,r.default)(e))&&null!==e)return new t(Number(e.lat),Number(e.lng),!0);throw new Error("`LatLng` argument must be specified as a LngLat instance, an object {lat: <lat>, lng: <lng>}, or an array of [<lat>, <lng>]")}}]),t}();t.exports=m},function(t,e,n){"use strict";function i(t){return[l.circle,l.rectangle,l.polygon,l.polyline,l.marker,l.label].some(function(e){return t===e})}function o(t){return[l.imageGround,l.canvasGround].some(function(e){return t===e})}function r(t){return[l.indoorRegion,l.indoorPoi,l.indoorEscalator,l.indoor].some(function(e){return t===e})}Object.defineProperty(e,"__esModule",{value:!0}),e.isOverlayLayer=i,e.isTextureLayer=o,e.isIndoorLayer=r;var a=e.BASE_LAYER_TYPE={arrow:"arrow",point:"point",label:"label",line:"line",region:"region",ground:"ground",base:"base",building3d:"building3d",building2d:"building2d",text:"text"},l=e.RENDER_LAYER_TYPE={base:a.base,building3d:a.building3d,building2d:a.building2d,text:a.text,visualPlugin:"VISUAL_PLUGIN",marker:"MARKER",polyline:"POLYLINE",polygon:"POLYGON",label:"LABEL",circle:"CIRCLE",rectangle:"RECTANGLE",imageTile:"IMAGE_TILE",imageGround:"IMAGE_Ground",canvasGround:"CANVAS_Ground",indoor:"INDOOR",indoorRegion:"INDOOR_REGION",indoorPoi:"INDOOR_POI",indoorEscalator:"INDOOR_ESCALATOR",mask:"MASK"}},function(t,e){t.exports=!0},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var i=n(125),o=Math.min;t.exports=function(t){return t>0?o(i(t),9007199254740991):0}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=n(157),r=i(o),a=n(18),l=i(a);e.default=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=(0,l.default)(t);!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if((0,r.default)(Object(e)))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var i=n(8),o=n(5),r=n(33);t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],a={};a[t]=e(n),i(i.S+i.F*r(function(){n(1)}),"Object",a)}},function(t,e,n){var i=n(13).f,o=n(25),r=n(9)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,r)&&i(t,r,{configurable:!0,value:e})}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(47),r=i(o),a=n(158),l=i(a),s=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,u=/^rgb\((\d+,?\s*){3}\)$/,c=/^rgba\((\d+,?\s*){3},\s*[0-9.]+\)$/,f={};!function(t){["Number","String","Function","Undefined","Object","Array"].forEach(function(e){var n=function(t){return"[object "+e+"]"===Object.prototype.toString.call(t)};t["is"+e]=n})}(f),f.isNaN=l.default,f.isValidLatLng=function(){var t=void 0,e=void 0;if(1===arguments.length){var n=arguments[0];if(f.isArray(n)){var i=(0,r.default)(n,2);t=i[0],e=i[1]}else t=n.lat,e=n.lng}else{if(2!==arguments.length)return!1;t=arguments[0],e=arguments[1]}return!(!f.isNumber(t)||!f.isNumber(e))&&(Math.abs(t)<=90&&Math.abs(e)<=180)},f.isValidColor=function(t){return f.isArray(t)?(3===t.length||4===t.length)&&t.every(function(t){return t>=0&&t<=255}):!!f.isString(t)&&(s.test(t)||u.test(t)||c.test(t))},e.default=f},function(t,e){var n=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var i=n(55)("meta"),o=n(11),r=n(25),a=n(13).f,l=0,s=Object.isExtensible||function(){return!0},u=!n(33)(function(){return s(Object.preventExtensions({}))}),c=function(t){a(t,i,{value:{i:"O"+ ++l,w:{}}})},f=function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!r(t,i)){if(!s(t))return"F";if(!e)return"E";c(t)}return t[i].i},d=function(t,e){if(!r(t,i)){if(!s(t))return!0;if(!e)return!1;c(t)}return t[i].w},h=function(t){return u&&v.NEED&&s(t)&&!r(t,i)&&c(t),t},v=t.exports={KEY:i,NEED:!1,fastKey:f,getWeak:d,onFreeze:h}},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e,n){t.exports=!n(29)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(28),o=n(429),r=n(151),a=Object.defineProperty;e.f=n(56)?Object.defineProperty:function(t,e,n){if(i(t),e=r(e,!0),i(n),o)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var i=n(22),o=n(117),r=n(115),a=n(15),l=n(64),s=n(82),u={},c={},e=t.exports=function(t,e,n,f,d){var h,v,p,m,_=d?function(){return t}:s(t),g=i(n,f,e?2:1),y=0;if("function"!=typeof _)throw TypeError(t+" is not iterable!");if(r(_)){for(h=l(t.length);h>y;y++)if((m=e?g(a(v=t[y])[0],v[1]):g(t[y]))===u||m===c)return m}else for(p=_.call(t);!(v=p.next()).done;)if((m=o(p,g,v.value,e))===u||m===c)return m};e.BREAK=u,e.RETURN=c},function(t,e,n){var i=n(15),o=n(131),r=n(69),a=n(70)("IE_PROTO"),l=function(){},s=function(){var t,e=n(79)("iframe"),i=r.length;for(e.style.display="none",n(114).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),s=t.F;i--;)delete s.prototype[r[i]];return s()};t.exports=Object.create||function(t,e){var n;return null!==t?(l.prototype=i(t),n=new l,l.prototype=null,n[a]=t):n=s(),void 0===e?n:o(n,e)}},,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(0),r=i(o),a=n(1),l=i(a),s=function(){function t(e,n){(0,r.default)(this,t),this.x=e,this.y=n}return(0,l.default)(t,[{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"add",value:function(t){return this.clone()._add(t)}},{key:"sub",value:function(t){return this.clone()._sub(t)}},{key:"mult",value:function(t){return this.clone()._mult(t)}},{key:"div",value:function(t){return this.clone()._div(t)}},{key:"rotate",value:function(t){return this.clone()._rotate(t)}},{key:"matMult",value:function(t){return this.clone()._matMult(t)}},{key:"unit",value:function(){return this.clone()._unit()}},{key:"perp",value:function(){return this.clone()._perp()}},{key:"round",value:function(){return this.clone()._round()}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y}},{key:"dist",value:function(t){return Math.sqrt(this.distSqr(t))}},{key:"distSqr",value:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)}},{key:"angleTo",value:function(t){return Math.atan2(this.y-t.y,this.x-t.x)}},{key:"angleWith",value:function(t){return this.angleWithSep(t.x,t.y)}},{key:"angleWithSep",value:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)}},{key:"normalize",value:function(){return this.clone()._unit()}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"length",value:function(){return this.mag()}},{key:"lengthSq",value:function(){return this.magSq()}},{key:"_matMult",value:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this}},{key:"_add",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"_sub",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"_mult",value:function(t){return this.x*=t,this.y*=t,this}},{key:"_div",value:function(t){return this.x/=t,this.y/=t,this}},{key:"_unit",value:function(){return 0===this.x&&0===this.y?this:(this._div(this.mag()),this)}},{key:"_perp",value:function(){var t=this.y;return this.y=this.x,this.x=-t,this}},{key:"_rotate",value:function(t){var e=Math.cos(t),n=Math.sin(t),i=e*this.x-n*this.y,o=n*this.x+e*this.y;return this.x=i,this.y=o,this}},{key:"_round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}}]),t}();s.convert=function(t){return t instanceof s?t:Array.isArray(t)?new s(t[0],t[1]):"x"in t&&"y"in t&&"number"==typeof t.x&&"number"==typeof t.y?new s(t.x,t.y):t},t.exports=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.SOURCE_TYPE={vector:"vector",geojson:"geojson",geoTask:"geo_task",imageTile:"image_tile",indoor:"indoor",indoorIndex:"indoor_index",ground:"ground"}},function(t,e,n){var i=n(48),o=n(9)("toStringTag"),r="Arguments"==i(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,l;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),o))?n:r?i(e):"Object"==(l=i(e))&&"function"==typeof e.callee?"Arguments":l}},function(t,e,n){var i=n(72),o=Math.min;t.exports=function(t){return t>0?o(i(t),9007199254740991):0}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){n[t]=n[t]||[],n[t].push(e)}function r(t,e,n){if(n&&n[t]){var i=n[t].indexOf(e);-1!==i&&n[t].splice(i,1)}}var a=n(2),l=i(a),s=n(0),u=i(s),c=n(1),f=i(c),d=n(4),h=i(d),v=n(3),p=i(v),m=n(7),_=n(263),g=function(t){function e(){(0,u.default)(this,e);var t=(0,h.default)(this,(e.__proto__||(0,l.default)(e)).call(this));return t.setMaxListeners(500),t}return(0,p.default)(e,t),(0,f.default)(e,[{key:"_on",value:function(t,e){return this._listeners=this._listeners||{},o(t,e,this._listeners),this.on(t,e),e}},{key:"_off",value:function(t,e){return r(t,e,this._listeners),r(t,e,this._oneTimeListeners),this.off(t,e),this}},{key:"_once",value:function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},o(t,e,this._oneTimeListeners),this.once(t,e),e}},{key:"_fire",value:function(t,e,n){if(this._listens(t)){e=n?m.extend({},e,{type:t}):m.extend({},e,{type:t,target:this});for(var i=this._listeners&&this._listeners[t]?this._listeners[t].slice():[],o=0;o<i.length;o++)i[o].call(this,e);for(var a=this._oneTimeListeners&&this._oneTimeListeners[t]?this._oneTimeListeners[t].slice():[],l=0;l<a.length;l++)a[l].call(this,e),r(t,a[l],this._oneTimeListeners);this._eventedParent&&this._eventedParent._fire(t,m.extend({},e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData))}else m.endsWith(t,"error")&&console.error(e&&e.error||e||"Empty error event");return this.emit(t,e),this}},{key:"_listens",value:function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent._listens(t)||this.listenerCount(t)>0}},{key:"_setEventedParent",value:function(t,e){return this._eventedParent=t,this._eventedParentData=e,this}},{key:"_clearAllListeners",value:function(){this._listeners={},this.removeAllListeners()}}]),e}(_);t.exports=g},function(t,e){},,function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var i=n(71)("keys"),o=n(55);t.exports=function(t){return i[t]||(i[t]=o(t))}},function(t,e,n){var i=n(5),o=n(10),r=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:n(44)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e,n){var i=n(11);t.exports=function(t,e){if(!i(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!i(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!i(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!i(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var i=n(10),o=n(5),r=n(44),a=n(75),l=n(13).f;t.exports=function(t){var e=o.Symbol||(o.Symbol=r?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||l(e,t,{value:a.f(t)})}},function(t,e,n){e.f=n(9)},function(t,e,n){var i=n(134);t.exports=function(t){return Object(i(t))}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return function(){return P?void 0:t.apply(null,arguments)}}function r(t,e){var n=[];for(var i in e)e.hasOwnProperty(i)&&n.push(i+"="+e[i]);return t+(-1===t.indexOf("?")?"?":"&")+n.join("&")}function a(t){var e=(0,E.isWebGLSupportedCached)();(0,T.sendOnce)(r(y.default.prSrc,{logid:"pv",key:t.key||b.default.key,v:t.version||"null",lt:t.loadDeltaTime||-1,d:document.domain,dpr:window.devicePixelRatio,lss:w.default.support()?1:0,gls:e.context?1:0,ua:window.navigator.userAgent,dt:A.default.OS,dvn:e.renderer}))}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.type,n=t.code,i=t.message,o=void 0===i?"":i,a=t.key,l=void 0===a?b.default.key:a;(0,T.sendOnce)(r(y.default.prSrc,{logid:"err",key:l,type:e,code:n,msg:o,dt:A.default.OS}))}function s(t,e){t.once("tilesloaded",function(){(0,T.sendOnce)(r(y.default.prSrc,{logid:"rt",frt:Date.now()-e}))})}function u(t){var e=(0,E.isWebGLSupportedCached)(),n=null,i=0,o=null,a=function(){var a=(0,k.now)(),l=(a-o)/1e3,s=Math.round(i/(60*l)*60);t.removeRenderCallback(n),(0,T.sendOnce)(r(y.default.prSrc,{logid:"fps",dt:A.default.OS,num:s,cd:e.isIndependentDisplayCard?1:0}))};t.on("movestart",function(){n&&(t.removeListener("moveend",a),t.removeRenderCallback(n),i=0),o=(0,k.now)(),n=function(){i++},t.addRenderCallback(n),t.once("moveend",a)})}function c(t){(0,T.sendOnce)(r(y.default.prSrc,{logid:"cl",key:t.key||b.default.key,subkey:t.subkey||"",id:t.id||""}))}function f(t){(0,T.sendOnce)(r(y.default.prSrc,{logid:"cs",key:t.key||b.default.key,subkey:t.subkey||"",id:t.styleId}))}function d(t){var e=t.lat,n=t.lng,i=t.zoom,o=t.pitch,a=t.rotation,l=t.w,s=t.h;(0,T.sendOnce)(r(y.default.prSrc,{logid:"minfo",opt:e.toFixed(4)+","+n.toFixed(4)+","+i+","+o+","+a,size:l+","+s}))}function h(t,e){if("tile"===t){var n=e.id,i=e.status,o=e.time,a=M[n];a||(a=new L(n),M[n]=a),a.logStatus(i),0===i&&o&&a.logTime(o)}else{var l={logid:"qos",t:t,info:e.styleId+"|"+e.version};e.error||0===e.error?l.e=e.error:l.lt=e.loadTime,(0,T.sendOnce)(r(y.default.prSrc,l))}}Object.defineProperty(e,"__esModule",{value:!0}),e.statCn=e.qos=e.minfo=e.cs=e.cl=e.fps=e.frt=e.err=e.pv=void 0;var v=n(0),p=i(v),m=n(1),_=i(m),g=n(20),y=i(g),x=n(220),b=i(x),S=n(136),w=i(S),E=n(619),T=n(618),I=n(408),A=i(I),k=n(17),P=!!b.default.isLocal,M=(e.pv=o(a),e.err=o(l),e.frt=o(s),e.fps=o(u),e.cl=o(c),e.cs=o(f),e.minfo=o(d),{}),L=(e.qos=o(h),function(){function t(e){function n(){var t=this.id[0]+"_stat",e=this.id[0]+"_avg",n={},i=this.tilesStatus.join("|");if("0|0|0"!==i&&(n[t]=i,this.tilesStatus=[0,0,0]),this.tilesTime.length>0){var o=this.tilesTime.reduce(function(t,e){return t+e},0)/this.tilesTime.length;n[e]=Math.max(0,Math.floor(o)),this.tilesTime=[]}return n}(0,p.default)(this,t),this.id=e,this.tilesStatus=[0,0,0],this.tilesTime=[],(0,T.sendPeriodically)("tile",r(y.default.prSrc,{logid:"qos",t:"tile"}),n.bind(this))}return(0,_.default)(t,[{key:"logStatus",value:function(t){this.tilesStatus[t]+=1}},{key:"logTime",value:function(t){this.tilesTime.push(t)}}]),t}()),C=function(){function t(){setTimeout(function(){e.length>0&&((0,T.sendOnce)(r(y.default.prSrc,{logid:"cn",cn:e.join(",")})),e=[]),t()},5e3)}var e=[];return t(),function(t){t&&e.push(t)}}();e.statCn=o(C)},function(t,e,n){t.exports={default:n(324),__esModule:!0}},function(t,e,n){var i=n(11),o=n(10).document,r=i(o)&&i(o.createElement);t.exports=function(t){return r?o.createElement(t):{}}},function(t,e,n){"use strict";var i=n(44),o=n(8),r=n(98),a=n(23),l=n(35),s=n(181),u=n(50),c=n(108),f=n(9)("iterator"),d=!([].keys&&"next"in[].keys()),h=function(){return this};t.exports=function(t,e,n,v,p,m,_){s(n,e,v);var g,y,x,b=function(t){if(!d&&t in T)return T[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+" Iterator",w="values"==p,E=!1,T=t.prototype,I=T[f]||T["@@iterator"]||p&&T[p],A=I||b(p),k=p?w?b("entries"):A:void 0,P="Array"==e?T.entries||I:I;if(P&&(x=c(P.call(new t)))!==Object.prototype&&x.next&&(u(x,S,!0),i||"function"==typeof x[f]||a(x,f,h)),w&&I&&"values"!==I.name&&(E=!0,A=function(){return I.call(this)}),i&&!_||!d&&!E&&T[f]||a(T,f,A),l[e]=A,l[S]=h,p)if(g={values:w?A:b("values"),keys:m?A:b("keys"),entries:k},_)for(y in g)y in T||r(T,y,g[y]);else o(o.P+o.F*(d||E),e,g);return g}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var i=n(63),o=n(9)("iterator"),r=n(35);t.exports=n(5).getIteratorMethod=function(t){if(void 0!=t)return t[o]||t["@@iterator"]||r[i(t)]}},function(t,e,n){"use strict";t.exports="TMap"},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(0),r=i(o),a=n(1),l=i(a),s=n(38),u=n(42),c=function(){function t(e,n){return(0,r.default)(this,t),!e||e instanceof u?!n||n instanceof u?void(e&&(n?((e.getLat()>n.getLat()||e.getLng()>n.getLng())&&console.error("LatLngBounds中sw 的经纬度必须小于ne的经纬度，实际传入sw为：",e,"ne 为：",n),this.setSouthWest(e).setNorthEast(n)):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):2===e.length&&this.setSouthWest(e[0]).setNorthEast(e[1]))):void new s.BaseTypeError("LatLngBounds.ne","LatLng",n).error():void new s.BaseTypeError("LatLngBounds.sw","LatLng",e).error()}return(0,l.default)(t,[{key:"setNorthEast",value:function(t){return this._ne=u.convert(t),this}},{key:"setSouthWest",value:function(t){return this._sw=u.convert(t),this}},{key:"getCenter",value:function(){return new u((this._sw.lat+this._ne.lat)/2,(this._sw.lng+this._ne.lng)/2,!0)}},{key:"getSouthWest",value:function(){return this._sw}},{key:"getNorthEast",value:function(){return this._ne}},{key:"extend",value:function(e){var n=this._sw,i=this._ne,o=void 0,r=void 0;if(e instanceof u)o=e,r=e;else{if(!(e instanceof t))return Array.isArray(e)?e.every(Array.isArray)?this.extend(t.convert(e)):this.extend(u.convert(e)):this;if(o=e._sw,r=e._ne,!o||!r)return this}return n||i?(this._sw=new u(Math.min(o.lat,n.lat),Math.min(o.lng,n.lng),!0),this._ne=new u(Math.max(r.lat,i.lat),Math.max(r.lng,i.lng),!0)):(this._sw=new u(o.lat,o.lng,!0),this._ne=new u(r.lat,r.lng,!0)),this}},{key:"union",value:function(t){return this.extend(t)}},{key:"equals",value:function(t){var e=this._sw,n=this._ne,i=t.getSouthWest(),o=t.getNorthEast();return e.equals(i)&&n.equals(o)}},{key:"intersects",value:function(t){var e=this._sw,n=this._ne,i=t.getSouthWest(),o=t.getNorthEast();return!(i.lat>n.lat||o.lat<e.lat||i.lng>n.lng||o.lng<e.lng)}},{key:"covers",value:function(t){var e=t.getSouthWest(),n=t.getNorthEast(),i=t.getSouthEast(),o=t.getNorthWest();return this.contains(e)&&this.contains(n)&&this.contains(i)&&this.contains(o)}},{key:"isEmpty",value:function(){return!this._sw||!this._ne||this._sw.lat===this._ne.lat||this._sw.lng===this._ne.lng}},{key:"contains",value:function(t){return this._sw.lat<=t.lat&&this._sw.lng<=t.lng&&this._ne.lat>=t.lat&&this._ne.lng>=t.lng}},{key:"getNorthWest",value:function(){return new u(this.getNorth(),this.getWest(),!0)}},{key:"getSouthEast",value:function(){return new u(this.getSouth(),this.getEast(),!0)}},{key:"getWest",value:function(){return this._sw.lng}},{key:"getSouth",value:function(){return this._sw.lat}},{key:"getEast",value:function(){return this._ne.lng}},{key:"getNorth",value:function(){return this._ne.lat}},{key:"toString",value:function(){return"LatLngBounds("+this._sw.toString()+", "+this._ne.toString()+")"}}]),t}();c.convert=function(t){return!t||t instanceof c?t:new c(t)},c._convertFromWorker=function(t){return t._sw&&t._ne?new c(u.convert(t._sw),u.convert(t._ne)):t},t.exports=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Store=e.textures=void 0;var o=n(0),r=i(o),a=n(1),l=i(a),s=function(){},u=function(){function t(e,n,i,o){(0,r.default)(this,t),this.max=n||1e4,this.type=e||"default",this.count=0,this.store={},this.reduceRange=i||Math.max(1,~~this.max/100),this.deleteCallback=o||s}return(0,l.default)(t,[{key:"set",value:function(t,e){return this.count>this.max&&this.reduce(),t in this.store||(this.count+=1),this.store[t]=e,e}},{key:"get",value:function(t){return this.store[t]}},{key:"reduce",value:function(){var t=0,e=this.reduceRange;for(var n in this.store)if(this.store.hasOwnProperty(n)){if(!(t<e))break;t+=1,this.deleteCallback(this.store[n]),delete this.store[n]}this.count-=e}},{key:"clear",value:function(){for(var t in this.store)this.store.hasOwnProperty(t)&&(this.deleteCallback(this.store[t]),this.store[t]=null);this.store={},this.count=0}},{key:"exist",value:function(t){return t in this.store}},{key:"remove",value:function(t){t in this.store&&(this.deleteCallback(this.store[t]),delete this.store[t],this.count-=1)}}]),t}(),c=new u("texture",1e3);e.textures=c,e.Store=u},function(t,e,n){t.exports={default:n(163),__esModule:!0}},function(t,e,n){var i=n(48);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e,n){var i=n(45),o=n(41),r=n(24),a=n(73),l=n(25),s=n(105),u=Object.getOwnPropertyDescriptor;e.f=n(12)?u:function(t,e){if(t=r(t),e=a(e,!0),s)try{return u(t,e)}catch(t){}if(l(t,e))return o(!i.f.call(t,e),t[e])}},function(t,e,n){var i=n(11);t.exports=function(t,e){if(!i(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){var i=n(30),o=n(100),r=n(99),a=n(206)("src"),l=n(721),s=(""+l).split("toString");n(52).inspectSource=function(t){return l.call(t)},(t.exports=function(t,e,n,l){var u="function"==typeof n;u&&(r(n,"name")||o(n,"name",e)),t[e]!==n&&(u&&(r(n,a)||o(n,a,t[e]?""+t[e]:s.join(String(e)))),t===i?t[e]=n:l?t[e]?t[e]=n:o(t,e,n):(delete t[e],o(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||l.call(this)})},function(t,e,n){var i=n(6),o=n(29),r=n(134),a=/"/g,l=function(t,e,n,i){var o=String(r(t)),l="<"+e;return""!==n&&(l+=" "+n+'="'+String(i).replace(a,"&quot;")+'"'),l+">"+o+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(l),i(i.P+i.F*o(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",n)}},,function(t,e,n){"use strict";function i(t,e,n){var i=window.document.createElement(t);return e&&(i.className=e),n&&n.appendChild(i),i}function o(t){for(var e=0;e<t.length;e++)if(t[e]in y)return t[e];return t[0]}function r(){x&&(b=y[x],y[x]="none")}function a(){x&&(y[x]=b)}function l(t,e){t.style[S]=e}function s(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",s,!0)}function u(){window.addEventListener("click",s,!0),window.setTimeout(function(){window.removeEventListener("click",s,!0)},0)}function c(t,e){var n=t.getBoundingClientRect();return e=e.touches?("touchend"===e.type?e.changedTouches:e.touches)[0]:e,new g(e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop)}function f(t,e){for(var n=t.getBoundingClientRect(),i=[],o="touchend"===e.type?e.changedTouches:e.touches,r=0;r<o.length;r++)i.push(new g(o[r].clientX-n.left-t.clientLeft,o[r].clientY-n.top-t.clientTop));return i}function d(t){t.parentNode&&t.parentNode.removeChild(t)}function h(t){var e=document.createElement("div");e.innerHTML=t;var n=document.createDocumentFragment();return Array.prototype.slice.apply(e.childNodes).forEach(function(t){n.appendChild(t)}),n}function v(t){if("pageX"in t&&"pageY"in t)return{x:t.pageX,y:t.pageY};if("touches"in t&&t.touches.length>0){var e=t.touches[0];return{x:e.pageX,y:e.pageY}}if("changedTouches"in t&&t.changedTouches.length>0){var n=t.changedTouches[0];return{x:n.pageX,y:n.pageY}}}function p(t,e){t&&(Array.isArray(e)||(e=[e]),e.forEach(function(e){_(t,e)||(t.className+=" "+e)}))}function m(t,e){t&&(Array.isArray(e)||(e=[e]),e.forEach(function(e){_(t,e)&&(t.className=t.className.replace(" "+e,""))}))}function _(t,e){if(t){var n=" "+e+" ";return(" "+t.className+" ").includes(n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.create=i,e.disableDrag=r,e.enableDrag=a,e.setTransform=l,e.suppressClick=u,e.mousePos=c,e.touchPos=f,e.remove=d,e.toDom=h,e.getPointerXY=v,e.addClass=p,e.removeClass=m,e.hasClass=_;var g=n(61),y=window.document.documentElement.style,x=o(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),b=void 0,S=(e.TRANSFORMORIGIN=o(["TRANSFORMORIGIN","WebkitTransformOrigin","OTransformOrigin","MozTransformOrigin","msTransformOrigin"]),e.TRANSFORM=o(["transform","WebkitTransform","OTransform","MozTransform","msTransform"])),w=e.TRANSITION=o(["transition","webkitTransition","OTransition","MozTransition","msTransition"]);e.TRANSITIONEND="transition"===w?w+"end":w+"End",e.TRANSITIONDURATION=w+"Duration",e.TRANSITIONTIMINGFUNCTION=w+"TimingFunction"},function(t,e,n){t.exports={default:n(166),__esModule:!0}},function(t,e,n){t.exports={default:n(167),__esModule:!0}},function(t,e){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var i=n(23);t.exports=function(t,e,n){for(var o in e)n&&t[o]?t[o]=e[o]:i(t,o,e[o]);return t}},function(t,e,n){t.exports=n(23)},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var i=n(57),o=n(204);t.exports=n(56)?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(259),o=n(134);t.exports=function(t){return i(o(t))}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(14),r=i(o),a=n(32),l=i(a),s=n(0),u=i(s),c=n(1),f=i(c),d=n(112),h=i(d),v=n(649),p=i(v),m=n(7),_=i(m),g=void 0,y={},x=function(){function t(e){(0,u.default)(this,t),this.gl=e.gl,this.location={},this.store=null,this.shaderSource=null,this.shaderParams=null}return(0,f.default)(t,[{key:"preDraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.shaderSource.name+this.gl.id;e!==g&&(g=e,this.createShader(this.shaderSource,e)),this.loadTexture(t),this.applyLight(t.lightUniforms,t.shadowTexture)}},{key:"afterDraw",value:function(){if(this.enableLight){var t=this.gl;t.activeTexture(t.TEXTURE3),t.bindTexture(t.TEXTURE_2D,null)}}},{key:"loadTexture",value:function(){}},{key:"applyLight",value:function(t,e){if(t&&this.enableLight){var n=this.gl,i=t.lighting_uBase,o=t.lighting_uToneMapping,r=t.lighting_uAmbientColor,a=t.lighting_uDirDirection,s=t.lighting_uDirColor,u=t.lighting_uDirCount,c=t.lighting_uPointPosition,f=t.lighting_uPointAtt,d=t.lighting_uPointColor,h=t.lighting_uPointCount,v=t.lighting_uShadow,p=t.lighting_uViewPos,m=t.lighting_uShadowLightPVMatrix;e&&e.bind(n,{textureIndex:3}),n.uniform4f.apply(n,[this.lighting_uBase].concat((0,l.default)(i))),n.uniform4f.apply(n,[this.lighting_uAdvanced].concat((0,l.default)(o),(0,l.default)(v))),n.uniform3f.apply(n,[this.lighting_uAmbientColor].concat((0,l.default)(r))),n.uniform3fv(this.lighting_uDirDirection,a),n.uniform3fv(this.lighting_uDirColor,s),n.uniform3fv(this.lighting_uPointPosition,c),n.uniform3fv(this.lighting_uPointAtt,f),n.uniform3fv(this.lighting_uPointColor,d),n.uniform2f(this.lighting_uLightCount,u,h),n.uniform3f.apply(n,[this.lighting_uViewPos].concat((0,l.default)(p))),n.uniformMatrix4fv(this.lighting_uShadowLightPVMatrix,!1,m),e&&n.uniform1i(this.lighting_uShadowSampler,3)}}},{key:"createBuffer",value:function(t,e,n,i){var o=this.gl,r={};return e&&(r.vertices=new h.default(o,{data:e,usage:o.DYNAMIC_DRAW})),n&&(r.indices=new h.default(o,{target:o.ELEMENT_ARRAY_BUFFER,data:n,usage:o.DYNAMIC_DRAW}),r.length=n.byteLength/n.BYTES_PER_ELEMENT),i&&(r.fillCoordinates=new h.default(o,{data:i,usage:o.DYNAMIC_DRAW})),r}},{key:"bindVertexBuffer",value:function(t,e){var n=this.gl,i=t.attributes,o=void 0;e?e.bind():e=new h.default(n,{data:t.arrayBuffer,usage:n.DYNAMIC_DRAW});for(var r=0,a=i.length;r<a;r++){o=i[r],o.name in this.location||(this.location[o.name]=n.getAttribLocation(n.program,o.name));var l=this.location[o.name];l<0||e.pointToAttrib({location:l,size:o.components,type:n[o.type],stride:t.bytesPerElement,offset:o.offset})}return e}},{key:"unbindVertexBuffer",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=this.gl;n.forEach(function(t){t.name in e.location||(e.location[t.name]=i.getAttribLocation(i.program,t.name));var n=e.location[t.name];n<0||e.gl.disableVertexAttribArray(n)}),t.unbind()}},{key:"bindElementBuffer",value:function(t,e){var n=this.gl;return e?e.bind():e=new h.default(n,{target:n.ELEMENT_ARRAY_BUFFER,data:t.arrayBuffer,usage:n.DYNAMIC_DRAW}),e}},{key:"setShaderParams",value:function(){var t=this,e=this.gl,n=(0,r.default)({},this.shaderParams);if(this.enableLight){var i;(i=n.getUniformLocation).push.apply(i,["lighting_uBase","lighting_uAdvanced","lighting_uAmbientColor","lighting_uDirDirection","lighting_uDirColor","lighting_uPointPosition","lighting_uPointAtt","lighting_uPointColor","lighting_uLightCount","lighting_uViewPos","lighting_uShadowLightPVMatrix","lighting_uShadowSampler"])}_.default.forIn(n,function(n,i){i.forEach(function(i){t[i]=e[n](e.program,i)})})}},{key:"createShader",value:function(t,e){var n=this.gl,i=y[e];if(i)return void i.enable();i=new p.default(n,{vShader:t.v,fShader:t.f}),i.enable(),y[e]=i,this.setShaderParams()}},{key:"clearStore",value:function(){this.store&&this.store.clear()}},{key:"destroy",value:function(){this.store&&(this.store.clear(),this.store=null);var t=this.shaderSource.name+this.gl.id;y[t]&&(y[t].delete(),delete y[t]),this.shaderParams=null,this.shaderSource=null,this.location=null,this.gl=null}},{key:"isBufferChanged",value:function(t,e){if(t&&e){for(var n in t)if(t.hasOwnProperty(n)&&e[n]&&t[n].data!==e[n])return!0;return!1}}}]),t}();e.default=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(211),p=i(v),m=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,l.default)(this,e);var i=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,n));return i._initialize(n),i}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_onCreate",value:function(){return this.gl.createTexture()}},{key:"_onDelete",value:function(){this.unbind(),this.gl.deleteTexture(this._object)}},{key:"_initialize",value:function(t){var e=t.tex,n=t.originalWidth,i=t.originalHeight,o=t.width,r=t.height,a=t.internalformat,l=t.type,s=void 0===l?"UNSIGNED_BYTE":l,u=t.format,c=void 0===u?"RGBA":u,f=e&&e.width,d=e&&e.height;this.tex=e||null,this.originalWidth=n||f,this.originalHeight=i||d,this.width=o||f,this.height=r||d,this.type=s,this.format=c,this.internalformat=a||c,this._uploaded=!1}},{key:"bind",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=t||this.gl;var n=this._object,i=t.TEXTURE0+(e.textureIndex||0);t.activeTexture(i),t.bindTexture(t.TEXTURE_2D,n)}},{key:"unbind",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=t||this.gl;var n=t.TEXTURE0+(e.textureIndex||0);t.activeTexture(n),t.bindTexture(this.gl.TEXTURE_2D,null)}},{key:"resize",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.width=t,this.height=e;var i=this.gl;i&&(this.bind(null,n),this._preSet(n),i.texImage2D(i.TEXTURE_2D,0,i[this.internalformat],t,e,0,i[this.format],i[this.type],this.tex))}},{key:"update",value:function(t,e){t&&(this.originalWidth=t.width,this.width=t.width,this.height=t.height,this.originalHeight=t.height,this.tex=t||null,this._uploaded=!1,this.upload(e))}},{key:"upload",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.gl||console.error("Texture donnot have gl, unable upload to GPU!");var e=this.gl;this.bind(null,t),this._preSet(t),this._uploaded||(e.isWebGL2?e.texImage2D(e.TEXTURE_2D,0,e[this.internalformat],this.width,this.height,0,e[this.format],e[this.type],this.tex):e.texImage2D(e.TEXTURE_2D,0,e[this.internalformat],e[this.format],e[this.type],this.tex),t.useMipmap&&e.generateMipmap(e.TEXTURE_2D)),this._uploaded=!0}},{key:"copy",value:function(t){var e=this.gl,n=this.width,i=this.height;e||console.error("Texture donnot have gl, unable upload to GPU!"),this.bind(null,t),this._preSet(t),e.copyTexImage2D(e.TEXTURE_2D,0,e[this.internalformat],0,0,n,i,0)}},{key:"destroy",value:function(){this.gl&&this.delete()}},{key:"_preSet",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.gl;t.flipY&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1),t.premultiply&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.minFilter||e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t.magFilter||e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,t.wrapS||e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,t.wrapT||e.CLAMP_TO_EDGE)}},{key:"texture",get:function(){return this._object}}]),e}(p.default);e.default=m},function(t,e,n){"use strict";function i(t){return t-(0,a.default)(t)}function o(t){var e=(0,a.default)(t);return{high:e,low:t-e}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(664),a=function(t){return t&&t.__esModule?t:{default:t}}(r);e.fp64LowPart=i,e.splitLatLngNumber=o},function(t,e,n){t.exports=!n(12)&&!n(33)(function(){return 7!=Object.defineProperty(n(79)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){"use strict";function i(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i}),this.resolve=o(e),this.reject=o(n)}var o=n(53);t.exports.f=function(t){return new i(t)}},function(t,e,n){var i=n(109),o=n(69).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,o)}},function(t,e,n){var i=n(25),o=n(34),r=n(70)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),i(t,r)?t[r]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var i=n(25),o=n(24),r=n(175)(!1),a=n(70)("IE_PROTO");t.exports=function(t,e){var n,l=o(t),s=0,u=[];for(n in l)n!=a&&i(l,n)&&u.push(n);for(;e.length>s;)i(l,n=e[s++])&&(~r(u,n)||u.push(n));return u}},function(t,e,n){"use strict";var i=n(29);t.exports=function(t,e){return!!t&&i(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={QMAPI_style:"QMAPI__style__",QMAPI_style_indoor:"QMAPI__style__indoor__",QMAPI_poi_icon:"QMAPI__poi__icon",QMAPI_poi_icon_json:"QMAPI__poi__icon__json",QMAPI_indoor_buffer:"QMAPI__indoor__buffer__",QMAPI_indoor_index:"QMAPI__indoor__index__",VECTOR_SOURCE_ID:"vector_source"};e.IMAGE_DISPLAY={ORIGIN:0,SCALE:1,REPEAT:2};e.default=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(211),p=i(v),m=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,l.default)(this,e),(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,n))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_onCreate",value:function(){return this.gl.createBuffer()}},{key:"_onDelete",value:function(){this.unbind(),this.gl.deleteBuffer(this._object)}},{key:"_initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.target=t.target||this.gl.ARRAY_BUFFER,t.data&&(this.bind(),this.bufferData(t.data,t))}},{key:"bind",value:function(t,e){t=t||this.gl,e=e||this.target,t.bindBuffer(e,this._object)}},{key:"unbind",value:function(t,e){t=t||this.gl,e=e||this.target,t.bindBuffer(e,null)}},{key:"bufferData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl.bufferData(this.target,t,e.usage||this.gl.STATIC_DRAW)}},{key:"bufferSubData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl.bufferSubData(this.target,e.offset||0,t)}},{key:"pointToAttrib",value:function(t){var e=t.location,n=t.size,i=t.type,o=t.normalized,r=void 0!==o&&o,a=t.stride,l=void 0===a?0:a,s=t.offset,u=void 0===s?0:s,c=t.enable,f=void 0===c||c;this.gl.vertexAttribPointer(e,n,i,r,l,u),f&&this.gl.enableVertexAttribArray(e)}},{key:"buffer",get:function(){return this._object}}]),e}(p.default);e.default=m},function(t,e,n){t.exports={default:n(239),__esModule:!0}},function(t,e,n){var i=n(10).document;t.exports=i&&i.documentElement},function(t,e,n){var i=n(35),o=n(9)("iterator"),r=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||r[o]===t)}},function(t,e,n){var i=n(48);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){var i=n(15);t.exports=function(t,e,n,o){try{return o?e(i(n)[0],n[1]):e(n)}catch(e){var r=t.return;throw void 0!==r&&i(r.call(t)),e}}},function(t,e,n){var i=n(9)("iterator"),o=!1;try{var r=[7][i]();r.return=function(){o=!0},Array.from(r,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var r=[7],a=r[i]();a.next=function(){return{done:n=!0}},r[i]=function(){return a},t(r)}catch(t){}return n}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var i=n(122),o=n(259),r=n(76),a=n(46),l=n(425);t.exports=function(t,e){var n=1==t,s=2==t,u=3==t,c=4==t,f=6==t,d=5==t||f,h=e||l;return function(e,l,v){for(var p,m,_=r(e),g=o(_),y=i(l,v,3),x=a(g.length),b=0,S=n?h(e,x):s?h(e,0):void 0;x>b;b++)if((d||b in g)&&(p=g[b],m=y(p,b,_),t))if(n)S[b]=m;else if(m)switch(t){case 3:return!0;case 5:return p;case 6:return b;case 2:S.push(p)}else if(c)return!1;return f?-1:u||c?c:S}}},function(t,e,n){var i=n(120);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var i=n(260),o=n(204),r=n(101),a=n(151),l=n(99),s=n(429),u=Object.getOwnPropertyDescriptor;e.f=n(56)?u:function(t,e){if(t=r(t),e=a(e,!0),s)try{return u(t,e)}catch(t){}if(l(t,e))return o(!i.f.call(t,e),t[e])}},function(t,e,n){var i=n(6),o=n(52),r=n(29);t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],a={};a[t]=e(n),i(i.S+i.F*r(function(){n(1)}),"Object",a)}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.UNIFORM_PART="\n    uniform mat4 uMatrix;\n    uniform vec4 uCenter;\n    uniform float uZoom;\n\n    uniform vec3 uPixelsPerMeter;\n\n    uniform vec2 uResolution;\n    uniform vec3 uProject_uCommonUnitsPerWorldUnit;\n    uniform vec3 uProject_uCommonUnitsPerWorldUnit2;\n",e.PROJECTION_PART="\n    float PI = 3.141592653589793;\n\n    float degree_to_radian(float deg) {\n      \treturn deg * PI / 180.;\n    }\n\n\n    vec2 fromLatLngToPoint(vec2 latlng) {\n      \tvec2 c = vec2(0.0, 0.0);\n      \tvec2 d = vec2(128.0, 128.0);\n      \tc.x = d.x + latlng.x * (256. / 360.);\n      \tfloat e = clamp(sin(degree_to_radian(latlng.y)), -(1. - 1E-15), 1. - 1E-15);\n      \tc.y = d.y + 0.5 * log((1. + e) / (1. - e)) * -(256. / (2. * PI));\n      \treturn c;\n    }\n\n\n\n    vec2 project_position(vec2 latlng, float mapzoom) {\n      \tvec2 tileCoord = fromLatLngToPoint(latlng);\n      \tfloat dimension = pow(2., mapzoom);\n      \ttileCoord.xy *= dimension;\n\n      \treturn tileCoord;\n    }\n\n\n    vec2 project_view_local_position(vec2 latlng) {\n      \tvec2 centerCoord = project_position(uCenter.xy, uZoom);\n      \tvec2 p = project_position(latlng.xy, uZoom);\n\n      \t\n      \treturn vec2(p.x - centerCoord.x, centerCoord.y - p.y);\n    }\n\n    vec3 project_offset(vec3 offset) {\n      \tfloat dy = offset.y;\n\t\t\n      \tdy = clamp(dy, -1., 1.);\n      \tvec3 commonUnitsPerWorldUnit = uProject_uCommonUnitsPerWorldUnit + uProject_uCommonUnitsPerWorldUnit2 * dy;\n\t\t\n      \treturn vec3(offset.xyz * commonUnitsPerWorldUnit.xyz);\n    }\n    \n\n\tvec3 project_view_local_position_precision(vec3 latlngHigh, vec2 latlngLow) {\n\t\t\n\t\tvec2 high = latlngHigh.xy - uCenter.xy;\n\t\tvec2 low = latlngLow.xy - uCenter.zw;\n\n\t\treturn mix(\n\t\t\tvec3(project_view_local_position(latlngHigh.xy), uProject_uCommonUnitsPerWorldUnit.z * latlngHigh.z),\n\t\t\tproject_offset(vec3(high + low, latlngHigh.z)),\n\t\t\tstep(9.0, uZoom)\n\t\t);\n\t}\n\n\n    vec2 project_view_local_position_precision(vec2 latlngHigh, vec2 latlngLow) {\n      \tvec3 result = project_view_local_position_precision(vec3(latlngHigh.xy, 0.0), latlngLow);\n\n      \treturn result.xy;\n    }\n\n\n    vec2 proj_position_to_screen(vec4 device) {\n\t\tvec3 device_normal = device.xyz / device.w;\n\t\tvec2 clip_pos = (device_normal * 0.5 + 0.5).xy;\n\t\treturn clip_pos * uResolution;\n    }\n    \n\n\tvec4 screen_to_proj_position(vec2 screen, float z, float w) {\n\t    vec2 clip_pos = screen / uResolution;\n\t    vec2 device_normal = clip_pos * 2.0 - 1.0;\n\t    return vec4(device_normal * w, z, w);\n\t}\n\n    vec3 project_scale(vec3 meters) {\n      \treturn meters * uPixelsPerMeter;\n    }\n\n    vec2 rotate_by_angle_onScreen(vec2 vertex, float angle) {\n      \tfloat angle_radian = angle * PI / 180.0;\n      \tfloat cos_angle = cos(angle_radian);\n      \tfloat sin_angle = sin(angle_radian);\n      \tmat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n      \treturn rotationMatrix * vertex;\n    }\n"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.deleteInstanceCacllback=function(t){t.data&&(t.data=null),t.buffer&&t.buffer.delete()},e.deleteBuffersCallback=function(t){t.vertices&&t.vertices.delete(),t.indeices&&t.indeices.delete()}},function(t,e,n){"use strict";function i(t){return t*(Math.PI/180)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,n){t.exports={default:n(168),__esModule:!0}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(95),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t,e,n){return e in t?(0,o.default)(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){var i=n(13),o=n(15),r=n(37);t.exports=n(12)?Object.defineProperties:function(t,e){o(t);for(var n,a=r(e),l=a.length,s=0;l>s;)i.f(t,n=a[s++],e[n]);return t}},function(t,e,n){var i=n(12),o=n(37),r=n(24),a=n(45).f;t.exports=function(t){return function(e){for(var n,l=r(e),s=o(l),u=s.length,c=0,f=[];u>c;)n=s[c++],i&&!a.call(l,n)||f.push(t?[n,l[n]]:l[n]);return f}}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){"use strict";if(n(56)){var i=n(199),o=n(30),r=n(29),a=n(6),l=n(291),s=n(362),u=n(122),c=n(214),f=n(204),d=n(100),h=n(216),v=n(125),p=n(46),m=n(448),_=n(205),g=n(151),y=n(99),x=n(258),b=n(31),S=n(76),w=n(349),E=n(200),T=n(202),I=n(201).f,A=n(364),k=n(206),P=n(40),M=n(121),L=n(281),C=n(261),N=n(365),O=n(215),R=n(287),V=n(217),B=n(342),F=n(423),z=n(57),D=n(123),U=z.f,Y=D.f,j=o.RangeError,G=o.TypeError,W=o.Uint8Array,Z=Array.prototype,X=s.ArrayBuffer,H=s.DataView,Q=M(0),q=M(2),J=M(3),K=M(4),$=M(5),tt=M(6),et=L(!0),nt=L(!1),it=N.values,ot=N.keys,rt=N.entries,at=Z.lastIndexOf,lt=Z.reduce,st=Z.reduceRight,ut=Z.join,ct=Z.sort,ft=Z.slice,dt=Z.toString,ht=Z.toLocaleString,vt=P("iterator"),pt=P("toStringTag"),mt=k("typed_constructor"),_t=k("def_constructor"),gt=l.CONSTR,yt=l.TYPED,xt=l.VIEW,bt=M(1,function(t,e){return It(C(t,t[_t]),e)}),St=r(function(){return 1===new W(new Uint16Array([1]).buffer)[0]}),wt=!!W&&!!W.prototype.set&&r(function(){new W(1).set({})}),Et=function(t,e){var n=v(t);if(n<0||n%e)throw j("Wrong offset!");return n},Tt=function(t){if(b(t)&&yt in t)return t;throw G(t+" is not a typed array!")},It=function(t,e){if(!(b(t)&&mt in t))throw G("It is not a typed array constructor!");return new t(e)},At=function(t,e){return kt(C(t,t[_t]),e)},kt=function(t,e){for(var n=0,i=e.length,o=It(t,i);i>n;)o[n]=e[n++];return o},Pt=function(t,e,n){U(t,e,{get:function(){return this._d[n]}})},Mt=function(t){var e,n,i,o,r,a,l=S(t),s=arguments.length,c=s>1?arguments[1]:void 0,f=void 0!==c,d=A(l);if(void 0!=d&&!w(d)){for(a=d.call(l),i=[],e=0;!(r=a.next()).done;e++)i.push(r.value);l=i}for(f&&s>2&&(c=u(c,arguments[2],2)),e=0,n=p(l.length),o=It(this,n);n>e;e++)o[e]=f?c(l[e],e):l[e];return o},Lt=function(){for(var t=0,e=arguments.length,n=It(this,e);e>t;)n[t]=arguments[t++];return n},Ct=!!W&&r(function(){ht.call(new W(1))}),Nt=function(){return ht.apply(Ct?ft.call(Tt(this)):Tt(this),arguments)},Ot={copyWithin:function(t,e){return F.call(Tt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return K(Tt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return B.apply(Tt(this),arguments)},filter:function(t){return At(this,q(Tt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return $(Tt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return tt(Tt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Q(Tt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return nt(Tt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return et(Tt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ut.apply(Tt(this),arguments)},lastIndexOf:function(t){return at.apply(Tt(this),arguments)},map:function(t){return bt(Tt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return lt.apply(Tt(this),arguments)},reduceRight:function(t){return st.apply(Tt(this),arguments)},reverse:function(){for(var t,e=this,n=Tt(e).length,i=Math.floor(n/2),o=0;o<i;)t=e[o],e[o++]=e[--n],e[n]=t;return e},some:function(t){return J(Tt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return ct.call(Tt(this),t)},subarray:function(t,e){var n=Tt(this),i=n.length,o=_(t,i);return new(C(n,n[_t]))(n.buffer,n.byteOffset+o*n.BYTES_PER_ELEMENT,p((void 0===e?i:_(e,i))-o))}},Rt=function(t,e){return At(this,ft.call(Tt(this),t,e))},Vt=function(t){Tt(this);var e=Et(arguments[1],1),n=this.length,i=S(t),o=p(i.length),r=0;if(o+e>n)throw j("Wrong length!");for(;r<o;)this[e+r]=i[r++]},Bt={entries:function(){return rt.call(Tt(this))},keys:function(){return ot.call(Tt(this))},values:function(){return it.call(Tt(this))}},Ft=function(t,e){return b(t)&&t[yt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},zt=function(t,e){return Ft(t,e=g(e,!0))?f(2,t[e]):Y(t,e)},Dt=function(t,e,n){return!(Ft(t,e=g(e,!0))&&b(n)&&y(n,"value"))||y(n,"get")||y(n,"set")||n.configurable||y(n,"writable")&&!n.writable||y(n,"enumerable")&&!n.enumerable?U(t,e,n):(t[e]=n.value,t)};gt||(D.f=zt,z.f=Dt),a(a.S+a.F*!gt,"Object",{getOwnPropertyDescriptor:zt,defineProperty:Dt}),r(function(){dt.call({})})&&(dt=ht=function(){return ut.call(this)});var Ut=h({},Ot);h(Ut,Bt),d(Ut,vt,Bt.values),h(Ut,{slice:Rt,set:Vt,constructor:function(){},toString:dt,toLocaleString:Nt}),Pt(Ut,"buffer","b"),Pt(Ut,"byteOffset","o"),Pt(Ut,"byteLength","l"),Pt(Ut,"length","e"),U(Ut,pt,{get:function(){return this[yt]}}),t.exports=function(t,e,n,s){s=!!s;var u=t+(s?"Clamped":"")+"Array",f="get"+t,h="set"+t,v=o[u],_=v||{},g=v&&T(v),y=!v||!l.ABV,S={},w=v&&v.prototype,A=function(t,n){var i=t._d;return i.v[f](n*e+i.o,St)},k=function(t,n,i){var o=t._d;s&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),o.v[h](n*e+o.o,i,St)},P=function(t,e){U(t,e,{get:function(){return A(this,e)},set:function(t){return k(this,e,t)},enumerable:!0})};y?(v=n(function(t,n,i,o){c(t,v,u,"_d");var r,a,l,s,f=0,h=0;if(b(n)){if(!(n instanceof X||"ArrayBuffer"==(s=x(n))||"SharedArrayBuffer"==s))return yt in n?kt(v,n):Mt.call(v,n);r=n,h=Et(i,e);var _=n.byteLength;if(void 0===o){if(_%e)throw j("Wrong length!");if((a=_-h)<0)throw j("Wrong length!")}else if((a=p(o)*e)+h>_)throw j("Wrong length!");l=a/e}else l=m(n),a=l*e,r=new X(a);for(d(t,"_d",{b:r,o:h,l:a,e:l,v:new H(r)});f<l;)P(t,f++)}),w=v.prototype=E(Ut),d(w,"constructor",v)):r(function(){v(1)})&&r(function(){new v(-1)})&&R(function(t){new v,new v(null),new v(1.5),new v(t)},!0)||(v=n(function(t,n,i,o){c(t,v,u);var r;return b(n)?n instanceof X||"ArrayBuffer"==(r=x(n))||"SharedArrayBuffer"==r?void 0!==o?new _(n,Et(i,e),o):void 0!==i?new _(n,Et(i,e)):new _(n):yt in n?kt(v,n):Mt.call(v,n):new _(m(n))}),Q(g!==Function.prototype?I(_).concat(I(g)):I(_),function(t){t in v||d(v,t,_[t])}),v.prototype=w,i||(w.constructor=v));var M=w[vt],L=!!M&&("values"==M.name||void 0==M.name),C=Bt.values;d(v,mt,!0),d(w,yt,u),d(w,xt,!0),d(w,_t,v),(s?new v(1)[pt]==u:pt in w)||U(w,pt,{get:function(){return u}}),S[u]=v,a(a.G+a.W+a.F*(v!=_),S),a(a.S,u,{BYTES_PER_ELEMENT:e}),a(a.S+a.F*r(function(){_.of.call(v,1)}),u,{from:Mt,of:Lt}),"BYTES_PER_ELEMENT"in w||d(w,"BYTES_PER_ELEMENT",e),a(a.P,u,Ot),V(u),a(a.P+a.F*wt,u,{set:Vt}),a(a.P+a.F*!L,u,Bt),i||w.toString==dt||(w.toString=dt),a(a.P+a.F*r(function(){new v(1).slice()}),u,{slice:Rt}),a(a.P+a.F*(r(function(){return[1,2].toLocaleString()!=new v([1,2]).toLocaleString()})||!r(function(){w.toLocaleString.call([1,2])})),u,{toLocaleString:Nt}),O[u]=L?M:C,i||L||d(w,vt,C)}}else t.exports=function(){}},function(t,e,n){"use strict";var i=n(879),o=i&&i.setItem&&i.getItem;t.exports={set:function(t,e,n){(null!==e?i.setItem(t,e):i.removeItem(t)).then(function(){n&&n()},function(t){console.error(t),n&&n(t)})},get:function(t,e){i.getItem(t).then(function(t){e&&e(t)},function(t){console.error(t),e&&e(null)})},support:function(){return o}}},function(t,e,n){"use strict";var i=n(27),o=function(t){return t&&t.__esModule?t:{default:t}}(i),r=n(38);e.getJSON=function(t,n,i,o){o=o||0;var a=void 0,l=void 0,s=new XMLHttpRequest;return s.open("GET",n,!0),s.setRequestHeader("Accept","application/json"),s.onloadstart=function(){return a=+new Date},s.onerror=function(){console.error(s.response,s,n),o>2?i(new r.AJAXError(n,0)):(o+=1,e.getJSON(t,n,i,o))},s.onload=function(){if(s.status>=200&&s.status<300&&s.response){l=+new Date;var t=void 0;try{t=JSON.parse(s.response)}catch(t){return i(t)}i(null,t,l-a)}else i(new r.AJAXError(s.statusText,s.status))},s.send(),s},e.getArrayBuffer=function(t,e){var n=new XMLHttpRequest;return n.open("GET",t,!0),n.responseType="arraybuffer",n.onerror=function(t){e(t)},n.onload=function(){if(0===n.response.byteLength&&200===n.status)return e(new Error("http status 200 returned without content."));n.status>=200&&n.status<300&&n.response?e(null,{data:n.response,cacheControl:n.getResponseHeader("Cache-Control"),expires:n.getResponseHeader("Expires")}):e(new r.AJAXError(n.statusText,n.status))},n.send(),n},e.getImage=function(t,e){var n=new XMLHttpRequest,i=new o.default(function(i,o){n.open("GET",t),n.responseType="blob",n.timeout=e,n.onload=function(){n.status>=200&&n.status<300&&n.response?(0===n.response.size&&o(new r.AJAXError("The size of image is 0",404)),i(n.response)):o(new r.AJAXError(n.statusText,n.status))},n.onerror=function(){o(new r.AJAXError("error",0))},n.ontimeout=function(){o(new r.AJAXError("timeout",0))},n.onabort=function(){o(new r.AJAXError("abort",0))},n.send()});return{xhr:n,promise:i}},e.getImageData=function(t,n){return e.getArrayBuffer(t,function(t,e){if(t)return n(t);n(null,e)})}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){return{x:t/n.width*2-1,y:-e/n.height*2+1,z:1}}function r(t,e,n){return{x:(t+1)/2*n.width,y:(1-e)/2*n.height}}function a(t,e,n){var i=t.multiplyVector4(e),o=i.elements.map(function(t){return t/i.elements[3]}),a=r(o[0],o[1],n);return{x:a.x,y:a.y,depthScale:1}}function l(t,e,n){var i=t.clone().invert(),r=o(e.x,e.y,n),a=new _.Vector4(r.x,r.y,0,1),l=new _.Vector4(r.x,r.y,1,1),s=i.multiplyVector4(a),u=i.multiplyVector4(l);s.multiply(1/s.elements[3]),u.multiply(1/u.elements[3]);var c=(0-s.elements[2])/(u.elements[2]-s.elements[2]),f=s.add(u.minus(s).multiply(c));return{x:f.elements[0],y:f.elements[1]}}function s(t){return 2*Math.PI*d.default/(Math.pow(2,t)*v.default.tileSize)}function u(t){var e=t.x,n=t.y;return e=e/w*180,n=n/w*180,n=180/Math.PI*(2*Math.atan(Math.exp(n*Math.PI/180))-Math.PI/2),new y.default(n,e)}function c(t){var e=t.lng,n=t.lat;return e=e*w/180,n=Math.log(Math.tan((90+n)*Math.PI/360))/(Math.PI/180),n=n*w/180,new b.default(e,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.fromScreenToNdc=o,e.fromNdcToScreen=r,e.getScreenCoordsByCustomMatrix=a,e.getZPlaneCoordsByCustomMatrix=l,e.getSpatialResolution=s,e.mercatorToLatLng=u,e.latLngToMercator=c;var f=n(271),d=i(f),h=n(20),v=i(h),p=n(223),m=i(p),_=n(140),g=n(42),y=i(g),x=n(61),b=i(x),S=m.default[1],w=S/2},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.GEOMETRY_TYPES={POINT:"POINT",POLYLINE:"POLYLINE",POLYGON:"POLYGON",LABEL:"LABEL",CIRCLE:"CIRCLE",RECTANGLE:"RECTANGLE",MASK:"MASK"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Vector4=e.Vector3=e.Matrix4=void 0;var i=n(26),o=function(t){return t&&t.__esModule?t:{default:t}}(i),r=function(t){var e=void 0,n=void 0,i=void 0;if(t&&"object"===(void 0===t?"undefined":(0,o.default)(t))&&t.hasOwnProperty("elements")){for(n=t.elements,i=new Float32Array(16),e=0;e<16;++e)i[e]=n[e];this.elements=i}else{var r=new Float32Array(16);r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this.elements=r}};r.prototype.setIdentity=function(){var t=this.elements;return t[0]=1,t[4]=0,t[8]=0,t[12]=0,t[1]=0,t[5]=1,t[9]=0,t[13]=0,t[2]=0,t[6]=0,t[10]=1,t[14]=0,t[3]=0,t[7]=0,t[11]=0,t[15]=1,this},r.prototype.clone=function(){var t=new r,e=this.elements,n=t.elements;return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],t},r.prototype.set=function(t){var e=void 0,n=t.elements,i=this.elements;if(n!==i){for(e=0;e<16;++e)i[e]=n[e];return this}},r.prototype.concat=function(t){var e=void 0,n=void 0,i=void 0,o=void 0,r=void 0,a=void 0,l=this.elements,s=this.elements;if(n=t.elements,l===n)for(n=new Float32Array(16),e=0;e<16;++e)n[e]=l[e];for(e=0;e<4;e++)i=s[e],o=s[e+4],r=s[e+8],a=s[e+12],l[e]=i*n[0]+o*n[1]+r*n[2]+a*n[3],l[e+4]=i*n[4]+o*n[5]+r*n[6]+a*n[7],l[e+8]=i*n[8]+o*n[9]+r*n[10]+a*n[11],l[e+12]=i*n[12]+o*n[13]+r*n[14]+a*n[15];return this},r.prototype.multiply=r.prototype.concat,r.prototype.multiplyVector3=function(t){var e=this.elements,n=t.elements,i=new a,o=i.elements;return o[0]=n[0]*e[0]+n[1]*e[4]+n[2]*e[8]+e[12],o[1]=n[0]*e[1]+n[1]*e[5]+n[2]*e[9]+e[13],o[2]=n[0]*e[2]+n[1]*e[6]+n[2]*e[10]+e[14],i},r.prototype.multiplyVector4=function(t){var e=this.elements,n=t.elements,i=new l,o=i.elements;return o[0]=n[0]*e[0]+n[1]*e[4]+n[2]*e[8]+n[3]*e[12],o[1]=n[0]*e[1]+n[1]*e[5]+n[2]*e[9]+n[3]*e[13],o[2]=n[0]*e[2]+n[1]*e[6]+n[2]*e[10]+n[3]*e[14],o[3]=n[0]*e[3]+n[1]*e[7]+n[2]*e[11]+n[3]*e[15],i},r.prototype.transpose=function(){var t=void 0,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},r.prototype.setInverseOf=function(t){var e=void 0,n=void 0,i=t.elements,o=this.elements,r=new Float32Array(16);if(r[0]=i[5]*i[10]*i[15]-i[5]*i[11]*i[14]-i[9]*i[6]*i[15]+i[9]*i[7]*i[14]+i[13]*i[6]*i[11]-i[13]*i[7]*i[10],r[4]=-i[4]*i[10]*i[15]+i[4]*i[11]*i[14]+i[8]*i[6]*i[15]-i[8]*i[7]*i[14]-i[12]*i[6]*i[11]+i[12]*i[7]*i[10],r[8]=i[4]*i[9]*i[15]-i[4]*i[11]*i[13]-i[8]*i[5]*i[15]+i[8]*i[7]*i[13]+i[12]*i[5]*i[11]-i[12]*i[7]*i[9],r[12]=-i[4]*i[9]*i[14]+i[4]*i[10]*i[13]+i[8]*i[5]*i[14]-i[8]*i[6]*i[13]-i[12]*i[5]*i[10]+i[12]*i[6]*i[9],r[1]=-i[1]*i[10]*i[15]+i[1]*i[11]*i[14]+i[9]*i[2]*i[15]-i[9]*i[3]*i[14]-i[13]*i[2]*i[11]+i[13]*i[3]*i[10],r[5]=i[0]*i[10]*i[15]-i[0]*i[11]*i[14]-i[8]*i[2]*i[15]+i[8]*i[3]*i[14]+i[12]*i[2]*i[11]-i[12]*i[3]*i[10],r[9]=-i[0]*i[9]*i[15]+i[0]*i[11]*i[13]+i[8]*i[1]*i[15]-i[8]*i[3]*i[13]-i[12]*i[1]*i[11]+i[12]*i[3]*i[9],r[13]=i[0]*i[9]*i[14]-i[0]*i[10]*i[13]-i[8]*i[1]*i[14]+i[8]*i[2]*i[13]+i[12]*i[1]*i[10]-i[12]*i[2]*i[9],r[2]=i[1]*i[6]*i[15]-i[1]*i[7]*i[14]-i[5]*i[2]*i[15]+i[5]*i[3]*i[14]+i[13]*i[2]*i[7]-i[13]*i[3]*i[6],r[6]=-i[0]*i[6]*i[15]+i[0]*i[7]*i[14]+i[4]*i[2]*i[15]-i[4]*i[3]*i[14]-i[12]*i[2]*i[7]+i[12]*i[3]*i[6],r[10]=i[0]*i[5]*i[15]-i[0]*i[7]*i[13]-i[4]*i[1]*i[15]+i[4]*i[3]*i[13]+i[12]*i[1]*i[7]-i[12]*i[3]*i[5],r[14]=-i[0]*i[5]*i[14]+i[0]*i[6]*i[13]+i[4]*i[1]*i[14]-i[4]*i[2]*i[13]-i[12]*i[1]*i[6]+i[12]*i[2]*i[5],r[3]=-i[1]*i[6]*i[11]+i[1]*i[7]*i[10]+i[5]*i[2]*i[11]-i[5]*i[3]*i[10]-i[9]*i[2]*i[7]+i[9]*i[3]*i[6],r[7]=i[0]*i[6]*i[11]-i[0]*i[7]*i[10]-i[4]*i[2]*i[11]+i[4]*i[3]*i[10]+i[8]*i[2]*i[7]-i[8]*i[3]*i[6],r[11]=-i[0]*i[5]*i[11]+i[0]*i[7]*i[9]+i[4]*i[1]*i[11]-i[4]*i[3]*i[9]-i[8]*i[1]*i[7]+i[8]*i[3]*i[5],r[15]=i[0]*i[5]*i[10]-i[0]*i[6]*i[9]-i[4]*i[1]*i[10]+i[4]*i[2]*i[9]+i[8]*i[1]*i[6]-i[8]*i[2]*i[5],0===(n=i[0]*r[0]+i[1]*r[4]+i[2]*r[8]+i[3]*r[12]))return this;for(n=1/n,e=0;e<16;e++)o[e]=r[e]*n;return this},r.prototype.invert=function(){return this.setInverseOf(this)},r.prototype.setOrtho=function(t,e,n,i,o,r){if(t===e||n===i||o===r)throw"null frustum";var a=1/(e-t),l=1/(i-n),s=1/(r-o),u=this.elements;return u[0]=2*a,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=2*l,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=-2*s,u[11]=0,u[12]=-(e+t)*a,u[13]=-(i+n)*l,u[14]=-(r+o)*s,u[15]=1,this},r.prototype.ortho=function(t,e,n,i,o,a){return this.concat((new r).setOrtho(t,e,n,i,o,a))},r.prototype.setFrustum=function(t,e,n,i,o,r){if(t===e||i===n||o===r)throw"null frustum";if(o<=0)throw"near <= 0";if(r<=0)throw"far <= 0";var a=1/(e-t),l=1/(i-n),s=1/(r-o),u=this.elements;return u[0]=2*o*a,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=2*o*l,u[6]=0,u[7]=0,u[8]=(e+t)*a,u[9]=(i+n)*l,u[10]=-(r+o)*s,u[11]=-1,u[12]=0,u[13]=0,u[14]=-2*o*r*s,u[15]=0,this},r.prototype.frustum=function(t,e,n,i,o,a){return this.concat((new r).setFrustum(t,e,n,i,o,a))},r.prototype.setPerspective=function(t,e,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(n===i||0===e)throw"null frustum";if(n<=0)throw"near <= 0";if(i<=0)throw"far <= 0";t=Math.PI*t/180/2;var a=Math.sin(t);if(0===a)throw"null frustum";var l=1/(i-n),s=Math.cos(t)/a,u=this.elements;return u[0]=s/e,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=s,u[6]=0,u[7]=0,u[8]=-o,u[9]=-r,u[10]=-(i+n)*l,u[11]=-1,u[12]=0,u[13]=0,u[14]=-2*n*i*l,u[15]=0,this},r.prototype.perspective=function(t,e,n,i){return this.concat((new r).setPerspective(t,e,n,i))},r.prototype.setScale=function(t,e,n){var i=this.elements;return i[0]=t,i[4]=0,i[8]=0,i[12]=0,i[1]=0,i[5]=e,i[9]=0,i[13]=0,i[2]=0,i[6]=0,i[10]=n,i[14]=0,i[3]=0,i[7]=0,i[11]=0,i[15]=1,this},r.prototype.scale=function(t,e,n){var i=this.elements;return i[0]*=t,i[4]*=e,i[8]*=n,i[1]*=t,i[5]*=e,i[9]*=n,i[2]*=t,i[6]*=e,i[10]*=n,i[3]*=t,i[7]*=e,i[11]*=n,this},r.prototype.setTranslate=function(t,e,n){var i=this.elements;return i[0]=1,i[4]=0,i[8]=0,i[12]=t,i[1]=0,i[5]=1,i[9]=0,i[13]=e,i[2]=0,i[6]=0,i[10]=1,i[14]=n,i[3]=0,i[7]=0,i[11]=0,i[15]=1,this},r.prototype.translate=function(t,e,n){var i=this.elements;return i[12]+=i[0]*t+i[4]*e+i[8]*n,i[13]+=i[1]*t+i[5]*e+i[9]*n,i[14]+=i[2]*t+i[6]*e+i[10]*n,i[15]+=i[3]*t+i[7]*e+i[11]*n,this},r.prototype.setRotate=function(t,e,n,i){var o=void 0,r=void 0,a=void 0,l=void 0,s=void 0,u=void 0,c=void 0,f=void 0,d=void 0,h=void 0;t=Math.PI*t/180;var v=this.elements;o=Math.sin(t);var p=Math.cos(t);return 0!==e&&0===n&&0===i?(e<0&&(o=-o),v[0]=1,v[4]=0,v[8]=0,v[12]=0,v[1]=0,v[5]=p,v[9]=-o,v[13]=0,v[2]=0,v[6]=o,v[10]=p,v[14]=0,v[3]=0,v[7]=0,v[11]=0,v[15]=1):0===e&&0!==n&&0===i?(n<0&&(o=-o),v[0]=p,v[4]=0,v[8]=o,v[12]=0,v[1]=0,v[5]=1,v[9]=0,v[13]=0,v[2]=-o,v[6]=0,v[10]=p,v[14]=0,v[3]=0,v[7]=0,v[11]=0,v[15]=1):0===e&&0===n&&0!==i?(i<0&&(o=-o),v[0]=p,v[4]=-o,v[8]=0,v[12]=0,v[1]=o,v[5]=p,v[9]=0,v[13]=0,v[2]=0,v[6]=0,v[10]=1,v[14]=0,v[3]=0,v[7]=0,v[11]=0,v[15]=1):(r=Math.sqrt(e*e+n*n+i*i),1!==r&&(a=1/r,e*=a,n*=a,i*=a),l=1-p,s=e*n,u=n*i,c=i*e,f=e*o,d=n*o,h=i*o,v[0]=e*e*l+p,v[1]=s*l+h,v[2]=c*l-d,v[3]=0,v[4]=s*l-h,v[5]=n*n*l+p,v[6]=u*l+f,v[7]=0,v[8]=c*l+d,v[9]=u*l-f,v[10]=i*i*l+p,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1),this},r.prototype.rotate=function(t,e,n,i){return this.concat((new r).setRotate(t,e,n,i))},r.prototype.setLookAt=function(t,e,n,i,o,r,a,l,s){var u=void 0,c=void 0,f=void 0,d=void 0,h=void 0,v=void 0;u=i-t,c=o-e,f=r-n;var p=1/Math.sqrt(u*u+c*c+f*f);u*=p,c*=p,f*=p,d=c*s-f*l,h=f*a-u*s,v=u*l-c*a;var m=1/Math.sqrt(d*d+h*h+v*v);d*=m,h*=m,v*=m;var _=h*f-v*c,g=v*u-d*f,y=d*c-h*u,x=this.elements;return x[0]=d,x[1]=_,x[2]=-u,x[3]=0,x[4]=h,x[5]=g,x[6]=-c,x[7]=0,x[8]=v,x[9]=y,x[10]=-f,x[11]=0,x[12]=0,x[13]=0,x[14]=0,x[15]=1,this.translate(-t,-e,-n)},r.prototype.lookAt=function(t,e,n,i,o,a,l,s,u){return this.concat((new r).setLookAt(t,e,n,i,o,a,l,s,u))},r.prototype.dropShadow=function(t,e){var n=new r,i=n.elements,o=t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3];return i[0]=o-e[0]*t[0],i[1]=-e[1]*t[0],i[2]=-e[2]*t[0],i[3]=-e[3]*t[0],i[4]=-e[0]*t[1],i[5]=o-e[1]*t[1],i[6]=-e[2]*t[1],i[7]=-e[3]*t[1],i[8]=-e[0]*t[2],i[9]=-e[1]*t[2],i[10]=o-e[2]*t[2],i[11]=-e[3]*t[2],i[12]=-e[0]*t[3],i[13]=-e[1]*t[3],i[14]=-e[2]*t[3],i[15]=o-e[3]*t[3],this.concat(n)},r.prototype.dropShadowDirectionally=function(t,e,n,i,o,r,a,l,s){var u=i*t+o*e+r*n;return this.dropShadow([t,e,n,-u],[a,l,s,0])};var a=function(){var t=1===arguments.length?arguments[0]:arguments,e=new Float32Array(3);t&&"object"===(void 0===t?"undefined":(0,o.default)(t))&&(e[0]=t[0],e[1]=t[1],e[2]=t[2]),this.elements=e};a.prototype.normalize=function(){var t=this.elements,e=t[0],n=t[1],i=t[2],o=Math.sqrt(e*e+n*n+i*i);return o?1===o?this:(o=1/o,t[0]=e*o,t[1]=n*o,t[2]=i*o,this):(t[0]=0,t[1]=0,t[2]=0,this)},a.prototype.scale=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=this.elements;return i[0]*=t,i[1]*=e,i[2]*=n,this},a.prototype.cross=function(t){var e=this.elements,n=t.elements;return new a(e[1]*n[2]-e[2]*n[1],e[2]*n[0]-e[0]*n[2],e[0]*n[1]-e[1]*n[0])},a.prototype.equals=function(t){var e=this.elements,n=t.elements;return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]};var l=function(){var t=1===arguments.length?arguments[0]:arguments,e=new Float32Array(4);t&&"object"===(void 0===t?"undefined":(0,o.default)(t))&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),this.elements=e};l.prototype.set=function(t,e,n){this.elements[0]=t,this.elements[1]=e,this.elements[2]=n},l.prototype.multiply=function(t){return this.elements[0]*=t,this.elements[1]*=t,this.elements[2]*=t,this.elements[3]*=t,this},l.prototype.add=function(t){return this.elements[0]+=t.elements[0],this.elements[1]+=t.elements[1],this.elements[2]+=t.elements[2],this.elements[3]+=t.elements[3],this},l.prototype.minus=function(t){return this.elements[0]-=t.elements[0],this.elements[1]-=t.elements[1],this.elements[2]-=t.elements[2],this.elements[3]-=t.elements[3],this},e.Matrix4=r,e.Vector3=a,e.Vector4=l},function(t,e,n){"use strict";var i=n(10),o=n(8),r=n(54),a=n(33),l=n(23),s=n(97),u=n(58),c=n(96),f=n(11),d=n(50),h=n(13).f,v=n(176)(0),p=n(12);t.exports=function(t,e,n,m,_,g){var y=i[t],x=y,b=_?"set":"add",S=x&&x.prototype,w={};return p&&"function"==typeof x&&(g||S.forEach&&!a(function(){(new x).entries().next()}))?(x=e(function(e,n){c(e,x,t,"_c"),e._c=new y,void 0!=n&&u(n,_,e[b],e)}),v("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in S&&(!g||"clear"!=t)&&l(x.prototype,t,function(n,i){if(c(this,x,t),!e&&g&&!f(n))return"get"==t&&void 0;var o=this._c[t](0===n?0:n,i);return e?this:o})}),g||h(x.prototype,"size",{get:function(){return this._c.size}})):(x=m.getConstructor(e,t,_,b),s(x.prototype,n),r.NEED=!0),d(x,t),w[t]=x,o(o.G+o.W+o.F,w),g||m.setStrong(x,t,_),x}},function(t,e,n){var i=n(24),o=n(107).f,r={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],l=function(t){try{return o(t)}catch(t){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==r.call(t)?l(t):o(i(t))}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var i=n(15),o=n(11),r=n(106);t.exports=function(t,e){if(i(t),o(e)&&e.constructor===t)return e;var n=r.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";var i=n(8),o=n(53),r=n(22),a=n(58);t.exports=function(t){i(i.S,t,{from:function(t){var e,n,i,l,s=arguments[1];return o(this),e=void 0!==s,e&&o(s),void 0==t?new this:(n=[],e?(i=0,l=r(s,arguments[2],2),a(t,!1,function(t){n.push(l(t,i++))})):a(t,!1,n.push,n),new this(n))}})}},function(t,e,n){"use strict";var i=n(8);t.exports=function(t){i(i.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,n){"use strict";var i=n(10),o=n(5),r=n(13),a=n(12),l=n(9)("species");t.exports=function(t){var e="function"==typeof o[t]?o[t]:i[t];a&&e&&!e[l]&&r.f(e,l,{configurable:!0,get:function(){return this}})}},function(t,e,n){var i=n(15),o=n(53),r=n(9)("species");t.exports=function(t,e){var n,a=i(t).constructor;return void 0===a||void 0==(n=i(a)[r])?e:o(n)}},function(t,e,n){var i,o,r,a=n(22),l=n(246),s=n(114),u=n(79),c=n(10),f=c.process,d=c.setImmediate,h=c.clearImmediate,v=c.MessageChannel,p=c.Dispatch,m=0,_={},g=function(){var t=+this;if(_.hasOwnProperty(t)){var e=_[t];delete _[t],e()}},y=function(t){g.call(t.data)};d&&h||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return _[++m]=function(){l("function"==typeof t?t:Function(t),e)},i(m),m},h=function(t){delete _[t]},"process"==n(48)(f)?i=function(t){f.nextTick(a(g,t,1))}:p&&p.now?i=function(t){p.now(a(g,t,1))}:v?(o=new v,r=o.port2,o.port1.onmessage=y,i=a(r.postMessage,r,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(t){c.postMessage(t+"","*")},c.addEventListener("message",y,!1)):i="onreadystatechange"in u("script")?function(t){s.appendChild(u("script")).onreadystatechange=function(){s.removeChild(this),g.call(t)}}:function(t){setTimeout(a(g,t,1),0)}),t.exports={set:d,clear:h}},function(t,e,n){var i=n(206)("meta"),o=n(31),r=n(99),a=n(57).f,l=0,s=Object.isExtensible||function(){return!0},u=!n(29)(function(){return s(Object.preventExtensions({}))}),c=function(t){a(t,i,{value:{i:"O"+ ++l,w:{}}})},f=function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!r(t,i)){if(!s(t))return"F";if(!e)return"E";c(t)}return t[i].i},d=function(t,e){if(!r(t,i)){if(!s(t))return!0;if(!e)return!1;c(t)}return t[i].w},h=function(t){return u&&v.NEED&&s(t)&&!r(t,i)&&c(t),t},v=t.exports={KEY:i,NEED:!1,fastKey:f,getWeak:d,onFreeze:h}},function(t,e,n){var i=n(31);t.exports=function(t,e){if(!i(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!i(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!i(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!i(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){"use strict";function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var o="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var o in n)i(n,o)&&(t[o]=n[o])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,n,i,o){if(e.subarray&&t.subarray)return void t.set(e.subarray(n,n+i),o);for(var r=0;r<i;r++)t[o+r]=e[n+r]},flattenChunks:function(t){var e,n,i,o,r,a;for(i=0,e=0,n=t.length;e<n;e++)i+=t[e].length;for(a=new Uint8Array(i),o=0,e=0,n=t.length;e<n;e++)r=t[e],a.set(r,o),o+=r.length;return a}},a={arraySet:function(t,e,n,i,o){for(var r=0;r<i;r++)t[o+r]=e[n+r]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(o)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(65),p=i(v),m=n(224),_=n(7),g=n(51),y=i(g),x={},b=function(t){function e(t){(0,l.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this));n.options=t;var i=t.id;return n.id=y.default.isUndefined(i)?(0,_.uniqueId)():i,n.init(t),n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"init",value:function(t){this.onInit(t),this.dom=this.createDOM(t)}},{key:"setPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.CONTROL_POSITION.TOP_LEFT;return t!==this.position&&(this.appendToContainer(t),this.position=t),this}},{key:"setClassName",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.dom&&(this.dom.className=t),this.className=t,this}},{key:"getDomPositionContainer",value:function(t){var e=t.id,n=this.options,i=n.position,o=n.className;return this.setPosition(i),this.setClassName(o),x[e][i]}},{key:"appendToContainer",value:function(t){var e=this.map.id;if(x[e]||(x[e]={}),!x[e][t]){x[e][t]=document.createElement("div");var n=x[e][t];n.style.right="auto",n.style.left="auto",n.style.top="auto",n.style.bottom="auto",n.style.cssText+=m.CONTROL_POSITION_STYLE[t],this.dom.parentNode&&this.dom.parentNode.parentNode&&this.dom.parentNode.parentNode.appendChild(n)}return x[e][t].firstChild?x[e][t].insertBefore(this.dom,x[e][t].firstChild):x[e][t].appendChild(this.dom),x[e][t]}},{key:"createDOM",value:function(){}},{key:"onInit",value:function(){}},{key:"onDestroy",value:function(){}},{key:"onAdd",value:function(){}},{key:"onRemove",value:function(){}},{key:"addTo",value:function(t,e){this.map=t;var n=this.getDomPositionContainer(t);e.appendChild(n),this.onAdd()}},{key:"remove",value:function(){if(this.dom){var t=this.dom.parentNode;this.position=null,this.dom.remove(),t&&!t.firstChild&&(t.remove(),t=null),this.onRemove(),this.map=null}}},{key:"destroy",value:function(){this.remove(),this.onDestroy(),this.removeAllListeners(),this.dom=null,this.className=null,this.position=null,this.id=null}}]),e}(p.default);e.default=b},function(t,e,n){"use strict";function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DEFAULT",n=r[e];return Math.min(Math.max(t,0)+n.min,n.max)}Object.defineProperty(e,"__esModule",{value:!0}),e.getRank=i;var o={min:10002,max:29999},r=e.RANK_CONFIG={BASE:{min:0,max:10},DEFAULT:{min:11,max:9999},INDOOR:{min:1e4,max:1e4},BUILDING:{min:10001,max:10001},VISUAL_PLUGIN:{min:o.min,max:o.max},OVERLAY_AA:{min:o.min,max:o.max},POI:{min:3e4,max:3e4},OVERLAY_NAA:{min:30001,max:1/0}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(0),r=i(o),a=n(1),l=i(a),s=function(){function t(e,n,i,o){(0,r.default)(this,t),this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(o-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=n,this.p2x=i,this.p2y=o}return(0,l.default)(t,[{key:"sampleCurveX",value:function(t){return((this.ax*t+this.bx)*t+this.cx)*t}},{key:"sampleCurveY",value:function(t){return((this.ay*t+this.by)*t+this.cy)*t}},{key:"sampleCurveDerivativeX",value:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx}},{key:"solveCurveX",value:function(t,e){void 0===e&&(e=1e-6);var n=void 0,i=void 0,o=void 0,r=void 0,a=void 0;for(o=t,a=0;a<8;a++){if(r=this.sampleCurveX(o)-t,Math.abs(r)<e)return o;var l=this.sampleCurveDerivativeX(o);if(Math.abs(l)<1e-6)break;o-=r/l}if(n=0,i=1,(o=t)<n)return n;if(o>i)return i;for(;n<i;){if(r=this.sampleCurveX(o),Math.abs(r-t)<e)return o;t>r?n=o:i=o,o=.5*(i-n)+n}return o}},{key:"solve",value:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}}]),t}();t.exports=s},function(t,e,n){"use strict";function i(t){return t/(Math.PI/180)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,n){t.exports={default:n(165),__esModule:!0}},function(t,e,n){t.exports={default:n(240),__esModule:!0}},function(t,e,n){t.exports={default:n(171),__esModule:!0}},function(t,e,n){t.exports={default:n(329),__esModule:!0}},function(t,e,n){t.exports={default:n(172),__esModule:!0}},function(t,e,n){t.exports={default:n(173),__esModule:!0}},function(t,e,n){n(36),n(187),t.exports=n(5).Array.from},function(t,e,n){n(39),n(36),t.exports=n(185)},function(t,e,n){n(39),n(36),t.exports=n(186)},function(t,e,n){n(189);var i=n(5).Object;t.exports=function(t,e){return i.create(t,e)}},function(t,e,n){n(190);var i=n(5).Object;t.exports=function(t,e,n){return i.defineProperty(t,e,n)}},function(t,e,n){n(195),t.exports=n(5).Object.entries},function(t,e,n){n(191),t.exports=n(5).Object.getPrototypeOf},function(t,e,n){n(192),t.exports=n(5).Object.keys},function(t,e,n){n(193),t.exports=n(5).Object.setPrototypeOf},function(t,e,n){n(194),n(66),n(196),n(197),t.exports=n(5).Symbol},function(t,e,n){n(36),n(39),t.exports=n(75).f("iterator")},function(t,e){t.exports=function(){}},function(t,e,n){var i=n(24),o=n(64),r=n(184);t.exports=function(t){return function(e,n,a){var l,s=i(e),u=o(s.length),c=r(a,u);if(t&&n!=n){for(;u>c;)if((l=s[c++])!=l)return!0}else for(;u>c;c++)if((t||c in s)&&s[c]===n)return t||c||0;return!t&&-1}}},function(t,e,n){var i=n(22),o=n(87),r=n(34),a=n(64),l=n(245);t.exports=function(t,e){var n=1==t,s=2==t,u=3==t,c=4==t,f=6==t,d=5==t||f,h=e||l;return function(e,l,v){for(var p,m,_=r(e),g=o(_),y=i(l,v,3),x=a(g.length),b=0,S=n?h(e,x):s?h(e,0):void 0;x>b;b++)if((d||b in g)&&(p=g[b],m=y(p,b,_),t))if(n)S[b]=m;else if(m)switch(t){case 3:return!0;case 5:return p;case 6:return b;case 2:S.push(p)}else if(c)return!1;return f?-1:u||c?c:S}}},function(t,e,n){"use strict";var i=n(13).f,o=n(59),r=n(97),a=n(22),l=n(96),s=n(58),u=n(80),c=n(119),f=n(147),d=n(12),h=n(54).fastKey,v=n(89),p=d?"_s":"size",m=function(t,e){var n,i=h(e);if("F"!==i)return t._i[i];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,u){var c=t(function(t,i){l(t,c,e,"_i"),t._t=e,t._i=o(null),t._f=void 0,t._l=void 0,t[p]=0,void 0!=i&&s(i,n,t[u],t)});return r(c.prototype,{clear:function(){for(var t=v(this,e),n=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];t._f=t._l=void 0,t[p]=0},delete:function(t){var n=v(this,e),i=m(n,t);if(i){var o=i.n,r=i.p;delete n._i[i.i],i.r=!0,r&&(r.n=o),o&&(o.p=r),n._f==i&&(n._f=o),n._l==i&&(n._l=r),n[p]--}return!!i},forEach:function(t){v(this,e);for(var n,i=a(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!m(v(this,e),t)}}),d&&i(c.prototype,"size",{get:function(){return v(this,e)[p]}}),c},def:function(t,e,n){var i,o,r=m(t,e);return r?r.v=n:(t._l=r={i:o=h(e,!0),k:e,v:n,p:i=t._l,n:void 0,r:!1},t._f||(t._f=r),i&&(i.n=r),t[p]++,"F"!==o&&(t._i[o]=r)),t},getEntry:m,setStrong:function(t,e,n){u(t,e,function(t,n){this._t=v(t,e),this._k=n,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?c(0,n.k):"values"==e?c(0,n.v):c(0,[n.k,n.v]):(t._t=void 0,c(1))},n?"entries":"values",!n,!0),f(e)}}},function(t,e,n){var i=n(63),o=n(243);t.exports=function(t){return function(){if(i(this)!=t)throw TypeError(t+"#toJSON isn't generic");return o(this)}}},function(t,e,n){"use strict";var i=n(13),o=n(41);t.exports=function(t,e,n){e in t?i.f(t,e,o(0,n)):t[e]=n}},function(t,e,n){var i=n(37),o=n(81),r=n(45);t.exports=function(t){var e=i(t),n=o.f;if(n)for(var a,l=n(t),s=r.f,u=0;l.length>u;)s.call(t,a=l[u++])&&e.push(a);return e}},function(t,e,n){"use strict";var i=n(59),o=n(41),r=n(50),a={};n(23)(a,n(9)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(a,{next:o(1,n)}),r(t,e+" Iterator")}},function(t,e,n){var i=n(11),o=n(15),r=function(t,e){if(o(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=n(22)(Function.call,n(88).f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return r(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:r}},function(t,e,n){var i=n(72),o=n(68);t.exports=function(t){return function(e,n){var r,a,l=String(o(e)),s=i(n),u=l.length;return s<0||s>=u?t?"":void 0:(r=l.charCodeAt(s),r<55296||r>56319||s+1===u||(a=l.charCodeAt(s+1))<56320||a>57343?t?l.charAt(s):r:t?l.slice(s,s+2):a-56320+(r-55296<<10)+65536)}}},function(t,e,n){var i=n(72),o=Math.max,r=Math.min;t.exports=function(t,e){return t=i(t),t<0?o(t+e,0):r(t,e)}},function(t,e,n){var i=n(15),o=n(82);t.exports=n(5).getIterator=function(t){var e=o(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}},function(t,e,n){var i=n(63),o=n(9)("iterator"),r=n(35);t.exports=n(5).isIterable=function(t){var e=Object(t);return void 0!==e[o]||"@@iterator"in e||r.hasOwnProperty(i(e))}},function(t,e,n){"use strict";var i=n(22),o=n(8),r=n(34),a=n(117),l=n(115),s=n(64),u=n(179),c=n(82);o(o.S+o.F*!n(118)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,o,f,d=r(t),h="function"==typeof this?this:Array,v=arguments.length,p=v>1?arguments[1]:void 0,m=void 0!==p,_=0,g=c(d);if(m&&(p=i(p,v>2?arguments[2]:void 0,2)),void 0==g||h==Array&&l(g))for(e=s(d.length),n=new h(e);e>_;_++)u(n,_,m?p(d[_],_):d[_]);else for(f=g.call(d),n=new h;!(o=f.next()).done;_++)u(n,_,m?a(f,p,[o.value,_],!0):o.value);return n.length=_,n}})},function(t,e,n){"use strict";var i=n(174),o=n(119),r=n(35),a=n(24);t.exports=n(80)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):"keys"==e?o(0,n):"values"==e?o(0,t[n]):o(0,[n,t[n]])},"values"),r.Arguments=r.Array,i("keys"),i("values"),i("entries")},function(t,e,n){var i=n(8);i(i.S,"Object",{create:n(59)})},function(t,e,n){var i=n(8);i(i.S+i.F*!n(12),"Object",{defineProperty:n(13).f})},function(t,e,n){var i=n(34),o=n(108);n(49)("getPrototypeOf",function(){return function(t){return o(i(t))}})},function(t,e,n){var i=n(34),o=n(37);n(49)("keys",function(){return function(t){return o(i(t))}})},function(t,e,n){var i=n(8);i(i.S,"Object",{setPrototypeOf:n(182).set})},function(t,e,n){"use strict";var i=n(10),o=n(25),r=n(12),a=n(8),l=n(98),s=n(54).KEY,u=n(33),c=n(71),f=n(50),d=n(55),h=n(9),v=n(75),p=n(74),m=n(180),_=n(116),g=n(15),y=n(11),x=n(34),b=n(24),S=n(73),w=n(41),E=n(59),T=n(142),I=n(88),A=n(81),k=n(13),P=n(37),M=I.f,L=k.f,C=T.f,N=i.Symbol,O=i.JSON,R=O&&O.stringify,V=h("_hidden"),B=h("toPrimitive"),F={}.propertyIsEnumerable,z=c("symbol-registry"),D=c("symbols"),U=c("op-symbols"),Y=Object.prototype,j="function"==typeof N&&!!A.f,G=i.QObject,W=!G||!G.prototype||!G.prototype.findChild,Z=r&&u(function(){return 7!=E(L({},"a",{get:function(){return L(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=M(Y,e);i&&delete Y[e],L(t,e,n),i&&t!==Y&&L(Y,e,i)}:L,X=function(t){var e=D[t]=E(N.prototype);return e._k=t,e},H=j&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Q=function(t,e,n){return t===Y&&Q(U,e,n),g(t),e=S(e,!0),g(n),o(D,e)?(n.enumerable?(o(t,V)&&t[V][e]&&(t[V][e]=!1),n=E(n,{enumerable:w(0,!1)})):(o(t,V)||L(t,V,w(1,{})),t[V][e]=!0),Z(t,e,n)):L(t,e,n)},q=function(t,e){g(t);for(var n,i=m(e=b(e)),o=0,r=i.length;r>o;)Q(t,n=i[o++],e[n]);return t},J=function(t,e){return void 0===e?E(t):q(E(t),e)},K=function(t){var e=F.call(this,t=S(t,!0));return!(this===Y&&o(D,t)&&!o(U,t))&&(!(e||!o(this,t)||!o(D,t)||o(this,V)&&this[V][t])||e)},$=function(t,e){if(t=b(t),e=S(e,!0),t!==Y||!o(D,e)||o(U,e)){var n=M(t,e);return!n||!o(D,e)||o(t,V)&&t[V][e]||(n.enumerable=!0),n}},tt=function(t){for(var e,n=C(b(t)),i=[],r=0;n.length>r;)o(D,e=n[r++])||e==V||e==s||i.push(e);return i},et=function(t){for(var e,n=t===Y,i=C(n?U:b(t)),r=[],a=0;i.length>a;)!o(D,e=i[a++])||n&&!o(Y,e)||r.push(D[e]);return r};j||(N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===Y&&e.call(U,n),o(this,V)&&o(this[V],t)&&(this[V][t]=!1),Z(this,t,w(1,n))};return r&&W&&Z(Y,t,{configurable:!0,set:e}),X(t)},l(N.prototype,"toString",function(){return this._k}),I.f=$,k.f=Q,n(107).f=T.f=tt,n(45).f=K,A.f=et,r&&!n(44)&&l(Y,"propertyIsEnumerable",K,!0),v.f=function(t){return X(h(t))}),a(a.G+a.W+a.F*!j,{Symbol:N});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),it=0;nt.length>it;)h(nt[it++]);for(var ot=P(h.store),rt=0;ot.length>rt;)p(ot[rt++]);a(a.S+a.F*!j,"Symbol",{for:function(t){return o(z,t+="")?z[t]:z[t]=N(t)},keyFor:function(t){if(!H(t))throw TypeError(t+" is not a symbol!");for(var e in z)if(z[e]===t)return e},useSetter:function(){W=!0},useSimple:function(){W=!1}}),a(a.S+a.F*!j,"Object",{create:J,defineProperty:Q,defineProperties:q,getOwnPropertyDescriptor:$,getOwnPropertyNames:tt,getOwnPropertySymbols:et});var at=u(function(){A.f(1)});a(a.S+a.F*at,"Object",{getOwnPropertySymbols:function(t){return A.f(x(t))}}),O&&a(a.S+a.F*(!j||u(function(){var t=N();return"[null]"!=R([t])||"{}"!=R({a:t})||"{}"!=R(Object(t))})),"JSON",{stringify:function(t){for(var e,n,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(n=e=i[1],(y(e)||void 0!==t)&&!H(t))return _(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!H(e))return e}),i[1]=e,R.apply(O,i)}}),N.prototype[B]||n(23)(N.prototype,B,N.prototype.valueOf),f(N,"Symbol"),f(Math,"Math",!0),f(i.JSON,"JSON",!0)},function(t,e,n){var i=n(8),o=n(132)(!0);i(i.S,"Object",{entries:function(t){return o(t)}})},function(t,e,n){n(74)("asyncIterator")},function(t,e,n){n(74)("observable")},function(t,e,n){var i=n(40)("unscopables"),o=Array.prototype;void 0==o[i]&&n(100)(o,i,{}),t.exports=function(t){o[i][t]=!0}},function(t,e){t.exports=!1},function(t,e,n){var i=n(28),o=n(438),r=n(345),a=n(356)("IE_PROTO"),l=function(){},s=function(){var t,e=n(344)("iframe"),i=r.length;for(e.style.display="none",n(347).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),s=t.F;i--;)delete s.prototype[r[i]];return s()};t.exports=Object.create||function(t,e){var n;return null!==t?(l.prototype=i(t),n=new l,l.prototype=null,n[a]=t):n=s(),void 0===e?n:o(n,e)}},function(t,e,n){var i=n(440),o=n(345).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,o)}},function(t,e,n){var i=n(99),o=n(76),r=n(356)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),i(t,r)?t[r]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var i=n(440),o=n(345);t.exports=Object.keys||function(t){return i(t,o)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var i=n(125),o=Math.max,r=Math.min;t.exports=function(t,e){return t=i(t),t<0?o(t+e,0):r(t,e)}},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e,n){var i=n(31);t.exports=function(t,e){if(!i(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){"use strict";function i(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.result,o=void 0===n?[]:n,r=e.dimensions,a=void 0===r?3:r,l=0;l<t.length;){var s=t[l];Array.isArray(s)||ArrayBuffer.isView(s)?i(s,{result:o,dimensions:a}):o.push(s.lng,s.lat),l+=1}return o}function o(t,e){var n=t.getBounds();return n.covers(e)||n.intersects(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.isInFrustum=o,e.default={to3DVertices:function(t,e){e=e||0;for(var n=[],i=0,o=t.length/2;i<o;i++)n.push(t[2*i],t[2*i+1],e,1);return n},mixCoords:function(t,e,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=[];if(i=i||0,n)for(var a=0,l=t.length/2;a<l;a++)r.push([t[2*a]*o+i,-1*t[2*a+1]*o+i].concat(n));else for(var s=0,u=t.length/2;s<u;s++)r.push([t[2*s]*o+i,-1*t[2*s+1]*o+i,0,1]);return"polygon"===e&&r.push(r[0]),r},flattenVertices:i,fillArray:function(t){for(var e=t.target,n=t.source,i=t.start,o=void 0===i?0:i,r=t.count,a=void 0===r?1:r,l=n.length,s=a*l,u=0,c=o;u<l;u++)e[c]=n[u],c+=1;for(;u<s;)u<s-u?(e.copyWithin(o+u,o,o+u),u*=2):(e.copyWithin(o+u,o,o+s-u),u=s);return e}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(277),p=i(v),m=n(38),_=n(51),g=i(_),y=n(154),x=n(20),b=n(65),S=n(7),w=g.default.isNumber,E=g.default.isUndefined,T=function(t){function e(t){(0,l.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this));return n.id=t.id||S.uniqueId(),n.type=t.type||null,n.sourceId=t.sourceId||null,n.setZoomRange(t.minZoom,t.maxZoom),n.setDataZoomRange(t.minDataZoom||t.minZoom,t.maxDataZoom||t.maxZoom),n.visible=!!E(t.visible)||Boolean(t.visible),n.setZIndex(t.zIndex||0),n.setOpacity(t.opacity),n._childLayers={},n._initialize(t),t.map&&n.setMap(t.map),n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"setVisible",value:function(t){return t=Boolean(t),this._forEachChild(function(e,n){n.setVisible(t)}),this.visible===t?this:(this.visible=t,this._fire("layer",{}),this)}},{key:"setZIndex",value:function(t){w(t)||(new m.BaseTypeError("Layer.zIndex","number",t).error(),t=0),this._forEachChild(function(e,n){n.setZIndex(t)}),this.zIndex=t;var e=this.calculateRank();return this.map?this.map.moveLayer(this.id,e):this.rank=e,this}},{key:"calculateRank",value:function(){return(0,y.getRank)(this.zIndex,"DEFAULT")}},{key:"setRank",value:function(t){this.rank=t,this._forEachChild(function(e,n){n.setRank(t)})}},{key:"getRank",value:function(){return this.rank}},{key:"setMap",value:function(t){return t instanceof p.default||null===t?this.map===t?this:(this.map&&(this.map.removeLayer(this.id),this._removeSource(),this.map=null),t&&(this.map=t,t.addLayer(this),this._addSource()),this):(console.error("传入的map参数并非TMap.Map实例"),this)}},{key:"getMap",value:function(){return this.map}},{key:"getZIndex",value:function(){return this.zIndex}},{key:"setZoomRange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x.minZoom,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.maxZoom;return w(t)||(new m.BaseTypeError("Layer.minZoom","number",t).error(),t=x.minZoom),w(e)||(new m.BaseTypeError("Layer.maxZoom","number",e).error(),e=x.maxZoom),this._forEachChild(function(n,i){i.setZoomRange(t,e)}),this.minZoom=t,this.maxZoom=e,this}},{key:"setDataZoomRange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x.minZoom,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.maxZoom;return w(t)||(new m.BaseTypeError("Layer.minDataZoom","number",t).error(),t=x.minZoom),w(e)||(new m.BaseTypeError("Layer.maxDataZoom","number",e).error(),e=x.maxZoom),this._forEachChild(function(n,i){i.setDataZoomRange(t,e)}),this.minDataZoom=t,this.maxDataZoom=e,this}},{key:"setOpacity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return w(t)||(new m.BaseTypeError("Layer.opacity","number",t).error(),t=1),(t<0||t>1)&&(console.error("Layer.opacity 传入参数值范围应当在0~1之间！"),t=S.clamp(t,0,1)),this.opacity=t,this}},{key:"_removeSource",value:function(){}},{key:"_addSource",value:function(){}},{key:"_initialize",value:function(){}},{key:"isHidden",value:function(t){return!!(this.minZoom&&t<this.minZoom)||(!!(this.maxZoom&&t>this.maxZoom)||!this.visible)}},{key:"appendChild",value:function(t){var n=t instanceof e?t:new e(t);return n.setMap(null),n.setZIndex(this.zIndex),n.setRank(this.rank),n.setZoomRange(this.minZoom,this.maxZoom),n.setVisible(this.visible),this._childLayers[n.id]=n,n}},{key:"removeChild",value:function(t){this._childLayers[t]&&delete this._childLayers[t]}},{key:"hasChild",value:function(t){return!!this._childLayers[t]}},{key:"getChild",value:function(t){return this.hasChild(t)?this._childLayers[t]:null}},{key:"_forEachChild",value:function(t){S.forIn(this._childLayers,function(e,n){t(e,n)})}},{key:"flat",value:function(){var t=[];return this.sourceId&&t.push(this),this._forEachChild(function(e,n){t=t.concat(n.flat())}),t}}]),e}(b);e.default=T},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.RectangleStyle=e.CircleStyle=e.ExtrudablePolygonStyle=e.PolygonStyle=void 0;var o=n(2),r=i(o),a=n(4),l=i(a),s=n(3),u=i(s),c=n(0),f=i(c),d=n(7),h={color:"rgba(55,119,255,0.16)",borderColor:"#3777FF",showBorder:!0,borderWidth:2,borderDashArray:[0,0],extrudeHeight:1},v=e.PolygonStyle=function t(e){(0,f.default)(this,t),e=(0,d.extend)({},h,e),this.color=e.color,this.borderColor=e.borderColor,this.showBorder=!0===e.showBorder,this.borderWidth=e.borderWidth,this.borderDashArray=e.borderDashArray};e.ExtrudablePolygonStyle=function t(e){(0,f.default)(this,t),e=(0,d.extend)({},h,e),this.color=e.color,this.borderColor=e.borderColor,this.showBorder=!0===e.showBorder,this.extrudeHeight=e.extrudeHeight},e.CircleStyle=function(t){function e(t){return(0,f.default)(this,e),(0,l.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t))}return(0,u.default)(e,t),e}(v),e.RectangleStyle=function(t){function e(t){return(0,f.default)(this,e),(0,l.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t))}return(0,u.default)(e,t),e}(v)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(1),l=i(a),s=n(7),u=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,r.default)(this,t),e&&(this.gl=e,this.id=n.id||"resource-"+(0,s.uniqueId)(),this._object=this._onCreate(n),this._initialize(n))}return(0,l.default)(t,[{key:"delete",value:function(){this._onDelete(),this._object=null,this.gl=null}},{key:"_onCreate",value:function(){}},{key:"_onDelete",value:function(){}},{key:"_initialize",value:function(){}},{key:"bind",value:function(){}},{key:"unbind",value:function(){}}]),t}();e.default=u},function(t,e,n){"use strict";e.__esModule=!0;var i=n(14),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=o.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}},function(t,e,n){"use strict";var i=n(12),o=n(37),r=n(81),a=n(45),l=n(34),s=n(87),u=Object.assign;t.exports=!u||n(33)(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=i})?function(t,e){for(var n=l(t),u=arguments.length,c=1,f=r.f,d=a.f;u>c;)for(var h,v=s(arguments[c++]),p=f?o(v).concat(f(v)):o(v),m=p.length,_=0;m>_;)h=p[_++],i&&!d.call(v,h)||(n[h]=v[h]);return n}:u},function(t,e){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e){t.exports={}},function(t,e,n){var i=n(90);t.exports=function(t,e,n){for(var o in e)i(t,o,e[o],n);return t}},function(t,e,n){"use strict";var i=n(30),o=n(57),r=n(56),a=n(40)("species");t.exports=function(t){var e=i[t];r&&e&&!e[a]&&o.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){var i=n(57).f,o=n(99),r=n(40)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,r)&&i(t,r,{configurable:!0,value:e})}},function(t,e,n){var i=n(6),o=n(134),r=n(29),a=n(360),l="["+a+"]",s="​",u=RegExp("^"+l+l+"*"),c=RegExp(l+l+"*$"),f=function(t,e,n){var o={},l=r(function(){return!!a[t]()||s[t]()!=s}),u=o[t]=l?e(d):a[t];n&&(o[n]=u),i(i.P+i.F*l,"String",o)},d=f.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(c,"")),t};t.exports=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(272),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=o.default[0]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LIGHT_FRAG=e.LIGHT_VERTEX=e.LIGHT_VARYING=e.LIGHT_UNIFORM=void 0;var i=n(303),o=function(t){return t&&t.__esModule?t:{default:t}}(i),r=o.default?"\nvec4 lighting_apply_on_color(vec4 color) {\n\tfloat isInShadow = isInShadow();\n\tvec3 colorInLight = color.rgb * mix(\n\t\tlighting_vLightWeight,\n\t\tlighting_vLightWeight - lighting_vShadowWeight,\n\t\tisInShadow\n\t) + mix(\n\t\tlighting_vLightSpecular,\n\t\tlighting_vLightSpecular - lighting_vShadowSpecular,\n\t\tisInShadow\n\t);\n\tcolorInLight = mix(\n\t\tcolorInLight,\n\t\ttoneMapping(colorInLight, lighting_vToneMapping.y),\n\t\tlighting_vToneMapping.x\n\t);\n\treturn vec4(colorInLight, color.a);\n}\n":"\nvec4 lighting_apply_on_color(vec4 color) {\n\tvec3 colorInLight = color.rgb * lighting_vLightWeight + lighting_vLightSpecular;\n\treturn vec4(colorInLight, color.a);\n}\n";e.LIGHT_UNIFORM="\n#define LIGHT_MAX 4\n\n\nuniform vec4 lighting_uBase;\nuniform vec4 lighting_uAdvanced;\nuniform vec3 lighting_uAmbientColor;\nuniform vec3 lighting_uDirDirection[LIGHT_MAX];\nuniform vec3 lighting_uDirColor[LIGHT_MAX];\nuniform vec3 lighting_uPointPosition[LIGHT_MAX];\nuniform vec3 lighting_uPointAtt[LIGHT_MAX];\nuniform vec3 lighting_uPointColor[LIGHT_MAX];\nuniform vec2 lighting_uLightCount;\nuniform vec3 lighting_uViewPos;\nuniform mat4 lighting_uShadowLightPVMatrix;\n",e.LIGHT_VARYING="\n\nvarying vec3 lighting_vLightWeight;\nvarying vec3 lighting_vLightSpecular;\nvarying vec3 lighting_vShadowWeight;\nvarying vec3 lighting_vShadowSpecular;\nvarying mediump vec4 lighting_vShadowInfo;\nvarying vec2 lighting_vToneMapping;\n",e.LIGHT_VERTEX="\nvec3 lighting_vPosition;\nvec3 lighting_vNormal;\nvec3 lighting_vViewDir;\nvec2 lighting_vObjSpec;\n\n\nfloat lighting_calcDiffuse(vec3 lightDir) {\n\treturn max(dot(lightDir, lighting_vNormal), 0.);\n}\n\n\nfloat lighting_calcSpecular(vec3 lightDir) {\n\t\n\t\n\t\n\t\n\tvec3 halfwayDir = normalize(lighting_vViewDir + lightDir);\n\tfloat reflectStrength = max(dot(halfwayDir, lighting_vNormal), 0.);\n\n\treturn pow(reflectStrength, lighting_vObjSpec.y) * lighting_vObjSpec.x;\n}\n\n\nvoid lighting_setObjInfo(vec3 position, vec3 normal, mat4 modelMatrix, vec2 objSpec) {\n\tlighting_vPosition = (modelMatrix * vec4(position, 1.)).xyz;\n\tlighting_vNormal = normalize(modelMatrix * vec4(normal, 0.)).xyz;\n\tlighting_vViewDir = normalize(lighting_uViewPos - lighting_vPosition);\n\tlighting_vObjSpec = objSpec;\n\tlighting_vToneMapping = lighting_uAdvanced.xy;\n\t\n\tvec4 posInLightView = lighting_uShadowLightPVMatrix * vec4(lighting_vPosition, 1.0);\n\tvec3 normalized = (posInLightView.xyz/ posInLightView.w + 1.0) / 2.0;\n\tlighting_vShadowInfo = vec4(normalized, lighting_uAdvanced.z);\n}\n\n\nvoid lighting_calcDirLights(float enable) {\n\tvec3 diffuse = vec3(0.0);\n\tvec3 specular = vec3(0.0);\n\tvec3 shadowDiffuse = vec3(0.0);\n\tvec3 shadowSpecular = vec3(0.0);\n\n\tfor (int i = 0; i < LIGHT_MAX; i++) {\n\t\tfloat isValid = (1.0 - step(float(lighting_uLightCount.x), float(i))) * enable;\n\n\t\t\n\t\tdiffuse += mix(\n\t\t\tvec3(0.0),\n\t\t\tlighting_calcDiffuse(lighting_uDirDirection[i]) * lighting_uDirColor[i],\n\t\t\tisValid\n\t\t);\n\t\t\n\t\t\n\t\tspecular += mix(\n\t\t\tvec3(0.0),\n\t\t\tlighting_calcSpecular(lighting_uDirDirection[i]) * lighting_uDirColor[i],\n\t\t\tisValid\n\t\t);\n\n\t\t\n\t\tfloat isShadowLight = isValid * step(0., lighting_uAdvanced.z) * float((float(i) == lighting_uAdvanced.w));\n\t\tshadowDiffuse += mix(\n\t\t\tvec3(0.0),\n\t\t\tlighting_calcDiffuse(lighting_uDirDirection[i]) * lighting_uDirColor[i],\n\t\t\tisShadowLight\n\t\t);\n\t\tshadowSpecular += mix(\n\t\t\tvec3(0.0),\n\t\t\tlighting_calcSpecular(lighting_uDirDirection[i]) * lighting_uDirColor[i],\n\t\t\tisShadowLight\n\t\t);\n\t}\n\n\tlighting_vLightWeight += diffuse * lighting_uBase.z;\n\tlighting_vLightSpecular += specular * lighting_uBase.w;\n\tlighting_vShadowWeight = shadowDiffuse * lighting_uBase.z * lighting_uAdvanced.z;\n\tlighting_vShadowSpecular = shadowSpecular * lighting_uBase.w * lighting_uAdvanced.z;\n}\n\n\nvoid lighting_calcPointLights(float enable) {\n\tvec3 diffuse = vec3(0.0);\n\tvec3 specular = vec3(0.0);\n\n\tfor (int i = 0; i < LIGHT_MAX; i++) {\n\t\tfloat isValid = (1.0 - step(float(lighting_uLightCount.y), float(i))) * enable;\n\n\t\tvec3 posToLight = lighting_uPointPosition[i] - lighting_vPosition;\n\t\tvec3 direction = normalize(posToLight);\n\t\tfloat distance = length(posToLight);\n\t\t\n\t\t\n\t\tfloat attenuation = 1.0 / dot(vec3(1.0, 0.014, 0.0007), vec3(1.0, distance, distance * distance));\n\n\t\t\n\t\tdiffuse += mix(\n\t\t\tvec3(0.0),\n\t\t\tlighting_calcDiffuse(direction) * lighting_uPointColor[i] * attenuation,\n\t\t\tisValid\n\t\t);\n\t\t\n\t\t\n\t\tspecular += mix(\n\t\t\tvec3(0.0),\n\t\t\tlighting_calcSpecular(direction) * lighting_uPointColor[i] * attenuation,\n\t\t\tisValid\n\t\t);\n\t}\n\n\tlighting_vLightWeight += diffuse * lighting_uBase.z;\n\tlighting_vLightSpecular += specular * lighting_uBase.w;\n}\n\n\nvoid lighting_apply_on_vertex(vec3 position, vec3 normal, mat4 modelMatrix, vec2 objSpec) {\n\tlighting_setObjInfo(position, normal, modelMatrix, objSpec);\n\n\t\n\tlighting_vLightWeight = mix(\n\t\tvec3(1.0),\n\t\tlighting_uAmbientColor * lighting_uBase.y,\n\t\tlighting_uBase.x\n\t);\n\tlighting_vLightSpecular = vec3(0.0);\n\tlighting_vShadowWeight = vec3(0.0);\n\tlighting_vShadowSpecular = vec3(0.0);\n\n\t\n\tlighting_calcDirLights(lighting_uBase.x);\n\tlighting_calcPointLights(lighting_uBase.x);\n}\n\nvoid lighting_apply_on_vertex(vec3 position, vec3 normal, mat4 modelMatrix) {\n\tlighting_apply_on_vertex(position, normal, modelMatrix, vec2(0.4, 32.0));\n}\n",e.LIGHT_FRAG="\nuniform sampler2D lighting_uShadowSampler;\n\nvec3 toneMapping(vec3 hdrColor, float exposure) {\n\tconst float gamma = 2.2;\n\n\n\tvec3 mapped = vec3(1.0) - exp(-hdrColor * exposure);\n\t\n\n\tmapped = pow(mapped, vec3(1.0 / gamma));\n\t\n\treturn mapped;\n}\n\nfloat getShadowSceneDepth() {\n\treturn texture2D(lighting_uShadowSampler, lighting_vShadowInfo.xy).x;\n}\n\nfloat isInShadow() {\n\tfloat sceneDepth = getShadowSceneDepth();\n\treturn mix(\n\t\t0.0,\n\t\tstep(0.0005, abs(lighting_vShadowInfo.z - sceneDepth)) * step(sceneDepth, lighting_vShadowInfo.z),\n\t\tstep(0., lighting_vShadowInfo.w)\n\t);\n}\n\n"+r+"\n"},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(272),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=o.default[1]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CONTROL_POSITION_STYLE=e.CONTROL_POSITION=e.DEFAULT_CONTROL_ID=void 0;var i=n(160),o=function(t){return t&&t.__esModule?t:{default:t}}(i),r=(e.DEFAULT_CONTROL_ID={SCALE:"scale",ZOOM:"zoom",FLOOR:"floor",LOGO:"logo",ROTATION:"rotation"},e.CONTROL_POSITION={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,CENTER_LEFT:3,CENTER:4,CENTER_RIGHT:5,BOTTOM_LEFT:6,BOTTOM_CENTER:7,BOTTOM_RIGHT:8});e.CONTROL_POSITION_STYLE=function(){var t={};return(0,o.default)(r).forEach(function(e){var n=e%3,i=Math.floor(e/3),o="position: absolute;";switch(i){case 0:o+="top:0px;";break;case 1:o+="top:50%;";break;case 2:o+="bottom:0px;"}switch(n){case 0:o+="left:0px;";break;case 1:o+="left:50%;";break;case 2:o+="right:0px;"}o+="transform: translate("+(1===n?"-50%":"0")+", "+(1===i?"-50%":"0")+");",t[e]=o}),t}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){return Math.sqrt(t*t+e*e)}function r(t,e){var n=t.pageX,i=t.pageY;if(t.touches){var o=t.touches[e||0];n=o.pageX,i=o.pageY}return{x:n,y:i}}function a(t){return t}Object.defineProperty(e,"__esModule",{value:!0}),e.Finger=void 0;var l=n(32),s=i(l),u=n(16),c=i(u),f=n(2),d=i(f),h=n(0),v=i(h),p=n(1),m=i(p),_=n(4),g=i(_),y=n(3),x=i(y),b=n(17),S=n(263),w={start:["mousedown","touchstart"],move:["mousemove","touchmove"],end:["mouseup","touchend"],cancel:["","touchcancel"]},E=0,T=(e.Finger=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,v.default)(this,e);var i=(0,g.default)(this,(e.__proto__||(0,d.default)(e)).call(this));if(!t)throw new Error("element is invalid");return i.options=n,i.identifier="Finger__"+E,E+=1,i.touched=!1,i.panning=!1,i.element=t,i.element.__Finger__identifier=i.identifier,i.handlers=[],i.isDoubleTap=!1,i.y1=null,i.x1=i.y1,i.y2=null,i.x2=i.y2,i.deltaTime=null,i.lastStartTime=null,i.panSpeedStartTime=null,i.panSpeedStartPos=null,i.now=null,i.tapTimeout=null,i.holdTimeout=null,i.swipeTimeout=null,i.startVector=null,i.startDistance=null,i.init(),i}return(0,x.default)(e,t),(0,m.default)(e,[{key:"init",value:function(){var t=this,e="ontouchstart"in document?1:0,n=(0,c.default)(w).forEach(function(n){w[n][e]&&(0,b.on)(t.element,w[n][e],T[n],t)});this.handlers.concat(n)}},{key:"destroy",value:function(){clearTimeout(this.tapTimeout),clearTimeout(this.holdTimeout),clearTimeout(this.swipeTimeout),this.removeAllListeners("touch-start"),this.removeAllListeners("multi-touch-start"),this.removeAllListeners("hold"),this.removeAllListeners("pinch"),this.removeAllListeners("rotate"),this.removeAllListeners("pan-start"),this.removeAllListeners("pan"),this.removeAllListeners("pan-end"),this.removeAllListeners("swipe"),this.removeAllListeners("tap"),this.removeAllListeners("doubletap"),this.removeAllListeners("touch-end"),this.removeAllListeners("multi-touch-end"),this.removeAllListeners("touch-cancel"),this.identifier=null,delete this.element.__Finger__identifier,this.handlers.forEach(function(t){t&&t.remove&&t.remove()}),this.touched=!1,this.handlers=[],this.isDoubleTap=!1,this.y1=null,this.x1=this.y1,this.y2=null,this.x2=this.y2,this.deltaTime=null,this.lastStartTime=null,this.now=null,this.tapTimeout=null,this.holdTimeout=null,this.swipeTimeout=null,this.startVector=null,this.startDistance=null}}]),e}(S),{start:function(t){var e=this;if(t&&t.target){this.touched=!0,this.now=Date.now(),this.deltaTime=this.now-(this.lastStartTime||this.now);var n=r(t);"number"==typeof this.x1&&"number"==typeof this.y1&&(this.isDoubleTap=this.deltaTime<300&&Math.abs(n.x-this.x1)<10&&Math.abs(n.y-this.y1)<10),this.x1=n.x,this.y1=n.y;var i=a(t);if(this.emit("touch-start",i),t.touches&&t.touches.length>1){var l=r(t,0),u=r(t,1);this.startVector=[u.x-l.x,u.y-l.y],this.startDistance=o.apply(void 0,(0,s.default)(this.startVector)),i.vector=this.startVector,i.vectorDistance=this.startDistance,clearTimeout(this.holdTimeout),this.emit("multi-touch-start",i)}this.lastStartTime=this.now,this.holdTimeout=setTimeout(function(){e.emit("hold",i)},750),this.options.stopPropagation&&t.stopPropagation()}},move:function(t){if(t&&t.target&&this.touched){var e=r(t),n=a(t);if(this.isDoubleTap=!1,clearTimeout(this.holdTimeout),null!==this.x2?(n.deltaX=e.x-this.x2,n.deltaY=e.y-this.y2):(n.deltaX=0,n.deltaY=0),t.touches&&t.touches.length>1&&this.startVector&&null!==this.startVector.x){var i=r(t,0),l=r(t,1),s=[l.x-i.x,l.y-i.y],u=o.apply(void 0,s),c=u/this.startDistance,f=Math.acos((this.startVector[0]*s[0]+this.startVector[1]*s[1])/(u*this.startDistance));f=s[0]*this.startVector[1]-this.startVector[0]*s[1]>=0?f:-f,Math.abs(c-1)>.01&&(n.scale=c,this.emit("pinch",n)),0!==f&&(n.angle=f,this.emit("rotate",n)),t.preventDefault()}else if(this.touched&&(0!==n.deltaY||0!==n.deltaX))if(this.panning){this.emit("pan",n);var d=Date.now();d-this.panSpeedStartTime>300&&(this.panSpeedStartTime=d,this.panSpeedStartPos=e)}else this.emit("pan-start",n),this.panning=!0,this.panSpeedStartTime=Date.now(),this.panSpeedStartPos=e;this.options.preventDefaultMove&&t.preventDefault(),this.x2=e.x,this.y2=e.y,this.options.stopPropagation&&t.stopPropagation()}},end:function(t){var e=this;if(t&&t.target){clearTimeout(this.holdTimeout),this.now=Date.now();var n=this.x2-this.x1,i=this.y2-this.y1,o=null===this.x2||Math.abs(n)<10&&Math.abs(i)<10,r=this.now-this.lastStartTime<200&&o,l=a(t);if(null!==this.x2&&null!==this.y2&&this.panning){var s=Math.abs(n)>Math.abs(i)?n>0?"RIGHT":"LEFT":i>0?"DOWN":"TOP",u=0,c=0;if(this.now-this.panSpeedStartTime<300){var f=this.x2-this.panSpeedStartPos.x,d=this.y2-this.panSpeedStartPos.y,h=this.now-this.panSpeedStartTime;c=f/h,u=d/h}l.swipeDirection=s,l.speedX=c,l.speedY=u,l.deltaX=n,l.deltaY=i,this.panning&&(this.emit("pan-end",l),this.panning=!1),this.swipeTimeout=setTimeout(function(){e.emit("swipe",l)})}else o&&r&&(this.tapTimeout=setTimeout(function(){e.emit("tap",l),e.isDoubleTap&&(e.emit("doubletap",l),e.isDoubleTap=!1)},0));this.emit("touch-end",l),t.touches&&t.touches.length>0&&t.touches.length<2&&this.emit("multi-touch-end",l),this.startDistance=null,this.startVector=[0,0],this.y2=null,this.x2=this.y2,this.touched=!1,this.options.preventDefaultEnd&&t.preventDefault(),this.options.stopPropagation&&t.stopPropagation()}},cancel:function(t){clearTimeout(this.tapTimeout),clearTimeout(this.holdTimeout),clearTimeout(this.swipeTimeout),this.touched=!1,this.emit("touch-cancel",t)}})},function(t,e,n){"use strict";function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r(t,e);return(0,o.toDom)(n)}Object.defineProperty(e,"__esModule",{value:!0}),e.Template=void 0,e.templeteToDom=i;var o=n(93),r=e.Template=function(){var t={},e=function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/[ ]/g,"&nbsp;")};return function(n,i){if("string"==typeof n){var o=t[n];if(!t[n]){var r=n.replace(/<%\s*([^=][^%>]*)\s*%>/g,function(){return"';"+arguments[1]+" tmp+='"}).replace(/<%=\s*([^%>]+)\s*%>/g,function(){return"' + strip("+arguments[1]+") +'"}).replace(/<%=\s*([^%>]+)\s*%>/g,function(){return"' + "+arguments[1]+"+ '"});r='var tmp = ""; with(obj){ tmp = \''+r+"'; } return tmp;",o=new Function("obj","strip",r),t[n]=o}return o(i,e)}}}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.TILE_STATE=void 0;var o=n(0),r=i(o),a=n(1),l=i(a),s=n(7),u=e.TILE_STATE={loading:"tile_loading",loaded:"tile_loaded",reloading:"tile_reloading",expired:"tile_expired",unloaded:"tile_unloaded",errored:"tile_errored"},c=function(){function t(e,n,i,o,a){(0,r.default)(this,t),this.coord=e,this.uid=s.uniqueId(),this.tileSize=n,this.sourceMaxZoom=i,this.transform=o,this.camera=a,this.state=u.loading}return(0,l.default)(t,[{key:"setData",value:function(t){this.state=u.loaded,this._data=t}},{key:"updateData",value:function(t){this.setData(t)}},{key:"getData",value:function(){return this._data}},{key:"getQueryData",value:function(t){return this._data?t&&""!==t?this._data[t]:this._data:null}},{key:"hasData",value:function(){return this.state===u.loaded||this.state===u.reloading||this.state===u.expired}},{key:"clear",value:function(){this.unloadData()}},{key:"unloadData",value:function(){this._data=null,this.state=u.unloaded}}]),t}();e.default=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(t.row>e.row){var n=t;t=e,e=n}return{x0:t.column,y0:t.row,x1:e.column,y1:e.row,dx:e.column-t.column,dy:e.row-t.row}}function r(t,e,n,i,o){var r=Math.max(n,Math.floor(e.y0)),a=Math.min(i,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var l=t;t=e,e=l}for(var s=t.dx/t.dy,u=e.dx/e.dy,c=t.dx>0,f=e.dx<0,d=r;d<a;d++){var h=s*Math.max(0,Math.min(t.dy,d+c-t.y0))+t.x0,v=u*Math.max(0,Math.min(e.dy,d+f-e.y0))+e.x0;o(Math.floor(v),Math.ceil(h),d)}}function a(t,e,n,i,a,l){var s=o(t,e),u=o(e,n),c=o(n,t),f=void 0;s.dy>u.dy&&(f=s,s=u,u=f),s.dy>c.dy&&(f=s,s=c,c=f),u.dy>c.dy&&(f=u,u=c,c=f),s.dy&&r(c,s,i,a,l),u.dy&&r(c,u,i,a,l)}Object.defineProperty(e,"__esModule",{value:!0});var l=n(16),s=i(l),u=n(0),c=i(u),f=n(1),d=i(f),h=n(20),v=i(h),p=function(){function t(e,n,i,o,r){(0,c.default)(this,t),this.z=e,this.x=n,this.y=i,this.w=o,this.tileSize=r||v.default.tileSize,this.id=n+"_"+i+"_"+e,this._children=null,this._parent=null}return(0,d.default)(t,[{key:"url",value:function(t){var e=this.getServiceCoord(),n=e.x,i=e.y,o=e.z;return t[(this.x+this.y)%t.length].replace("{z}",o).replace("{x}",n).replace("{y}",i).replace("{version}",v.default.dataVersion.tile)}},{key:"getServiceCoord",value:function(){var t=this.tileSize?v.default.tileSize/this.tileSize:1;return{x:this.x,y:Math.pow(2,this.z)*t-this.y-1,z:this.z}}},{key:"urlForBatchChildren",value:function(t){var e=this.children().map(function(t){return t.getServiceCoord()}).map(function(t){return t.z+"_"+t.x+"_"+t.y}).join();return t[(this.x+this.y)%t.length].replace("{tiles}",e).replace("{version}",v.default.dataVersion.tile)}},{key:"parent",value:function(e){return 0===this.z?null:this._parent?this._parent:(this.z>e?this._parent=new t(this.z-1,this.x,this.y,this.w):this._parent=new t(this.z-1,Math.floor(this.x/2),Math.floor(this.y/2),this.w),this._parent)}},{key:"ancestor",value:function(e){var n=Math.round(this.z)-Math.round(e);if(n<=0)return null;var i=Math.pow(2,n);return new t(this.z-n,Math.floor(this.x/i),Math.floor(this.y/i),this.w)}},{key:"setIconUrls",value:function(t){this._iconUrls=t}},{key:"children",value:function(e){if(this._children)return this._children;if(this.z>=e)return this._children=[new t(this.z+1,this.x,this.y,this.w)],this._children;var n=this.z+1,i=2*this.x,o=2*this.y;return this._children=[new t(n,i,o,this.w),new t(n,i+1,o,this.w),new t(n,i,o+1,this.w),new t(n,i+1,o+1,this.w)],this._children}},{key:"isVirtualCoord",value:function(){return this.z<=0}}],[{key:"converter",value:function(t){return new this(t.z,t.x,t.y,t.w,t.tileSize)}},{key:"cover",value:function(e,n){function i(n,i,a){var l=void 0,s=void 0,u=void 0,c=void 0;if(a>=0&&a<=o)for(l=n;l<i;l++)s=Math.floor(l/o),u=(l%o+o)%o,c=new t(e,u,a,s),r[c.id]=c}var o=1<<e,r={};return a(n[0],n[1],n[2],0,o,i),a(n[2],n[3],n[0],0,o,i),(0,s.default)(r).map(function(t){return r[t]})}}]),t}();e.default=p},,,,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(){return{state:0,transition:function(t){var e="overlay"===t;switch(this.state){case 0:this.state=e?1:0;break;case 1:this.state=e?1:2;break;case 2:this.state=e?1:0}}}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(14),a=i(r),l=n(2),s=i(l),u=n(0),c=i(u),f=n(1),d=i(f),h=n(4),v=i(h),p=n(21),m=i(p),_=n(3),g=i(_),y=n(7),x=i(y),b=n(404),S=i(b),w=n(17),E=i(w),T=n(550),I=i(T),A=n(84),k=i(A),P=n(38),M=n(51),L=i(M),C=n(77),N=function(t){function e(t){(0,c.default)(this,e);var n=(0,v.default)(this,(e.__proto__||(0,s.default)(e)).call(this));return t.geometries=t.geometries||[],n.id=t.id||x.default.uniqueId(),n.zIndex=t.zIndex>=0?t.zIndex:0,n.styles=t.styles||{},n.minZoom=t.minZoom,n.maxZoom=t.maxZoom,n._setGeometryType(),n._checkGeometries(t.geometries,n.styles),n._rawGeometries=n._assignIdToGeometry(t.geometries),n._idSet=n._updateGeometryIdSet(n._rawGeometries),n.geometries=n._transferFromGeometry(n._rawGeometries),n._checkStyles(n.styles),n._initialize(t),n._bubbleHandler=[],n._lastestOverlayMouseMoveObj=null,n._mousemoveFSM=o(),t.map&&n.setMap(t.map),(0,C.statCn)(n._className),n}return(0,g.default)(e,t),(0,d.default)(e,[{key:"_initialize",value:function(){}},{key:"_emitGeoEvent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.emit(t,(0,a.default)({},n,{geometry:e,type:t,target:this}))}},{key:"_bindBubbleHandler",value:function(){var t=this;this._bubbleHandler.push(E.default.on(this.map._bubbleMiddleware,"mousemove",function(e){2===t._mousemoveFSM.state&&(t._lastestOverlayMouseMoveObj=null,t._emitGeoEvent("mouseout",null,e),t._emitGeoEvent("hover",null,e)),t._mousemoveFSM.transition.call(t._mousemoveFSM,"map")})),this._bubbleHandler.push(E.default.on(this.map._bubbleMiddleware,"action",function(e){if(e&&e.layerId===t.id){var n=t._rawGeometries[e.objectIndex];t._emitGeoEvent(e.eventType,n,e.mapEvent),"mousemove"===e.eventType&&(t._mousemoveFSM.transition.call(t._mousemoveFSM,"overlay"),t._lastestOverlayMouseMoveObj?n!==t._lastestOverlayMouseMoveObj&&t._emitGeoEvent("hover",n,e.mapEvent):(t._emitGeoEvent("mouseover",n,e.mapEvent),t._emitGeoEvent("hover",n,e.mapEvent)),t._lastestOverlayMouseMoveObj=n)}})),this._bubbleHandler.push(E.default.on(this.map,"destroy",function(){t.setMap(null)}))}},{key:"_removeBubbleHander",value:function(){this._bubbleHandler.forEach(function(t){t&&t.remove&&t.remove()})}},{key:"_setGeometryType",value:function(){}},{key:"_createLayer",value:function(){this.layer=new I.default({map:this.map,id:this.id,type:this._layerType,zIndex:this.zIndex,minZoom:this.minZoom,maxZoom:this.maxZoom,sourceData:this._getRenderSourceData()})}},{key:"_removeLayer",value:function(){this.layer&&this.layer.setMap(null)}},{key:"setVisible",value:function(t){return t=Boolean(t),this.layer&&this.layer.setVisible(t),this}},{key:"setMap",value:function(t){return null===t||t instanceof window.TMap.Map?t===this.map?this:(t?this.map?(this.setMap(null),this.setMap(t)):this.id&&t.getLayer(this.id)?console.error("Map中已存在id为"+this.id+"的图层，无法重复添加"):(this.map=t,this._bindBubbleHandler(),this._createLayer()):(this._removeBubbleHander(),this._removeLayer(),this.map=null),this):(console.error("所传入参数并非TMap.Map的实例！"),this)}},{key:"setGeometries",value:function(t){return Array.isArray(t)?t===this._rawGeometries?this:((0,m.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"setGeometries",this).call(this,t,this.styles),this.map&&this.map.getSource(this.id).setData(this._getRenderSourceData()),this):(new P.BaseTypeError("geometries","Array",t).error(),this)}},{key:"setStyles",value:function(t){return t?(t.hasOwnProperty||new P.BaseTypeError("styles","Object",t).error(),this._checkStyles(t),t===this.styles?this:(this.styles=t,this.map&&this.map.getSource(this.id).setData(this._getRenderSourceData()),this)):this}},{key:"setZIndex",value:function(t){return L.default.isNumber(t)?t<0?(console.error("zIndex希望设置为非负数,实际值为: "+t),this):(this.layer&&this.layer.setZIndex(t),this.zIndex=t,this):(new P.BaseTypeError("zIndex","Number",t).error(),this)}},{key:"getMap",value:function(){return this.map}},{key:"getVisible",value:function(){return this.layer&&this.layer.visible}},{key:"getStyles",value:function(){return(0,a.default)({},this.styles)}},{key:"getZIndex",value:function(){return this.zIndex}},{key:"updateGeometries",value:function(t,n){return t?((0,m.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"updateGeometries",this).call(this,t,n),this.map&&this.map.getSource(this.id).setData(this._getRenderSourceData()),this):this}},{key:"add",value:function(t){return(0,m.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"add",this).call(this,t)}},{key:"remove",value:function(t){return(0,m.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"remove",this).call(this,t)}},{key:"destroy",value:function(){(0,m.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"destroy",this).call(this),this.removeAllListeners(),this.setMap(null),this.styles=null,this.id=null,this.zIndex=null,this.minZoom=null,this.maxZoom=null}},{key:"getGeometryType",value:function(){return this._geometryType}},{key:"snap",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=arguments[2];this._snapTargets||(this._updateSnapTargets(),this.on("geometry_changed",this._updateSnapTargets.bind(this)));var i=null;return i=this._snapToPoints(t,e,n),i||(i=this._snapToSegments(t,e,n)),i}},{key:"_snapToPoints",value:function(t,e,n){var i=this._snapTargets.points,o=this.map;n&&!n.isEmpty()&&(i=i.filter(function(t){return n.contains(t)}));var r=o.projectToContainer(t),a=null,l=1/0;return i.forEach(function(t){var n=o.projectToContainer(t),i=r.dist(n);i<e&&i<l&&(a=t,l=i)}),a?{latLng:a,dist:l}:null}},{key:"_snapToSegments",value:function(t,e,n){var i=this._snapTargets.segments,o=this.map;n&&!n.isEmpty()&&(i=i.filter(function(t){var e=new k.default;return e.extend(t[0]),e.extend(t[1]),n.intersects(e)}));for(var r=o.projectToContainer(t),a=null,l=1/0,s=0;s<i.length;s++){var u=i[s],c=o.projectToContainer(u[0]),f=o.projectToContainer(u[1]),d=f.sub(c),h=r.sub(c),v=h.dot(d)/d.lengthSq();if(v>0&&v<1){var p=d.mult(v),m=h.sub(p),_=m.length();_<e&&_<l&&(a=o.unprojectFromContainer(c.add(p)),l=_)}}return a?{latLng:a,dist:l}:null}},{key:"_updateSnapTargets",value:function(){this._snapTargets={points:this._getAllPoints(),segments:this._getAllSegments()}}},{key:"_getAllPoints",value:function(){return[]}},{key:"_getAllSegments",value:function(){return[]}},{key:"_getRenderableGeometries",value:function(){var t=this;return this.geometries.filter(function(e){return e&&t.styles}).map(function(e){var n=(0,a.default)({},e);return t.styles[e.styleId]||(n.styleId="default"),n.rank=n.rank||0,n}).sort(function(t,e){return t.rank-e.rank})}},{key:"_getRenderSourceData",value:function(){return{type:this._geometryType,styles:this.styles,geometries:this._getRenderableGeometries()}}},{key:"_checkStyles",value:function(t){t.default||(t.default=this._getDefaultStyle())}}]),e}(S.default);e.default=N},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){if(4===t.length){for(var e="#",n=1;n<4;n+=1)e+=t.slice(n,n+1).concat(t.slice(n,n+1));t=e}var i=t.slice(1);return{r:parseInt(i.slice(0,2),16),g:parseInt(i.slice(2,4),16),b:parseInt(i.slice(4),16)}}function r(t){return t=t.replace(/rgb/,"rgba").replace(")",",")+"1)",a(t)}function a(t){return t=t.replace(/rgba\(/,"").replace(")","").split(","),{r:parseInt(t[0]),g:parseInt(t[1]),b:parseInt(t[2]),a:parseFloat(t[3])}}Object.defineProperty(e,"__esModule",{value:!0});var l=n(0),s=i(l),u=n(1),c=i(u),f=n(51),d=i(f),h=n(661),v=d.default.isString,p=d.default.isArray,m=d.default.isUndefined,_=function(){function t(e,n){if((0,s.default)(this,t),this.r=1,this.g=1,this.b=1,this.a=1,v(e))this.turnStr2Rgba(e);else if(p(e)){var i=n&&n.max||255;this.r=e[0]/i,this.g=e[1]/i,this.b=e[2]/i,this.a=m(e[3])?1:e[3]}}return(0,c.default)(t,[{key:"turnStr2Rgba",value:function(t){t=t.toLowerCase();var e=h.HEX_REG,n=h.RGB_REG,i=h.RGBA_REG,l=null;e.test(t)?l=o(t):n.test(t)?l=r(t):i.test(t)&&(l=a(t)),l&&(this.r=l.r/255,this.g=l.g/255,this.b=l.b/255,this.a=m(l.a)?1:l.a)}},{key:"toArray",value:function(){return[this.r,this.g,this.b,this.a]}},{key:"toUpArray",value:function(){return this.toArray().map(function(t){return 255*t})}},{key:"toString",value:function(){return"rgba("+[""+Math.round(255*this.r),""+Math.round(255*this.g),""+Math.round(255*this.b),""+this.a].join(",")+")"}}]),t}();e.default=_},function(t,e,n){"use strict";function i(t){return[t+1&255,t+1>>8&255,t+1>>8>>8&255]}function o(t){var e=(0,a.default)(t,3);return e[0]+256*e[1]+65536*e[2]-1}Object.defineProperty(e,"__esModule",{value:!0});var r=n(47),a=function(t){return t&&t.__esModule?t:{default:t}}(r);e.encodePickingColor=i,e.decodePickingColor=o},function(t,e,n){t.exports={default:n(326),__esModule:!0}},function(t,e,n){t.exports={default:n(330),__esModule:!0}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(27),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t){return function(){var e=t.apply(this,arguments);return new o.default(function(t,n){function i(r,a){try{var l=e[r](a),s=l.value}catch(t){return void n(t)}if(!l.done)return o.default.resolve(s).then(function(t){i("next",t)},function(t){i("throw",t)});t(s)}return i("next")})}}},function(t,e,n){t.exports=n(322)},function(t,e,n){n(66),n(36),n(39),n(249),n(255),n(254),n(253),t.exports=n(5).Map},function(t,e,n){n(250),t.exports=n(5).Number.isNaN},function(t,e,n){n(251),t.exports=n(5).Object.assign},function(t,e,n){n(66),n(36),n(39),n(252),n(256),n(257),t.exports=n(5).Promise},function(t,e,n){var i=n(58);t.exports=function(t,e){var n=[];return i(t,!1,n.push,n,e),n}},function(t,e,n){var i=n(11),o=n(116),r=n(9)("species");t.exports=function(t){var e;return o(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!o(e.prototype)||(e=void 0),i(e)&&null===(e=e[r])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){var i=n(244);t.exports=function(t,e){return new(i(t))(e)}},function(t,e){t.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var i=n(10),o=n(149).set,r=i.MutationObserver||i.WebKitMutationObserver,a=i.process,l=i.Promise,s="process"==n(48)(a);t.exports=function(){var t,e,n,u=function(){var i,o;for(s&&(i=a.domain)&&i.exit();t;){o=t.fn,t=t.next;try{o()}catch(i){throw t?n():e=void 0,i}}e=void 0,i&&i.enter()};if(s)n=function(){a.nextTick(u)};else if(!r||i.navigator&&i.navigator.standalone)if(l&&l.resolve){var c=l.resolve(void 0);n=function(){c.then(u)}}else n=function(){o.call(i,u)};else{var f=!0,d=document.createTextNode("");new r(u).observe(d,{characterData:!0}),n=function(){d.data=f=!f}}return function(i){var o={fn:i,next:void 0};e&&(e.next=o),t||(t=o,n()),e=o}}},function(t,e,n){var i=n(10),o=i.navigator;t.exports=o&&o.userAgent||""},function(t,e,n){"use strict";var i=n(177),o=n(89);t.exports=n(141)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=i.getEntry(o(this,"Map"),t);return e&&e.v},set:function(t,e){return i.def(o(this,"Map"),0===t?0:t,e)}},i,!0)},function(t,e,n){var i=n(8);i(i.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var i=n(8);i(i.S+i.F,"Object",{assign:n(213)})},function(t,e,n){"use strict";var i,o,r,a,l=n(44),s=n(10),u=n(22),c=n(63),f=n(8),d=n(11),h=n(53),v=n(96),p=n(58),m=n(148),_=n(149).set,g=n(247)(),y=n(106),x=n(143),b=n(248),S=n(144),w=s.TypeError,E=s.process,T=E&&E.versions,I=T&&T.v8||"",A=s.Promise,k="process"==c(E),P=function(){},M=o=y.f,L=!!function(){try{var t=A.resolve(1),e=(t.constructor={})[n(9)("species")]=function(t){t(P,P)};return(k||"function"==typeof PromiseRejectionEvent)&&t.then(P)instanceof e&&0!==I.indexOf("6.6")&&-1===b.indexOf("Chrome/66")}catch(t){}}(),C=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},N=function(t,e){if(!t._n){t._n=!0;var n=t._c;g(function(){for(var i=t._v,o=1==t._s,r=0;n.length>r;)!function(e){var n,r,a,l=o?e.ok:e.fail,s=e.resolve,u=e.reject,c=e.domain;try{l?(o||(2==t._h&&V(t),t._h=1),!0===l?n=i:(c&&c.enter(),n=l(i),c&&(c.exit(),a=!0)),n===e.promise?u(w("Promise-chain cycle")):(r=C(n))?r.call(n,s,u):s(n)):u(i)}catch(t){c&&!a&&c.exit(),u(t)}}(n[r++]);t._c=[],t._n=!1,e&&!t._h&&O(t)})}},O=function(t){_.call(s,function(){var e,n,i,o=t._v,r=R(t);if(r&&(e=x(function(){k?E.emit("unhandledRejection",o,t):(n=s.onunhandledrejection)?n({promise:t,reason:o}):(i=s.console)&&i.error&&i.error("Unhandled promise rejection",o)}),t._h=k||R(t)?2:1),t._a=void 0,r&&e.e)throw e.v})},R=function(t){return 1!==t._h&&0===(t._a||t._c).length},V=function(t){_.call(s,function(){var e;k?E.emit("rejectionHandled",t):(e=s.onrejectionhandled)&&e({promise:t,reason:t._v})})},B=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),N(e,!0))},F=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw w("Promise can't be resolved itself");(e=C(t))?g(function(){var i={_w:n,_d:!1};try{e.call(t,u(F,i,1),u(B,i,1))}catch(t){B.call(i,t)}}):(n._v=t,n._s=1,N(n,!1))}catch(t){B.call({_w:n,_d:!1},t)}}};L||(A=function(t){v(this,A,"Promise","_h"),h(t),i.call(this);try{t(u(F,this,1),u(B,this,1))}catch(t){B.call(this,t)}},i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=n(97)(A.prototype,{then:function(t,e){var n=M(m(this,A));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=k?E.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&N(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),r=function(){var t=new i;this.promise=t,this.resolve=u(F,t,1),this.reject=u(B,t,1)},y.f=M=function(t){return t===A||t===a?new r(t):o(t)}),f(f.G+f.W+f.F*!L,{Promise:A}),n(50)(A,"Promise"),n(147)("Promise"),a=n(5).Promise,f(f.S+f.F*!L,"Promise",{reject:function(t){var e=M(this);return(0,e.reject)(t),e.promise}}),f(f.S+f.F*(l||!L),"Promise",{resolve:function(t){return S(l&&this===a?A:this,t)}}),f(f.S+f.F*!(L&&n(118)(function(t){A.all(t).catch(P)})),"Promise",{all:function(t){var e=this,n=M(e),i=n.resolve,o=n.reject,r=x(function(){var n=[],r=0,a=1;p(t,!1,function(t){var l=r++,s=!1;n.push(void 0),a++,e.resolve(t).then(function(t){s||(s=!0,n[l]=t,--a||i(n))},o)}),--a||i(n)});return r.e&&o(r.v),n.promise},race:function(t){var e=this,n=M(e),i=n.reject,o=x(function(){p(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return o.e&&i(o.v),n.promise}})},function(t,e,n){n(145)("Map")},function(t,e,n){n(146)("Map")},function(t,e,n){var i=n(8);i(i.P+i.R,"Map",{toJSON:n(178)("Map")})},function(t,e,n){"use strict";var i=n(8),o=n(5),r=n(10),a=n(148),l=n(144);i(i.P+i.R,"Promise",{finally:function(t){var e=a(this,o.Promise||r.Promise),n="function"==typeof t;return this.then(n?function(n){return l(e,t()).then(function(){return n})}:t,n?function(n){return l(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var i=n(8),o=n(106),r=n(143);i(i.S,"Promise",{try:function(t){var e=o.f(this),n=r(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){var i=n(133),o=n(40)("toStringTag"),r="Arguments"==i(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,l;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),o))?n:r?i(e):"Object"==(l=i(e))&&"function"==typeof e.callee?"Arguments":l}},function(t,e,n){var i=n(133);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var i=n(28),o=n(120),r=n(40)("species");t.exports=function(t,e){var n,a=i(t).constructor;return void 0===a||void 0==(n=i(a)[r])?e:o(n)}},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(i[r]=!0)}for(o=0;o<e.length;o++){var a=e[o];"number"==typeof a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(t,e,n){"use strict";function i(t){console&&console.warn&&console.warn(t)}function o(){o.init.call(this)}function r(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function a(t,e,n,o){var a,l,s;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(l=t._events,void 0===l?(l=t._events=Object.create(null),t._eventsCount=0):(void 0!==l.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),l=t._events),s=l[e]),void 0===s)s=l[e]=n,++t._eventsCount;else if("function"==typeof s?s=l[e]=o?[n,s]:[s,n]:o?s.unshift(n):s.push(n),(a=r(t))>0&&s.length>a&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=s.length,i(u)}return t}function l(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,m(this.listener,this.target,t))}function s(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=l.bind(i);return o.listener=n,i.wrapFn=o,o}function u(t,e,n){var i=t._events;if(void 0===i)return[];var o=i[e];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?h(o):f(o,o.length)}function c(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function d(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function h(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}var v,p="object"==typeof Reflect?Reflect:null,m=p&&"function"==typeof p.apply?p.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};v=p&&"function"==typeof p.ownKeys?p.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var _=Number.isNaN||function(t){return t!==t};t.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var g=10;Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return g},set:function(t){if("number"!=typeof t||t<0||_(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");g=t}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||_(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return r(this)},o.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var r;if(e.length>0&&(r=e[0]),r instanceof Error)throw r;var a=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw a.context=r,a}var l=o[t];if(void 0===l)return!1;if("function"==typeof l)m(l,this,e);else for(var s=l.length,u=f(l,s),n=0;n<s;++n)m(u[n],this,e);return!0},o.prototype.addListener=function(t,e){return a(this,t,e,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(t,e){return a(this,t,e,!0)},o.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.on(t,s(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.prependListener(t,s(this,t,e)),this},o.prototype.removeListener=function(t,e){var n,i,o,r,a;if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);if(void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,r=n.length-1;r>=0;r--)if(n[r]===e||n[r].listener===e){a=n[r].listener,o=r;break}if(o<0)return this;0===o?n.shift():d(n,o),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,a||e)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(t){var e,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var o,r=Object.keys(n);for(i=0;i<r.length;++i)"removeListener"!==(o=r[i])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},o.prototype.listeners=function(t){return u(this,t,!0)},o.prototype.rawListeners=function(t){return u(this,t,!1)},o.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):c.call(t,e)},o.prototype.listenerCount=c,o.prototype.eventNames=function(){return this._eventsCount>0?v(this._events):[]}},function(t,e){function n(t,e){for(var n=0;n<t.length;n++){var i=t[n],o=d[i.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](i.parts[r]);for(;r<i.parts.length;r++)o.parts.push(s(i.parts[r],e))}else{for(var a=[],r=0;r<i.parts.length;r++)a.push(s(i.parts[r],e));d[i.id]={id:i.id,refs:1,parts:a}}}}function i(t){for(var e=[],n={},i=0;i<t.length;i++){var o=t[i],r=o[0],a=o[1],l=o[2],s=o[3],u={css:a,media:l,sourceMap:s};n[r]?n[r].parts.push(u):e.push(n[r]={id:r,parts:[u]})}return e}function o(t,e){var n=p(),i=g[g.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),g.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function r(t){t.parentNode.removeChild(t);var e=g.indexOf(t);e>=0&&g.splice(e,1)}function a(t){var e=document.createElement("style");return e.type="text/css",o(t,e),e}function l(t){var e=document.createElement("link");return e.rel="stylesheet",o(t,e),e}function s(t,e){var n,i,o;if(e.singleton){var s=_++;n=m||(m=a(e)),i=u.bind(null,n,s,!1),o=u.bind(null,n,s,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=l(e),i=f.bind(null,n),o=function(){r(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(e),i=c.bind(null,n),o=function(){r(n)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else o()}}function u(t,e,n,i){var o=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=y(e,o);else{var r=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(r,a[e]):t.appendChild(r)}}function c(t,e){var n=e.css,i=e.media;if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function f(t,e){var n=e.css,i=e.sourceMap;i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([n],{type:"text/css"}),r=t.href;t.href=URL.createObjectURL(o),r&&URL.revokeObjectURL(r)}var d={},h=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}},v=h(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),p=h(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,_=0,g=[];t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");e=e||{},void 0===e.singleton&&(e.singleton=v()),void 0===e.insertAt&&(e.insertAt="bottom");var o=i(t);return n(o,e),function(t){for(var r=[],a=0;a<o.length;a++){var l=o[a],s=d[l.id];s.refs--,r.push(s)}if(t){n(i(t),e)}for(var a=0;a<r.length;a++){var s=r[a];if(0===s.refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete d[s.id]}}}};var y=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.PICK_UNIFORM="\nuniform float picking_usePickingColor;\nuniform vec3 picking_selectedPickingColor;\n",e.PICK_FUNCTION="\n    vec4 picking_getFinalColor(vec4 vertexColor, vec3 instancePickingColors) {\n        \n        return mix(\n            vertexColor,\n\n            vec4(instancePickingColors.rgb,  255.0).rgba / 255.0,\n\n            picking_usePickingColor);\n    }\n"},,,,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!_.has(t)){var n=new l.default(function(t){if(!f.default||p.default.isLocal)return void t(null);var n=e.subkey,i=e.subpid,o=["key="+f.default,"pid="+document.domain,"channel=0"];n&&o.push("key2="+n,"pid2="+i);var r=h.default.checkKeySrc+"?"+o.join("&");m(null,r,function(e){var i=null;e&&e.info&&0===e.info.error?(i=e.detail&&e.detail.cfg)&&(i.subkey=n):console.error("鉴权失败："+e.info.msg),t(i)},function(){console.error("鉴权失败：网络请求失败。"),t(null)})});_.set(t,n)}return _.get(t)}function r(t){_.delete(t)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(27),l=i(a),s=n(113),u=i(s);e.checkKey=o,e.revokeKeyCheck=r;var c=n(512),f=i(c),d=n(20),h=i(d),v=n(220),p=i(v),m=n(410).send,_=new u.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(223),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=o.default[0]},function(t,e,n){"use strict";function i(t,e){t.loadScriptTime=e,s[0]=t;for(var n in t)r.hasOwnProperty(n)&&(r[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0});var o=n(83),r=n(20),a=2*Math.PI*6378136.49,l=[6378136.49,a],s=[{},l],u=self[o]&&self[o].__load;u&&u(i),e.default=s},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){var i="highlightRegion"===t?T:983040&t,o=n[i]&&n[i][t];return o?f(o,e):P[t]?P[t]:null}function r(t){var e={};return e[T]=a(t.regionStyles),e[I]=l(t.labelStyles),e[E]=s(t.lineStyles),e[w]=u(t.pointStyles),e[A]=c(t.arrowStyles),e[T].highlightRegion=[{minScale:16,maxScale:22,fillStyle:"rgba(0, 0, 0, 0.1)",strokeStyle:"#888888",lineWidth:.5}],e}function a(t){var e={};return(0,h.default)(t).forEach(function(n){e[n]={},e[n]=t[n].map(function(t){return{minScale:t.minScaleVal,maxScale:t.maxScaleVal,topStyle:(0,b.convertColorToHex)(t.top_color),bottomStyle:(0,b.convertColorToHex)(t.bottom_color),insideStyle:(0,b.convertColorToHex)(t.bottom_color),outsideStyle:(0,b.convertColorToHex)(t.outside_color),lineWidth:t.sidewidth}})}),e}function l(t){var e={};return(0,h.default)(t).forEach(function(n){e[n]={},e[n]=t[n].map(function(t){var e=(0,b.getFontStyle)(t.effect),n=(0,b.getFontWeight)(),i=t.font_size,o=(0,b.getFontFamily)(t.font_name);return{minScale:t.minScaleVal,maxScale:t.maxScaleVal,effect:t.effect,font:e+" "+n+" "+i+"px "+o,fontStyle:e,fontWeight:n,fontSize:i,fontFamily:o,fillStyle:(0,b.convertColorToHex)(t.font_color),strokeStyle:(0,b.convertColorToHex)(t.background_color),lineWidth:t.effect_size}})}),e}function s(t){var e={};return(0,h.default)(t).forEach(function(n){e[n]={},e[n]=t[n].map(function(t){return{minScale:t.minScaleVal,maxScale:t.maxScaleVal,fillStyle:(0,b.convertColorToHex)(t.color_fill),fillWidth:t.width,fillLineCap:"round",fillLineJoin:"bevel",strokeStyle:(0,b.convertColorToHex)(t.color_side),strokeWidth:t.sidewidth,strokeLineCap:"butt",strokeLineJoin:"bevel"}})}),e}function u(t){var e={};return(0,h.default)(t).forEach(function(n){e[n]={},e[n]=t[n].map(function(t){return{minScale:t.minScaleVal,maxScale:t.maxScaleVal,icon_offset:t.icon_offset,labelid:t.labelid,density:t.density}})}),e}function c(){return{}}function f(t,e){var n=null;return t.some(function(t){return n=t,e>=t.minScale&&e<=t.maxScale||22===e&&21===t.maxScale})&&n||null}Object.defineProperty(e,"__esModule",{value:!0}),e.IndoorStyleMap=e.customStyle=e.ARROW_NUM=e.LABEL_NUM=e.REGION_NUM=e.LINE_NUM=e.POINT_NUM=void 0;var d=n(16),h=i(d),v=n(113),p=i(v),m=n(0),_=i(m),g=n(1),y=i(g);e.getStyle=o;var x=n(536),b=n(537),S=null,w=e.POINT_NUM=65536,E=e.LINE_NUM=131072,T=e.REGION_NUM=196608,I=e.LABEL_NUM=262144,A=e.ARROW_NUM=327680,k=r(x.STYLE),P=e.customStyle={};e.IndoorStyleMap=function(){function t(){(0,_.default)(this,t),this.styleMap=new p.default,this.styleMap.set("default",k)}return(0,y.default)(t,[{key:"set",value:function(t,e){var n=r(e);this.styleMap.set(t,n)}},{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return this.has(t)?this.styleMap.get(t):this.styleMap.get("default")}},{key:"has",value:function(t){return this.styleMap.has(t)}},{key:"getFeatureStyle",value:function(t,e,n){return o(t,e,this.get(n))}}],[{key:"getInstance",value:function(){return null===S&&(S=new t),S}}]),t}()},function(t,e,n){"use strict";function i(t,e,n,i){n=n||2;var r=e&&e.length,l=r?e[0]*n:t.length,s=o(t,0,l,n,!0),u=[];if(!s)return u;var c=void 0,d=void 0,h=void 0,v=void 0,p=void 0,m=void 0,_=void 0;if(r&&(s=f(t,e,s,n)),t.length>80*n){var g=(0,N.default)(t,2);h=g[0],v=g[1],c=h,d=v;for(var y=n;y<l;y+=n)p=t[y],m=t[y+1],p<c&&(c=p),m<d&&(d=m),p>h&&(h=p),m>v&&(v=m);_=Math.max(h-c,v-d)}return a(s,u,n,c,d,_,void 0,i),u}function o(t,e,n,i,o){var r=void 0,a=void 0;if(o===L(t,e,n,i)>0)for(r=e;r<n;r+=i)a=k(r,t[r],t[r+1],a);else for(r=n-i;r>=e;r-=i)a=k(r,t[r],t[r+1],a);return a&&S(a,a.next)&&(P(a),a=a.next),a}function r(t,e){if(!t)return t;e||(e=t);var n=t,i=void 0;do{if(i=!1,n.steiner||!S(n,n.next)&&0!==b(n.prev,n,n.next))n=n.next;else{if(P(n),e=n.prev,(n=e)===n.next)return null;i=!0}}while(i||n!==e);return e}function a(t,e,n,i,o,f,d,h){if(h=h||0,t){!d&&f&&p(t,i,o,f);for(var v=t,m=void 0,_=void 0;t.prev!==t.next;)if(m=t.prev,_=t.next,f?s(t,i,o,f):l(t))e.push(m.i/n+h),e.push(t.i/n+h),e.push(_.i/n+h),P(t),t=_.next,v=_.next;else if((t=_)===v){d?1===d?(t=u(t,e,n,h),a(t,e,n,i,o,f,2,h)):2===d&&c(t,e,n,i,o,f,h):a(r(t),e,n,i,o,f,1,h);break}}}function l(t){var e=t.prev,n=t,i=t.next;if(b(e,n,i)>=0)return!1;for(var o=t.next.next;o!==t.prev;){if(y(e.x,e.y,n.x,n.y,i.x,i.y,o.x,o.y)&&b(o.prev,o,o.next)>=0)return!1;o=o.next}return!0}function s(t,e,n,i){var o=t.prev,r=t,a=t.next;if(b(o,r,a)>=0)return!1;for(var l=o.x<r.x?o.x<a.x?o.x:a.x:r.x<a.x?r.x:a.x,s=o.y<r.y?o.y<a.y?o.y:a.y:r.y<a.y?r.y:a.y,u=o.x>r.x?o.x>a.x?o.x:a.x:r.x>a.x?r.x:a.x,c=o.y>r.y?o.y>a.y?o.y:a.y:r.y>a.y?r.y:a.y,f=_(l,s,e,n,i),d=_(u,c,e,n,i),h=t.nextZ;h&&h.z<=d;){if(h!==t.prev&&h!==t.next&&y(o.x,o.y,r.x,r.y,a.x,a.y,h.x,h.y)&&b(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(h=t.prevZ;h&&h.z>=f;){if(h!==t.prev&&h!==t.next&&y(o.x,o.y,r.x,r.y,a.x,a.y,h.x,h.y)&&b(h.prev,h,h.next)>=0)return!1;h=h.prevZ}return!0}function u(t,e,n,i){var o=t;do{var r=o.prev,a=o.next.next;!S(r,a)&&w(r,o,o.next,a)&&T(r,a)&&T(a,r)&&(e.push(r.i/n+i),e.push(o.i/n+i),e.push(a.i/n+i),P(o),P(o.next),t=a,o=t),o=o.next}while(o!==t);return o}function c(t,e,n,i,o,l,s){var u=t;do{for(var c=u.next.next;c!==u.prev;){if(u.i!==c.i&&x(u,c)){var f=A(u,c);return u=r(u,u.next),f=r(f,f.next),a(u,e,n,i,o,l,void 0,s),void a(f,e,n,i,o,l,void 0,s)}c=c.next}u=u.next}while(u!==t)}function f(t,e,n,i){var a=[],l=void 0,s=void 0,u=void 0,c=void 0,f=void 0;for(l=0,s=e.length;l<s;l++)u=e[l]*i,c=l<s-1?e[l+1]*i:t.length,f=o(t,u,c,i,!1),f===f.next&&(f.steiner=!0),a.push(g(f));for(a.sort(d),l=0;l<a.length;l++)h(a[l],n),n=r(n,n.next);return n}function d(t,e){return t.x-e.x}function h(t,e){if(e=v(t,e)){var n=A(e,t);r(n,n.next)}}function v(t,e){var n=e,i=t.x,o=t.y,r=-1/0,a=void 0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var l=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(l<=i&&l>r){if(r=l,l===i){if(o===n.y)return n;if(o===n.next.y)return n.next}a=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!a)return null;if(i===r)return a.prev;var s=a,u=a.x,c=a.y,f=1/0,d=void 0;for(n=a.next;n!==s;)i>=n.x&&n.x>=u&&i!==n.x&&y(o<c?i:r,o,u,c,o<c?r:i,o,n.x,n.y)&&((d=Math.abs(o-n.y)/(i-n.x))<f||d===f&&n.x>a.x)&&T(n,t)&&(a=n,f=d),n=n.next;return a}function p(t,e,n,i){var o=t;do{null===o.z&&(o.z=_(o.x,o.y,e,n,i)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==t);o.prevZ.nextZ=null,o.prevZ=null,m(o)}function m(t){var e=void 0,n=void 0,i=void 0,o=void 0,r=void 0,a=void 0,l=void 0,s=void 0,u=1;do{for(n=t,t=null,r=null,a=0;n;){for(a+=1,i=n,l=0,e=0;e<u&&(l+=1,i=i.nextZ);e++);for(s=u;l>0||s>0&&i;)0!==l&&(0===s||!i||n.z<=i.z)?(o=n,n=n.nextZ,l-=1):(o=i,i=i.nextZ,s-=1),r?r.nextZ=o:t=o,o.prevZ=r,r=o;n=i}r&&(r.nextZ=null),u*=2}while(a>1);return t}function _(t,e,n,i,o){return t=32767*(t-n)/o,e=32767*(e-i)/o,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function g(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function y(t,e,n,i,o,r,a,l){return(o-a)*(e-l)-(t-a)*(r-l)>=0&&(t-a)*(i-l)-(n-a)*(e-l)>=0&&(n-a)*(r-l)-(o-a)*(i-l)>=0}function x(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!E(t,e)&&T(t,e)&&T(e,t)&&I(t,e)}function b(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function S(t,e){return t.x===e.x&&t.y===e.y}function w(t,e,n,i){return!!(S(t,e)&&S(n,i)||S(t,i)&&S(n,e))||b(t,e,n)>0!=b(t,e,i)>0&&b(n,i,t)>0!=b(n,i,e)>0}function E(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&w(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function T(t,e){return b(t.prev,t,t.next)<0?b(t,e,t.next)>=0&&b(t,t.prev,e)>=0:b(t,e,t.prev)<0||b(t,t.next,e)<0}function I(t,e){var n=t,i=!1,o=(t.x+e.x)/2,r=(t.y+e.y)/2;do{n.y>r!=n.next.y>r&&n.next.y!==n.y&&o<(n.next.x-n.x)*(r-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}function A(t,e){var n=new M(t.i,t.x,t.y),i=new M(e.i,e.x,e.y),o=t.next,r=e.prev;return t.next=e,e.prev=t,n.next=o,o.prev=n,i.next=n,n.prev=i,r.next=i,i.prev=r,i}function k(t,e,n,i){var o=new M(t,e,n);return i?(o.next=i.next,o.prev=i,i.next.prev=o,i.next=o):(o.prev=o,o.next=o),o}function P(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function M(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function L(t,e,n,i){for(var o=0,r=e,a=n-i;r<n;r+=i)o+=(t[a]-t[r])*(t[r+1]+t[a+1]),a=r;return o}var C=n(47),N=function(t){return t&&t.__esModule?t:{default:t}}(C);t.exports=i,i.deviation=function(t,e,n,i){var o=e&&e.length,r=o?e[0]*n:t.length,a=Math.abs(L(t,0,r,n));if(o)for(var l=0,s=e.length;l<s;l++){var u=e[l]*n,c=l<s-1?e[l+1]*n:t.length;a-=Math.abs(L(t,u,c,n))}for(var f=0,d=0;d<i.length;d+=3){var h=i[d]*n,v=i[d+1]*n,p=i[d+2]*n;f+=Math.abs((t[h]-t[p])*(t[v+1]-t[h+1])-(t[h]-t[v])*(t[p+1]-t[h+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},i.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,o=0;o<t.length;o++){for(var r=0;r<t[o].length;r++)for(var a=0;a<e;a++)n.vertices.push(t[o][r][a]);o>0&&(i+=t[o-1].length,n.holes.push(i))}return n}},function(t,e,n){"use strict";function i(t){return t===o.DEFAULT||o[t]===o.DEFAULT}Object.defineProperty(e,"__esModule",{value:!0}),e.isDefaultStyle=i;var o=e.STYLE_ID={DEFAULT:0,DARK:1,LIGHT:2,GAME:3}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){return(0,a.default)(t,e)*(n||s.default)}Object.defineProperty(e,"__esModule",{value:!0});var r=n(310),a=i(r),l=n(271),s=i(l);e.default=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(){var t=["position:absolute;","left:0;","top:0;","overflow:hidden;","z-index:1000;","width:100%;","height:100%;"],e=document.createElement("div");e.style.cssText=t.join("");var n=document.createElement("div");return n.style.cssText="left:0;top:0;z-index:101;",e.appendChild(n),{root:e,childs:{domOverlayLayer:n}}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(16),a=i(r),l=n(158),s=i(l),u=n(78),c=i(u),f=n(14),d=i(f),h=n(2),v=i(h),p=n(0),m=i(p),_=n(1),g=i(_),y=n(4),x=i(y),b=n(3),S=i(b),w=n(641),E=i(w),T=n(616),I=i(T),A=n(606),k=i(A),P=n(513),M=i(P),L=n(224),C=n(515),N=i(C),O=n(517),R=i(O),V=n(522),B=i(V),F=n(519),z=i(F),D=n(270),U=n(377),Y=n(77),j=n(319),G=i(j),W=n(20),Z=i(W),X=n(220),H=i(X),Q=n(526),q=i(Q),J=n(138),K=n(38),$=n(51),tt=i($),et=n(660),nt=n(622),it=n(556),ot=n(17),rt=n(372),at=n(516),lt=n(65),st=n(42),ut=n(84),ct=n(61),ft=n(7),dt=tt.default.isString,ht=tt.default.isUndefined,vt=tt.default.isNumber,pt=tt.default.isObject,mt={MAP_2D:"2D",MAP_3D:"3D"},_t={center:new st(39.88795,116.49369),zoom:13,minZoom:Z.default.minZoom,maxZoom:Z.default.maxZoom,rotation:0,pitch:0,scale:1,offset:{x:0,y:0},draggable:!0,scrollable:!0,doubleClickZoom:!0,viewMode:mt.MAP_3D,mapStyleId:"DEFAULT",showControl:!0,enableExtendZoom:!1},gt=ot.isLowMobileDevice()?30:55,yt=function(t){function e(t,n){(0,m.default)(this,e);var i=(0,x.default)(this,(e.__proto__||(0,v.default)(e)).call(this)),o=Date.now();n=ft.extend({},_t,n),n.heading=360-n.rotation;var r=n,a=r.minZoom,l=r.maxZoom;if("number"==typeof a?n.minZoom=Math.max(a,Z.default.minZoom):(new K.ClassTypeError("MapOptions的minZoom参数","Number",a).warn(),n.minZoom=Z.default.minZoom),"number"==typeof l)if(n.enableExtendZoom){if(l>Z.default.maxZoom){var s=Math.min(l,25);Z.default.maxZoom=s,n.maxZoom=s}}else n.maxZoom=Math.min(n.maxZoom,Z.default.maxZoom);else new K.ClassTypeError("MapOptions的maxZoom参数","Number",l).warn(),n.maxZoom=Z.default.maxZoom;i._destroyed=!1,i._glContextLost=!1,i.drawContainer=dt(t)?document.getElementById(t):t,i._uniqueId="map-"+i.drawContainer.id+"_"+ft.uniqueId(),i._initContainer();var u=n,c=u.subkey,f=u.subpid;(0,D.checkKey)(i.id,{subkey:c,subpid:f}),n.map=i;var h=new E.default(i.canvasContainer,n);i.renderEngine=h,i.drawManager=new nt(h),i.transform=new et(n,h),i.controlManager=new M.default(i),i.layerResource=new it(n,i),i.indoorManager=new q.default({map:i}),i.fpsManager=new I.default,i.fpsManager.map=i,i.fpsManager.setCallback(i._render.bind(i)),i._renderCallbackList=[],(0,d.default)(i,U.easableMixin),ft.bindAll(["_onData","_render"],i),i._initListeners(),i.jumpTo({center:n.center,zoom:n.zoom,heading:n.heading||0,pitch:n.pitch||0,scale:n.scale||0});var p=h.getDrawContainer();return i.resize(p.clientWidth,p.clientHeight),i._update(),i.handler=new rt(i),i._bubbleMiddleware=new k.default(i),i.setDraggable(n.draggable),i.setScrollable(n.scrollable),i.setDoubleClickZoom(n.doubleClickZoom),i.setViewMode(n.viewMode),i.setShowControl(n.showControl),i._initControls(),(0,Y.minfo)({lat:n.center.lat,lng:n.center.lng,zoom:n.zoom,pitch:n.pitch,rotation:n.rotation,w:i.transform.width,h:i.transform.height}),(0,Y.fps)(i),(0,Y.frt)(i,o),i}return(0,S.default)(e,t),(0,g.default)(e,[{key:"_initListeners",value:function(){var t=this;this._on("preload",this._preLoad),this._on("data",this._onData),this._on("data",function(e){"metadata"===e.sourceDataType&&t._update()}),this._on("layer",this._update.bind(this,!1)),this._on("move",ot.debounce(function(){t._update()},10)),ot.on(this,"data,moveend",ot.debounce(function(){t._destroyed||t._changeFPS(6)},3e3)),ot.on(this,"moveend,setData",ot.debounce(function(){t.renderEngine.updateLabel()},10)),this._on("movestart",function(){t._changeFPS(gt)}),this._on("tilesloaded",ot.debounce(function(){t._update()},250)),this.on("mapstyle_changed",function(e){var n=e.styleId;t.renderEngine.onMapStyleUpdate(n),t.drawManager.resetGradualPlacement(),t._update()})}},{key:"resetRenderEngine",value:function(){this.renderEngine=new E.default(this.canvasContainer,{})}},{key:"_changeFPS",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt;this.fpsManager.updateFPS(t)}},{key:"setCenter",value:function(t,e){return this.jumpTo({center:t},e)}},{key:"getCenter",value:function(){return this.transform.center}},{key:"setZoom",value:function(t,e){return this.jumpTo({zoom:t},e),this}},{key:"getZoom",value:function(){return this.transform.zoom}},{key:"setPitch",value:function(t,e){return this._viewMode===mt.MAP_2D?this:(this.jumpTo({pitch:t},e),this)}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"setScale",value:function(t,e){return vt(t)?t<=0?this:(this.jumpTo({scale:t},e),this):(new K.BaseTypeError("scale","number",t).error(),this)}},{key:"getScale",value:function(){return this.transform.scale}},{key:"setOffset",value:function(t){return pt(t)&&vt(t.x)&&vt(t.y)?(this.renderEngine.camera.setOffset(t),this.emit("offset_changed")):new K.ClassTypeError("Map.offset","Object:{x,y}",t).error(),this}},{key:"getOffset",value:function(){return this.renderEngine.camera.offset}},{key:"setRotation",value:function(t,e){return this._viewMode===mt.MAP_2D?this:(this.jumpTo({heading:360-t},e),this)}},{key:"getRotation",value:function(){return 360-this.transform.heading}},{key:"getHeading",value:function(){return this.transform.heading}},{key:"getContainer",value:function(){return this.drawContainer}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getRenderContainer",value:function(){return this.renderEngine.getDrawContainer()}},{key:"setDraggable",value:function(t){var e=t?"enable":"disable";return this.dragPan[e](),this.dragRotate[e](),this.longPress[e](),this.draggable=!!t,this}},{key:"getDraggable",value:function(){return this.draggable}},{key:"setScrollable",value:function(t){var e=t?"enable":"disable";return this.scrollZoom[e](),this}},{key:"getScrollable",value:function(){return this.scrollZoom.isEnabled()}},{key:"setDoubleClickZoom",value:function(t){var e=t?"enable":"disable";return this.doubleClickZoom[e](),this}},{key:"getDoubleClickZoom",value:function(){return this.doubleClickZoom.isEnabled()}},{key:"setBoundary",value:function(t){return this.transform.boundary=t,this._update(),this}},{key:"getBoundary",value:function(){return this.transform.boundary}},{key:"getIndoorManager",value:function(){return this.indoorManager}},{key:"getLightManager",value:function(){return this.renderEngine.lightManager}},{key:"setViewMode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt.MAP_3D;if(t=String(t).toUpperCase(),this._viewMode===t)return this;if(t!==mt.MAP_3D&&t!==mt.MAP_2D){if(new K.EnumError("viewMode",[mt.MAP_2D,mt.MAP_3D],t).error(),!ht(this._viewMode))return this;t=mt.MAP_3D}return this.controlManager.setViewMode(t),t===mt.MAP_2D?(this.easeTo({pitch:0,heading:0}),this.dragRotate.disable(),this.touchZoomRotate.disableRotation(),this.touchTilt.disable()):this.draggable&&(this.dragRotate.enable(),this.touchZoomRotate.enableRotation(),this.touchTilt.enable()),this._viewMode=t,this}},{key:"getViewMode",value:function(){return this._viewMode}},{key:"getBaseMap",value:function(){return this.layerResource.baseMap}},{key:"setBaseMap",value:function(t){return this.layerResource.baseMap=t,this}},{key:"setMapStyleId",value:function(t){return t&&dt(t)?this.layerResource.setMapStyleId(t):console.error("传入的mapStyleId有误："+t),this}},{key:"setMapStyleConfig",value:function(t){return pt(t)?"{}"===(0,c.default)(t)?(console.error("setMapStyleConfig传入的参数为空对象"),this):(this.layerResource.setMapStyleConfig(t),this):(new K.BaseTypeError("StyleConfig","object",t).error(),this)}},{key:"getShowControl",value:function(){return this._showControl}},{key:"setShowControl",value:function(t){this._showControl=t}},{key:"getControl",value:function(t){return this.controlManager.getControl(t)}},{key:"removeControl",value:function(t){return this.controlManager.removeControl(t),this}},{key:"addControl",value:function(t){return this.controlManager.addControl(t),this}},{key:"panTo",value:function(t,e,n){return this.easeTo({center:t},e,n)}},{key:"panBy",value:function(t,e,n){return t=ct.convert(t).mult(-1),this.panTo(this.transform.center,ft.extend({offset:t},e),n)}},{key:"flyTo",value:function(){}},{key:"zoomBy",value:function(t,e,n){var i=this.getZoom()+t,o=this.transform;i=Math.max(Math.min(i,o.maxZoom),o.minZoom),this.zoomTo(i,e,n)}},{key:"zoomTo",value:function(t,e,n){return this.easeTo({zoom:t},e,n)}},{key:"rotateTo",value:function(t,e,n){return this.easeTo({rotation:t},e,n)}},{key:"headTo",value:function(t,e,n){return this.easeTo({heading:t},e,n)}},{key:"pitchTo",value:function(t,e){return this.easeTo({pitch:t},e)}},{key:"naviTo",value:function(t,e,n,i){return this.easeTo({heading:e,center:t},ft.extend({isMatrix:!1},n),i)}},{key:"jumpTo",value:function(t,e){this.stopEase();var n=this.transform,i=!1,o=!1,r=!1,a=!1;return"zoom"in t&&n.zoom!==+t.zoom&&((0,s.default)(+t.zoom)?new K.BaseTypeError("zoom","number",t.zoom).error():(i=!0,n.zoom=+t.zoom)),"center"in t&&(n.center=st.convert(t.center),a=!0),"heading"in t&&n.heading!==+t.heading&&(o=!0,n.heading=+t.heading),"pitch"in t&&n.pitch!==+t.pitch&&(r=!0,n.pitch=+t.pitch),"scale"in t&&n.scale!==t.scale&&(n.scale=t.scale),this._fire("movestart",e)._fire("move",e),i&&this._fire("zoomstart",e)._fire("zoom",e)._fire("zoomend",e),o&&this._fire("rotate",e),r&&this._fire("pitchstart",e)._fire("pitch",e)._fire("pitchend",e),a&&this._fire("panstart",e)._fire("pan",e)._fire("panend",e),this._fire("moveend",e)}},{key:"easeTo",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2];this.stopEase(),n=ft.extend({offset:[0,0],duration:500,easing:ft.ease},n),!1===n.animate&&(n.duration=0);var o=this.transform,r=this.getZoom(),a=this.getHeading(),l=this.getPitch(),s=r,u=a,c=l;vt(t.zoom)?s=t.zoom:ht(t.zoom)||new K.BaseTypeError("mapStatus.zoom","number",t.zoom).error(),vt(t.rotation)?u=this._normalizeHeading(360-t.rotation,a):ht(t.rotation)||new K.BaseTypeError("mapStatus.rotation","number",t.rotation).error(),vt(t.heading)&&(u=this._normalizeHeading(t.heading,a)),vt(t.pitch)?c=t.pitch:ht(t.pitch)||new K.BaseTypeError("mapStatus.pitch","number",t.pitch).error();var f=null,d=null;n.around&&(f=n.around,d=this.projectToContainer(f));var h=n.offset,v=o.centerPoint.add(ct.convert(h)),p=this.unprojectFromContainer(v),m=st.convert(t.center||p);this._normalizeCenter(m);var _=o.latLngToCoord(p),g=o.latLngToCoord(m).sub(_),y=o.zoomScale(s-r);return this.zooming=s!==r&&s<=o.maxZoom&&s>=o.minZoom,this.rotating=a!==u,this.pitching=c!==l,this.panning=0!==g.x||0!==g.y,this._viewMode===mt.MAP_2D&&(this.rotating=!1,this.pitching=!1),this.zooming||this.rotating||this.pitching||0!==g.x||0!==g.y?(this._prepareEase(i,n.noMoveStart),clearTimeout(this._onEaseEnd),this._ease(function(t){if(this.zooming&&(o.zoom=(0,G.default)(r,s,t)),this.rotating&&(o.heading=(0,G.default)(a,u,t)),this.pitching&&(o.pitch=(0,G.default)(l,c,t)),n.around)o.setLocationAtPoint(f,d);else{var e=o.zoomScale(o.zoom-r),h=s>r?Math.min(2,y):Math.max(.5,y),p=Math.pow(h,1-t),m=g.mult(t*p),x=o.coordToLatLng(_.add(m).mult(e),o.zoom);o.setLocationAtPoint(x,v)}this._fireMoveEvents(i)},function(){n.delayEndEvents?e._onEaseEnd=setTimeout(function(){return e._easeToEnd(i)},n.delayEndEvents):e._easeToEnd(i)},function(){e._easeToEnd(i,!0)},n),this):this}},{key:"getNonStopRotate",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments[1];if(!this.rotateTickTimer){this.rotating=!0;var i=this.transform;this.rotateTickTimer=function(o){t.isRotateAnimationRunning&&(-1===o?i.heading-=.8*e:i.heading+=.8*e,ot.frame(t.rotateTickTimer.bind(t,o)),t._fireMoveEvents(n))}}return{begin:function(e){t._prepareEase(n),t.rotating=!0,t.isRotateAnimationRunning=!0,t.rotateTickTimer(e)},cancel:function(){t._easeToEnd(n),t.isRotateAnimationRunning=!1}}}},{key:"getNonStopPitch",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments[1];if(!this.pitchTickTimer){this.pitching=!0;var i=this.transform;this.pitchTickTimer=function(o){t.isPitchAnimationRunning&&(-1===o?i.pitch-=.8*e:i.pitch+=.8*e,ot.frame(t.pitchTickTimer.bind(t,o)),t._fireMoveEvents(n))}}return{begin:function(e){t._prepareEase(n),t.isPitchAnimationRunning=!0,t.pitchTickTimer(e)},cancel:function(){t._easeToEnd(n),t.isPitchAnimationRunning=!1}}}},{key:"_prepareEase",value:function(t,e){this.moving=!0,e||(this._fire("movestart",t),this.zooming&&this._fire("zoomstart",t),this.rotating&&this._fire("rotatestart",t),this.pitching&&this._fire("pitchstart",t),this.panning&&this._fire("panstart",t))}},{key:"_fireMoveEvents",value:function(t){this._fire("move",t),this.zooming&&this._fire("zoom",t),this.rotating&&this._fire("rotate",t),this.pitching&&this._fire("pitch",t),this.panning&&this._fire("pan",t)}},{key:"_easeToEnd",value:function(t,e){var n=this.zooming,i=this.rotating,o=this.pitching,r=this.panning;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,this.panning=!1,n&&this._fire(e?"zoomcancel":"zoomend",t),i&&this._fire(e?"rotatecancel":"rotateend",t),o&&this._fire(e?"pitchcancel":"pitchend",t),r&&this._fire(e?"pancancel":"panend",t),this._fire(e?"movecancel":"moveend",t)}},{key:"resetNorth",value:function(t,e){return this.rotateTo(0,ft.extend({duration:1e3},t),e),this}},{key:"snapToNorth",value:function(t,e){return Math.abs(this.getHeading())<7?this.resetNorth(t,e):this}},{key:"fitBounds",value:function(t,e){if(!(t&&t instanceof ut))return new K.ClassTypeError("Map.fitBounds的bounds参数","LatLngBounds",t).error(),this;if(e=ft.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],minZoom:this.transform.minZoom,maxZoom:this.transform.maxZoom},e),vt(e.padding)){var n=e.padding;e.padding={top:n,bottom:n,right:n,left:n}}if(!ft.deepEqual((0,a.default)(e.padding).sort(function(t,e){return t<e?-1:t>e?1:0}),["bottom","left","right","top"]))return void ft.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'");t=ut.convert(t);var i=[e.padding.left-e.padding.right,e.padding.top-e.padding.bottom],o=Math.min(e.padding.right,e.padding.left),r=Math.min(e.padding.top,e.padding.bottom);e.offset=[e.offset[0]+i[0],e.offset[1]+i[1]];var l=ct.convert(e.offset),s=this.transform,u=s.latLngToCoord(t.getNorthWest()),c=s.latLngToCoord(t.getSouthEast()),f=c.sub(u),h=(s.width-2*o-2*Math.abs(l.x))/f.x,v=(s.height-2*r-2*Math.abs(l.y))/f.y;if(v<0||h<0)return ft.warnOnce("传入参数无效导致map无法进行fitBounds操作"),this;var p={center:s.coordToLatLng(u.add(c).div(2)),zoom:Math.max(Math.min(s.scaleZoom(s.scrollScale*Math.min(h,v)),e.maxZoom),e.minZoom),heading:0};return!1===e.animate?this.jumpTo(p):this.easeTo(p,(0,d.default)({offset:l},e.ease)),this}},{key:"getZoomByBounds",value:function(t){var e=this.transform,n=e.latLngToCoord(t.getNorthWest()),i=e.latLngToCoord(t.getSouthEast()),o=i.sub(n),r=e.width/o.x,a=e.height/o.y;return a<0||r<0?void ft.warnOnce("bounds error!"):Math.min(e.scaleZoom(e.scrollScale*Math.min(r,a)),e.maxZoom)}},{key:"stopEase",value:function(){return this._abortFn&&(this._abortFn(),this._finishEase()),this}},{key:"getSource",value:function(t){return this.layerResource.getSource(t)}},{key:"addSource",value:function(t,e){this.layerResource.addSource(t,e)}},{key:"removeSource",value:function(t){this.layerResource.removeSource(t)}},{key:"addLayer",value:function(t){this.layerResource.addLayer(t)}},{key:"removeLayer",value:function(t){this.layerResource.removeLayer(t)}},{key:"moveLayer",value:function(t,e){this.layerResource.moveLayer(t,e)}},{key:"getLayer",value:function(t){return this.layerResource.getLayer(t)}},{key:"findLayer",value:function(t){return this.layerResource.findLayer(t)}},{key:"addVisualPlugin",value:function(t){this.layerResource.addVisualPlugin(t),this._update()}},{key:"removeVisualPlugin",value:function(t){this.layerResource.removeVisualPlugin(t),this._update()}},{key:"unprojectFromContainer",value:function(t){return t instanceof ct?this.transform.screenToLatLng(t):t&&t.x&&t.y?this.transform.screenToLatLng(new ct(t.x,t.y)):(new K.ClassTypeError("Map.unprojectFromContainer的point参数","Point",t).error(),null)}},{key:"projectToContainer",value:function(t){if(t instanceof st){var e=this.transform.latLngToScreen(t);return new ct(e.x,e.y)}return new K.ClassTypeError("Map.projectToContainer的latLng参数","LatLng",t).error(),null}},{key:"projectToCenterLocalPlane",value:function(t){if(t instanceof st){return this.transform.latLngToCenterLocalPixel(t)}return new K.ClassTypeError("Map.projectToCenterLocalPlane的latLng参数","LatLng",t).error(),null}},{key:"projectToWorldPlane",value:function(t,e){if(t instanceof st){return this.transform.latLngToCoord(t,e)}return new K.ClassTypeError("Map.projectToWorldPlane的latLng参数","LatLng",t).error(),null}},{key:"_getSpatialResolution",value:function(t,e){t=t||this.getZoom();var n=(e||this.getCenter().getLat())*Math.PI/180;return(0,J.getSpatialResolution)(t)*Math.cos(n)/this.getScale()}},{key:"_onData",value:function(){this.drawManager.updatePlace(),this._rerender()}},{key:"_preLoad",value:function(){this.layerResource._sources.vector_source.preload(this.transform)}},{key:"_normalizeHeading",value:function(t,e){t=ft.wrap(t,-180,180);var n=Math.abs(t-e);return Math.abs(t-360-e)<n&&(t-=360),Math.abs(t+360-e)<n&&(t+=360),t}},{key:"_normalizeCenter",value:function(t){var e=this.transform,n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}},{key:"_rerender",value:function(){this._changeFPS(gt),this.fpsManager.start()}},{key:"_render",value:function(){var t=this.getRenderContainer();this.resize(t.clientWidth,t.clientHeight);var e=this.drawManager.render(this.layerResource,this.transform);this._bubbleMiddleware.runPick(),e&&this._rerender(),this._renderCallbackList.forEach(function(t){return t&&t()})}},{key:"addRenderCallback",value:function(t){this._renderCallbackList.push(t)}},{key:"removeRenderCallback",value:function(t){var e=this._renderCallbackList.indexOf(t);this._renderCallbackList.splice(e,1)}},{key:"resize",value:function(t,e){t&&e&&(t===this.width&&e===this.height||(this.width=t,this.height=e,this.transform.resize(t,e),this.drawManager.resize(t,e),this._update(),this._frameId=null,this._fire("resize",{width:t,height:e},!0)))}},{key:"_update",value:function(){this._destroyed||this._glContextLost||(this.layerResource._updateSource(this.transform,this.renderEngine.camera,{causedBy:"move"}),this.drawManager.updatePlace(),this._rerender())}},{key:"_initContainer",value:function(){this.drawContainer.style.webkitTapHighlightColor="rgba(0,0,0,0)","static"===getComputedStyle(this.drawContainer).getPropertyValue("position")&&(this.drawContainer.style.position="relative");var t=document.createElement("canvas");t.style.cssText="width:100%; height: 100%;";var e=o();this.drawContainer.appendChild(t),this.drawContainer.appendChild(e.root),this.canvasContainer=t,this._overlayer=e}},{key:"_initControls",value:function(){var t=this;if((0,D.checkKey)(this.id).then(function(e){e||H.default.isLocal||t.addControl(new N.default({position:L.CONTROL_POSITION.BOTTOM_CENTER}))}),this.addControl(new at({id:L.DEFAULT_CONTROL_ID.LOGO,position:L.CONTROL_POSITION.BOTTOM_LEFT})),!1===this._showControl)return this;this.addControl(new R.default({id:L.DEFAULT_CONTROL_ID.SCALE,position:L.CONTROL_POSITION.BOTTOM_LEFT,center:this.getCenter(),zoom:this.getZoom()})),this.addControl(new B.default({id:L.DEFAULT_CONTROL_ID.ZOOM,position:L.CONTROL_POSITION.TOP_RIGHT})),this.addControl(new z.default({id:L.DEFAULT_CONTROL_ID.ROTATION,position:L.CONTROL_POSITION.TOP_RIGHT}))}},{key:"_onContextError",value:function(t){"restored"===t?(this._rerender(),this._glContextLost=!1,(0,Y.err)({type:"ctx",code:1}),this._fire("context_restored")):(this.stop(),this._glContextLost=!0,(0,Y.err)({type:"ctx",code:0}),this._fire("context_lost"))}},{key:"stop",value:function(){this.fpsManager.stop()}},{key:"destroy",value:function(){this._destroyed||(this.emit("destroy"),this.stopEase(),(0,D.revokeKeyCheck)(this.id),this.controlManager.destroy(),this.handler.destroy(),this.fpsManager.destroy(),this.layerResource.destroy(),this._bubbleMiddleware.destroy(),this.renderEngine.destroy(),this.drawManager.destroy(),this.indoorManager=null,this.fpsManager=null,this.handler=null,this.layerResource=null,this._bubbleMiddleware=null,this.renderEngine=null,this.drawManager=null,this.transform=null,this._clearAllListeners(),this.drawContainer.innerHTML="",this.canvasContainer.width=1,this.canvasContainer.height=1,this.canvasContainer=null,this._overlayer=null,this.drawContainer=null,this.isPitchAnimationRunning=null,this.isRotateAnimationRunning=null,this.pitchTickTimer=null,this.rotateTickTimer=null,this._destroyed=!0)}},{key:"_getPoiInfo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.drawManager.getPoi(t);if(e){e.latLng=this.unprojectFromContainer(e.coord);var n=Math.round(this.getZoom())>=Z.default.minShowIndoorZoom&&this.indoorManager.getVisible()&&this.indoorManager.getIndoorBuildingList().length;if(!e.isIndoor&&n)for(var i=this.indoorManager.getIndoorBuildingList(),o=0;o<i.length;o++){var r=i[o],a=r.getBuildingInfo();if(a&&a.bounds.contains(e.latLng)){e=null;break}}}return e}},{key:"id",get:function(){return this._uniqueId}}]),e}(lt);e.default=yt},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(_(t)){var n=(0,u.default)(t,2),i=n[0],o=n[1];return m(i)&&m(o)?(i=Math.max(Math.round(i),0),o=Math.max(Math.round(o),0),[i,o]):(new p.BaseTypeError("PolylineStyle."+e+"[index]","number",i),[0,0])}return new p.BaseTypeError("PolylineStyle."+e,"array",t).error(),[0,0]}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=["width","height","space"],n={};if(e.forEach(function(e){if(e in t){var i=t[e];m(i)?n[e]=Math.min(Math.max(i,0),255):new p.BaseTypeError("ArrowOptions."+e,"number",i).error()}}),!g(t.align)){var i=t.align;i in x?n.align=i:new p.EnumError("ArrowOptions.align",(0,l.default)(x),i).error()}return n}Object.defineProperty(e,"__esModule",{value:!0});var a=n(16),l=i(a),s=n(47),u=i(s),c=n(0),f=i(c),d=n(7),h=n(51),v=i(h),p=n(38),m=v.default.isNumber,_=v.default.isArray,g=v.default.isUndefined,y={color:"#3777FF",width:3,borderWidth:0,borderColor:"#3777FF",lineCap:"butt",dashArray:[0,0],showArrow:!1,arrowOptions:{width:6,height:4,space:50,align:"middle"}},x={middle:0,left:1,right:2},b=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,f.default)(this,t),e=(0,d.extend)({},y,e),this.color=e.color,this.width=e.width,this.borderColor=e.borderColor,this.borderWidth=e.borderWidth||0,this.lineCap="round"===e.lineCap?2:"square"===e.lineCap?1:0,this.dashArray=o(e.dashArray,"dashArray");var n=(0,d.extend)({},y.arrowOptions,r(e.arrowOptions)),i=n.width,a=n.height,l=n.space,s=n.align;this.arrowInfo=[i,a*!!e.showArrow,l,x[s]]};e.default=b},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.LIGHT_TYPE={AMBIENT:"ambient",DIRECTION:"dir",POINT:"point",SPOT:"spot"}},function(t,e,n){t.exports={default:n(328),__esModule:!0}},function(t,e,n){var i=n(101),o=n(46),r=n(205);t.exports=function(t){return function(e,n,a){var l,s=i(e),u=o(s.length),c=r(a,u);if(t&&n!=n){for(;u>c;)if((l=s[c++])!=l)return!0}else for(;u>c;c++)if((t||c in s)&&s[c]===n)return t||c||0;return!t&&-1}}},function(t,e,n){"use strict";var i=n(30),o=n(6),r=n(90),a=n(216),l=n(150),s=n(285),u=n(214),c=n(31),f=n(29),d=n(287),h=n(218),v=n(348);t.exports=function(t,e,n,p,m,_){var g=i[t],y=g,x=m?"set":"add",b=y&&y.prototype,S={},w=function(t){var e=b[t];r(b,t,"delete"==t?function(t){return!(_&&!c(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(_&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return _&&!c(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof y&&(_||b.forEach&&!f(function(){(new y).entries().next()}))){var E=new y,T=E[x](_?{}:-0,1)!=E,I=f(function(){E.has(1)}),A=d(function(t){new y(t)}),k=!_&&f(function(){for(var t=new y,e=5;e--;)t[x](e,e);return!t.has(-0)});A||(y=e(function(e,n){u(e,y,t);var i=v(new g,e,y);return void 0!=n&&s(n,m,i[x],i),i}),y.prototype=b,b.constructor=y),(I||k)&&(w("delete"),w("has"),m&&w("get")),(k||T)&&w(x),_&&b.clear&&delete b.clear}else y=p.getConstructor(e,t,m,x),a(y.prototype,n),l.NEED=!0;return h(y,t),S[t]=y,o(o.G+o.W+o.F*(y!=g),S),_||p.setStrong(y,t,m),y}},function(t,e,n){"use strict";n(451);var i=n(90),o=n(100),r=n(29),a=n(134),l=n(40),s=n(354),u=l("species"),c=!r(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),f=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var d=l(t),h=!r(function(){var e={};return e[d]=function(){return 7},7!=""[t](e)}),v=h?!r(function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[u]=function(){return n}),n[d](""),!e}):void 0;if(!h||!v||"replace"===t&&!c||"split"===t&&!f){var p=/./[d],m=n(a,d,""[t],function(t,e,n,i,o){return e.exec===s?h&&!o?{done:!0,value:p.call(e,n,i)}:{done:!0,value:t.call(n,e,i)}:{done:!1}}),_=m[0],g=m[1];i(String.prototype,t,_),o(RegExp.prototype,d,2==e?function(t,e){return g.call(t,this,e)}:function(t){return g.call(t,this)})}}},function(t,e,n){"use strict";var i=n(28);t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){var i=n(122),o=n(432),r=n(349),a=n(28),l=n(46),s=n(364),u={},c={},e=t.exports=function(t,e,n,f,d){var h,v,p,m,_=d?function(){return t}:s(t),g=i(n,f,e?2:1),y=0;if("function"!=typeof _)throw TypeError(t+" is not iterable!");if(r(_)){for(h=l(t.length);h>y;y++)if((m=e?g(a(v=t[y])[0],v[1]):g(t[y]))===u||m===c)return m}else for(p=_.call(t);!(v=p.next()).done;)if((m=o(p,g,v.value,e))===u||m===c)return m};e.BREAK=u,e.RETURN=c},function(t,e,n){var i=n(133);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){var i=n(40)("iterator"),o=!1;try{var r=[7][i]();r.return=function(){o=!0},Array.from(r,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var r=[7],a=r[i]();a.next=function(){return{done:n=!0}},r[i]=function(){return a},t(r)}catch(t){}return n}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){"use strict";var i=n(258),o=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==i(t))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(t,e)}},function(t,e,n){var i=n(52),o=n(30),r=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:n(199)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){for(var i,o=n(30),r=n(100),a=n(206),l=a("typed_array"),s=a("view"),u=!(!o.ArrayBuffer||!o.DataView),c=u,f=0,d="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<9;)(i=o[d[f++]])?(r(i.prototype,l,!0),r(i.prototype,s,!0)):c=!1;t.exports={ABV:u,CONSTR:c,TYPED:l,VIEW:s}},function(t,e,n){var i=n(30),o=i.navigator;t.exports=o&&o.userAgent||""},,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.attributePart="\n\tattribute vec2 a_Positions;\n\tattribute vec3 a_InstanceTrans;\n\tattribute vec4 a_InstanceCoords;\n\tattribute vec4 a_InstanceTextBounds;\n\tattribute vec4 a_InstanceInfo;\n\n",e.uniformPart="\n\tuniform mat4 u_matrix;\n\tuniform vec2 u_resolution;\n\tuniform float u_fadeChange;\n\tuniform vec2 u_InstanceTileTextureOffset;\n\tuniform vec2 u_iconTextureResolution;\n\tuniform vec2 u_textTextureResolution;\n\tuniform float u_showPoint;\n\tuniform float u_showLabel;\n\tuniform float u_mapScale;\n",e.varyingPart="\n\tvarying vec2 v_TexCoord;\n\tvarying float v_isShow;\n\tvarying float v_isIcon;\n\tvarying float v_opacity;\n\tvarying vec4 v_ndcCoord;\n",e.filterPart="\nfloat getFilterOpacity(float opacity, float type) {\n\treturn mix(\n\t\tmix(0.0, opacity, u_showPoint),\n\t\tmix(0.0, opacity, u_showLabel),\n\t\ttype\n\t);\n}\n",e.projectScreenPart="\nvec2 project(vec4 device) {\n    vec3 device_normal = device.xyz / device.w;\n    vec2 clip_pos = (device_normal * 0.5 + 0.5).xy;\n    return clip_pos * u_resolution;\n}\n\nvec4 unproject(vec2 screen, float z, float w) {\n    vec2 clip_pos = screen / u_resolution;\n    vec2 device_normal = clip_pos * 2.0 - 1.0;\n    return vec4(device_normal * w, z, w);\n}\n",e.glPositionPart="\n\t\tvec4 center_proj = u_matrix * vec4(transCoord, 0., 1.);\n\t\tvec2 center_screen = project(center_proj);\n        \n\t\tfloat s_rotate = a_InstanceInfo.x;\n\t\tfloat angle_sin = sin(s_rotate);\n    float angle_cos = cos(s_rotate);\n\t\tmat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n        \n\t\tvec2 positions = a_Positions * 0.5 + 0.5;\n\t\tvec2 corner_screen = rotation_matrix * vec2(\n\t\t\t(a_InstanceCoords.x * positions.x - a_InstanceCoords.z) * u_mapScale,\n\t\t\t(a_InstanceCoords.y * (positions.y - 1.0) + a_InstanceCoords.w) * u_mapScale\n\t\t) + center_screen.xy;\n\t\tvec4 corner_proj = unproject(corner_screen, center_proj.z, center_proj.w);\n\t\tgl_Position = corner_proj;\n\t\t\n\t\tv_ndcCoord = center_proj;\n",e.fragPart="\n\tuniform sampler2D u_SamplerMask;\n\tuniform sampler2D u_SamplerText;\n\tuniform sampler2D u_SamplerIcon;\n\tuniform float u_asbackground;\n\tuniform float u_maskScale;\n",e.maskPart="\n\tvec2 v_texCoord = (v_ndcCoord.xy / v_ndcCoord.w * u_maskScale + 1.0) / 2.0;\n\t\n\tfloat isCulledByMask = texture2D(u_SamplerMask, v_texCoord).r;\n\t\n\t\n\t\n\t\n"},,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(20),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=o.default.highQualityRender},function(t,e,n){"use strict";function i(t){var e=t.geometries.map(function(t){return t.paths||[]}),n=new o.PolygonParseHelper({complexPolygons:e,IndexType:Uint32Array});n.updatePositions({fp64:!0,extruded:!0});var i=n.getPositions(),r=n.getIndices(),l=n.getPositions64xyLow(),s=n.getVertexValid(),u=n.getPickingColors(),c=n.getElevations({getElevation:function(e){var n=t.geometries[e],i=t.styles[n.styleId];return i&&i.extrudeHeight?i.extrudeHeight:0}}),f=n.getColors({key:"fillColors",getColor:function(e){var n=t.geometries[e],i=t.styles[n.styleId],o=new a.default(i.color);return i?o.toUpArray():[0,0,0,0]}}),d=n.getColors({key:"lineColors",getColor:function(e){var n=t.geometries[e],i=t.styles[n.styleId],o=new a.default(i.borderColor);return i&&i.showBorder?"borderWidth"in i?[0,0,0,0]:o.toUpArray():[0,0,0,0]}}),h=i.slice(3),v=l.slice(2),p=i.slice(),m=l.slice();return p.set(h),m.set(v),{positions:i,indices:r,positions64xyLow:l,vertexValid:s,pickingColors:u,elevations:c,fillColors:f,lineColors:d,nextPositions:p,nextPositions64xyLow:m}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(380),r=n(233),a=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConfigUtil=e.INDOOR_ICON_SIZE=void 0;var i=n(20),o=function(t){return t&&t.__esModule?t:{default:t}}(i),r=0;e.INDOOR_ICON_SIZE=o.default.iconSize,e.ConfigUtil={setBV:function(t){r=t},getBV:function(){return r},getIconPath:function(){var t=Math.floor(3*Math.random());return o.default.indoorIconSrc.replace("%$%",0===t?1:t)},getIconSrc:function(t){return""+this.getIconPath()+t+".png?v="+this.getBV()}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return t[0]+(t[1]<<8)+(t[2]<<16)}function r(t,e){var n={};n.x=360*t/268435456-180;var i=180-360*e/268435456;n.y=Math.atan(Math.exp(.017453292519943295*i))/.008726646259971648-90;var o=new m.default(n.y,n.x);return o.x=n.x,o.y=n.y,o}function a(t){return(0,v.default)({},t)}function l(t,e){var n=(0,S.mercatorToLatLng)(new g.default(t,e));return n.x=t,n.y=e,n}function s(t,e){return(0,S.latLngToMercator)(new m.default(e,t))}function u(t){var e=t.map(function(t){return{lng:t.x,lat:t.y}});return(0,b.isClockWise)(e)}function c(t,e,n,i){var o=(0,y.getStyle)(t,e,i);if(!o)return!1;var r=(0,y.getStyle)(o.labelid,e,i);if(!r)return!1;if(o.icon_offset&&65535!==o.icon_offset||r.effect&&5===r.effect){var a=o.icon_offset;if(n&&"number"==typeof o.icon_offset&&isFinite(o.icon_offset)&&65535!==o.icon_offset&&-1!==o.icon_offset){if(r.fontSize>0)return!0}else if(r.fontSize>0)return!0;return!!("number"==typeof a&&isFinite(a)&&a>=0&&a<500)}return r.fontSize>0}function f(t,e,n,i){var o=c(t,e,n,i),r=!1,a=!1;if(!o)return{isValid:o,drawIcon:r,drawLabel:a};var l=(0,y.getStyle)(t,e,i),s=(0,y.getStyle)(l.labelid,e,i);if(l.icon_offset&&65535!==l.icon_offset||s.effect&&5===s.effect){var u=l.icon_offset;a=(n&&"number"==typeof l.icon_offset&&isFinite(l.icon_offset)&&65535!==l.icon_offset&&l.icon_offset,s.fontSize>0),r=!!("number"==typeof u&&isFinite(u)&&u>=0&&u<500)}else r=!1,a=s.fontSize>0;return{isValid:o,drawLabel:a,drawIcon:r}}function d(t,e,n,i){var o=(0,y.getStyle)(t.styleId,e,i);if(!o)return void console.warn("style is invalid!");var r=(0,y.getStyle)(o.labelid,e,i);if(!r)return void console.warn("labelStyle is invalid!");var a=t.drawInfo||f(t.styleId,e,t.direct,i),l=x.INDOOR_ICON_SIZE,s=x.INDOOR_ICON_SIZE,u=/\\/g,c=null,d=null,h=l/2,v=s/2,p=t.text.split(u);return p.map(function(e,i){var o={x:0,y:0},l={w:0,h:0},s={x:0,y:0},u={text:e,coords:[s.x,s.y],anchor:o,textBounds:l};if(!a.drawLabel)return u;switch(t.direct){case 2:c="right",d="middle";break;case 3:c="center",d="top";break;case 4:c="center",d="bottom";break;case 1:c="left",d="middle";break;default:c="center",d="middle"}var f=0;return n.font!==r.font&&(n.font=r.font),f=n.measureText(e).width,l.w=Math.ceil(f),l.h=t.fontSize,"left"===c&&a.drawIcon?(o.x=0+h+2+f/2,s.x=o.x):"right"===c&&a.drawIcon?(o.x=0-h-2-f/2,s.x=o.x):(o.x=0,s.x=0),"top"===d?(o.y=0+v+(r.fontSize+2)*(i+1)-r.fontSize/2,s.y=o.y):"bottom"===d?(o.y=0-v-(r.fontSize+2)*(p.length-i)+r.fontSize/2,s.y=o.y):a.drawIcon&&a.drawLabel?(o.y=0+(1===p.length?0:(r.fontSize/2+2)*(0===i?-1:1)),s.y=o.y):a.drawIcon?(o.y=0,s.y=0):a.drawLabel&&(1===p.length?(o.y=0,s.y=0):(o.y=0+(r.fontSize/2+2)*(0===i?-1:1),s.y=o.y)),u.coords=[s.x,s.y],u})}Object.defineProperty(e,"__esModule",{value:!0});var h=n(212),v=i(h);e.readUint24=o,e.pixels2LongLat=r,e.extendCopy=a,e.mercator2latLng=l,e.latLng2Mercator=s,e.isClockWise=u,e.isValidPointStyle=c,e.getPoiDrawInfo=f,e.getPoiRect=d;var p=n(42),m=i(p),_=n(61),g=i(_),y=n(273),x=n(305),b=n(307),S=n(138)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return t.length>=3&&(0,w.default)(t[0].lat)&&(0,w.default)(t[0].lng)}function r(t){return t.length>=1&&t.every(function(t){return t.length>=3&&o(t)})}function a(t){return t.length>=1&&t.every(function(t){return r(t)})}function l(t){var e=t[0],n=t[t.length-1];return e.lat===n.lat&&e.lng===n.lng?t:t.concat([e])}function s(t){for(var e=0,n=1,i=void 0,o=void 0;n<t.length;)i=o||t[0],o=t[n],e+=(o.lng-i.lng)*(o.lat+i.lat),n+=1;return e>0}function u(t){return(o(t)?[[l(t)]]:r(t)?[t.map(function(t){return l(t)})]:t.map(function(t){return t.map(l)})).map(function(t){return t.map(function(t,e){var n=[];return t.forEach(function(t){if(n.length>0){var e=n[n.length-1];t.lat===e.lat&&t.lng===e.lng||n.push(t)}else n.push(t)}),0===e?s(n)?n.reverse():n:s(n)?n:n.reverse()})})}function c(t){return u(t).reduce(function(t,e){var n=e.reduce(function(t,e){return t.push(e),t},[]);return t.push.apply(t,(0,b.default)(n)),t},[])}function f(t){return o(t)?t.length:t.reduce(function(t,e){return t+e.reduce(function(t,e){return t+e.length},0)},0)}function d(t){return t.reduce(function(t,e){return t+h(e)},0)}function h(t){var e=0,n=!0,i=!0,o=!1,r=void 0;try{for(var a,l=(0,y.default)(t);!(i=(a=l.next()).done);i=!0){var s=a.value,u=s.length;e+=n?u>=3?u-3:0:u+1,n=!1}}catch(t){o=!0,r=t}finally{try{!i&&l.return&&l.return()}finally{if(o)throw r}}return e}function v(t){var e=null;if(t.length>1){var n=0;e=[],t.forEach(function(t){n+=t.length,e.push(n)}),e.pop()}return e}function p(t,e){var n=3*d(t),i=_(t),o=new e(n),r=0;return t.forEach(function(t,e){var n=m(t),a=!0,l=!1,s=void 0;try{for(var u,c=(0,y.default)(n);!(a=(u=c.next()).done);a=!0){var f=u.value;o[r]=f+i[e],r+=1}}catch(t){l=!0,s=t}finally{try{!a&&c.return&&c.return()}finally{if(l)throw s}}}),o}function m(t){var e=v(t),n=k(t,{dimensions:2,result:[]});return(0,A.default)(n,e,2)}function _(t){var e=new Array(t.length+1);e[0]=0;var n=0;return t.forEach(function(t,i){n+=t.reduce(function(t,e){return t+e.length},0),e[i+1]=n}),e}Object.defineProperty(e,"__esModule",{value:!0});var g=n(18),y=i(g),x=n(32),b=i(x),S=n(421),w=i(S);e.isSimple=o,e.isPart=r,e.isComplex=a,e.isClockWise=s,e.normalize=u,e.getBorderPolyline=c,e.getVertexCount=f,e.getTriangleCount=d,e.getTriangleCountOfPart=h,e.getSurfaceIndices=p;var E=n(208),T=i(E),I=n(274),A=i(I),k=T.default.flattenVertices},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(227),p=n(391),m=i(p),_=n(390),g=i(_),y=n(17),x=i(y),b=n(7),S=function(t){function e(t,n,i){(0,l.default)(this,e);var o=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,n,i));return o.tileSize=n.tileSize||256,o._isPixelGeo=n.isPixelGeo||!1,o._data=n.data,o._cache=new m.default(0,o.unloadTile.bind(o)),o._maxTileCacheSize=x.default.isPC()?800:200,o._on("error",function(){o._sourceErrored=!0}),o}return(0,h.default)(e,t),(0,u.default)(e,[{key:"getUniqueId",value:function(){return this._uniqueId||(this._uniqueId=(this.map&&this.map.id||b.uniqueId())+"_"+this.id),this._uniqueId}},{key:"addTile",value:function(){}},{key:"loadTile",value:function(){}},{key:"unloadTile",value:function(){}},{key:"abortTile",value:function(){}},{key:"reload",value:function(){var t=this;this._cache.reset(),b.forIn(this._items,function(e,n){t.reloadTile(n)})}},{key:"reloadTile",value:function(t){t.state!==v.TILE_STATE.loading&&(t.state=v.TILE_STATE.reloading,this.loadTile(t,{},this._tileLoaded.bind(this,t)))}},{key:"removeTile",value:function(t){var e=this._items[t];if(e)if(delete this._items[t],e.hasData()){var n=e.coord.id;this._cache.add(n,e)}else e.aborted=!0,this.abortTile(e),this.unloadTile(e)}},{key:"clear",value:function(){this.clearTiles(),this._cache.reset()}},{key:"clearTiles",value:function(){var t=this;b.forIn(this._items,function(e){t.removeTile(e)})}},{key:"_tileLoaded",value:function(){}},{key:"getDrawItems",value:function(){return this._items}},{key:"onAdd",value:function(t){this.map=t}},{key:"onRemove",value:function(){this.map=null}},{key:"updateCacheSize",value:function(t){var e=Math.ceil(t.width/this.tileSize)+1,n=Math.ceil(t.height/this.tileSize)+1,i=e*n,o=Math.floor(5*i),r="number"==typeof this._maxTileCacheSize?Math.max(this._maxTileCacheSize,o):o;this._cache.setMaxSize(r)}},{key:"update",value:function(){}}]),e}(g.default);e.default=S},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=_.default.QMAPI_style+t;return a(e).then(function(n){var i=n.version,o=n.cacheJson;return u({styleId:t,version:i,serviceSrc:w.styleSrc,qosId:"st"}).then(function(n){if(n?s(e,n):n=o,!n)throw Error("未知错误：获取样式文件失败。");return(0,p.setBgColor)(t,n.data),n.data})}).catch(function(t){console.error(t)})}function r(t){var e=_.default.QMAPI_style_indoor+t;return a(e).then(function(n){var i=n.version,o=n.cacheJson;return u({styleId:t,version:i,serviceSrc:w.indoorStyleSrc,qosId:"in_st"}).then(function(t){return t?(s(e,t),t.data):o?o.data:null},function(t){return t&&console.error(t.status+": "+t.message),null})})}function a(t){return new v.default(function(e){S.support()?S.get(t,function(t){var n=JSON.parse(t)||null,i=n?n.version:-1;e({version:i,cacheJson:n})}):(console.error("兼容性错误：当前浏览器不支持LocalStorage。"),e({version:-1}))})}function l(t,e){return new v.default(function(n){if(S.support()){(0,p.setBgColor)(e,t);var i=_.default.QMAPI_style+"config";S.set(i,(0,d.default)({data:t}),function(){n(!0)})}else console.error("兼容性错误：当前浏览器不支持LocalStorage。"),n(!1)})}function s(t,e){S.support()&&S.set(t,(0,d.default)(e))}function u(t){var e=t.styleId,n=t.version,i=void 0===n?-1:n,o=t.serviceSrc,r=void 0===o?w.styleSrc:o,a=t.qosId,l=void 0===a?"st":a,s=c(r,{id:e,version:i});return new v.default(function(t,n){b.getJSON(null,s,function(o,r,a){if(!o&&r&&r.data){var s=!0;for(var u in r.data)if(r.data.hasOwnProperty(u)){s=!1;break}s?t(null):((0,g.qos)(l,{styleId:e,version:i,loadTime:a}),t(r))}else(0,g.qos)(l,{styleId:e,version:i,error:o&&o.status||0}),n(o||"未知错误：获取样式文件失败。")})})}function c(t,e){var n=t;return x.default.forIn(e,function(t,e){n=n.replace("{"+t+"}",e)}),n}Object.defineProperty(e,"__esModule",{value:!0});var f=n(78),d=i(f),h=n(27),v=i(h);e.loadStyleFile=o,e.loadIndoorStyleFile=r,e.setStyleConfig=l,e.loadStyleFileFromServer=u;var p=n(396),m=n(111),_=i(m),g=n(77),y=n(7),x=i(y),b=n(137),S=n(136),w=n(20)},function(t,e,n){"use strict";function i(t,e){var n=(0,r.default)(t.getLat()),i=(0,r.default)(e.getLat());return 2*Math.asin(Math.sqrt(Math.pow(Math.sin((n-i)/2),2)+Math.cos(n)*Math.cos(i)*Math.pow(Math.sin(((0,r.default)(t.getLng())-(0,r.default)(e.getLng()))/2),2)))}Object.defineProperty(e,"__esModule",{value:!0});var o=n(128),r=function(t){return t&&t.__esModule?t:{default:t}}(o);e.default=i},,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(65),p=i(v),m=n(277),_=i(m),g=n(17),y=n(77),x=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,l.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this));return n.onInit(t),n.dom=n.createDOM(),n.map=null,n.setMap(t.map),(0,y.statCn)("DOMOverlay"),n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_addToMap",value:function(){this.map&&(this.map._overlayer.childs.domOverlayLayer.appendChild(this.dom),this.updateDOM(),this._listener=(0,g.throttleWithFrame)(this.updateDOM.bind(this)),this.map.on("move",this._listener),this.map.on("resize",this._listener),this.map.on("offset_changed",this._listener),this._onMapdestroy=this._onMapdestroy.bind(this),this.map.on("destroy",this._onMapdestroy))}},{key:"_onMapdestroy",value:function(){this.setMap(null)}},{key:"_removeFromMap",value:function(){this.map&&(this.dom.parentNode.removeChild(this.dom),this.map.off("move",this._listener),this.map.off("resize",this._listener),this.map.off("offset_changed",this._listener),this.map.off("destroy",this._onMapdestroy),this._listener=null)}},{key:"getMap",value:function(){return this.map}},{key:"setMap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.map===t?this:!t||t instanceof _.default?(this._removeFromMap(),this.map=t,this._addToMap(),this):(console.error("类型错误: map参数类型错误，应为TMap.Map。"),this)}},{key:"destroy",value:function(){return this.onDestroy(),this.setMap(null),this.removeAllListeners(),this}},{key:"onInit",value:function(){}},{key:"onDestroy",value:function(){}},{key:"createDOM",value:function(){return document.createElement("div")}},{key:"updateDOM",value:function(){}}]),e}(p.default);e.default=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(61),l=i(a),s=n(7),u={color:"rgba(0, 0, 0, 1)",size:14,scale:1,offset:new l.default(0,0),angle:0,alignment:"center",verticalAlignment:"middle"},c=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,t),e=(0,s.extend)({},u,e),this.color=e.color,this.size=e.size,this.scale=e.scale,this.offset=e.offset,this.angle=e.angle,this.alignment=e.alignment,this.verticalAlignment=e.verticalAlignment};e.default=c},function(t,e,n){"use strict";function i(t,e){var n=!0,i=t.renderEngine.camera.getFogEdge()[1]+.15;if(i<1){var o=(1-i)*t.transform.height/2;e.y<o&&(n=!1)}return n}Object.defineProperty(e,"__esModule",{value:!0}),e.isReponsing=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(21),h=i(d),v=n(3),p=i(v),m=n(102),_=i(m),g=n(85),y=n(104),x=n(138),b=n(127),S=n(7),w=i(S),E=function(t){function e(t){(0,l.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return n.store=new g.Store("buffer",128,16,b.deleteInstanceCacllback),n.commonUniformList=["uMatrix","uCenter","uZoom","uPixelsPerMeter","uResolution","uProject_uCommonUnitsPerWorldUnit","uProject_uCommonUnitsPerWorldUnit2","uRelativeCenter"],n}return(0,p.default)(e,t),(0,u.default)(e,[{key:"draw",value:function(t,e,n,i){if(t&&n){var o=this.gl;o.useProgram(o.program),this.setUniforms(t,e,n,i);var r=this.setBuffers(t);o.drawElements(o.TRIANGLES,r.index.length,r.index.type,0),o.bindBuffer(o.ARRAY_BUFFER,null),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,null)}}},{key:"setBuffers",value:function(t){var e=this.gl,n=this.store,i=t.uid,o=!1;if(n){n.exist(i)?this.isBufferChanged(n.get(i),t)&&(o=!0):n.set(i,this.createBuffer(t));var r=n.get(i);return w.default.forIn(r,function(n,i){var r=i.buffer,a=i.location,l=i.size,s=i.type;r.bind(),o&&(r.bufferData(t[n],{usage:e.DYNAMIC_DRAW}),i.data=t[n]),"index"!==n&&r.pointToAttrib({location:a,size:l,type:s})}),r}}},{key:"setUniforms",value:function(t,e,n,i){var o=this.gl,r=e.center,a=e.zoom,l=1/(0,x.getSpatialResolution)(a),s=i.distanceScales||e.getDistanceScales(),u=(0,y.splitLatLngNumber)(r.lat),c=(0,y.splitLatLngNumber)(r.lng),f={latPart:(0,y.splitLatLngNumber)(t.center.lat),lngPart:(0,y.splitLatLngNumber)(t.center.lng)};o.uniformMatrix4fv(this.uMatrix,!1,n.elements),o.uniform4f(this.uCenter,c.high,u.high,c.low,u.low),o.uniform1f(this.uZoom,a),o.uniform3f(this.uPixelsPerMeter,l,l,l),o.uniform3f(this.uProject_uCommonUnitsPerWorldUnit,s.pixelsPerDegree[0],s.pixelsPerDegree[1],s.pixelsPerDegree[2]),o.uniform3f(this.uProject_uCommonUnitsPerWorldUnit2,s.pixelsPerDegree2[0],s.pixelsPerDegree2[1],s.pixelsPerDegree2[2]),o.uniform2f(this.uResolution,e.width,e.height),o.uniform4f(this.uRelativeCenter,f.lngPart.high,f.latPart.high,f.lngPart.low,f.latPart.low)}},{key:"destroy",value:function(){this.commonUniformList=null,(0,h.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}}]),e}(_.default);e.default=E},function(t,e,n){"use strict";function i(t){return Math.pow(2,Math.ceil((0,r.default)(t)))}Object.defineProperty(e,"__esModule",{value:!0});var o=n(320),r=function(t){return t&&t.__esModule?t:{default:t}}(o);e.getPowerOf2=i,e.default={extendCanvasToPow2:function(t,e){function n(t){if(t<2)return!1;var e=(0,r.default)(t);return e===~~e}return e=e||1,t&&t.isPow2&&1===e?t:n(t.width)&&n(t.height)&&1===e?(t.isPow2=!0,t):function(t,e){var n=document.createElement("canvas"),o=n.getContext("2d");return n.width=i(t.width*e),n.height=i(t.height*e),o.drawImage(t,0,0,n.width,n.height),n.isPow2=!0,n}(t,e)}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(0),r=i(o),a=n(1),l=i(a),s=n(61),u=n(42),c=n(7),f=function(){function t(){(0,r.default)(this,t),this.a=new s(128,128),this.b=256/360,this.c=256/(2*Math.PI),this.d=!0}return(0,l.default)(t,[{key:"fromLatLngToPoint",value:function(t){var e=new s(0,0),n=this.a;e.x=n.x+t.lng*this.b;var i=c.clamp(Math.sin(c.degree_to_radian(t.lat)),-(1-1e-15),1-1e-15);return e.y=n.y+.5*Math.log((1+i)/(1-i))*-this.c,e}},{key:"fromPointToLatLng",value:function(t){var e=this.a,n=c.radian_to_degree(2*Math.atan(Math.exp((t.y-e.y)/-this.c))-Math.PI/2),i=(t.x-e.x)/this.b;return new u(n,i,!0)}},{key:"latLngToCoord",value:function(t,e){var n=this.fromLatLngToPoint(t);if(n){var i=e,o=Math.pow(2,i);n.x=n.x*o,n.y=n.y*o}return n}},{key:"coordToLatLng",value:function(t,e){var n=e,i=Math.pow(2,n),o=new s(t.x/i,t.y/i);return this.fromPointToLatLng(o)}}]),t}();t.exports=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SATELLITE_LAYER_ID=e.VECTOR_LAYER_ID=e.DEFAULT_BASEMAP=e.SATELLITE_FEATURE=e.MAP_TYPE=void 0;var i=n(43),o=e.MAP_TYPE={vector:"vector",satellite:"satellite",traffic:"traffic",handdraw:"handdraw"},r=e.SATELLITE_FEATURE={satellite:"base",road:"road"};e.DEFAULT_BASEMAP={vector:{type:o.vector,features:[i.BASE_LAYER_TYPE.base,i.BASE_LAYER_TYPE.building3d,i.BASE_LAYER_TYPE.point,i.BASE_LAYER_TYPE.label]},satellite:{type:o.satellite,features:[r.satellite,r.road]},traffic:{type:o.traffic},handdraw:{type:o.handdraw}},e.VECTOR_LAYER_ID={base:"vector_bottom",building:"vector_top_building",poi:"vector_top_poi"},e.SATELLITE_LAYER_ID={base:"satellite",road:"road"}},function(t,e,n){"use strict";function i(t,e,n){return t*(1-n)+e*n}Object.defineProperty(e,"__esModule",{value:!0}),i.number=i,i.vec2=function(t,e,n){return[i(t[0],e[0],n),i(t[1],e[1],n)]},i.color=function(t,e,n){return[i(t[0],e[0],n),i(t[1],e[1],n),i(t[2],e[2],n),i(t[3],e[3],n)]},i.array=function(t,e,n){return t.map(function(t,o){return i(t,e[o],n)})},e.default=i},function(t,e,n){t.exports={default:n(325),__esModule:!0}},function(t,e,n){t.exports={default:n(327),__esModule:!0}},function(t,e,n){var i=function(){return this}()||Function("return this")(),o=i.regeneratorRuntime&&Object.getOwnPropertyNames(i).indexOf("regeneratorRuntime")>=0,r=o&&i.regeneratorRuntime;if(i.regeneratorRuntime=void 0,t.exports=n(323),o)i.regeneratorRuntime=r;else try{delete i.regeneratorRuntime}catch(t){i.regeneratorRuntime=void 0}},function(t,e){!function(e){"use strict";function n(t,e,n,i){var r=e&&e.prototype instanceof o?e:o,a=Object.create(r.prototype),l=new h(i||[]);return a._invoke=u(t,n,l),a}function i(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function o(){}function r(){}function a(){}function l(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function s(t){function e(n,o,r,a){var l=i(t[n],t,o);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==typeof u&&g.call(u,"__await")?Promise.resolve(u.__await).then(function(t){e("next",t,r,a)},function(t){e("throw",t,r,a)}):Promise.resolve(u).then(function(t){s.value=t,r(s)},a)}a(l.arg)}function n(t,n){function i(){return new Promise(function(i,o){e(t,n,i,o)})}return o=o?o.then(i,i):i()}var o;this._invoke=n}function u(t,e,n){var o=T;return function(r,a){if(o===A)throw new Error("Generator is already running");if(o===k){if("throw"===r)throw a;return p()}for(n.method=r,n.arg=a;;){var l=n.delegate;if(l){var s=c(l,n);if(s){if(s===P)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===T)throw o=k,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=A;var u=i(t,e,n);if("normal"===u.type){if(o=n.done?k:I,u.arg===P)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=k,n.method="throw",n.arg=u.arg)}}}function c(t,e){var n=t.iterator[e.method];if(n===m){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=m,c(t,e),"throw"===e.method))return P;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return P}var o=i(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,P;var r=o.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=m),e.delegate=null,P):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,P)}function f(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function d(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function h(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(f,this),this.reset(!0)}function v(t){if(t){var e=t[x];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(g.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=m,e.done=!0,e};return i.next=i}}return{next:p}}function p(){return{value:m,done:!0}}var m,_=Object.prototype,g=_.hasOwnProperty,y="function"==typeof Symbol?Symbol:{},x=y.iterator||"@@iterator",b=y.asyncIterator||"@@asyncIterator",S=y.toStringTag||"@@toStringTag",w="object"==typeof t,E=e.regeneratorRuntime;if(E)return void(w&&(t.exports=E));E=e.regeneratorRuntime=w?t.exports:{},E.wrap=n;var T="suspendedStart",I="suspendedYield",A="executing",k="completed",P={},M={};M[x]=function(){return this};var L=Object.getPrototypeOf,C=L&&L(L(v([])));C&&C!==_&&g.call(C,x)&&(M=C);var N=a.prototype=o.prototype=Object.create(M);r.prototype=N.constructor=a,a.constructor=r,a[S]=r.displayName="GeneratorFunction",E.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===r||"GeneratorFunction"===(e.displayName||e.name))},E.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,S in t||(t[S]="GeneratorFunction")),t.prototype=Object.create(N),t},E.awrap=function(t){return{__await:t}},l(s.prototype),s.prototype[b]=function(){return this},E.AsyncIterator=s,E.async=function(t,e,i,o){var r=new s(n(t,e,i,o));return E.isGeneratorFunction(e)?r:r.next().then(function(t){return t.done?t.value:r.next()})},l(N),N[S]="Generator",N[x]=function(){return this},N.toString=function(){return"[object Generator]"},E.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},E.values=v,h.prototype={constructor:h,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=m,this.done=!1,this.delegate=null,this.method="next",this.arg=m,this.tryEntries.forEach(d),!t)for(var e in this)"t"===e.charAt(0)&&g.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=m)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,i){return r.type="throw",r.arg=t,n.next=e,i&&(n.method="next",n.arg=m),!!i}if(this.done)throw t;for(var n=this,i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],r=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=g.call(o,"catchLoc"),l=g.call(o,"finallyLoc");if(a&&l){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&g.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=t,r.arg=e,o?(this.method="next",this.next=o.finallyLoc,P):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),P},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),d(n),P}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var o=i.arg;d(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:v(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=m),P}}}(function(){return this}()||Function("return this")())},function(t,e,n){var i=n(5),o=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return o.stringify.apply(o,arguments)}},function(t,e,n){n(332),t.exports=n(5).Math.log2},function(t,e,n){n(333);var i=n(5).Object;t.exports=function(t,e){return i.defineProperties(t,e)}},function(t,e,n){n(334),t.exports=n(5).Object.freeze},function(t,e,n){n(335);var i=n(5).Object;t.exports=function(t,e){return i.getOwnPropertyDescriptor(t,e)}},function(t,e,n){n(337),t.exports=n(5).Object.values},function(t,e,n){n(66),n(36),n(39),n(336),n(340),n(339),n(338),t.exports=n(5).Set},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,n){var i=n(8);i(i.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){var i=n(8);i(i.S+i.F*!n(12),"Object",{defineProperties:n(131)})},function(t,e,n){var i=n(11),o=n(54).onFreeze;n(49)("freeze",function(t){return function(e){return t&&i(e)?t(o(e)):e}})},function(t,e,n){var i=n(24),o=n(88).f;n(49)("getOwnPropertyDescriptor",function(){return function(t,e){return o(i(t),e)}})},function(t,e,n){"use strict";var i=n(177),o=n(89);t.exports=n(141)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(o(this,"Set"),t=0===t?0:t,t)}},i)},function(t,e,n){var i=n(8),o=n(132)(!1);i(i.S,"Object",{values:function(t){return o(t)}})},function(t,e,n){n(145)("Set")},function(t,e,n){n(146)("Set")},function(t,e,n){var i=n(8);i(i.P+i.R,"Set",{toJSON:n(178)("Set")})},function(t,e,n){"use strict";var i=n(357)(!0);t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},function(t,e,n){"use strict";var i=n(76),o=n(205),r=n(46);t.exports=function(t){for(var e=i(this),n=r(e.length),a=arguments.length,l=o(a>1?arguments[1]:void 0,n),s=a>2?arguments[2]:void 0,u=void 0===s?n:o(s,n);u>l;)e[l++]=t;return e}},function(t,e,n){"use strict";var i=n(57),o=n(204);t.exports=function(t,e,n){e in t?i.f(t,e,o(0,n)):t[e]=n}},function(t,e,n){var i=n(31),o=n(30).document,r=i(o)&&i(o.createElement);t.exports=function(t){return r?o.createElement(t):{}}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var i=n(40)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[i]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,n){var i=n(30).document;t.exports=i&&i.documentElement},function(t,e,n){var i=n(31),o=n(355).set;t.exports=function(t,e,n){var r,a=e.constructor;return a!==n&&"function"==typeof a&&(r=a.prototype)!==n.prototype&&i(r)&&o&&o(t,r),t}},function(t,e,n){var i=n(215),o=n(40)("iterator"),r=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||r[o]===t)}},function(t,e,n){var i=n(31),o=n(133),r=n(40)("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==o(t))}},function(t,e,n){"use strict";var i=n(199),o=n(6),r=n(90),a=n(100),l=n(215),s=n(433),u=n(218),c=n(202),f=n(40)("iterator"),d=!([].keys&&"next"in[].keys()),h=function(){return this};t.exports=function(t,e,n,v,p,m,_){s(n,e,v);var g,y,x,b=function(t){if(!d&&t in T)return T[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+" Iterator",w="values"==p,E=!1,T=t.prototype,I=T[f]||T["@@iterator"]||p&&T[p],A=I||b(p),k=p?w?b("entries"):A:void 0,P="Array"==e?T.entries||I:I;if(P&&(x=c(P.call(new t)))!==Object.prototype&&x.next&&(u(x,S,!0),i||"function"==typeof x[f]||a(x,f,h)),w&&I&&"values"!==I.name&&(E=!0,A=function(){return I.call(this)}),i&&!_||!d&&!E&&T[f]||a(T,f,A),l[e]=A,l[S]=h,p)if(g={values:w?A:b("values"),keys:m?A:b("keys"),entries:k},_)for(y in g)y in T||r(T,y,g[y]);else o(o.P+o.F*(d||E),e,g);return g}},function(t,e){var n=Math.expm1;t.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,n){"use strict";var i=n(284),o=RegExp.prototype.exec,r=String.prototype.replace,a=o,l=function(){var t=/a/,e=/b*/g;return o.call(t,"a"),o.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),s=void 0!==/()??/.exec("")[1];(l||s)&&(a=function(t){var e,n,a,u,c=this;return s&&(n=new RegExp("^"+c.source+"$(?!\\s)",i.call(c))),l&&(e=c.lastIndex),a=o.call(c,t),l&&a&&(c.lastIndex=c.global?a.index+a[0].length:e),s&&a&&a.length>1&&r.call(a[0],n,function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(a[u]=void 0)}),a}),t.exports=a},function(t,e,n){var i=n(31),o=n(28),r=function(t,e){if(o(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=n(122)(Function.call,n(123).f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return r(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:r}},function(t,e,n){var i=n(290)("keys"),o=n(206);t.exports=function(t){return i[t]||(i[t]=o(t))}},function(t,e,n){var i=n(125),o=n(134);t.exports=function(t){return function(e,n){var r,a,l=String(o(e)),s=i(n),u=l.length;return s<0||s>=u?t?"":void 0:(r=l.charCodeAt(s),r<55296||r>56319||s+1===u||(a=l.charCodeAt(s+1))<56320||a>57343?t?l.charAt(s):r:t?l.slice(s,s+2):a-56320+(r-55296<<10)+65536)}}},function(t,e,n){var i=n(350),o=n(134);t.exports=function(t,e,n){if(i(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(o(t))}},function(t,e,n){"use strict";var i=n(125),o=n(134);t.exports=function(t){var e=String(o(this)),n="",r=i(t);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}},function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,n){var i,o,r,a=n(122),l=n(430),s=n(347),u=n(344),c=n(30),f=c.process,d=c.setImmediate,h=c.clearImmediate,v=c.MessageChannel,p=c.Dispatch,m=0,_={},g=function(){var t=+this;if(_.hasOwnProperty(t)){var e=_[t];delete _[t],e()}},y=function(t){g.call(t.data)};d&&h||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return _[++m]=function(){l("function"==typeof t?t:Function(t),e)},i(m),m},h=function(t){delete _[t]},"process"==n(133)(f)?i=function(t){f.nextTick(a(g,t,1))}:p&&p.now?i=function(t){p.now(a(g,t,1))}:v?(o=new v,r=o.port2,o.port1.onmessage=y,i=a(r.postMessage,r,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(t){c.postMessage(t+"","*")},c.addEventListener("message",y,!1)):i="onreadystatechange"in u("script")?function(t){s.appendChild(u("script")).onreadystatechange=function(){s.removeChild(this),g.call(t)}}:function(t){setTimeout(a(g,t,1),0)}),t.exports={set:d,clear:h}},function(t,e,n){"use strict";function i(t,e,n){var i,o,r,a=new Array(n),l=8*n-e-1,s=(1<<l)-1,u=s>>1,c=23===e?F(2,-24)-F(2,-77):0,f=0,d=t<0||0===t&&1/t<0?1:0;for(t=B(t),t!=t||t===R?(o=t!=t?1:0,i=s):(i=z(D(t)/U),t*(r=F(2,-i))<1&&(i--,r*=2),t+=i+u>=1?c/r:c*F(2,1-u),t*r>=2&&(i++,r/=2),i+u>=s?(o=0,i=s):i+u>=1?(o=(t*r-1)*F(2,e),i+=u):(o=t*F(2,u-1)*F(2,e),i=0));e>=8;a[f++]=255&o,o/=256,e-=8);for(i=i<<e|o,l+=e;l>0;a[f++]=255&i,i/=256,l-=8);return a[--f]|=128*d,a}function o(t,e,n){var i,o=8*n-e-1,r=(1<<o)-1,a=r>>1,l=o-7,s=n-1,u=t[s--],c=127&u;for(u>>=7;l>0;c=256*c+t[s],s--,l-=8);for(i=c&(1<<-l)-1,c>>=-l,l+=e;l>0;i=256*i+t[s],s--,l-=8);if(0===c)c=1-a;else{if(c===r)return i?NaN:u?-R:R;i+=F(2,e),c-=a}return(u?-1:1)*i*F(2,c-e)}function r(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function a(t){return[255&t]}function l(t){return[255&t,t>>8&255]}function s(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function u(t){return i(t,52,8)}function c(t){return i(t,23,4)}function f(t,e,n){I(t[P],e,{get:function(){return this[n]}})}function d(t,e,n,i){var o=+n,r=E(o);if(r+e>t[j])throw O(M);var a=t[Y]._b,l=r+t[G],s=a.slice(l,l+e);return i?s:s.reverse()}function h(t,e,n,i,o,r){var a=+n,l=E(a);if(l+e>t[j])throw O(M);for(var s=t[Y]._b,u=l+t[G],c=i(+o),f=0;f<e;f++)s[u+f]=c[r?f:e-f-1]}var v=n(30),p=n(56),m=n(199),_=n(291),g=n(100),y=n(216),x=n(29),b=n(214),S=n(125),w=n(46),E=n(448),T=n(201).f,I=n(57).f,A=n(342),k=n(218),P="prototype",M="Wrong index!",L=v.ArrayBuffer,C=v.DataView,N=v.Math,O=v.RangeError,R=v.Infinity,V=L,B=N.abs,F=N.pow,z=N.floor,D=N.log,U=N.LN2,Y=p?"_b":"buffer",j=p?"_l":"byteLength",G=p?"_o":"byteOffset";if(_.ABV){if(!x(function(){L(1)})||!x(function(){new L(-1)})||x(function(){return new L,new L(1.5),new L(NaN),"ArrayBuffer"!=L.name})){L=function(t){return b(this,L),new V(E(t))};for(var W,Z=L[P]=V[P],X=T(V),H=0;X.length>H;)(W=X[H++])in L||g(L,W,V[W]);m||(Z.constructor=L)}var Q=new C(new L(2)),q=C[P].setInt8;Q.setInt8(0,2147483648),Q.setInt8(1,2147483649),!Q.getInt8(0)&&Q.getInt8(1)||y(C[P],{setInt8:function(t,e){q.call(this,t,e<<24>>24)},setUint8:function(t,e){q.call(this,t,e<<24>>24)}},!0)}else L=function(t){b(this,L,"ArrayBuffer");var e=E(t);this._b=A.call(new Array(e),0),this[j]=e},C=function(t,e,n){b(this,C,"DataView"),b(t,L,"DataView");var i=t[j],o=S(e);if(o<0||o>i)throw O("Wrong offset!");if(n=void 0===n?i-o:w(n),o+n>i)throw O("Wrong length!");this[Y]=t,this[G]=o,this[j]=n},p&&(f(L,"byteLength","_l"),f(C,"buffer","_b"),f(C,"byteLength","_l"),f(C,"byteOffset","_o")),y(C[P],{getInt8:function(t){return d(this,1,t)[0]<<24>>24},getUint8:function(t){return d(this,1,t)[0]},getInt16:function(t){var e=d(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=d(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return r(d(this,4,t,arguments[1]))},getUint32:function(t){return r(d(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return o(d(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return o(d(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){h(this,1,t,a,e)},setUint8:function(t,e){h(this,1,t,a,e)},setInt16:function(t,e){h(this,2,t,l,e,arguments[2])},setUint16:function(t,e){h(this,2,t,l,e,arguments[2])},setInt32:function(t,e){h(this,4,t,s,e,arguments[2])},setUint32:function(t,e){h(this,4,t,s,e,arguments[2])},setFloat32:function(t,e){h(this,4,t,c,e,arguments[2])},setFloat64:function(t,e){h(this,8,t,u,e,arguments[2])}});k(L,"ArrayBuffer"),k(C,"DataView"),g(C[P],_.VIEW,!0),e.ArrayBuffer=L,e.DataView=C},function(t,e,n){e.f=n(40)},function(t,e,n){var i=n(258),o=n(40)("iterator"),r=n(215);t.exports=n(52).getIteratorMethod=function(t){if(void 0!=t)return t[o]||t["@@iterator"]||r[i(t)]}},function(t,e,n){"use strict";var i=n(198),o=n(434),r=n(215),a=n(101);t.exports=n(351)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):"keys"==e?o(0,n):"values"==e?o(0,t[n]):o(0,[n,t[n]])},"values"),r.Arguments=r.Array,i("keys"),i("values"),i("entries")},,,function(t,e,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},,,,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(t&&e)return e.y-t.y<=x&&e.x-t.x<=x}var r=n(18),a=i(r),l=n(0),s=i(l),u=n(1),c=i(u),f=n(611),d=i(f),h=n(93),v=n(61),p=n(65),m=n(17),_=n(7),g=_.forIn,y={scrollZoom:n(613),touchZoomRotate:n(615),touchTilt:n(614),doubleClickZoom:n(608),dragRotate:n(610),dragPan:n(609),longPress:n(612)},x=10,b=function(){function t(e,n){(0,s.default)(this,t),e.handler||(this.members=[e],this.map=e,this.eventHandlers=[],this.eventHandlers.push(m.on(window,"resize",this.onWindowResize.bind(this))),this.el=e.getContainer(),this.rl=e.getRenderContainer(),this.transform=e.transform,this.controlManager=e.controlManager,this.idleHandler=new d.default(this.transform),this.contextMenuEvent=null,this.mouseDown=!1,this.startPos=null,this.startTouchPoints=null,this.tapped=null,g(y,function(t,i){e[t]=new i(e,n),n&&n.disInteractive||e[t].enable()}),this.eventHandlers.push(m.on(this.controlManager,{control_added:function(t){e._fire("control_added",t,!0)},control_removed:function(t){e._fire("control_removed",t,!0)}})),this.eventHandlers.push(m.on(this.idleHandler,"idle",function(){e._fire("idle",null,!0)})),this.eventHandlers.push(m.on(this.transform,{zoom_changed:function(t){e._fire("zoom_changed",t,!0)},center_changed:function(t){e._fire("center_changed",t,!0)},bounds_changed:function(t){e._fire("bounds_changed",t,!0)},scale_changed:function(t){e._fire("scale_changed",t,!0)}})),this.eventHandlers.push(m.on(e.canvasContainer,{webglcontextlost:e._onContextError.bind(e,"lost"),webglcontaxtrestored:e._onContextError.bind(e,"restored")})),this.eventHandlers.push(m.on(this.el,{mouseout:this.onMouseOut.bind(this),mousedown:this.onMouseDown.bind(this),mouseup:this.onMouseUp.bind(this),mousemove:this.onMouseMove.bind(this),touchstart:this.onTouchStart.bind(this),touchend:this.onTouchEnd.bind(this),touchmove:this.onTouchMove.bind(this),touchcancel:this.onTouchCancel.bind(this),click:this.onClick.bind(this),dblclick:this.onDblClick.bind(this),contextmenu:this.onContextMenu.bind(this)})))}return(0,c.default)(t,[{key:"destroy",value:function(){var t=this;g(y,function(e){t.map[e]&&(t.map[e].disable(),delete t.map[e])}),this.eventHandlers.forEach(function(t){t&&t.remove&&t.remove()}),this.members=null,this.map=null,this.eventHandlers=[],this.el=null,this.rl=null,this.transform=null,this.idleHandler=null,this.contextMenuEvent=null,this.mouseDown=!1,this.startPos=null,this.tapped=null}},{key:"onWindowResize",value:function(){var t=this.rl.clientWidth,e=this.rl.clientHeight;this.map.resize(t,e)}},{key:"onMouseOut",value:function(t){this.fireMouseEvent("mouseout",t)}},{key:"onMouseDown",value:function(t){this.map.stopEase(),this.startPos=h.mousePos(this.el,t),this.fireMouseEvent("mousedown",t),this.mouseDown=!0}},{key:"onMouseUp",value:function(t){if(this.contextMenuEvent&&!this.rotating&&this.fireMouseEvent("contextmenu",this.contextMenuEvent),this.contextMenuEvent=null,this.mouseDown=!1,this.fireMouseEvent("mouseup",t),t&&2===t.button){h.mousePos(this.el,t).equals(this.startPos)&&this.fireMouseEvent("rightclick",t)}}},{key:"onMouseMove",value:function(t){if(!(this.map.dragPan&&this.map.dragPan.isActive()||this.map.dragRotate&&this.map.dragRotate.isActive())){for(var e=t.toElement||t.target;e&&e!==this.el;)e=e.parentNode;e===this.el&&this.fireMouseEvent("mousemove",t)}}},{key:"onTouchStart",value:function(t){if(t.preventDefault(),this.map.stopEase(),this.fireTouchEvent("touchstart",t),t.touches&&!(t.touches.length>1)){var e=this.startTouchPoints;if(this.startTouchPoints=h.touchPos(this.el,t),this.tapped){clearTimeout(this.tapped),this.tapped=null;var n=e&&e[0],i=this.startTouchPoints&&this.startTouchPoints[0];n&&i&&(this.maybeDoubleTap=o(n,i)),this.tapped=setTimeout(this.onTouchTimeout.bind(this),300)}else this.tapped=setTimeout(this.onTouchTimeout.bind(this),300)}}},{key:"onTouchMove",value:function(t){this.fireTouchEvent("touchmove",t);var e=this.startTouchPoints[0],n=h.touchPos(this.el,t)[0];this.maybeDoubleTap&&e&&n&&(this.maybeDoubleTap=o(e,n))}},{key:"onTouchEnd",value:function(t){var e=this;this.fireTouchEvent("touchend",t),setTimeout(function(){if(e.tapped){var n=e.startTouchPoints[0],i=h.touchPos(e.el,t)[0];if(n&&i){var r=o(n,i);r&&e.fireTouchEvent("click",t),r&&e.maybeDoubleTap&&setTimeout(function(){e.fireTouchEvent("dblclick",t),e.maybeDoubleTap=!1},50)}}},50)}},{key:"onTouchCancel",value:function(t){this.maybeDoubleTap=!1,this.fireTouchEvent("touchcancel",t)}},{key:"onTouchTimeout",value:function(){this.maybeDoubleTap=!1,this.tapped=null}},{key:"onClick",value:function(t){h.mousePos(this.el,t).equals(this.startPos)&&this.fireMouseEvent("click",t)}},{key:"onDblClick",value:function(t){this.fireMouseEvent("dblclick",t),t.preventDefault()}},{key:"onContextMenu",value:function(t){var e=this.map.dragRotate&&this.map.dragRotate.isActive();this.mouseDown||e?this.mouseDown&&(this.contextMenuEvent=t):this.fireMouseEvent("contextmenu",t),t.preventDefault()}},{key:"fireMouseEvent",value:function(t,e){var n=h.mousePos(this.el,e),i={latLng:this.map.unprojectFromContainer(n),point:n,originalEvent:e};"click"===t&&(i.poi=this.map._getPoiInfo(n));var o=!0,r=!1,l=void 0;try{for(var s,u=(0,a.default)(this.members);!(o=(s=u.next()).done);o=!0){s.value._fire(t,i)}}catch(t){r=!0,l=t}finally{try{!o&&u.return&&u.return()}finally{if(r)throw l}}}},{key:"fireTouchEvent",value:function(t,e){var n=this,i=h.touchPos(this.el,e),o=i.reduce(function(t,e,n,i){return t.add(e.div(i.length))},new v(0,0)),r={latLng:this.map.unprojectFromContainer(o),point:o,latLngs:i.map(function(t){return n.map.unprojectFromContainer(t)},this),points:i,originalEvent:e};"click"===t&&(r.poi=this.map._getPoiInfo(i[0]));var l=!0,s=!1,u=void 0;try{for(var c,f=(0,a.default)(this.members);!(l=(c=f.next()).done);l=!0){c.value._fire(t,r)}}catch(t){s=!0,u=t}finally{try{!l&&f.return&&f.return()}finally{if(s)throw u}}}},{key:"registe",value:function(t){if(!(t instanceof p))throw new Error("illegal event type!");var e=!0,n=!1,i=void 0;try{for(var o,r=(0,a.default)(this.members);!(e=(o=r.next()).done);e=!0){if(o.value===t)return}}catch(t){n=!0,i=t}finally{try{!e&&r.return&&r.return()}finally{if(n)throw i}}this.members.push(t)}},{key:"cancel",value:function(t){if(!(t instanceof p))throw new Error("illegal event type!");for(var e=this.members,n=e.length-1;n>-1;n--)e[n]===t&&e.splice(n,1)}}]),t}();t.exports=b},function(t,e,n){"use strict";n(675),n(677),n(676),n(683),n(682),n(685),n(684),n(686),n(679),n(680),n(678),n(681),n(873),n(893)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.INSTANCE_PARTS="\nattribute vec2 positions;\n        \nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute vec2 instanceSizes;\nattribute vec4 instanceInfos;\n\n\nattribute vec3 instancePickingColors;\nattribute vec4 instanceFrames;\nattribute vec3 instancePixelOffset;\n",e.UNIFORM_PARTS="\nuniform float u_sizeScale;\nuniform float u_sizeMinPixels;\nuniform float u_sizeMaxPixels;\nuniform vec2 u_textureDim;\nuniform float u_opacity;\nuniform float u_mapScale;\n\n",e.generateMainPart=function(t,e){return"\n    \n    vec2 imageSize = instanceFrames.zw;\n            \n    vec2 sizePixels = clamp(instanceSizes * u_sizeScale, vec2(u_sizeMinPixels), vec2(u_sizeMaxPixels));\n    \n    "+t+"\n\n    if (bool(instanceInfos.w))  {\n        vec4 center_proj = uMatrix * vec4(project_view_local_position_precision(instancePositions.xy, instancePositions64xyLow.xy), 0.0, 1.0);\n        vec2 center_screen = proj_position_to_screen(center_proj);\n        vec2 corner_screen = center_screen + pixelOffset * u_mapScale;\n    \n        gl_Position = screen_to_proj_position(corner_screen, center_proj.z, center_proj.w);\n    } else {\n        gl_Position = uMatrix * vec4(project_view_local_position_precision(instancePositions.xy, instancePositions64xyLow.xy) + pixelOffset, 0.0, 1.0);\n    }\n    \n    vTextureCoords = mix(\n        instanceFrames.xy,\n        instanceFrames.xy + imageSize,\n        (positions.xy + 1.0) / 2.0\n    ) / u_textureDim;\n    \n    vTextureCoords.y = 1.0 - vTextureCoords.y;\n    \n\n    "+e+"\n    vColor = picking_getFinalColor(vColor, instancePickingColors);\n    vOpacity = instancePixelOffset.z;\n    "}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(126),o=n(266),r=n(221);e.default={v:"\n\t\t#define SHADER_NAME polygon-vertex-shader\n\n\t\tattribute vec2 vertexPositions;\n\t\t\n\t\tattribute float vertexValid;\n\t\tattribute vec3 positions;\n\t\tattribute vec2 positions64xyLow;\n\t\tattribute vec3 nextPositions;\n\t\tattribute vec2 nextPositions64xyLow;\n\t\tattribute float elevations;\n\t\tattribute vec4 fillColors;\n\t\tattribute vec4 lineColors;\n\t\tattribute vec3 pickingColors;\n\n\t\t"+i.UNIFORM_PART+"\n        \n\t\t"+o.PICK_UNIFORM+"\n\t\t\n\t\t"+r.LIGHT_UNIFORM+"\n\t\t\n\t\tuniform bool u_isSideVertex;\n\t\tuniform bool u_extruded;\n\t\tuniform bool u_isWireframe;\n\t\tuniform float u_elevationScale;\n\t\tuniform float u_opacity;\n\t\t\n\t\tvarying vec4 vColor;\n\t\tvarying float isValid;\n\n\t\t"+r.LIGHT_VARYING+"\n\n\t\t"+i.PROJECTION_PART+"\n        \n\t\t"+o.PICK_FUNCTION+"\n\t\t\n\t\t"+r.LIGHT_VERTEX+"\n\t\t"+r.LIGHT_FRAG+"\n\t\t\n\t\tvoid main(void) {\n\t\t\tvec3 pos;\n\t\t\tvec2 pos64xyLow;\n\t\t\tvec3 normal;\n\t\t\tvec4 colors = mix(fillColors, lineColors, float(u_isWireframe));\n\n\t\t\tfloat isSideVertex = float(u_isSideVertex);\n\t\t\tfloat extruded = float(u_extruded);\n\n\t\t\tpos = mix(\n\t\t\t\tpositions,\n\t\t\t\t\n\t\t\t\tmix(positions, nextPositions, vertexPositions.x),\n\t\t\t\tisSideVertex\n\t\t\t);\n\t\t\tpos64xyLow = mix(\n\t\t\t\tpositions64xyLow,\n\t\t\t\tmix(positions64xyLow, nextPositions64xyLow, vertexPositions.x),\n\t\t\t\tisSideVertex\n\t\t\t);\n\t\t\tisValid = mix(1.0, vertexValid, isSideVertex);\n\t\t\tpos.z += mix(\n\t\t\t\t0.0,\n\t\t\t\tabs(elevations) * mix(1.0, vertexPositions.y, isSideVertex),\n\t\t\t\textruded\n\t\t\t) * u_elevationScale;\n\t\t\t\n\t\t\t\n\t\t\tpos.z = mix(pos.z, mix(pos.z - abs(elevations), pos.z, float(elevations >= 0.0)), extruded);\n\t\t\t\n\t\t\tvec3 local_position = project_view_local_position_precision(pos.xyz, pos64xyLow.xy);\n\t\t\tvec3 current_local_position = project_view_local_position_precision(positions.xyz, positions64xyLow.xy);\n\t\t\tvec3 next_local_position = project_view_local_position_precision(nextPositions.xyz, nextPositions64xyLow.xy);\n\n\t\t\tgl_Position = uMatrix * vec4(local_position, 1.0);\n\t\t\t\n\t\t\tnormal = mix(\n\t\t\t\tvec3(0., 0., 1.),\n\t\t\t\tmix(\n\t\t\t\t\tvec3(0.0, 0.0, 1.0),\n\t\t\t\t\tnormalize(\n\t\t\t\t\t\tcross(\n\t\t\t\t\t\t\tnormalize(vec3(next_local_position.xy - current_local_position.xy, 0.0)),\n\t\t\t\t\t\t\tvec3(0.0, 0.0, 1.0)\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t\tfloat(u_isSideVertex && !u_isWireframe)\n\t\t\t\t),\n\t\t\t\textruded\n\t\t\t);\n\n\t\t\tlighting_apply_on_vertex(local_position.xyz, normal, mat4(1.0));\n\t\t\tvec4 color = vec4(colors.rgb, colors.a * u_opacity) / 255.0;\n\t\t\tvec4 lightingColor = mix(\n\t\t\t\tcolor,\n\t\t\t\tlighting_apply_on_color(color),\n\t\t\t\t\n\t\t\t\textruded\n\t\t\t);\n\t\t\tvColor = picking_getFinalColor(lightingColor, pickingColors);\n\t\t}\n\t",f:"\n\t\t#define SHADER_NAME polygon-fragment-shader\n\n\t\tprecision highp float;\n\t\t\n\t\tvarying vec4 vColor;\n\t\tvarying float isValid;\n\t\t\n\t\tvoid main(void) {\n\t\t\tif (isValid < 0.5) {\n\t\t\t\tdiscard;\n\t\t\t}\n\t\t\tgl_FragColor = vColor;\n\t\t}\n\t",name:"polygon"}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(0),r=i(o),a=n(1),l=i(a),s=n(7),u=i(s),c=function(){function t(e,n,i){(0,r.default)(this,t),this.worker=e,this.parent=n,this.mapId=i,this.callbacks={},this.callbackID=0,this.receive=this.receive.bind(this),this.worker.addEventListener("message",this.receive,!1)}return(0,l.default)(t,[{key:"send",value:function(t,e,n,i){if(this.worker){var o=n?u.default.uniqueId()+":"+this.callbackID:null;this.callbackID+=1,n&&(this.callbacks[o]=n),this.worker.postMessage({targetMapId:i,sourceMapId:this.mapId,type:t,id:String(o),data:e})}}},{key:"receive",value:function(t){var e=this,n=t.data,i=n.id,o=void 0;if(!n.targetMapId||this.mapId===n.targetMapId){var r=function(t,n,o){if(e.worker){var r=null;n&&n.transferableList&&(r=n.transferableList,delete n.transferableList),e.worker.postMessage({sourceMapId:e.mapId,type:"<response>",id:String(i),error:t,data:n,time:o},r||[])}};if("<response>"===n.type)o=this.callbacks[n.id],delete this.callbacks[n.id],o&&o(n.error||null,n.data,n.time);else if(void 0!==n.id&&this.parent[n.type])this.parent[n.type](n.sourceMapId,n.data,r);else if(void 0!==n.id&&this.parent.getWorkerSource){var a=n.type.split("."),l=this.parent.getWorkerSource(n.sourceMapId,a[0]);l[a[1]](n.data,r)}}}},{key:"remove",value:function(){this.worker.removeEventListener("message",this.receive,!1),this.worker=null}}]),t}();t.exports=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.easableMixin=void 0;var i=n(17);e.easableMixin={_abortFn:null,_finishFn:null,_ease:function(t,e,n,o){var r=this;this._finishFn=e;var a=!1;this._abortFn=(0,i.timed)(function(e){t.call(this,o.easing(e)),1===e&&this._finishEase()},function(){a||(delete r._finishFn,n&&n.call(r),a=!0,delete r._abortFn)},!1===o.animate?0:o.duration,this)},_finishEase:function(){delete this._abortFn;var t=this._finishFn;delete this._finishFn,t&&t.call(this)}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){for(var n=(0,s.latLngToMercator)(t),i=[],o=0;o<=f;o++){var r=o*d,a=new c.default(0,0);a.x=Math.cos(r),a.y=Math.sin(r),i.push(a)}for(var l=i.length-1;l>=0;l--){var u=i[l];i.push(new c.default(u.y,u.x))}for(var h=i.length-1;h>=0;h--){var v=i[h];i.push(new c.default(-v.x,v.y))}for(var p=i.length-1;p>=0;p--){var m=i[p];i.push(new c.default(m.x,-m.y))}var _=t.getLat()*Math.PI/180;return i.map(function(t){return t.x=n.x+e/Math.cos(_)*t.x,t.y=n.y+e/Math.cos(_)*t.y,(0,s.mercatorToLatLng)(t)})}function r(t){return(0,l.default)(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.getCirclePath=o;var a=n(304),l=i(a),s=n(138),u=n(61),c=i(u),f=9,d=5*Math.PI/180;e.default=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(1),l=i(a),s=n(42),u=i(s),c=n(84),f=i(c),d=function(){function t(e,n){(0,r.default)(this,t),this.markerCluster=e,this.gridSize=e.gridSize,this.averageCenter=e.averageCenter,this.zoom=n,this.center=null,this.geometries=[],this.geometrySet={},this.bounds=null}return(0,l.default)(t,[{key:"getClusterInfo",value:function(){return{center:this.center,geometries:this.geometries,bounds:this.bounds}}},{key:"getCenter",value:function(){return this.center}},{key:"add",value:function(t){if(!this.geometrySet[t.id]){if(this.center){if(this.averageCenter){var e=this.geometries.length+1,n=(this.center.lat*(e-1)+t.position.lat)/e,i=(this.center.lng*(e-1)+t.position.lng)/e;this.center=new u.default(n,i),this._calculateBounds()}}else this.center=t.position,this._calculateBounds();this.geometrySet[t.id]=t,this.geometries.push(t)}}},{key:"_calculateBounds",value:function(){var t=new f.default(this.center,this.center);this.bounds=this.markerCluster._getExtendedBounds(t,this.zoom)}},{key:"getBounds",value:function(){var t=new f.default(this.center,this.center);return this.geometries.forEach(function(e){t.extend(new u.default(e.position.lat,e.position.lng))}),t}},{key:"getGeometries",value:function(){return this.geometries}},{key:"isInBounds",value:function(t){return this.bounds.contains(t.position)}},{key:"remove",value:function(){this.markerCluster=null,this.gridSize=null,this.averageCenter=null,this.center=null,this.geometries=[],this.geometrySet={},this.bounds=null}}],[{key:"normalizeClusterInfo",value:function(t){return{center:u.default.convert(t.center),geometries:t.geometries.map(function(t){return t.position=u.default.convert(t.position),t}),bounds:f.default._convertFromWorker(t.bounds)}}}]),t}();e.default=d},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return t.reduce(function(t,e){return t+y.getVertexCount(e)},0)}function r(t){return t.reduce(function(t,e){return t+y.getTriangleCount(e)},0)}function a(t){var e=new Array(t.length+1);e[0]=0;var n=0;return t.forEach(function(t,i){n+=y.getVertexCount(t),e[i+1]=n}),e}function l(t){var e=t.complexPolygons,n=t.IndexType,i=void 0===n?Uint32Array:n,o=3*r(e),l=a(e),s=new i(o),u=0;return e.forEach(function(t,e){var n=y.getSurfaceIndices(t,i),o=!0,r=!1,a=void 0;try{for(var c,f=(0,h.default)(n);!(o=(c=f.next()).done);o=!0){var d=c.value;s[u]=d+l[e],u+=1}}catch(t){r=!0,a=t}finally{try{!o&&f.return&&f.return()}finally{if(r)throw a}}}),s}function s(t){var e=t.cache,n=e.positions,i=e.positions64xyLow,o=e.vertexValid,r=t.complexPolygons,a=t.fp64,l=0;r.forEach(function(t){t.forEach(function(t){t.forEach(function(t){t.forEach(function(t){var e=t.lng,o=t.lat,r=t.z||0;n[3*l]=e,n[3*l+1]=o,n[3*l+2]=r,a&&(i[2*l]=(0,S.fp64LowPart)(e),i[2*l+1]=(0,S.fp64LowPart)(o)),l+=1}),o[l-1]=0})})})}function u(t){var e=t.cache,n=t.complexPolygons,i=t.pointCount,o=t.getElevation,r=e||new Float32Array(i),a=0;return n.forEach(function(t,e){var n=o(e),i=y.getVertexCount(t);E({target:r,source:[n],start:a,count:i}),a+=i}),r}function c(t){var e=t.cache,n=t.complexPolygons,i=t.pointCount,o=t.getColor,r=e||new Uint8ClampedArray(4*i),a=0;return n.forEach(function(t,e){var n=o(e);isNaN(n[3])&&(n[3]=255);var i=y.getVertexCount(t);E({target:r,source:n,start:a,count:i}),a+=n.length*i}),r}function f(t){var e=t.complexPolygons,n=t.pointCount,i=new Uint8ClampedArray(3*n),o=0;return e.forEach(function(t,e){var n=(0,w.encodePickingColor)(e),r=y.getVertexCount(t);E({target:i,source:n,start:o,count:r}),o+=n.length*r}),i}Object.defineProperty(e,"__esModule",{value:!0}),e.PolygonParseHelper=void 0;var d=n(18),h=i(d),v=n(0),p=i(v),m=n(1),_=i(m),g=n(307),y=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(g),x=n(208),b=i(x),S=n(104),w=n(234),E=b.default.fillArray,T=[0,0,0,255];e.PolygonParseHelper=function(){function t(e){var n=e.complexPolygons,i=e.IndexType;(0,p.default)(this,t),n=n.map(function(t){return y.normalize(t)});var r=o(n);this.complexPolygons=n,this.pointCount=r,this.IndexType=i,this.attributes={pickingColors:f({complexPolygons:n,pointCount:r})}}return(0,_.default)(t,[{key:"updatePositions",value:function(t){var e=t.fp64,n=t.extruded;e=!0;var i=this.attributes,o=this.complexPolygons,r=this.pointCount;i.positions=i.positions||new Float32Array(3*r),i.vertexValid=i.vertexValid||new Uint8ClampedArray(r).fill(1),e&&(i.positions64xyLow=i.positions64xyLow||new Float32Array(2*r)),s({cache:i,complexPolygons:o,extruded:n,fp64:e})}},{key:"getIndices",value:function(){return l({complexPolygons:this.complexPolygons,IndexType:this.IndexType})}},{key:"getPositions",value:function(){return this.attributes.positions}},{key:"getPositions64xyLow",value:function(){return this.attributes.positions64xyLow}},{key:"getVertexValid",value:function(){return this.attributes.vertexValid}},{key:"getElevations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.key,n=void 0===e?"elevations":e,i=t.getElevation,o=void 0===i?function(){return 100}:i,r=this.attributes,a=this.complexPolygons,l=this.pointCount,s=u({cache:r[n],complexPolygons:a,pointCount:l,getElevation:o});return r[n]=s,s}},{key:"getColors",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.key,n=void 0===e?"colors":e,i=t.getColor,o=void 0===i?function(){return T}:i,r=this.attributes,a=this.complexPolygons,l=this.pointCount,s=c({cache:r[n],complexPolygons:a,pointCount:l,getColor:o});return r[n]=s,s}},{key:"getPickingColors",value:function(){return this.attributes.pickingColors}}]),t}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(18),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=/^[og]\s*(.+)?/,f=/^mtllib /,d=/^usemtl /,h=function(){function t(e){var n=e.index,i=e.name,o=void 0===i?"":i,r=e.mtllib,a=e.smooth,s=e.groupStart;(0,l.default)(this,t),this.index=n,this.name=o,this.mtllib=r,this.smooth=a,this.groupStart=s,this.groupEnd=-1,this.groupCount=-1,this.inherited=!1}return(0,u.default)(t,[{key:"clone",value:function(){return new t({index:arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0})}}]),t}(),v=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,l.default)(this,t),this.name=e,this.geometry={vertices:[],normals:[],colors:[],uvs:[]},this.materials=[],this.smooth=!0}return(0,u.default)(t,[{key:"startMaterial",value:function(t,e){var n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);var i=new h({index:this.materials.length,name:t,mtllib:Array.isArray(e)&&e.length>0?e[e.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0});return this.materials.push(i),i}},{key:"currentMaterial",value:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]}},{key:"_finalize",value:function(t){var e=this.currentMaterial();if(e&&-1===e.groupEnd&&(e.groupEnd=this.geometry.vertices.length/3,e.groupCount=e.groupEnd-e.groupStart,e.inherited=!1),t&&this.materials.length>1)for(var n=this.materials.length-1;n>=0;n--)this.materials[n].groupCount<=0&&this.materials.splice(n,1);return t&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),e}}]),t}(),p=function(){function t(){(0,l.default)(this,t),this.objects=[],this.object=null,this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.materialLibraries=[],this.startObject("",!1)}return(0,u.default)(t,[{key:"startObject",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.object&&!this.object.fromDeclaration)return this.object.name=t,void(this.object.fromDeclaration=e);var n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object=new v(t),this.object.fromDeclaration=e,n&&n.name&&"function"==typeof n.clone){var i=n.clone(0);i.inherited=!0,this.object.materials.push(i)}this.objects.push(this.object)}},{key:"finalize",value:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)}},{key:"parseVertexIndex",value:function(t,e){var n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)}},{key:"parseNormalIndex",value:function(t,e){var n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)}},{key:"parseUVIndex",value:function(t,e){var n=parseInt(t,10);return 2*(n>=0?n-1:n+e/2)}},{key:"addVertex",value:function(t,e,n){var i=this.vertices,o=this.object.geometry.vertices;o.push(i[t+0],i[t+1],i[t+2]),o.push(i[e+0],i[e+1],i[e+2]),o.push(i[n+0],i[n+1],i[n+2])}},{key:"addVertexPoint",value:function(t){var e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])}},{key:"addVertexLine",value:function(t){var e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])}},{key:"addNormal",value:function(t,e,n){var i=this.normals,o=this.object.geometry.normals;o.push(i[t+0],i[t+1],i[t+2]),o.push(i[e+0],i[e+1],i[e+2]),o.push(i[n+0],i[n+1],i[n+2])}},{key:"addColor",value:function(t,e,n){var i=this.colors,o=this.object.geometry.colors;o.push(i[t+0],i[t+1],i[t+2]),o.push(i[e+0],i[e+1],i[e+2]),o.push(i[n+0],i[n+1],i[n+2])}},{key:"addUV",value:function(t,e,n){var i=this.uvs,o=this.object.geometry.uvs;o.push(i[t+0],i[t+1]),o.push(i[e+0],i[e+1]),o.push(i[n+0],i[n+1])}},{key:"addUVLine",value:function(t){var e=this.uvs;this.object.geometry.uvs.push(e[t+0],e[t+1])}},{key:"addFace",value:function(t,e,n,i,o,r,a,l,s){var u=this.vertices.length,c=this.parseVertexIndex(t,u),f=this.parseVertexIndex(e,u),d=this.parseVertexIndex(n,u);if(this.addVertex(c,f,d),void 0!==i&&""!==i){var h=this.uvs.length;c=this.parseUVIndex(i,h),f=this.parseUVIndex(o,h),d=this.parseUVIndex(r,h),this.addUV(c,f,d)}if(void 0!==a&&""!==a){var v=this.normals.length;c=this.parseNormalIndex(a,v),f=a===l?c:this.parseNormalIndex(l,v),d=a===s?c:this.parseNormalIndex(s,v),this.addNormal(c,f,d)}this.colors.length>0&&this.addColor(c,f,d)}},{key:"addPointGeometry",value:function(t){this.object.geometry.type="Points";var e=this.vertices.length,n=!0,i=!1,o=void 0;try{for(var a,l=(0,r.default)(t);!(n=(a=l.next()).done);n=!0){var s=a.value;this.addVertexPoint(this.parseVertexIndex(s,e))}}catch(t){i=!0,o=t}finally{try{!n&&l.return&&l.return()}finally{if(i)throw o}}}},{key:"addLineGeometry",value:function(t,e){this.object.geometry.type="Line";var n=this.vertices.length,i=this.uvs.length,o=!0,a=!1,l=void 0;try{for(var s,u=(0,r.default)(t);!(o=(s=u.next()).done);o=!0){var c=s.value;this.addVertexLine(this.parseVertexIndex(c,n))}}catch(t){a=!0,l=t}finally{try{!o&&u.return&&u.return()}finally{if(a)throw l}}var f=!0,d=!1,h=void 0;try{for(var v,p=(0,r.default)(e);!(f=(v=p.next()).done);f=!0){var m=v.value;this.addUVLine(this.parseUVIndex(m,i))}}catch(t){d=!0,h=t}finally{try{!f&&p.return&&p.return()}finally{if(d)throw h}}}}]),t}();e.default=function(t){var e=new p;-1!==t.indexOf("\r\n")&&(t=t.replace(/\r\n/g,"\n")),-1!==t.indexOf("\\\n")&&(t=t.replace(/\\\n/g,""));for(var n=t.split("\n"),i="",o="",a=[],l="function"==typeof"".trimLeft,s=0,u=n.length;s<u;s++)if(i=n[s],i=l?i.trimLeft():i.trim(),0!==i.length&&"#"!==(o=i.charAt(0)))if("v"===o){var h=i.split(/\s+/);switch(h[0]){case"v":e.vertices.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])),8===h.length&&e.colors.push(parseFloat(h[4]),parseFloat(h[5]),parseFloat(h[6]));break;case"vn":e.normals.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]));break;case"vt":e.uvs.push(parseFloat(h[1]),parseFloat(h[2]))}}else if("f"===o){for(var v=i.substr(1).trim(),m=v.split(/\s+/),_=[],g=0,y=m.length;g<y;g++){var x=m[g];if(x.length>0){var b=x.split("/");_.push(b)}}for(var S=_[0],w=1,E=_.length-1;w<E;w++){var T=_[w],I=_[w+1];e.addFace(S[0],T[0],I[0],S[1],T[1],I[1],S[2],T[2],I[2])}}else if("l"===o){var A=i.substring(1).trim().split(" "),k=void 0,P=[];if(-1===i.indexOf("/"))k=A;else{k=[];for(var M=0,L=A.length;M<L;M++){var C=A[M].split("/");""!==C[0]&&k.push(C[0]),""!==C[1]&&P.push(C[1])}}e.addLineGeometry(k,P)}else if("p"===o){var N=i.substr(1).trim(),O=N.split(" ");e.addPointGeometry(O)}else if(null!==(a=c.exec(i))){var R=(" "+a[0].substr(1).trim()).substr(1);e.startObject(R)}else if(d.test(i))e.object.startMaterial(i.substring(7).trim(),e.materialLibraries);else if(f.test(i))e.materialLibraries.push(i.substring(7).trim());else{if("s"!==o){if("\0"===i)continue;throw new Error('Unexpected line: "'+i+'"')}if(a=i.split(" "),a.length>1){var V=a[1].trim().toLowerCase();e.object.smooth="0"!==V&&"off"!==V}else e.object.smooth=!0;var B=e.object.currentMaterial();B&&(B.smooth=e.object.smooth)}e.finalize();var F=[],z=[],D=!0,U=!1,Y=void 0;try{for(var j,G=(0,r.default)(e.objects);!(D=(j=G.next()).done);D=!0){var W=j.value,Z=W.geometry;if(0!==Z.vertices.length){var X={header:{vertexCount:Z.vertices.length/3},attributes:{}};switch(Z.type){case"Points":X.mode=0;break;case"Line":X.mode=1;break;default:X.mode=4}X.attributes.POSITION={value:new Float32Array(Z.vertices),size:3},Z.normals.length>0&&(X.attributes.NORMAL={value:new Float32Array(Z.normals),size:3}),Z.colors.length>0&&(X.attributes.COLOR_0={value:new Float32Array(Z.colors),size:3}),Z.uvs.length>0&&(X.attributes.TEXCOORD_0={value:new Float32Array(Z.uvs),size:2}),X.materials=[];var H=!0,Q=!1,q=void 0;try{for(var J,K=(0,r.default)(W.materials);!(H=(J=K.next()).done);H=!0){var $=J.value,tt={name:$.name,flatShading:!$.smooth};X.materials.push(tt),z.push(tt)}}catch(t){Q=!0,q=t}finally{try{!H&&K.return&&K.return()}finally{if(Q)throw q}}X.name=W.name,F.push(X)}}}catch(t){U=!0,Y=t}finally{try{!D&&G.return&&G.return()}finally{if(U)throw Y}}return{meshes:F,materials:z}}},function(t,e,n){"use strict";function i(t){return t.length>=2&&(0,s.default)(t[0].lat)&&(0,s.default)(t[0].lng)}function o(t){return t.length>=1&&t.every(function(t){return i(t)})}function r(t){return(i(t)?[t]:t).map(function(t){return a(t)})}function a(t){var e=t.length>0?[t[0]]:[];return t.forEach(function(t){var n=e[e.length-1];t.lat===n.lat&&t.lng===n.lng||e.push(t)}),e}Object.defineProperty(e,"__esModule",{value:!0});var l=n(421),s=function(t){return t&&t.__esModule?t:{default:t}}(l);e.isSimple=i,e.isComplexLine=o,e.normalize=r,e.deduplicatePoint=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=null;e.default={setStyleTag:function(t){i=t},isNoSideLine:function(t){var e=i,n=e.lineTag,o=["street","path","secondaryroad"],r=o.some(function(e){return n[e]&&n[e].some(function(e){return e===Number(t)})});return Number(r)}}},function(t,e,n){"use strict";function i(t,e){return function(n){return new r.default(n,t,e)}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(539),r=function(t){return t&&t.__esModule?t:{default:t}}(o);e.default=i},function(t,e,n){"use strict";function i(t,e){return c.default.batchRender&&(e+=1),e===c.default.maxDataZoom&&t>e}function o(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return c.default.batchRender&&(e+=1),Math.abs(t-e)<=n}function r(t,e){return!(o(t,e,1)||i(t,e))}function a(t,e){return!(o(Math.round(t),e)||i(t,e))}function l(t,e){return a(t,e)}function s(t,e){return a(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.isInterceptForBase64=r,e.isInterceptForGPU=a,e.isInterceptForTileData=l,e.isInterceptForPlacement=s;var u=n(20),c=function(t){return t&&t.__esModule?t:{default:t}}(u)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(209),p=i(v),m=n(62),_=n(84),g=i(_),y=n(38),x=function(t){function e(t){return(0,l.default)(this,e),(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_initialize",value:function(){this.sourceId=this.sourceId||this.id}},{key:"getBounds",value:function(){return this._bounds}},{key:"setBounds",value:function(t){return t instanceof g.default?(this._bounds=t,this._resetData(),this):(new y.BaseTypeError("bounds","LatLngBounds",t).error(),this)}},{key:"_updateMediaSource",value:function(t){this._mediaSource=t,this._resetData()}},{key:"_resetData",value:function(){this.map&&this.map.getSource(this.id).setData({mediaSource:this._mediaSource,bounds:this._bounds})}},{key:"_addSource",value:function(){this._mediaSource&&this._bounds&&this._mediaSource&&this._bounds&&this.map&&!this.map.getSource(this.sourceId)&&(this.map.addSource(this.sourceId,{type:m.SOURCE_TYPE.ground,tileSize:this.tileSize,data:{mediaSource:this._mediaSource,bounds:this._bounds}}),this._fire("layer",{}))}},{key:"_removeSource",value:function(){this.map&&this.map.removeSource(this.sourceId)}}]),e}(p.default);e.default=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(e){var n=e.find(function(e){return e.layerid===t});return n?{minZoom:n.zoom_min,maxZoom:n.zoom_max,getTileUrl:function(t,e,i){var o=n.url;return n.params.forEach(function(i){var r=n[i];Array.isArray(r)&&(r=r[(t+e)%r.length]),o=o.replace("{"+i+"}",r)}),o=o.replace("{x}",t).replace("{y}",e).replace("{z}",i)}}:void 0}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(14),a=i(r),l=n(2),s=i(l),u=n(0),c=i(u),f=n(1),d=i(f),h=n(4),v=i(h),p=n(21),m=i(p),_=n(3),g=i(_),y=n(388),x=i(y),b=n(62),S=n(43),w=n(51),E=i(w),T=n(38),I=n(270),A=n(77),k=E.default.isFunction,P=E.default.isString,M=E.default.isNumber,L=function(t){function e(t){(0,c.default)(this,e),t.type=S.RENDER_LAYER_TYPE.imageTile;var n=(0,v.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t));return(0,A.statCn)("ImageTileLayer"),n}return(0,g.default)(e,t),(0,d.default)(e,[{key:"_initialize",value:function(t){(0,m.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"_initialize",this).call(this,t),this._setTileUrlGetter(t.getTileUrl),this.sourceId=this.sourceId||this.id}},{key:"setZIndex",value:function(t){return M(t)||new T.BaseTypeError("ImageTileLayer.zIndex","number",t).error(),(0,m.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"setZIndex",this).call(this,t)}},{key:"_setTileUrlGetter",value:function(t){k(t)?P(t(0,0,0))?this.getTileUrl=t:new T.BaseTypeError("ImageTileLayerOptions.getTileUrl返回值","string",t(0,0,0)).throw():new T.BaseTypeError("ImageTileLayerOptions.getTileUrl","function",t).throw()}},{key:"_addSource",value:function(){this.map&&!this.map.getSource(this.sourceId)&&(this.map.addSource(this.sourceId,{type:b.SOURCE_TYPE.imageTile,tileSize:this.tileSize,data:this.getTileUrl,minZoom:this.minDataZoom,maxZoom:this.maxDataZoom}),this._fire("layer",{}))}},{key:"_removeSource",value:function(){this.map&&this.map.removeSource(this.sourceId),this._fire("source_removed",{})}}],[{key:"createCustomLayer",value:function(t){var n=t.map,i=t.layerId;return n?(0,I.checkKey)(n.id).then(function(n){if(!n)throw"请传入正确的key";if(!n.custom_layer||!n.custom_layer.enable)throw"无个性化图层权限";var r=o(i,n.custom_layer.layers);if(!r)throw"请传入正确的layerId";return(0,A.cl)({id:i,subkey:n.subkey}),new e((0,a.default)(r,t))}).catch(function(t){return console.error("个性化图层鉴权失败："+t),null}):(console.error("个性化图层鉴权失败：未绑定地图对象。"),null)}}]),e}(x.default);e.default=L},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(209),p=i(v),m=n(51),_=i(m),g=n(38),y=_.default.isNumber,x=function(t){function e(t){return(0,l.default)(this,e),(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_initialize",value:function(t){this._setTileSize(t.tileSize)}},{key:"_setTileSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:256;y(t)||(new g.BaseTypeError("TileLayer.tileSize","number",t).error(),t=256),this.tileSize=t}}]),e}(p.default);e.default=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(27),r=i(o),a=n(2),l=i(a),s=n(0),u=i(s),c=n(1),f=i(c),d=n(4),h=i(d),v=n(21),p=i(v),m=n(3),_=i(m),g=n(388),y=i(g),x=n(111),b=i(x),S=n(62),w=n(20),E=function(t){function e(t){return(0,u.default)(this,e),(0,h.default)(this,(e.__proto__||(0,l.default)(e)).call(this,t))}return(0,_.default)(e,t),(0,f.default)(e,[{key:"_initialize",value:function(t){(0,p.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"_initialize",this).call(this,t),this.features=t.features||[]}},{key:"setMap",value:function(t){return(0,p.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"setMap",this).call(this,t),t&&this._init(),this}},{key:"_init",value:function(){var t=this;this._createSource().then(function(){t.features.forEach(function(e){var n=new y.default({id:e.id||e.type,type:e.type,sourceId:b.default.VECTOR_SOURCE_ID,tileSize:256});n.filter=e.filter,t.appendChild(n)}),t._fire("layer",{})})}},{key:"_createSource",value:function(){var t=this;return this.map.getSource(b.default.VECTOR_SOURCE_ID)?r.default.resolve():(this.map.addSource(b.default.VECTOR_SOURCE_ID,{tileSize:w.tileSize,minZoom:w.minZoom,maxZoom:w.maxZoom,type:S.SOURCE_TYPE.vector,data:{vectorSrc:w.vectorSrc,batchVectorSrc:w.batchVectorSrc},enc:!1}),this.map.layerResource.loadStyle().then(function(e){var n=e.styleId,i=e.iconInfo;t.map.getSource(b.default.VECTOR_SOURCE_ID).setStyleAndIconInfo(n,i)}))}},{key:"_removeSource",value:function(){if(this.map){!this.map.findLayer(function(t){return t instanceof e})&&this.map.removeSource(b.default.VECTOR_SOURCE_ID)}}}]),e}(y.default);e.default=E},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(65),p=n(20),m=function(t){function e(t,n,i){(0,l.default)(this,e);var o=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this));return o.id=t,o.dispatcher=i,o.minZoom=n.minZoom||p.minZoom,o.maxZoom=n.maxZoom||p.maxZoom,o._items={},o}return(0,h.default)(e,t),(0,u.default)(e,[{key:"getDrawItems",value:function(){return this._items}},{key:"clear",value:function(){}},{key:"onAdd",value:function(t){this.map=t}},{key:"onRemove",value:function(){this.map=null}},{key:"update",value:function(t,e){this.transform=t,this.camera=e}}]),e}(v);e.default=m},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(1),l=i(a),s=n(7),u=i(s),c=function(){function t(e,n){(0,r.default)(this,t),this.max=e,this.onRemove=n,this.reset()}return(0,l.default)(t,[{key:"reset",value:function(){var t=this;return u.default.forIn(this.data,function(e,n){t.onRemove(n)}),this.data={},this.order=[],this}},{key:"add",value:function(t,e){if(this.has(t))this.order.splice(this.order.indexOf(t),1),this.data[t]=e,this.order.push(t);else if(this.data[t]=e,this.order.push(t),this.order.length>this.max){var n=this.get(this.order[0]);n&&this.onRemove(n)}return this}},{key:"has",value:function(t){return t in this.data}},{key:"keys",value:function(){return this.order}},{key:"get",value:function(t){if(!this.has(t))return null;var e=this.data[t];return delete this.data[t],this.order.splice(this.order.indexOf(t),1),e}},{key:"getWithoutRemoving",value:function(t){return this.has(t)?this.data[t]:null}},{key:"remove",value:function(t){if(!this.has(t))return this;var e=this.data[t];return delete this.data[t],this.onRemove(e),this.order.splice(this.order.indexOf(t),1),this}},{key:"setMaxSize",value:function(t){for(this.max=t;this.order.length>this.max;){var e=this.get(this.order[0]);e&&this.onRemove(e)}return this}}]),t}();e.default=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(78),r=i(o),a=n(2),l=i(a),s=n(0),u=i(s),c=n(1),f=i(c),d=n(4),h=i(d),v=n(3),p=i(v),m=n(227),_=i(m),g=n(308),y=i(g),x=n(228),b=i(x),S=n(7),w=n(20),E=function(t){function e(t,n,i){(0,u.default)(this,e);var o=(0,h.default)(this,(e.__proto__||(0,l.default)(e)).call(this,t,n,i));return o._metaData=null,o._initialize(),o.workerOptions=S.extend({source:o.getUniqueId(),tileSize:o.tileSize},n.workerOptions),o}return(0,p.default)(e,t),(0,f.default)(e,[{key:"_initialize",value:function(){}},{key:"load",value:function(){var t=this;this._loadOriginData(function(){t._fire("data",{dataType:"source",sourceDataType:"metadata"})})}},{key:"onAdd",value:function(t){this.map=t,this.load()}},{key:"getMetaData",value:function(){return this._metaData}},{key:"update",value:function(t){this.transform=t;var e=new b.default(0,0,0,0);this.addItem(e)}},{key:"addItem",value:function(t){this.addTile(t,null,null)}},{key:"_loadOriginData",value:function(t){var e=this;this._fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(){e.reload(),e.transform&&e.update(e.transform),t&&t()})}},{key:"_updateWorkerData",value:function(t){var e=this,n=S.extend({},this.workerOptions),i=this._data;n.data=(0,r.default)(i),this._onLoadDataStart(i),this.workerID=this.dispatcher.send(this.type+".loadData",n,function(n,i){n?(e._onLoadDataError(n),t(n)):(e._loaded=!0,e._metaData=i,e._onLoadDataEnd(),t(null))},this.workerID)}},{key:"_onLoadDataStart",value:function(){}},{key:"_onLoadDataEnd",value:function(){}},{key:"_onLoadDataError",value:function(t){this._fire("error",{error:t})}},{key:"addTile",value:function(t,e,n){var i=this._items[t.id];return i||((i=this._cache.get(t.id))?(this._items[t.id]=i,i):(i=new _.default(t,this.tileSize,this.maxZoom,this.transform,this.camera),this._items[t.id]=i,t.z<=w.maxDataZoom&&this.loadTile(i,e,n?n.bind(this):this._tileLoaded.bind(this,i)),i))}},{key:"loadTile",value:function(t,e,n){var i={type:this.type,uid:t.uid,coord:t.coord,zoom:t.coord.z,maxZoom:this.maxZoom,tileSize:this.tileSize,source:this.getUniqueId()};t.workerID=this.dispatcher.send("loadTile",i,function(e,i){if(t.clear(),!t.aborted)return e||!i?void(t.state=m.TILE_STATE.loaded):(t.setData(i),n(null))},this.workerID)}},{key:"abortTile",value:function(t){t.aborted=!0}},{key:"unloadTile",value:function(t){t.clear(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.getUniqueId()},function(){},t.workerID)}},{key:"onRemove",value:function(){this.dispatcher.broadcast("removeSource",{type:this.type,source:this.getUniqueId()},function(){}),this.map=null,this._metaData=null}}]),e}(y.default);e.default=E},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(26),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(137),f=function(){function t(e,n,i){(0,l.default)(this,t),i&&(this.loadGeoJSON=i),this._geoDataIndexes={},this.actor=e}return(0,u.default)(t,[{key:"loadVectorData",value:function(t,e){var n=t.source;if(!this._geoDataIndexes[n])return e(null,null);var i=this._geoDataIndexes[n];if(!i)return e(null,null);e(null,i)}},{key:"loadData",value:function(t,e){var n=function(n,i){var o=this;return n?e(n):"object"!==(void 0===i?"undefined":(0,r.default)(i))?e(new Error("Input data is not a valid GeoJSON object.")):void this._indexData(t,i,function(n,i){if(n)return e(n);o._geoDataIndexes[t.source]=i,e(null)})}.bind(this);this.loadGeoJSON(t,n)}},{key:"loadGeoJSON",value:function(t,e){if(t.url)c.getJSON(t.url,e);else{if("string"!=typeof t.data)return e(new Error("Input data is not a valid GeoJSON object."));try{return e(null,JSON.parse(t.data))}catch(t){return e(new Error("Input data is not a valid GeoJSON object."))}}}},{key:"removeSource",value:function(t){this._geoDataIndexes[t.source]&&delete this._geoDataIndexes[t.source]}},{key:"_indexData",value:function(){}}]),t}();e.default=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(392),p=i(v),m=n(62),_=function(t){function e(t,n,i){return(0,l.default)(this,e),(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,n,i))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_initialize",value:function(){this.type=m.SOURCE_TYPE.geojson}},{key:"setData",value:function(t){var e=this;return this._data=t,this._loadOriginData(function(){e._fire("setData",{dataType:"source",sourceDataType:"content"})}),this}},{key:"setStyle",value:function(t){var e=this;return this._data.styles=t,this._loadOriginData(function(){e._fire("setData",{dataType:"source",sourceDataType:"content"})}),this}}]),e}(p.default);e.default=_},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n=t[t.length-1];return e===F.BASE_LAYER_TYPE.region?t.cidx+String(1e5*(n>>16&65535)):t.cidx+String(1e5*(n>>16&65535)+(65535&n))}function r(t,e){var n=void 0;return W.forIn(t,function(t,i){i.minScaleVal<=e&&i.maxScaleVal>=e&&(n=i)}),n}function a(t,e){if(e){for(var n=t[1],i=e.transX,o=e.transY,r=e.scale,a=0;a<n.length;a+=2)n[a]=(n[a]+i)*r,n[a+1]=(n[a+1]+o)*r;t[0]===J&&(t[2]=t[2]*r)}}function l(t,e){var n=e.enc,i=e.imgUploadHook,o=e.childIdx,r=void 0===o?0:o;if(t instanceof Array){var s=-1,u=[],c=[],f=[],d=[];return t.forEach(function(t,e){var i=l(t,{enc:n,childIdx:e});0===i.ret&&(s=0),u.push(i.img),c.push(i.ext_img),f=f.concat(i.features||[]),d=d.concat(i.pois||[])}),i&&(u.length||c.length)&&i(u,c),{ret:s,img:u,ext_img:c,features:f,pois:d}}if(!t.data)return{};var h=n?t:G(D(t.data));if(0!==h.ret)return{};i&&i(h.img,h.ext_img);var v=Y(U(h.features))||[],p=Y(U(h.pois))||[];return v.unshift([K,[0,0,256,0,256,256,0,256],"",0]),v.forEach(function(e){e[0]instanceof Array?e.forEach(function(e){a(e,t.tileTransform)}):a(e,t.tileTransform),e.cidx=r,e.transform=t.tileTransform||{}}),p.forEach(function(e){e[0]instanceof Array?e.forEach(function(e){a(e,t.tileTransform)}):a(e,t.tileTransform),e.cidx=r,e.transform=t.tileTransform||{}}),h.features=v,h.pois=p,h}var s=n(32),u=i(s),c=n(18),f=i(c),d=n(160),h=i(d),v=n(16),p=i(v),m=n(47),_=i(m),g=n(78),y=i(g),x=n(27),b=i(x),S=n(86),w=i(S),E=n(236),T=i(E),I=n(0),A=i(I),k=n(1),P=i(k),M=n(540),L=i(M),C=n(541),N=i(C),O=n(542),R=i(O),V=n(383),B=i(V),F=n(43),z=n(275),D=n(570).decode,U=n(572).restores,Y=n(571).merge,j=n(7),G=j.parseJson,W=n(7),Z=n(397),X=Z.getVectorStyle,H=n(7),Q=H.uniqueId,q={65536:F.BASE_LAYER_TYPE.point,131072:F.BASE_LAYER_TYPE.line,196608:F.BASE_LAYER_TYPE.region,262144:F.BASE_LAYER_TYPE.label,327680:F.BASE_LAYER_TYPE.arrow},J=196619,K=196613,$=function(){function t(e){(0,A.default)(this,t),this.uid=e.uid,this.coord=e.coord,this.dataZoom=e.coord.z,this._needUploadTileImage=!1,this._billboardFeatures=[];var n=e.styleId;this.styleId=n,this.parse=(0,z.isDefaultStyle)(n)?this.parseForDefaultStyle.bind(this):this.parseForCustomStyle.bind(this)}return(0,P.default)(t,[{key:"parseForCustomStyle",value:function(t,e,n,i,o,r,a){var l=this,s=this.coord.id,u=this.parseOriginData(t,e,n,i,null,a),c=u.layerstiles,f=u.jsonData;if(!c||!f)return void r(null,null);var d=c.point&&c.point[s],h=c.label&&c.label[s],v=d&&d.reduce(function(t,e){return t+(e&&e.datas&&e.datas[0].textName)},"")||"",p=h&&h.reduce(function(t,e){return t+(e&&e.roadName)},"")||"",m=v+p,g=new T.default(m.split("")),x=(0,w.default)(g),S=this.getOriginalGroundFeatures(f.features,!0),E=(0,L.default)(S.ranks,s);c[F.BASE_LAYER_TYPE.base]={},c[F.BASE_LAYER_TYPE.base][s]=E;var I=(0,N.default)(S.buildings,s);c[F.BASE_LAYER_TYPE.building3d]={},c[F.BASE_LAYER_TYPE.building3d][s]=I,new b.default(function(t){var e="";l._needUploadTileImage&&f.img&&(e={tileImage64:f.img,tileId:s,billboardData:(0,y.default)(l._billboardFeatures)}),o.send("uploadTileTexture",{zoom:l.coord.z,uid:l.uid,billboard:e,glyphs:x},function(e,n){if(e)console.error(e),t([{},{}]);else{var i=JSON.parse(n.billboardMapping),o=JSON.parse(n.glyphMapping);t([i,o])}})}).then(function(t){var e=(0,_.default)(t,2),o=e[0],a=e[1],u=l.parseInstancePoint(c,s,n,{glyphMapping:a,billboardMapping:o});c[F.BASE_LAYER_TYPE.point]=c.point||{},c[F.BASE_LAYER_TYPE.point][s]=c.point[s]||[],c[F.BASE_LAYER_TYPE.point][s].instance=u,c[F.BASE_LAYER_TYPE.label]=c.label||{},c[F.BASE_LAYER_TYPE.label][s]=c.label[s]||[],c[F.BASE_LAYER_TYPE.label][s].instance=u,c=l.transferData(s,c),c.id=s,c.styleId=i.styleId,r(null,c)})}},{key:"transferData",value:function(t,e){var n=[];return(0,p.default)(e).forEach(function(i){if(i===F.BASE_LAYER_TYPE.base){var o=e[i]&&e[i][t];if(!o)return;e[i][t]={id:t,indeices:{arrayBuffer:o.indeices.dataView,length:o.indeices.length},lineCount:o.lineCount,size:o.size,vertices:{arrayBuffer:o.vertices.dataView,attributes:o.vertices.attributes,bytesPerElement:o.vertices.bytesPerElement},vertiesCount:o.vertiesCount}}else if(i===F.BASE_LAYER_TYPE.region)delete e[F.BASE_LAYER_TYPE.region];else if(i===F.BASE_LAYER_TYPE.line)delete e[F.BASE_LAYER_TYPE.line];else if(i===F.BASE_LAYER_TYPE.building3d){var r=e[i]&&e[i][t];if(!r)return;e[i][t]={id:t,indeices:{arrayBuffer:r.indeices.dataView,length:r.indeices.length},size:r.size,vertices:{arrayBuffer:r.vertices.dataView,attributes:r.vertices.attributes,bytesPerElement:r.vertices.bytesPerElement}}}else if(i===F.BASE_LAYER_TYPE.arrow)delete e[F.BASE_LAYER_TYPE.arrow];else if(i===F.BASE_LAYER_TYPE.point){var a=e[F.BASE_LAYER_TYPE.point]&&e[F.BASE_LAYER_TYPE.point][t];if(!a)return;a.forEach(function(t){t.translate&&!n.includes(t.translate.buffer)&&n.push(t.translate.buffer),t.vertices&&!n.includes(t.vertices.buffer)&&n.push(t.vertices.buffer),t.datas&&t.datas.forEach(function(t){t.coords&&(t.coords=new Int16Array(t.coords),n.push(t.coords.buffer)),t.icon_coords&&(t.icon_coords=new Int16Array(t.icon_coords),n.push(t.icon_coords.buffer)),t.text_bounds&&(t.text_bounds=new Int16Array(t.text_bounds),n.push(t.text_bounds.buffer)),t.text&&t.text.forEach(function(t){t.coords&&(t.coords=new Int16Array(t.coords),n.push(t.coords.buffer))}),t.font_color&&(t.font_color=new Uint8ClampedArray(t.font_color),n.push(t.font_color.buffer)),t.background_color&&(t.background_color=new Uint8ClampedArray(t.background_color),n.push(t.background_color.buffer))})});var l=e[F.BASE_LAYER_TYPE.point][t].instance;(0,p.default)(l).forEach(function(t){"count"!==t&&n.push(l[t].buffer)})}else if(i===F.BASE_LAYER_TYPE.label){var s=e[F.BASE_LAYER_TYPE.label]&&e[F.BASE_LAYER_TYPE.label][t];if(!s)return;s.forEach(function(t){t.roads&&t.roads.forEach(function(t){t.datas&&t.datas.forEach(function(t){t.coords&&(t.coords=new Int16Array(t.coords),n.push(t.coords.buffer)),t.text_bounds&&(t.text_bounds=new Int16Array(t.text_bounds),n.push(t.text_bounds.buffer)),t.glyph_text_bounds&&(t.glyph_text_bounds=new Int16Array(t.glyph_text_bounds),n.push(t.glyph_text_bounds.buffer)),t.font_color&&(t.font_color=new Uint8ClampedArray(t.font_color),n.push(t.font_color.buffer)),t.background_color&&(t.background_color=new Uint8ClampedArray(t.background_color),n.push(t.background_color.buffer))})})})}}),n.push(e[F.BASE_LAYER_TYPE.base][t].vertices.arrayBuffer.buffer),n.push(e[F.BASE_LAYER_TYPE.base][t].indeices.arrayBuffer.buffer),n.push(e[F.BASE_LAYER_TYPE.building3d][t].vertices.arrayBuffer.buffer),n.push(e[F.BASE_LAYER_TYPE.building3d][t].indeices.arrayBuffer.buffer),e.transferableList=n,e}},{key:"getOriginalGroundFeatures",value:function(t,e){for(var n=this.dataZoom,i={},a=[],l=void 0,s=void 0,u=void 0,c=void 0,f=void 0,d=void 0,v=void 0,p=void 0,m=0,g=t.length;m<g;m++){l=t[m];var y=l,x=(0,_.default)(y,3);if(s=x[0],f=x[1],u=x[2],v=this.mapStyle.layerMeta[s],p=v?r(v.styles,n):void 0)if(s!==J){if(p&&p.color_fill[3]){var b=r(v.styles,n+1),S=r(v.styles,n-1);c=v.name,d=o(l,v.type);var w=void 0;if(v.type!==F.BASE_LAYER_TYPE.region&&v.type!==F.BASE_LAYER_TYPE.line)continue;if(f instanceof Array&&f.length&&"number"==typeof f[0]&&(f=[f]),v.type===F.BASE_LAYER_TYPE.region);else if(v.type===F.BASE_LAYER_TYPE.line){if(0===p.width)continue;w=l[l.length-2]}i[d]=i[d]||{};var E=i[d][c],T={};if(v.type===F.BASE_LAYER_TYPE.line&&"number"==typeof l[2]&&(T.startDistance=l[2]),E)if(E.datas[0]instanceof Array||(E.datas=[E.datas]),f[0]instanceof Array)for(var I=0,A=f.length;I<A;I++)E.datas.push(f[I]);else E.datas.push(f);else i[d][c]={id:this.coord.id+"_"+c,layerId:s,layerName:c,type:v.type,datas:f,style:p,nextStyle:b,preStyle:S,zLevel:w,transform:l.transform,options:T},E=i[d][c]}}else u>0&&a.push({datas:f,h:l[2]*(n>=18?2:1),colorFill:p.color_fill,colorSide:p.color_side,transform:l.transform})}return e&&W.forIn(i,function(t,e){var n=(0,h.default)(e).sort(function(t,e){return t.style.layerseq-e.style.layerseq});i[t]=n}),{ranks:i,buildings:a}}},{key:"parseOriginData",value:function(t,e,n,i,r,a){var s=this;this.status="parsing",this.data=e,this.mapStyle=i;var u=this.coord.id,c={},d={};B.default.setStyleTag(this.mapStyle.styleTag);var h=l(e,{enc:a,imgUploadHook:r});if(0!==h.ret)return{};for(var v=h.features,p=0,m=v.length;p<m;p++){var _=v[p],g=_[0]instanceof Array?_[0][0]:_[0];if(!g)return void console.warn("featureId is not exist",g);var y=983040&g;c[q[y]]?c[q[y]].push(_):(c[q[y]]=[],d[q[y]]={},c[q[y]].push(_))}var x=this.mapStyle.style;return W.forIn(x,function(t,e){if(c[t]){for(var i=e.type,r=e.style,a=e.relyStyle,l=e.relyStyleField,v=c[t],p=s.dataZoom,m=[],_={},g=0,y=v.length;g<y;g++){var x=v[g],b=[];if(x[0]instanceof Array)(b=s.parseRoadName(x,r,a,l,p,u,s.coord.tileSize))&&m.push(b);else{var S=x[0],w=X(r,a,l,S,p);if(w){if(i===F.BASE_LAYER_TYPE.point){var E=""+x[2],T=s.parsePoi(x,w,s.coord);if(!T)continue;_[E]=!0,b.push(T)}else if(x[1][0]instanceof Array){var I=!0,A=!1,k=void 0;try{for(var P,M=(0,f.default)(x[1]);!(I=(P=M.next()).done);I=!0){var L=P.value,C={coords:L};b.push(C)}}catch(t){A=!0,k=t}finally{try{!I&&M.return&&M.return()}finally{if(A)throw k}}}else{var N={coords:x[1]};b.push(N)}var O={type:i,datas:b,id:u+"_"+g,rank:o(x,i)};m.push(O)}}}if(i===F.BASE_LAYER_TYPE.point&&h.pois&&h.pois.length>0&&h.ext_img)for(var V=0,B=h.pois.length;V<B;V++){var z=h.pois[V],D=[],U=""+z[2],Y=z[0],j=X(r,a,l,Y,p);if(j&&!_[U]){var G=s.parsePoi(z,j,s.coord,{isExt:!0});if(G){D.push(G);var W={type:i,datas:D,isExt:!0,id:u+"_ext_"+V,rank:o(z,i)};m.push(W)}}}var Z=void 0;switch(i){case F.BASE_LAYER_TYPE.point:Z=(0,R.default)(m,n);break;default:Z=m}d[t][u]=Z}}),{layerstiles:d,jsonData:h}}},{key:"parseForDefaultStyle",value:function(t,e,n,i,o,r,a){function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(u&&d){var e=this.parseInstancePoint(d,c,n,t);d[F.BASE_LAYER_TYPE.point]=d.point||{},d[F.BASE_LAYER_TYPE.point][c]=d.point[c]||[],d[F.BASE_LAYER_TYPE.point][c].instance=e,d[F.BASE_LAYER_TYPE.label]=d.label||{},d[F.BASE_LAYER_TYPE.label][c]=d.label[c]||[],d[F.BASE_LAYER_TYPE.label][c].instance=e,d=this.transferData(c,d),d.id=c,r(null,d)}}var s=this,u=!1,c=this.coord.id,f=this.parseOriginData(t,e,n,i,function(t,e){t?o.send("uploadTileImage",{zoom:s.coord.z,uid:s.uid,tileId:c,imgBase64:t,extImgBase64:e},function(t,e){e&&(u=!0,l.call(s,e))}):u=!0},a),d=f.layerstiles,h=f.jsonData;if(!d||!h)return void r(null,null);var v=this.getOriginalGroundFeatures(h.features,!0),p=(0,L.default)(v.ranks,c);d[F.BASE_LAYER_TYPE.base]={},d[F.BASE_LAYER_TYPE.base][c]=p;var m=(0,N.default)(v.buildings,c);d[F.BASE_LAYER_TYPE.building3d]={},d[F.BASE_LAYER_TYPE.building3d][c]=m,l.call(this)}},{key:"parseInstancePoint",value:function(t,e,n,i){var o=this,r=0,a=i.extOffset,l=void 0===a?0:a,s=i.yOffsetList,c=void 0===s?[]:s,f=i.glyphMapping,d=i.billboardMapping,h=[],v=[],p=[],m=[],g=[],y=[],x=t.point&&t.point[e]||[],b=t.point&&t.point[e].filter(function(t){return t&&t.datas&&t.datas[0]&&t.datas[0].icon_coords})||[],S=[];return t.label&&t.label[e].forEach(function(t){S=S.concat(t.roads)}),x.forEach(function(t){var e=t.datas[0];if(e.coords.length)for(var i=e.text,a=e.text_bounds,s=void 0,x=e.cidx||0,b=0,S=i.length;b<S;b++){s=2===S?a.slice(4*(1-b),4*(1-b)+4):a.slice(4*b,4*b+4);var E=0;if(E=t.isExt?c[x+l]||0:c[x]||0,s[1]+=E,!(s[2]<10||s[3]<10||0===s.length)){var T=i[b],I=(0,_.default)(T.coords,2),A=I[0],k=I[1],P=T.centerOffset,M=s[2]/n.scale,L=s[3]/n.scale,C={x:M/2,y:L/2};if(P&&(C={x:M/2-P.x,y:L/2-P.y}),(0,z.isDefaultStyle)(o.styleId))h.push(A,-k,0),v.push(M,L,C.x,C.y),p.push.apply(p,(0,u.default)(s)),m.push(0,1,0,1),T.textSymbolIndexList=[r],r+=1;else if(e.isBillboard){var N=d&&d[T.text];h.push(A,-k,0),v.push(M,L,C.x,C.y),p.push(N.x,N.y,N.width,N.height),m.push(0,1,-1,1),g.push.apply(g,(0,u.default)(e.font_color)),y.push.apply(y,(0,u.default)(e.stroke_color)),T.textSymbolIndexList=[r],r+=1}else"center"===e.text_align&&function(){var t=new Uint16Array(T.text.length),n=T.text.length,i=[0],o=0;(0,w.default)(T.text).forEach(function(t){var n=e.font_size/f[t].fontSize;i.push(i[i.length-1]+f[t].width*n),o=Math.max(o,f[t].height*n)});var a=i[n],l=o,s=Math.max(1,a/M,l/L);M=a,L=l,C={x:P?M/2-P.x*s:M/2,y:P?L/2-P.y*s:L/2};for(var c=0;c<n;c++){var d=f[T.text[c]],_=e.font_size/d.fontSize;h.push(A,-k,0),v.push(d.width*_,d.height*_,C.x-i[c],C.y),p.push(d.x,d.y,d.width,d.height),m.push(0,1,e.isBillboard?-1:0,1),g.push.apply(g,(0,u.default)(e.font_color)),y.push.apply(y,(0,u.default)(e.stroke_color)),t[c]=r,r+=1}T.textSymbolIndexList=t}();T.instance_trans=[A,-k],T.instance_coords=[M,L,C.x,C.y]}}}),b.forEach(function(t){var e=n.scale,i=n.info,o=t.datas[0];if(o&&o.icon&&o.icon_coords){var a=i[String(o.icon)];if(!a)return;var l=a.width/e/2,s=a.height/e/2,u=o.icon_coords[0],c=-o.icon_coords[1];h.push(u,c,0),v.push(2*l,2*s,l,s),p.push(a.left,a.bottom,a.right-a.left,a.top-a.bottom),m.push(0,1,1,1),g.push(1,1,1,1),y.push(0,0,0,0),t.iconSymbolIndex=r,r+=1}}),S.forEach(function(t){var e=t.datas[0];if(e){var n=e.text_bounds;n[1]+=c[e.cidx]||0;var i=null;if(i=e.isBillboard&&e.font_size?{w:n[2]/1.5,h:n[3]/1.5}:{w:e.font_size,h:e.font_size},h.push(e.coords[0],-e.coords[1],1),v.push(i.w,i.h,i.w/2,i.h/2),(0,z.isDefaultStyle)(o.styleId))p.push(n[0],n[1],n[2],n[3]),m.push(0,1,0,1);else if(e.isBillboard){var a=d&&d[e.text];e.text_bounds=[a.x,a.y,a.width,a.height],t.datas[1].text_bounds=[a.x,a.y,a.width,a.height],p.push(a.x,a.y,a.width,a.height),m.push(0,1,-1,1),g.push(1,1,1,1),y.push(0,0,0,0)}else{var l=f[e.text];e.glyph_text_bounds=[l.x,l.y,l.width,l.height],t.datas[1].glyph_text_bounds=[l.x,l.y,l.width,l.height],p.push(l.x,l.y,l.width,l.height),m.push(0,1,0,1),g.push.apply(g,(0,u.default)(e.font_color)),y.push.apply(y,(0,u.default)(e.stroke_color))}t.roadSymbolIndex=r,r+=1}}),{instanceTransTypeArray:new Float32Array(h),instanceCoordsTypeArray:new Float32Array(v),instanceTextBoundsTypeArray:new Float32Array(p),instanceInfosTypeArray:new Float32Array(m),instanceColorsTypeArray:new Uint8ClampedArray(g),instanceStrokeColorsTypeArray:new Uint8ClampedArray(y),count:m.length/4}}},{key:"parsePoi",value:function(t,e,n,i){var o=n.tileSize,r={};r.cidx=t.cidx,r.coords=t[1],r.text=[],r.text_mix=t[3]||0,r.text_align="center",r.text_bounds=t[5],r.font_size=e.font_size,r.font_color=e.font_color?[].concat((0,u.default)(e.font_color.slice(0,3)),[255*e.font_color[3]]):[0,0,0,0],r.stroke_color=e.background_color?[].concat((0,u.default)(e.background_color.slice(0,3)),[255*e.background_color[3]]):[0,0,0,0];var a=t.transform,l=a.transX,s=void 0===l?0:l,c=a.transY,f=void 0===c?0:c,d=a.scale,h=void 0===d?1:d,v=(0+s)*h,p=(o+s)*h,m=(0+f)*h,_=(o+f)*h,g=t[2];switch(r.textName=g,e.font_weight=e.font_weight?e.font_weight:"",e.font_family=e.font_family?e.font_family:"",e.effect){case 5:e.sidewidth=e.effect_size+1;break;case 6:r.isBillboard=!0,this._needUploadTileImage=!0;case 1:case 2:default:e.background_color=null,e.sidewidth=0}if(e.icon_offset&&"65535"!==e.icon_offset&&"-1"!==e.icon_offset&&6!==e.effect){var y=e.icon_offset;r.icon=y,r.icon_coords=[t[1][0],t[1][1]],r.coords.shift(),r.coords.shift(),i&&i.isExt&&e.font_size>0&&0===r.coords.length&&(r.coords.push(r.icon_coords[0]),r.coords.push(r.icon_coords[1]+(8+e.font_size/2+2)*h),/\//.test(r.textName)&&(r.coords.push(r.icon_coords[0]),r.coords.push(r.coords[1]+(e.font_size+2)*h)))}if(r.coords[0]<v||r.coords[0]>=p||r.coords[1]<m||r.coords[1]>=_)return null;if(!r.font_size||void 0===g||"@"===g)return r;var x=g.toString(),b=r.isBillboard?[x]:x.split(/\//),S=null;r.icon_coords?S={x:r.icon_coords[0],y:r.icon_coords[1]}:2===b.length&&(S={x:(r.coords[0]+r.coords[2])/2,y:(r.coords[1]+r.coords[3])/2});for(var w=0,E=b.length;w<E;w++){var T=r.coords[2*w],I=r.coords[2*w+1],A=r.text_bounds,k=null;k=2===E?A.slice(4*(1-w),4*(1-w)+4):A.slice(4*w,4*w+4);var P=S?{x:(T-S.x)/h,y:(I-S.y)/h}:null,M={text:b[w],coords:S?[S.x,S.y]:[T,I],centerOffset:P,rank:t[4]};if(!(T&&I||0===T||0===I))break;r.text.push(M),r.isBillboard&&this._billboardFeatures.push({text:b[w],bounds:k,cidx:r.cidx})}return r}},{key:"parseRoadName",value:function(t,e,n,i,o,r,a){var l=a||256,s=[],c="",f=t.transform,d=f.transX,h=void 0===d?0:d,v=f.transY,p=void 0===v?0:v,m=f.scale,_=void 0===m?1:m,g=(0+h)*_,y=(l+h)*_,x=(0+p)*_,b=(l+p)*_,S=t.length/2-.5,w=void 0;if(S%1==0)w=t[S][1];else{var E=t[Math.floor(S)][1],T=t[Math.ceil(S)][1];w=[(E[0]+T[0])/2,(E[1]+T[1])/2]}if(w[0]<g||w[0]>y||w[1]<x||w[1]>b)return null;for(var I=0,A=t.length;I<A;I++){var k=t[I],P=k[0],M=X(e,n,i,P,o);if(M){var L=[],C={};C.coordScale=_,C.cidx=t.cidx,C.coords=k[1],C.text=k[2],C.text_mix=k[3]||0,C.text_bounds=k[5],C.rank=k[4],C.isBillboard="6"===String(M.effect),C.font_size=M.font_size,C.font_color=M.font_color?[].concat((0,u.default)(M.font_color.slice(0,3)),[255*M.font_color[3]]):[0,0,0,0],C.stroke_color=M.background_color?[].concat((0,u.default)(M.background_color.slice(0,3)),[255*M.background_color[3]]):[0,0,0,0],C.isBillboard&&(this._needUploadTileImage=!0),c+=k[2],M.font_weight=M.font_weight?M.font_weight:"",M.font_family=M.font_family?M.font_family:"",L.push(C),L.push(W.clone(C)),C.isBillboard&&this._billboardFeatures.push({text:C.text,bounds:C.text_bounds,cidx:C.cidx}),s.push({datas:L,font_size:M.font_size,id:r+"_"+Q()})}}return{roads:s,roadName:c}}}]),t}();t.exports=$},function(t,e,n){"use strict";function i(t,e){var n=a(e.regionStyles,null,null,u,10);n&&(f[t]="rgba("+s(n.color_fill).join(",")+")")}function o(t){return f[t]||c}Object.defineProperty(e,"__esModule",{value:!0}),e.setBgColor=i,e.getBgColor=o;var r=n(397),a=r.getVectorStyle,l=n(7),s=l.colorToRGBA,u="196613",c="rgba(255, 255, 255, 1)",f={}},function(t,e,n){"use strict";function i(t,e){var n=t.length,i=void 0;if(1===n)e<=t[0].maxScaleVal&&e>=t[0].minScaleVal&&(i=a.objectClone(t[0]));else{var o=!0,l=!1,s=void 0;try{for(var u,c=(0,r.default)(t);!(o=(u=c.next()).done);o=!0){var f=u.value;if(e<=f.maxScaleVal&&e>=f.minScaleVal){i=a.objectClone(f);break}}}catch(t){l=!0,s=t}finally{try{!o&&c.return&&c.return()}finally{if(l)throw s}}}return i}var o=n(18),r=function(t){return t&&t.__esModule?t:{default:t}}(o),a=n(7);e.getVectorStyle=function(t,e,n,o,r){var l=t[o];if(l){var s=i(l,r);if(s&&e&&n&&s[n]){var u=e[s[n]];if(u){var c=i(u,r);s=a.extend({},s,c)}}return s}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){return new f.default(function(n){var i=t||0,o=p.default.QMAPI_poi_icon_json+i,r=-1,s="",c=null;_.default.support()?_.default.get(o,function(t){var f=JSON.parse(t);r=t?f.version:r,s=e.replace("{id}",i).replace("{version}",r),h.default.getJSON(null,s,function(t,e,s){if(!t&&e&&e.data){if("{}"!==(0,u.default)(e.data))return l({styleId:i,version:r,time:s}),c=e.data,void _.default.set(o,(0,u.default)(e),function(){n(c)});c=f.data}else a({styleId:i,version:r,err:t}),console.error(t,e),c=f.data;n(c)})}):(s=e.replace("{id}",i).replace("{version}",r),h.default.getJSON(null,s,function(t,e,o){return!t&&e&&e.data?"{}"===(0,u.default)(e.data)?(a({styleId:i,version:r,err:null}),console.error(e),void n(null)):(l({styleId:i,version:r,time:o}),c=e.data,void n(c)):(a({styleId:i,version:r,err:t}),console.error(t,e),void n(null))}))})}function r(t){var e=t.data,n=t.styleId,i=t.iconIndexSrc;return new f.default(function(t){e?_.default.support()?_.default.set(y,(0,u.default)({data:e}),function(){t(e)}):(console.error("兼容性错误：当前浏览器不支持LocalStorage。"),t(null)):o(n,i).then(function(e){_.default.support()?_.default.set(y,(0,u.default)({data:e}),function(){t(e)}):(console.error("兼容性错误：当前浏览器不支持LocalStorage。"),t(null))})})}function a(t){var e=t.styleId,n=t.version,i=t.err;(0,g.qos)("ii",{styleId:e,version:n,error:i&&i.status||0})}function l(t){var e=t.styleId,n=t.version,i=t.time;(0,g.qos)("ii",{styleId:e,version:n,loadTime:i})}Object.defineProperty(e,"__esModule",{value:!0}),e.setPoiIconIndex=e.loadPoiIconIndexFile=void 0;var s=n(78),u=i(s),c=n(27),f=i(c),d=n(137),h=i(d),v=n(111),p=i(v),m=n(136),_=i(m),g=n(77),y=p.default.QMAPI_poi_icon_json+"config";e.loadPoiIconIndexFile=o,e.setPoiIconIndex=r},,,,,,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(18),r=i(o),a=n(2),l=i(a),s=n(0),u=i(s),c=n(1),f=i(c),d=n(4),h=i(d),v=n(3),p=i(v),m=n(65),_=i(m),g=n(7),y=i(g),x=function(t){function e(){(0,u.default)(this,e);var t=(0,h.default)(this,(e.__proto__||(0,l.default)(e)).call(this));return t._rawGeometries=[],t._idSet={},t.geometries=[],t}return(0,p.default)(e,t),(0,f.default)(e,[{key:"_checkGeometries",value:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}},{key:"_assignIdToGeometry",value:function(t){var e={};return t.forEach(function(t){t.id&&e[t.id]?t.id=t.id+"-"+y.default.uniqueId():t.id=t.id||y.default.uniqueId(),e[t.id]=!0}),t}},{key:"_updateGeometryIdSet",value:function(t){var e={};return t.forEach(function(t,n){e[t.id]=n}),e}},{key:"_transferFromGeometry",value:function(t){var e=y.default.clone(t);return e.forEach(function(t){t.id=t.id||y.default.uniqueId()}),e}},{key:"setGeometries",value:function(t,e){this._checkGeometries(t,e),this._rawGeometries=this._assignIdToGeometry(t),this._idSet=this._updateGeometryIdSet(this._rawGeometries),this.geometries=this._transferFromGeometry(this._rawGeometries),this.emit("geometry_changed")}},{key:"getGeometries",value:function(){return this._rawGeometries}},{key:"getGeometryById",value:function(t){var e=!0,n=!1,i=void 0;try{for(var o,a=(0,r.default)(this._rawGeometries);!(e=(o=a.next()).done);e=!0){var l=o.value;if(l.id===t)return l}}catch(t){n=!0,i=t}finally{try{!e&&a.return&&a.return()}finally{if(n)throw i}}return null}},{key:"updateGeometries",value:function(t,e){var n=this;Array.isArray(t)||(t=[t]),e||this._checkGeometries(t,this.styles),this._assignIdToGeometry(t).forEach(function(t){n._idSet.hasOwnProperty(t.id)?n._rawGeometries[n._idSet[t.id]]=t:(n._idSet[t.id]=n._rawGeometries.length,n._rawGeometries.push(t))}),this._idSet=this._updateGeometryIdSet(this._rawGeometries),this.geometries=this._transferFromGeometry(this._rawGeometries),this.emit("geometry_changed")}},{key:"add",value:function(t){var e=this;return t?(Array.isArray(t)||(t=[t]),this._checkGeometries(t,this.styles),this._assignIdToGeometry(t).forEach(function(t){e._idSet.hasOwnProperty(t.id)||(e._idSet[t.id]=e._rawGeometries.length,e._rawGeometries.push(t))}),this.updateGeometries(this._rawGeometries,!0),this):this}},{key:"remove",value:function(t){if(!t)return this;Array.isArray(t)||(t=[t]);var e=this._rawGeometries.length,n=this._rawGeometries.filter(function(e){return-1===t.indexOf(e.id)});return n.length===e?this:(this.setGeometries(n),this)}},{key:"destroy",value:function(){this._rawGeometries=[],this._idSet={},this.geometries=[]}}]),e}(_.default);e.default=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(0),r=i(o),a=n(51),l=i(a),s=n(38),u=n(458),c=i(u),f=n(61),d={map:0,screen:1},h={src:c.default,width:34,height:50,rotate:0,offset:new f(0,0),opacity:1,faceTo:"screen"},v=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,t);var n=e.src,i=void 0===n?h.src:n,o=e.width,a=void 0===o?h.width:o,u=e.height,c=void 0===u?h.height:u,v=e.anchor,p=e.rotate,m=void 0===p?h.rotate:p,_=e.offset,g=void 0===_?h.offset:_,y=e.opacity,x=void 0===y?h.opacity:y,b=e.faceTo,S=void 0===b?h.faceTo:b;l.default.isNumber(a)?a<=0&&console.error("参数错误：MarkerStyle.width 取值要大于0，实际传入: "+a+"."):new s.BaseTypeError("MarkerStyle.width","number",a).error(),l.default.isNumber(c)?c<=0&&console.error("参数错误：MarkerStyle.height 取值要大于0，实际传入: "+c+"."):new s.BaseTypeError("MarkerStyle.height","number",c).error(),l.default.isString(i)||new s.BaseTypeError("MarkerStyle.src","string",i).error(),v&&!l.default.isObject(v)&&new s.BaseTypeError("MarkerStyle.anchor","object",v).error(),l.default.isNumber(m)?m<0&&console.error("参数错误：MarkerStyle.rotate 取值要大于等于0，实际传入: "+m+"."):new s.BaseTypeError("MarkerStyle.rotate","number",m).error(),l.default.isNumber(x)?x<0&&console.error("参数错误：MarkerStyle.opacity 取值要大于等于0，实际传入: "+x+"."):new s.BaseTypeError("MarkerStyle.opacity","number",x).error(),l.default.isString(S)||new s.BaseTypeError("MarkerStyle.faceTo","string",S).error();var w=new Image;/^data:/.test(i)||(w.crossOrigin="anonymous"),w.src=i,this.src=w.src,this.width=a,this.height=c,this.rotate=m,this.anchor=v||new f(this.width/2,this.height),this.offset=g,this.opacity=x||0,this.faceTo=S in d?d[S]:d.screen};t.exports=v},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){if((0,w.isSimple)(t)){for(var e=[],n=t.length,i=0;i<n;i++){var r=void 0;if(i<n-1)r=[t[i],t[i+1]];else{if(t[i].equals(t[0]))continue;r=[t[i],t[0]]}e.push(r)}return e}return t.map(function(t){return o(t)}).flat()}var r=n(16),a=i(r),l=n(2),s=i(l),u=n(0),c=i(u),f=n(1),d=i(f),h=n(4),v=i(h),p=n(21),m=i(p),_=n(3),g=i(_),y=n(232),x=i(y),b=n(139),S=n(43),w=n(307),E=n(278),T=i(E),I=n(407),A=i(I),k=n(38),P=n(51),M=i(P),L=n(7),C=i(L),N=n(210),O=N.PolygonStyle,R=n(210),V=R.ExtrudablePolygonStyle,B=M.default.isValidColor,F=M.default.isNumber,z=function(t){function e(t){(0,c.default)(this,e);var n=(0,v.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t));return n._createSubOverlay(t),n}return(0,g.default)(e,t),(0,d.default)(e,[{key:"_initialize",value:function(){this._childGeometryOverlays=[]}},{key:"_setGeometryType",value:function(){this._geometryType=b.GEOMETRY_TYPES.POLYGON,this._layerType=S.RENDER_LAYER_TYPE.polygon,this._className="MultiPolygon"}},{key:"_checkGeometries",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(t,e){t?t.styleId||(t.styleId="default"):console.error("MultiPolygon.geometries: 希望传入PolygonGeometry数组，实际第"+e+"元素不存在！"),t.paths&&((0,w.isSimple)(t.paths)||(0,w.isPart)(t.paths)||(0,w.isComplex)(t.paths))||console.error("MultiPolygon.geometries: 希望传入PolygonGeometry数组，实际第"+e+"元素的paths属性无效！")})}},{key:"_getDefaultStyle",value:function(){return new O}},{key:"_checkStyles",value:function(t){(0,m.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"_checkStyles",this).call(this,t),(0,a.default)(t).forEach(function(e){var n=t[e];n&&(n instanceof O||n instanceof V)?n instanceof O?B(n.color)?B(n.borderColor)||console.error("MultiPolygon.styles: 样式id ",e," 对应的PolygonStyle.borderColor属性无效",n):console.error("MultiPolygon.styles: 样式id ",e," 对应的PolygonStyle.color属性无效",n):n instanceof V&&(B(n.color)?B(n.borderColor)?F(n.extrudeHeight)||console.error("MultiPolygon.styles: 样式id ",e," 对应的ExtrudablePolygonStyle.extrudeHeight属性无效",n):console.error("MultiPolygon.styles: 样式id ",e," 对应的ExtrudablePolygonStyle.borderColor属性无效",n):console.error("MultiPolygon.styles: 样式id ",e," 对应的ExtrudablePolygonStyle.color属性无效",n)):console.error("MultiPolygon.styles: 样式id ",e,"希望传入PolygonStyle或ExtrudablePolygonStyle实例，实际传入：",n)})}},{key:"_createSubOverlay",value:function(t){var e=this._extractSubStyles(),n=this._extractSubGeometries(),i=new A.default({id:t.id?t.id+"_border_line":"",map:t.map,styles:e,geometries:n,zIndex:t.zIndex});this._childGeometryOverlays.push(i)}},{key:"_extractSubGeometries",value:function(){var t=this;return this.geometries.reduce(function(e,n){var i=t.styles[n.styleId]||t.styles.default;if(i&&i.showBorder&&i instanceof O){var o=(0,w.getBorderPolyline)(n.paths);e.push({styleId:n.styleId,paths:o,rank:n.rank})}return e},[])}},{key:"_extractSubStyles",value:function(){var t={};return C.default.forIn(this.styles,function(e,n){n&&n.showBorder&&n instanceof O&&(t[e]=new T.default({id:e,color:n.borderColor,width:n.borderWidth,lineCap:"round",dashArray:n.borderDashArray}))}),t}},{key:"setVisible",value:function(t){return t=Boolean(t),(0,m.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"setVisible",this).call(this,t),this._childGeometryOverlays.forEach(function(e){e.setVisible(t)}),this}},{key:"setMap",value:function(t){return(0,m.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"setMap",this).call(this,t),this._childGeometryOverlays.forEach(function(e){return e.setMap(t)}),this}},{key:"setZIndex",value:function(t){return F(t)?t<0?(console.error("zIndex希望设置为非负数,实际值为: "+t),this):((0,m.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"setZIndex",this).call(this,t),this._childGeometryOverlays.forEach(function(e){return e.setZIndex(t)}),this):(new k.BaseTypeError("zIndex","Number",t).error(),this)}},{key:"updateGeometries",value:function(t,n){return t?((0,m.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"updateGeometries",this).call(this,t,n),this._updateSubGeometries(),this):this}},{key:"_updateSubGeometries",value:function(){var t=this._extractSubGeometries();this._childGeometryOverlays.forEach(function(e){return e.setGeometries(t)})}},{key:"_updateSubStyles",value:function(){var t=this._extractSubStyles();this._childGeometryOverlays.forEach(function(e){return e.setStyles(t)}),this._updateSubGeometries()}},{key:"setGeometries",value:function(t){return t?((0,m.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"setGeometries",this).call(this,t),this._updateSubGeometries(),this):this}},{key:"setStyles",value:function(t){return t?((0,m.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"setStyles",this).call(this,t),this._updateSubStyles(),this):this}},{key:"destroy",value:function(){this._childGeometryOverlays.forEach(function(t){return t.destroy()}),(0,m.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"destroy",this).call(this)}},{key:"_getAllPoints",value:function(){return this.getGeometries().map(function(t){return t.paths.flat(1/0)}).flat()}},{key:"_getAllSegments",value:function(){return this.getGeometries().map(function(t){return o(t.paths)}).flat()}}]),e}(x.default);t.exports=z},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){if((0,A.isSimple)(t)){for(var e=[],n=0;n<t.length-1;n++){var i=[t[n],t[n+1]];e.push(i)}return e}return t.map(function(t){return o(t)}).flat()}var r=n(16),a=i(r),l=n(2),s=i(l),u=n(0),c=i(u),f=n(1),d=i(f),h=n(4),v=i(h),p=n(21),m=i(p),_=n(3),g=i(_),y=n(278),x=i(y),b=n(51),S=i(b),w=n(232),E=i(w),T=n(139),I=n(43),A=n(382),k=S.default.isValidColor,P=function(t){function e(t){return(0,c.default)(this,e),(0,v.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t))}return(0,g.default)(e,t),(0,d.default)(e,[{key:"_setGeometryType",value:function(){this._geometryType=T.GEOMETRY_TYPES.POLYLINE,this._layerType=I.RENDER_LAYER_TYPE.polyline,this._className="MultiPolyline"}},{key:"_checkGeometries",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(t,e){t?t.styleId||(t.styleId="default"):console.error("MultiPolyline.geometries: 希望传入PolylineGeometry数组，实际第"+e+"元素不存在！");var n=t.paths,i=t.rainbowPaths;n||i||console.error("MultiPolyline.geometries: 希望传入PolylineGeometry数组，实际第"+e+"元素的未传入路径信息！"),!n||(0,A.isSimple)(n)||(0,A.isComplexLine)(n)||console.error("MultiPolyline.geometries: 希望传入PolylineGeometry数组，实际第"+e+"元素的paths属性无效！"),Array.isArray(i)&&i.length>0&&(i.map(function(t,n){return t.color&&!k(t.color)&&console.error("MultiPolyline.geometries: 第"+e+"元素的rainbowPaths中的第"+n+"个元素的color属性无效！"),t.borderColor&&!k(t.borderColor)&&console.error("MultiPolyline.geometries: 第"+e+"元素的rainbowPaths中的第"+n+"个元素的borderColor属性无效！"),t.path}).every(function(t){return(0,A.isSimple)(t)})?delete t.paths:console.error("MultiPolyline.geometries: 希望传入PolylineGeometry数组，实际第"+e+"元素的rainbowPath属性无效！"))})}},{key:"_getDefaultStyle",value:function(){return new x.default}},{key:"_checkStyles",value:function(t){(0,m.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"_checkStyles",this).call(this,t),(0,a.default)(t).forEach(function(e){var n=t[e];n&&n instanceof x.default?n.width&&n.width>0&&n.width%1==0?k(n.color)?"borderWidth"in n&&!(n.borderWidth>=0&&n.borderWidth%1==0)?console.error("MultiPolyline.styles: 样式id ",e," 对应的PolylineStyle.borderWidth属性无效",n):"borderColor"in n&&!k(n.borderColor)&&console.error("MultiPolyline.styles: 样式id ",e," 对应的PolylineStyle.borderColor属性无效",n):console.error("MultiPolyline.styles: 样式id ",e," 对应的PolylineStyle.color属性无效",n):console.error("MultiPolyline.styles: 样式id ",e," 对应的PolylineStyle.width属性无效",n):console.error("MultiPolyline.styles: 样式id ",e,"希望传入PolylineStyle实例，实际传入：",n)})}},{key:"_getAllPoints",value:function(){return this.getGeometries().map(function(t){return t.paths.flat(1/0)}).flat()}},{key:"_getAllSegments",value:function(){return this.getGeometries().map(function(t){return o(t.paths)}).flat()}}]),e}(E.default);t.exports=P},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(t){for(var e=0;e<t.length;e++){var n=t[e].string,i=t[e].prop;if(this.versionSearchString=t[e].versionSearch||t[e].identity,n){if(-1!==n.indexOf(t[e].subString))return t[e].identity}else if(i)return t[e].identity}},searchVersion:function(t){var e=t.indexOf(this.versionSearchString);if(-1!==e)return parseFloat(t.substring(e+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:self.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};i.init(),e.default=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.ScheduleTaskQueue=e.ScheduleTaskNode=void 0;var o=n(0),r=i(o),a=n(1),l=i(a),s=n(17),u=i(s);e.ScheduleTaskNode=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,t),this.prev=null,this.next=null,this.callback=null,this._expirationTime=e.expirationTime||u.default.now()+150}return(0,l.default)(t,[{key:"isTimeout",value:function(){return u.default.now()>=this._expirationTime}},{key:"setCallback",value:function(t){this.callback=t}},{key:"runTask",value:function(){var t=null;try{this.callback&&(t=this.callback())}catch(t){console.error(t)}"function"==typeof t?this.setCallback(t):this.remove()}},{key:"remove",value:function(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.queue&&this.queue.first===this&&(this.queue.first=this.next),this.queue&&this.queue.last===this&&(this.queue.last=this.prev),this.prev=null,this.next=null,this.callback=null,this.queue=null}},{key:"addToQueue",value:function(t){this.queue=t,this.queue.last?(this.queue.last.next=this,this.prev=this.queue.last,this.queue.last=this):this.queue.last=this,this.queue.first||(this.queue.first=this)}}]),t}(),e.ScheduleTaskQueue=function t(){(0,r.default)(this,t),this.first=null,this.last=null}},function(t,e,n){"use strict";function i(){return document.getElementsByTagName("head")[0]}function o(){return"cb"+(new Date).getTime().toString(36)+(y++).toString(36)}function r(t,e){g.push({name:t,sender:e})}function a(t){t.clearAttributes&&t.clearAttributes(),t[p]=null,t.onerror=null,t.parentNode&&t.parentNode.removeChild(t)}function l(t,e,n,o,a){var l=null,s=!1,c=["output=jsonp","pf=jsapi","ref=jsapi","cb="+_+"."+t],f=h.createElement("script");f.setAttribute("type","text/javascript"),f.setAttribute("charset",a||"GBK"),f.async=!0,f.src=e+(-1===e.indexOf("?")?"?":"&")+c.join("&"),f.onerror=function(){s=!0,o&&o(),u(t)},m[t]=function(t){l=t},f[p]=function(){v.test(this.readyState)&&(u(t),l?(l.id=t,n&&n(l)):s||o&&o())};var d=i();d.insertBefore(f,d.firstChild),r(t,f)}function s(t,e,n,i){return t||(t=o()),d(function(){u(t),l(t,e,n,i)}),t}function u(t){if(t){for(var e=0,n=null,i=g.length;e<i;e++)if(g[e].name===t){n=g.splice(e,1)[0];break}n&&a(n.sender),m[t]&&delete m[t]}}var c=n(83),f=n(607),d=f.domReady,h=window.document,v=/loaded|complete|undefined/i,p=h.dispatchEvent?"onload":"onreadystatechange",m=window[c]._svcb||(window[c]._svcb={}),_=c+"._svcb",g=[],y=0;e.send=s,e.cancel=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(2),r=i(o),a=n(0),l=i(a),s=n(4),u=i(s),c=n(3),f=i(c),d=n(65),h=function(t){function e(){return(0,l.default)(this,e),(0,u.default)(this,(e.__proto__||(0,r.default)(e)).call(this))}return(0,f.default)(e,t),e}(d);t.exports=h},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){switch(t.type){case p.LIGHT_TYPE.POINT:return new S(t);case p.LIGHT_TYPE.DIRECTION:return new b(t);case p.LIGHT_TYPE.AMBIENT:default:return new x(t)}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),a=i(r),l=n(4),s=i(l),u=n(3),c=i(u),f=n(0),d=i(f),h=n(1),v=i(h);e.default=o;var p=n(279),m=n(7),_=n(140),g=n(233),y=i(g),x=function(){function t(e){var n=e.id,i=e.color,o=void 0===i?"#FFFFFF":i,r=e.intensity,a=void 0===r?1:r,l=e.type;(0,d.default)(this,t),this.id=n||(0,m.uniqueId)(),this.color=o,this.intensity=a,this.type=l}return(0,v.default)(t,[{key:"color",get:function(){var t=this;return this._color.map(function(e){return e*t.intensity})},set:function(t){this._color=new y.default(t,{max:1}).toArray().slice(0,3)}}]),t}(),b=function(t){function e(t){(0,d.default)(this,e);var n=(0,s.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t));return n.direction=t.direction,n}return(0,c.default)(e,t),(0,v.default)(e,[{key:"direction",get:function(){return this._direction.elements},set:function(t){this._direction=new _.Vector3(t||[0,0,-1]).normalize().scale(-1,-1,-1)}}]),e}(x),S=function(t){function e(t){(0,d.default)(this,e);var n=(0,s.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t));return n.position=t.position,n.height=t.height,n.attenuation=t.attenuation||[1,.045,.0075],n}return(0,c.default)(e,t),e}(x)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(21),h=i(d),v=n(3),p=i(v),m=n(417),_=i(m),g=n(482),y=i(g),x=function(t){function e(t){(0,l.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return n.shaderSource=y.default,n.shaderParams={getAttribLocation:["a_position"],getUniformLocation:["u_matrix","u_size","u_texInfo","u_opacity","u_sampler"]},n.vertices=new Uint8Array([0,0,0,1,1,0,1,1]),n.indices=new Uint8Array([0,1,2,2,1,3]),n}return(0,p.default)(e,t),(0,u.default)(e,[{key:"preDraw",value:function(){(0,h.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"preDraw",this).call(this),this.buffers||(this.buffers=this.createBuffer(null,this.vertices,this.indices)),this.bindBuffer()}},{key:"bindBuffer",value:function(){var t=this.gl;this.buffers.vertices.bind(),this.buffers.vertices.pointToAttrib({location:this.a_position,size:2,type:t.UNSIGNED_BYTE}),this.buffers.indices.bind()}},{key:"draw",value:function(t){var e=t.matrix,n=t.size,i=t.texInfo,o=t.opacity,r=this.gl;r.uniformMatrix4fv(this.u_matrix,!1,e.elements),r.uniform1i(this.u_sampler,0),r.uniform2f(this.u_size,n.width,n.height),r.uniform4f(this.u_texInfo,i.s,i.t,i.w,i.h),r.uniform1f(this.u_opacity,o),r.drawElements(r.TRIANGLES,this.buffers.length,r.UNSIGNED_BYTE,0)}},{key:"destroy",value:function(){this.buffers&&(this.buffers.vertices.delete(),this.buffers.indices.delete()),this.vertices=null,this.indices=null,(0,h.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}}]),e}(_.default);e.default=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(21),h=i(d),v=n(3),p=i(v),m=n(102),_=i(m),g=[-1,-1,1,-1,-1,1,1,1],y=function(t){function e(t){(0,l.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return n.shaderParams={getAttribLocation:["aClipSpacePosition"],getUniformLocation:t.uniformList||[]},n.vertices=new Float32Array(g),n}return(0,p.default)(e,t),(0,u.default)(e,[{key:"preDraw",value:function(){(0,h.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"preDraw",this).call(this),this.buffers||(this.buffers=this.createBuffer(null,this.vertices)),this.bindBuffer()}},{key:"bindBuffer",value:function(){var t=this.gl;this.buffers.vertices.bind(),this.buffers.vertices.pointToAttrib({location:this.aClipSpacePosition,size:2,type:t.FLOAT})}},{key:"draw",value:function(t){var e=this.gl;e.useProgram(e.program),this.setUniforms(t),e.drawArrays(e.TRIANGLE_STRIP,0,4)}},{key:"setUniforms",value:function(){}}]),e}(_.default);e.default=y},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(14),r=i(o),a=n(2),l=i(a),s=n(0),u=i(s),c=n(1),f=i(c),d=n(4),h=i(d),v=n(21),p=i(v),m=n(3),_=i(m),g=n(102),y=i(g),x=n(85),b=n(104),S=n(112),w=i(S),E=n(127),T=n(7),I=i(T),A=function(t){function e(t){(0,u.default)(this,e);var n=(0,h.default)(this,(e.__proto__||(0,l.default)(e)).call(this,t)),i=t.attribList||[],o=t.uniformList||[];return n.shaderParams={getAttribLocation:i.concat(["positions","instancePositions","instancePositions64xyLow","instanceSizes","instanceInfos","instancePickingColors","instanceFrames","instancePixelOffset"]),getUniformLocation:o.concat(["uMatrix","uCenter","uZoom","uPixelsPerMeter","uResolution","uProject_uCommonUnitsPerWorldUnit","uProject_uCommonUnitsPerWorldUnit2","picking_usePickingColor","picking_zindex","u_sizeScale","u_sizeMinPixels","u_sizeMaxPixels","u_textureDim","u_opacity","u_sampler","u_mapScale"])},n.modelPositions=new Int16Array([-1,-1,0,-1,1,0,1,1,0,1,-1,0]),n.store=new x.Store("buffer",128,16,E.deleteInstanceCacllback),n.symbolManager=null,n}return(0,_.default)(e,t),(0,f.default)(e,[{key:"draw",value:function(t,e,n,i){var o=this.gl;if(e&&this.symbolManager.canvas){var r=t.center,a=t.zoom,l=t.getDistanceRatio(),s=i.distanceScales,u=(0,b.splitLatLngNumber)(r.lat),c=(0,b.splitLatLngNumber)(r.lng);o.useProgram(o.program),o.uniformMatrix4fv(this.uMatrix,!1,e.elements),o.uniform4f(this.uCenter,c.high,u.high,c.low,u.low),o.uniform1f(this.uZoom,a),o.uniform3f(this.uPixelsPerMeter,l,l,l),o.uniform3f(this.uProject_uCommonUnitsPerWorldUnit,s.pixelsPerDegree[0],s.pixelsPerDegree[1],s.pixelsPerDegree[2]),o.uniform3f(this.uProject_uCommonUnitsPerWorldUnit2,s.pixelsPerDegree2[0],s.pixelsPerDegree2[1],s.pixelsPerDegree2[2]),o.uniform2f(this.uResolution,t.width,t.height),o.uniform1f(this.picking_usePickingColor,i.usePicking?1:0),o.uniform1f(this.picking_zindex,i.picking_zindex||0),o.uniform1f(this.u_sizeScale,1),o.uniform1f(this.u_sizeMinPixels,0),o.uniform1f(this.u_sizeMaxPixels,1e3),o.uniform2f(this.u_textureDim,this.symbolManager.canvas.width,this.symbolManager.canvas.height),o.uniform1f(this.u_opacity,1),o.uniform1f(this.u_mapScale,t.scale),this._onDraw(),this.drawTileInstance(n.uid,n)}}},{key:"drawTileInstance",value:function(t,e){var n=this.gl,i=this.store,o=!1;if(i){if(i.exist(t)){var r=i.get(t).instanceBuffers;this.isBufferChanged(r,e)&&(o=!0)}else i.set(t,this.createBuffer(t,e));var a=i.get(t);a.positions.bind(),a.positions.pointToAttrib({location:this.positions,size:3,type:n.SHORT}),I.default.forIn(a.instanceBuffers,function(t,i){var r=i.buffer,a=i.location,l=i.size,s=i.type;r.bind(),o&&(r.bufferData(e[t],{usage:n.DYNAMIC_DRAW}),i.data=e[t]),r.pointToAttrib({location:a,size:l,type:s}),n.vertexAttribDivisor(a,1)}),n.drawArraysInstanced(n.TRIANGLE_FAN,0,4,e.count),n.bindBuffer(n.ARRAY_BUFFER,null),n.vertexAttribDivisor(this.instancePositions,0),n.vertexAttribDivisor(this.instancePositions64xyLow,0),n.vertexAttribDivisor(this.instanceSizes,0),n.vertexAttribDivisor(this.instanceInfos,0),n.vertexAttribDivisor(this.instancePickingColors,0),n.vertexAttribDivisor(this.instanceFrames,0),n.vertexAttribDivisor(this.instancePixelOffset,0),this._onDrawInstanceTile()}}},{key:"getInstanceConfig",value:function(){var t=this.gl;return{instancePositionList:{location:this.instancePositions,size:3,type:t.FLOAT},instancePosition64xyLowList:{location:this.instancePositions64xyLow,size:2,type:t.FLOAT},instanceSizeList:{location:this.instanceSizes,size:2,type:t.UNSIGNED_SHORT},instanceInfoList:{location:this.instanceInfos,size:4,type:t.FLOAT},instancePickingColorList:{location:this.instancePickingColors,size:3,type:t.UNSIGNED_BYTE},instanceFrameList:{location:this.instanceFrames,size:4,type:t.UNSIGNED_SHORT},instancePixelOffsetList:{location:this.instancePixelOffset,size:3,type:t.FLOAT}}}},{key:"createBuffer",value:function(t,e){var n=this.gl,i={positions:null,indices:null,instanceBuffers:{}};if(this.modelPositions&&(i.positions=new w.default(n,{data:this.modelPositions})),e){var o=this.getInstanceConfig();I.default.forIn(o,function(t,o){i.instanceBuffers[t]=(0,r.default)({data:e[t],buffer:new w.default(n,{data:e[t],usage:n.DYNAMIC_DRAW})},o)})}return i}},{key:"afterDraw",value:function(){this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,null)}},{key:"loadTexture",value:function(){this.symbolManager.canvas&&this.symbolManager.uploadToGPU({textureIndex:0,minFilter:this.gl.LINEAR,magFilter:this.gl.LINEAR,wrapS:this.gl.CLAMP_TO_EDGE,wrapT:this.gl.CLAMP_TO_EDGE,premultiply:!0,useMipmap:!1,fliyY:!0})}},{key:"_onDraw",value:function(){}},{key:"_onDrawInstanceTile",value:function(){}},{key:"destroy",value:function(){this.modelPositions=null,this.symbolManager=null,(0,p.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"destroy",this).call(this)}}]),e}(y.default);e.default=A},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return{x:t&&t.width||1,y:t&&t.height||1}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(14),a=i(r),l=n(16),s=i(l),u=n(2),c=i(u),f=n(0),d=i(f),h=n(1),v=i(h),p=n(4),m=i(p),_=n(21),g=i(_),y=n(3),x=i(y),b=n(417),S=i(b),w=n(490),E=i(w),T=n(491),I=i(T),A=n(103),k=i(A),P=n(85),M=n(112),L=i(M),C=n(7),N=i(C),O=1/16/window.devicePixelRatio,R=function(t){function e(t){(0,d.default)(this,e);var n=(0,m.default)(this,(e.__proto__||(0,c.default)(e)).call(this,t));return n.textCache=t.textCache,n.glyphManager=t.glyphManager,n.markerManager=t.markerManager,n.shaderSource=n.textCache?I.default:E.default,n._store=new P.Store("buffer",100,function(t){t.positions&&t.positions.delete(),t.indices&&t.indices.delete(),t.instanceBuffers&&(0,s.default)(t.instanceBuffers).forEach(function(e){var n=t.instanceBuffers[e];n.data=null,n.buffer.delete()})}),n.shaderParams={getAttribLocation:["a_Positions","a_InstanceTrans","a_InstanceCoords","a_InstanceTextBounds","a_InstanceInfo","a_InstanceColors","a_InstanceStrokeColors"],getUniformLocation:["u_matrix","u_resolution","u_fadeChange","u_showPoint","u_showLabel","u_mapScale","u_InstanceTileTextureOffset","u_iconTextureResolution","u_billboardTextureResolution","u_textTextureResolution","u_glyphTextureResolution","u_SamplerGlyph","u_SamplerText","u_SamplerIcon","u_SamplerMask","u_asbackground","u_gamma","u_buffer","u_maskScale"]},n.positions=new Int16Array([-1,1,1,1,-1,-1,1,-1]),n.indices=new Uint8Array([0,2,1,1,2,3]),n}return(0,x.default)(e,t),(0,v.default)(e,[{key:"setCommonUniforms",value:function(t,e){var n=this.gl;n.uniform2f(this.u_resolution,t.width,t.height),n.uniform2f(this.u_billboardTextureResolution,o(this.markerManager.canvas).x,o(this.markerManager.canvas).y),n.uniform2f(this.u_textTextureResolution,o(this.textCache).x,o(this.textCache).y),n.uniform2f(this.u_glyphTextureResolution,o(this.glyphManager.canvas).x,o(this.glyphManager.canvas).y),n.uniform2f(this.u_iconTextureResolution,o(e.iconsLoader.img).x,o(e.iconsLoader.img).y),n.uniform1f(this.u_asbackground,e.asBackground?1:0),n.uniform1f(this.u_fadeChange,e.fadeChange||0),n.uniform1f(this.u_maskScale,e.maskScale||1),n.uniform1f(this.u_showPoint,!1===e.showPoint?0:1),n.uniform1f(this.u_showLabel,!1===e.showLabel?0:1),n.uniform1f(this.u_mapScale,t.scale),n.uniform1i(this.u_SamplerText,0),n.uniform1i(this.u_SamplerGlyph,2),n.uniform1f(this.u_gamma,O),n.uniform1f(this.u_buffer,.71)}},{key:"draw",value:function(t,e,n,i){var o=this,r=this.gl;n&&((0,s.default)(n.textDataSet).length>0||(0,s.default)(n.poiDataSet).length>0)&&(r.useProgram(r.program),this.setCommonUniforms(t,i),r.uniform1i(this.u_SamplerIcon,1),r.uniform1i(this.u_SamplerMask,3),N.default.forIn(e,function(t,e){if(n.instanceSet[t]&&!n.instanceSet[t].isIndoor&&(!o.textCache||o.textCache.tiles[t])){var a=o.textCache&&o.textCache.tiles[t]||{};r.uniformMatrix4fv(o.u_matrix,!1,e.elements),r.uniform2f(o.u_InstanceTileTextureOffset,a.x||0,a.y||0),o.drawTileInstance(t,n.instanceSet[t],i.updateSubData)}}))}},{key:"drawTileInstance",value:function(t,e,n){if(!(e.count<1)){var i=this.gl,o=this._store;o.exist(t)||o.set(t,this.createBuffer(t,e));var r=o.get(t);r.positions.bind(),r.positions.pointToAttrib({location:this.a_Positions,size:2,type:i.SHORT}),r.indices.bind(),N.default.forIn(r.instanceBuffers,function(t,o){var r=o.buffer,a=o.location,l=o.size,s=o.type;r.bind(),n&&o.updatable&&(r.bufferData(e[t],{usage:i.DYNAMIC_DRAW}),o.data=e[t]),r.pointToAttrib({location:a,size:l,type:s}),i.vertexAttribDivisor(a,1)}),i.drawElementsInstanced(i.TRIANGLES,this.indices.length,i.UNSIGNED_BYTE,0,e.count),i.bindBuffer(i.ARRAY_BUFFER,null),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null),i.vertexAttribDivisor(this.a_InstanceTrans,0),i.vertexAttribDivisor(this.a_InstanceCoords,0),i.vertexAttribDivisor(this.a_InstanceTextBounds,0),i.vertexAttribDivisor(this.a_InstanceInfo,0),this.textCache||(i.vertexAttribDivisor(this.a_InstanceColors,0),i.vertexAttribDivisor(this.a_InstanceStrokeColors,0))}}},{key:"createBuffer",value:function(t,e){var n=this.gl,i={positions:null,indices:null,instanceBuffers:{}};if(this.positions&&(i.positions=new L.default(n,{data:this.positions})),this.indices&&(i.indices=new L.default(n,{target:n.ELEMENT_ARRAY_BUFFER,data:this.indices})),e){var o={instanceTransTypeArray:{location:this.a_InstanceTrans,size:3,type:n.FLOAT,updatable:!0},instanceCoordsTypeArray:{location:this.a_InstanceCoords,size:4,type:n.FLOAT},instanceTextBoundsTypeArray:{location:this.a_InstanceTextBounds,size:4,type:n.FLOAT,updatable:!0},instanceInfosTypeArray:{location:this.a_InstanceInfo,size:4,type:n.FLOAT,updatable:!0}};this.textCache||(o.instanceColorsTypeArray={location:this.a_InstanceColors,size:4,type:n.UNSIGNED_BYTE},o.instanceStrokeColorsTypeArray={location:this.a_InstanceStrokeColors,size:4,type:n.UNSIGNED_BYTE}),N.default.forIn(o,function(t,o){i.instanceBuffers[t]=(0,a.default)({data:e[t],buffer:new L.default(n,{data:e[t],usage:n.DYNAMIC_DRAW})},o)})}return i}},{key:"afterDraw",value:function(){(0,g.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"afterDraw",this).call(this),this.gl.activeTexture(this.gl.TEXTURE2),this.gl.bindTexture(this.gl.TEXTURE_2D,null)}},{key:"loadTexture",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.textCache?this.textCache.loadTexture():this.loadManagerTexture(this.markerManager,0),this.loadIconTexture(t),this.loadManagerTexture(this.glyphManager,2),t.maskTexture&&t.maskTexture.bind(this.gl,{textureIndex:3})}},{key:"loadIconTexture",value:function(t){var e=t.iconsLoader;if(e&&e.img){var n=this.gl;if(this.texture)this.texture.bind(null,{textureIndex:1});else{n.useProgram(n.program);var i=new k.default(n,{tex:e.img});i.upload({flipY:!0,textureIndex:1});var o=n.getUniformLocation(n.program,"u_SamplerIcon");n.uniform1i(o,1),this.texture=i}}}},{key:"loadManagerTexture",value:function(t,e){t&&t.canvas&&t.uploadToGPU({textureIndex:e,minFilter:this.gl.LINEAR,magFilter:this.gl.LINEAR,wrapS:this.gl.CLAMP_TO_EDGE,wrapT:this.gl.CLAMP_TO_EDGE,premultiply:!0,useMipmap:!1,fliyY:!0})}},{key:"clear",value:function(){this._store.clear(),this.texture&&(this.texture.destroy(),this.texture=null)}},{key:"destroy",value:function(){this.textCache=null,this.glyphManager=null,this.markerManager=null,this.positions=null,this.indices=null,this._store.clear(),this._store=null,this.texture&&(this.texture.destroy(),this.texture=null),(0,g.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"destroy",this).call(this)}}]),e}(S.default);e.default=R},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(102),p=i(v),m=function(t){function e(t){(0,l.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return n.textureShader=!0,n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"afterDraw",value:function(){this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,null)}}]),e}(p.default);e.default=m},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(14),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(413),f=i(c),d=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,-1,1,0,1]),h=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,l.default)(this,t);var i=n.id,o=void 0===i?"pass":i;this.id=o,this.gl=e,this.props={},(0,r.default)(this.props,n)}return(0,u.default)(t,[{key:"setProps",value:function(t){(0,r.default)(this.props,t)}},{key:"render",value:function(t){var e=t.inputBuffer,n=t.outputBuffer,i=t.preserve,o=void 0!==i&&i,r=this.gl;n?n.bind(r):r.frameBuffer&&r.frameBuffer.unbind(),o||r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),this._renderPass({inputBuffer:e})}},{key:"destroy",value:function(){this._onDestroy(),this._painter&&this._painter.destroy(),this.id=null,this.gl=null,this.props=null}},{key:"_onDestroy",value:function(){}},{key:"_renderPass",value:function(t){var e=t.inputBuffer,n=this.gl;this._painter||(this._painter=new f.default({gl:n})),e.color.bind(n),this._painter.preDraw(),this._painter.draw({matrix:{elements:d},size:{width:2,height:2},texInfo:{s:0,t:0,w:1,h:1},opacity:1})}}]),t}();e.default=h},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(211),p=i(v),m=n(103),_=i(m),g=n(420),y=i(g),x=function(t){function e(t,n){return(0,l.default)(this,e),(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,n))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_onCreate",value:function(){return this.gl.createFramebuffer()}},{key:"_onDelete",value:function(t){t||(this._colorAttach.delete(),this._depthAttach.delete()),this._colorAttach=null,this._depthAttach=null,this.unbind(!0),this.gl.deleteFramebuffer(this._object)}},{key:"_initialize",value:function(t){var e=t.width,n=void 0===e?1:e,i=t.height,o=void 0===i?1:i,r=t.attachments,a=void 0===r?{}:r;this.width=n,this.height=o;var l=void 0,s=void 0;a&&(l=a.color,s=a.depth),this.attach("color",l),this.attach("depth",s)}},{key:"_createDefaultAttachment",value:function(t){var e=this.gl,n=null;switch(t){case"color":n=new _.default(e,{tex:null});break;case"depth":n=new y.default(e,{format:e.DEPTH_COMPONENT16})}return n}},{key:"bind",value:function(t){t=t||this.gl,t.bindFramebuffer(t.FRAMEBUFFER,this._object),t.frameBuffer=this}},{key:"unbind",value:function(t){t||(this._colorAttach.unbind(),this._depthAttach.unbind()),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.frameBuffer=null}},{key:"attach",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.resizeAttach,o=void 0===i||i,r=this.gl,a=this.width,l=this.height;switch(this.bind(),e||(e=this._createDefaultAttachment(t)),o&&e.resize(a,l),t){case"color":r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e.texture,0),this._colorAttach=e;break;case"depth":e instanceof y.default?r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,e.buffer):e instanceof _.default&&r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,e.texture,0),this._depthAttach=e}}},{key:"checkStatus",value:function(){this.bind();var t=this.gl.checkFramebufferStatus(this.gl.FRAMEBUFFER);return t===this.gl.FRAMEBUFFER_COMPLETE||(console.error("Framebuffer object is incomplete: "+t.toString()+"."),!1)}},{key:"resize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.width=t,this.height=e,this._colorAttach.resize(t,e),this._depthAttach.resize(t,e,{minFilter:this.gl.NEAREST,magFilter:this.gl.NEAREST})}},{key:"copy",value:function(t){var e=this.gl,n=this.width,i=this.height;if(e.isWebGL2){this.bind();var o=t?t._object:null;e.bindFramebuffer(e.READ_FRAMEBUFFER,o),e.blitFramebuffer(0,0,n,i,0,0,n,i,e.COLOR_BUFFER_BIT,e.NEAREST)}else t&&t.bind(e),this.color.copy()}},{key:"color",get:function(){return this._colorAttach}},{key:"depth",get:function(){return this._depthAttach}},{key:"texture",get:function(){return this._colorAttach.texture}},{key:"buffer",get:function(){return this._object}}]),e}(p.default);e.default=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(211),p=i(v),m=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,l.default)(this,e),(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,n))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_onCreate",value:function(){return this.gl.createRenderbuffer()}},{key:"_onDelete",value:function(){this.unbind(),this.gl.deleteRenderbuffer(this._object)}},{key:"_initialize",value:function(t){var e=t.width,n=void 0===e?1:e,i=t.height,o=void 0===i?1:i,r=t.format;this.width=n,this.height=o,this.format=r||this.gl.DEPTH_COMPONENT16}},{key:"bind",value:function(t){t=t||this.gl,t.bindRenderbuffer(t.RENDERBUFFER,this._object)}},{key:"unbind",value:function(){this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,null)}},{key:"resize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.width=t,this.height=e,this.bind(),this.gl.renderbufferStorage(this.gl.RENDERBUFFER,this.format,this.width,this.height)}},{key:"buffer",get:function(){return this._object}}]),e}(p.default);e.default=m},function(t,e,n){t.exports={default:n(690),__esModule:!0}},function(t,e,n){var i=n(133);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=i(t))throw TypeError(e);return+t}},function(t,e,n){"use strict";var i=n(76),o=n(205),r=n(46);t.exports=[].copyWithin||function(t,e){var n=i(this),a=r(n.length),l=o(t,a),s=o(e,a),u=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===u?a:o(u,a))-s,a-l),f=1;for(s<l&&l<s+c&&(f=-1,s+=c-1,l+=c-1);c-- >0;)s in n?n[l]=n[s]:delete n[l],l+=f,s+=f;return n}},function(t,e,n){var i=n(120),o=n(76),r=n(259),a=n(46);t.exports=function(t,e,n,l,s){i(e);var u=o(t),c=r(u),f=a(u.length),d=s?f-1:0,h=s?-1:1;if(n<2)for(;;){if(d in c){l=c[d],d+=h;break}if(d+=h,s?d<0:f<=d)throw TypeError("Reduce of empty array with no initial value")}for(;s?d>=0:f>d;d+=h)d in c&&(l=e(l,c[d],d,u));return l}},function(t,e,n){var i=n(716);t.exports=function(t,e){return new(i(t))(e)}},function(t,e,n){"use strict";var i=n(120),o=n(31),r=n(430),a=[].slice,l={},s=function(t,e,n){if(!(e in l)){for(var i=[],o=0;o<e;o++)i[o]="a["+o+"]";l[e]=Function("F,a","return new F("+i.join(",")+")")}return l[e](t,n)};t.exports=Function.bind||function(t){var e=i(this),n=a.call(arguments,1),l=function(){var i=n.concat(a.call(arguments));return this instanceof l?s(e,i.length,i):r(e,i,t)};return o(e.prototype)&&(l.prototype=e.prototype),l}},function(t,e,n){"use strict";var i=n(57).f,o=n(200),r=n(216),a=n(122),l=n(214),s=n(285),u=n(351),c=n(434),f=n(217),d=n(56),h=n(150).fastKey,v=n(207),p=d?"_s":"size",m=function(t,e){var n,i=h(e);if("F"!==i)return t._i[i];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,u){var c=t(function(t,i){l(t,c,e,"_i"),t._t=e,t._i=o(null),t._f=void 0,t._l=void 0,t[p]=0,void 0!=i&&s(i,n,t[u],t)});return r(c.prototype,{clear:function(){for(var t=v(this,e),n=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];t._f=t._l=void 0,t[p]=0},delete:function(t){var n=v(this,e),i=m(n,t);if(i){var o=i.n,r=i.p;delete n._i[i.i],i.r=!0,r&&(r.n=o),o&&(o.p=r),n._f==i&&(n._f=o),n._l==i&&(n._l=r),n[p]--}return!!i},forEach:function(t){v(this,e);for(var n,i=a(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!m(v(this,e),t)}}),d&&i(c.prototype,"size",{get:function(){return v(this,e)[p]}}),c},def:function(t,e,n){var i,o,r=m(t,e);return r?r.v=n:(t._l=r={i:o=h(e,!0),k:e,v:n,p:i=t._l,n:void 0,r:!1},t._f||(t._f=r),i&&(i.n=r),t[p]++,"F"!==o&&(t._i[o]=r)),t},getEntry:m,setStrong:function(t,e,n){u(t,e,function(t,n){this._t=v(t,e),this._k=n,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?c(0,n.k):"values"==e?c(0,n.v):c(0,[n.k,n.v]):(t._t=void 0,c(1))},n?"entries":"values",!n,!0),f(e)}}},function(t,e,n){"use strict";var i=n(216),o=n(150).getWeak,r=n(28),a=n(31),l=n(214),s=n(285),u=n(121),c=n(99),f=n(207),d=u(5),h=u(6),v=0,p=function(t){return t._l||(t._l=new m)},m=function(){this.a=[]},_=function(t,e){return d(t.a,function(t){return t[0]===e})};m.prototype={get:function(t){var e=_(this,t);if(e)return e[1]},has:function(t){return!!_(this,t)},set:function(t,e){var n=_(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=h(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,r){var u=t(function(t,i){l(t,u,e,"_i"),t._t=e,t._i=v++,t._l=void 0,void 0!=i&&s(i,n,t[r],t)});return i(u.prototype,{delete:function(t){if(!a(t))return!1;var n=o(t);return!0===n?p(f(this,e)).delete(t):n&&c(n,this._i)&&delete n[this._i]},has:function(t){if(!a(t))return!1;var n=o(t);return!0===n?p(f(this,e)).has(t):n&&c(n,this._i)}}),u},def:function(t,e,n){var i=o(r(e),!0);return!0===i?p(t).set(e,n):i[t._i]=n,t},ufstore:p}},function(t,e,n){t.exports=!n(56)&&!n(29)(function(){return 7!=Object.defineProperty(n(344)("div"),"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var i=n(31),o=Math.floor;t.exports=function(t){return!i(t)&&isFinite(t)&&o(t)===t}},function(t,e,n){var i=n(28);t.exports=function(t,e,n,o){try{return o?e(i(n)[0],n[1]):e(n)}catch(e){var r=t.return;throw void 0!==r&&i(r.call(t)),e}}},function(t,e,n){"use strict";var i=n(200),o=n(204),r=n(218),a={};n(100)(a,n(40)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(a,{next:o(1,n)}),r(t,e+" Iterator")}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,n){"use strict";function i(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i}),this.resolve=o(e),this.reject=o(n)}var o=n(120);t.exports.f=function(t){return new i(t)}},function(t,e,n){"use strict";var i=n(56),o=n(203),r=n(288),a=n(260),l=n(76),s=n(259),u=Object.assign;t.exports=!u||n(29)(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=i})?function(t,e){for(var n=l(t),u=arguments.length,c=1,f=r.f,d=a.f;u>c;)for(var h,v=s(arguments[c++]),p=f?o(v).concat(f(v)):o(v),m=p.length,_=0;m>_;)h=p[_++],i&&!d.call(v,h)||(n[h]=v[h]);return n}:u},function(t,e,n){var i=n(57),o=n(28),r=n(203);t.exports=n(56)?Object.defineProperties:function(t,e){o(t);for(var n,a=r(e),l=a.length,s=0;l>s;)i.f(t,n=a[s++],e[n]);return t}},function(t,e,n){var i=n(101),o=n(201).f,r={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],l=function(t){try{return o(t)}catch(t){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==r.call(t)?l(t):o(i(t))}},function(t,e,n){var i=n(99),o=n(101),r=n(281)(!1),a=n(356)("IE_PROTO");t.exports=function(t,e){var n,l=o(t),s=0,u=[];for(n in l)n!=a&&i(l,n)&&u.push(n);for(;e.length>s;)i(l,n=e[s++])&&(~r(u,n)||u.push(n));return u}},function(t,e,n){var i=n(56),o=n(203),r=n(101),a=n(260).f;t.exports=function(t){return function(e){for(var n,l=r(e),s=o(l),u=s.length,c=0,f=[];u>c;)n=s[c++],i&&!a.call(l,n)||f.push(t?[n,l[n]]:l[n]);return f}}},function(t,e,n){var i=n(201),o=n(288),r=n(28),a=n(30).Reflect;t.exports=a&&a.ownKeys||function(t){var e=i.f(r(t)),n=o.f;return n?e.concat(n(t)):e}},function(t,e,n){var i=n(30).parseFloat,o=n(219).trim;t.exports=1/i(n(360)+"-0")!=-1/0?function(t){var e=o(String(t),3),n=i(e);return 0===n&&"-"==e.charAt(0)?-0:n}:i},function(t,e,n){var i=n(30).parseInt,o=n(219).trim,r=n(360),a=/^[-+]?0[xX]/;t.exports=8!==i(r+"08")||22!==i(r+"0x16")?function(t,e){var n=o(String(t),3);return i(n,e>>>0||(a.test(n)?16:10))}:i},function(t,e,n){var i=n(28),o=n(31),r=n(436);t.exports=function(t,e){if(i(t),o(e)&&e.constructor===t)return e;var n=r.f(t);return(0,n.resolve)(e),n.promise}},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,n){var i=n(46),o=n(359),r=n(134);t.exports=function(t,e,n,a){var l=String(r(t)),s=l.length,u=void 0===n?" ":String(n),c=i(e);if(c<=s||""==u)return l;var f=c-s,d=o.call(u,Math.ceil(f/u.length));return d.length>f&&(d=d.slice(0,f)),a?d+l:l+d}},function(t,e,n){var i=n(125),o=n(46);t.exports=function(t){if(void 0===t)return 0;var e=i(t),n=o(e);if(e!==n)throw RangeError("Wrong length!");return n}},function(t,e,n){var i=n(30),o=n(52),r=n(199),a=n(363),l=n(57).f;t.exports=function(t){var e=o.Symbol||(o.Symbol=r?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||l(e,t,{value:a.f(t)})}},function(t,e,n){"use strict";var i,o,r,a,l=n(199),s=n(30),u=n(122),c=n(258),f=n(6),d=n(31),h=n(120),v=n(214),p=n(285),m=n(261),_=n(361).set,g=n(723)(),y=n(436),x=n(724),b=n(292),S=n(445),w=s.TypeError,E=s.process,T=E&&E.versions,I=T&&T.v8||"",A=s.Promise,k="process"==c(E),P=function(){},M=o=y.f,L=!!function(){try{var t=A.resolve(1),e=(t.constructor={})[n(40)("species")]=function(t){t(P,P)};return(k||"function"==typeof PromiseRejectionEvent)&&t.then(P)instanceof e&&0!==I.indexOf("6.6")&&-1===b.indexOf("Chrome/66")}catch(t){}}(),C=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},N=function(t,e){if(!t._n){t._n=!0;var n=t._c;g(function(){for(var i=t._v,o=1==t._s,r=0;n.length>r;)!function(e){var n,r,a,l=o?e.ok:e.fail,s=e.resolve,u=e.reject,c=e.domain;try{l?(o||(2==t._h&&V(t),t._h=1),!0===l?n=i:(c&&c.enter(),n=l(i),c&&(c.exit(),a=!0)),n===e.promise?u(w("Promise-chain cycle")):(r=C(n))?r.call(n,s,u):s(n)):u(i)}catch(t){c&&!a&&c.exit(),u(t)}}(n[r++]);t._c=[],t._n=!1,e&&!t._h&&O(t)})}},O=function(t){_.call(s,function(){var e,n,i,o=t._v,r=R(t);if(r&&(e=x(function(){k?E.emit("unhandledRejection",o,t):(n=s.onunhandledrejection)?n({promise:t,reason:o}):(i=s.console)&&i.error&&i.error("Unhandled promise rejection",o)}),t._h=k||R(t)?2:1),t._a=void 0,r&&e.e)throw e.v})},R=function(t){return 1!==t._h&&0===(t._a||t._c).length},V=function(t){_.call(s,function(){var e;k?E.emit("rejectionHandled",t):(e=s.onrejectionhandled)&&e({promise:t,reason:t._v})})},B=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),N(e,!0))},F=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw w("Promise can't be resolved itself");(e=C(t))?g(function(){var i={_w:n,_d:!1};try{e.call(t,u(F,i,1),u(B,i,1))}catch(t){B.call(i,t)}}):(n._v=t,n._s=1,N(n,!1))}catch(t){B.call({_w:n,_d:!1},t)}}};L||(A=function(t){v(this,A,"Promise","_h"),h(t),i.call(this);try{t(u(F,this,1),u(B,this,1))}catch(t){B.call(this,t)}},i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=n(216)(A.prototype,{then:function(t,e){var n=M(m(this,A));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=k?E.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&N(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),r=function(){var t=new i;this.promise=t,this.resolve=u(F,t,1),this.reject=u(B,t,1)},y.f=M=function(t){return t===A||t===a?new r(t):o(t)}),f(f.G+f.W+f.F*!L,{Promise:A}),n(218)(A,"Promise"),n(217)("Promise"),a=n(52).Promise,f(f.S+f.F*!L,"Promise",{reject:function(t){var e=M(this);return(0,e.reject)(t),e.promise}}),f(f.S+f.F*(l||!L),"Promise",{resolve:function(t){return S(l&&this===a?A:this,t)}}),f(f.S+f.F*!(L&&n(287)(function(t){A.all(t).catch(P)})),"Promise",{all:function(t){var e=this,n=M(e),i=n.resolve,o=n.reject,r=x(function(){var n=[],r=0,a=1;p(t,!1,function(t){var l=r++,s=!1;n.push(void 0),a++,e.resolve(t).then(function(t){s||(s=!0,n[l]=t,--a||i(n))},o)}),--a||i(n)});return r.e&&o(r.v),n.promise},race:function(t){var e=this,n=M(e),i=n.reject,o=x(function(){p(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return o.e&&i(o.v),n.promise}})},function(t,e,n){"use strict";var i=n(354);n(6)({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})},function(t,e,n){n(56)&&"g"!=/./g.flags&&n(57).f(RegExp.prototype,"flags",{configurable:!0,get:n(284)})},function(t,e,n){"use strict";function i(t,e){if(e<65534&&(t.subarray&&a||!t.subarray&&r))return String.fromCharCode.apply(null,o.shrinkBuf(t,e));for(var n="",i=0;i<e;i++)n+=String.fromCharCode(t[i]);return n}var o=n(152),r=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(t){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){a=!1}for(var l=new o.Buf8(256),s=0;s<256;s++)l[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;l[254]=l[254]=1,e.string2buf=function(t){var e,n,i,r,a,l=t.length,s=0;for(r=0;r<l;r++)n=t.charCodeAt(r),55296==(64512&n)&&r+1<l&&56320==(64512&(i=t.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(i-56320),r++),s+=n<128?1:n<2048?2:n<65536?3:4;for(e=new o.Buf8(s),a=0,r=0;a<s;r++)n=t.charCodeAt(r),55296==(64512&n)&&r+1<l&&56320==(64512&(i=t.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(i-56320),r++),n<128?e[a++]=n:n<2048?(e[a++]=192|n>>>6,e[a++]=128|63&n):n<65536?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|63&n):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|63&n);return e},e.buf2binstring=function(t){return i(t,t.length)},e.binstring2buf=function(t){for(var e=new o.Buf8(t.length),n=0,i=e.length;n<i;n++)e[n]=t.charCodeAt(n);return e},e.buf2string=function(t,e){var n,o,r,a,s=e||t.length,u=new Array(2*s);for(o=0,n=0;n<s;)if((r=t[n++])<128)u[o++]=r;else if((a=l[r])>4)u[o++]=65533,n+=a-1;else{for(r&=2===a?31:3===a?15:7;a>1&&n<s;)r=r<<6|63&t[n++],a--;a>1?u[o++]=65533:r<65536?u[o++]=r:(r-=65536,u[o++]=55296|r>>10&1023,u[o++]=56320|1023&r)}return i(u,o)},e.utf8border=function(t,e){var n;for(e=e||t.length,e>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0?e:0===n?e:n+l[t[n]]>e?n:e}},function(t,e,n){"use strict";function i(t,e,n,i){for(var o=65535&t|0,r=t>>>16&65535|0,a=0;0!==n;){a=n>2e3?2e3:n,n-=a;do{o=o+e[i++]|0,r=r+o|0}while(--a);o%=65521,r%=65521}return o|r<<16|0}t.exports=i},function(t,e,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e,n){"use strict";function i(t,e,n,i){var r=o,a=i+n;t^=-1;for(var l=i;l<a;l++)t=t>>>8^r[255&(t^e[l])];return-1^t}var o=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();t.exports=i},function(t,e,n){"use strict";function i(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=i},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAABkCAMAAAAIYWa2AAAC8VBMVEVHcEwAAAAAAAAAAAAAAAAzMzPQRUXlSUnnS0vqS0vrTEzhSEgAAADFRUXmS0vtTk7xTU3yTk7yTk6vPz/oTEzvTk7yTk7MRETrS0vyT0/FQUHFPj7uTU3yTk7sTExVKiroS0vyTk5IJCS4QEDuTU3SRETxTU0AAADhSkreSUkAAADoSkryTk7pSkoAAADoTEzmTEziSUndSEjMRETDQUFtJCTwTU3vTExfHx/mSUkAAADFPz/yTk68PDztTEwAAADMRUXBQUHsTEzqTEyzPj7yTk6lOTnjSUnfSEjuTk7yUVH2iYn6wMD95OT+9vYAAADBPT32hob95ub///+2OTkAAADfSUnyT0/5ra3aR0cAAADqS0vwTU3vTU0AAABmKChbJCTBPT24OjrQQkIAAADXRUXRQ0PVRUUAAADcR0fYRkYAAADXRETQQkLNRETIQkLDQUG9Pj6qNzegNTUhCwvxTk4cCQkAAADrTEwAAAAAAADkSkriSEgAAADLQUFnIiLyTk5gHx/oS0vnSkoAAAAAAADOQ0NLHh7wTk4/FRXaRkbXRUVuJSXxTU1vKCgAAADfSEjZRkYAAADwTU3vTU1XHBzSRETIQEAmDw/rTEzoSkoIBQWhNDSMLS3NQkIAAAAAAAAlDw/oSkrnSkqBKyvwTU3vTU1lISG5PT2qODgAAADURUXKQkIBAQHjSUncRkYAAAAAAAA1FBTkSkoYCgpjISHsS0s/FxcAAABtJSXsTU3pS0tTGhp0JibsTExYHR1bHBzsTExpIyOVMzPuTU19KyujNjbxTk7uTU2MLS2xOTnxTk6bMTHCPj60OTniSEjcR0fuTU07FxefNDTbR0fTRUXpS0uiNDThSEiDKyvXRkZ6JyfhSUmSLi7pS0vIQUFQGBjmSkrGQUGCKSntTEzrTEzdSEjbR0edMzOYMTHZR0eTLy8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA6Ei6pAAAA+3RSTlMAAQIDBAUhRVhlcUYFFlSTzvX/EGC6/B6P8h8YmPiZBmvtBxe7MNwGVlcHhf6PCHx8WlwtLw7T1BCDCSz3LrQLNzqwsSX9KICC2///////DjL///81CnP//3UMtOPkERkcPkFcDWdqdg98fhBvcmFjUlY8Phf4GxTRFxKlqBZsJfopwMIaE3ci7iSRky/5MhimnBvy7C2DeiHVzSBIQoceFSLQxTvw6zVnWx2Qgh+3qSEZJsAkMtssHDbh1jE73zQ14jpL6UFU9e9IXfRScma0p+crU56T0k2vOpQ0rULLdCm4cTHY1JeWPD6aQC42PDkwKCsvMjQsKSUnKiijw/sAAAUASURBVHgB1M8DcoRBEIbhNNbutW3EtnP/E2V/rDUzKeUpo9/q7+gfATA/tSAiORARpjQLiMTs8fr8gWAw4A95PWEmO6SRII5EY/GEzCXisWgkzIodu5BMpTOyIZNOJZmsjEIim8vLDvlcIXwgYw3hYqkse5QrRTuz741qrS4H1GsN3lmx3mimRUGrGabtkwAo3O6Ikk67u3USIIV7eVGU7w82JwEgdYcjUTYablasRk60jCdrFQDqHoumk3ll3jgVbWfWokUDw+d50Za/GND8FUC+vBID1zddt2KNGdyKkdu7MLoR7N4/iJGHR3cQIN89iaGnZ+cVoO7LSAyNXicMYD/yJsben7sI1iMfn2Ls82vC0wjffcsf/DyH8ZdUskbLIIyBcJCSag+BQ4+36+7uisv58d+T6pt23ic6sH1wJ5CEKMmKqiqyJJKIoB3vwM6xTgKGaf3LNEjIdnZh99IlXM+3luR7BBaEB7B3FxGub63IJ7BIO4ZjLSZ2sdZEbJSkl3Ce4UkTzfUipojnLXfgssAbSNaGJJwsQ3Aq3JI3i8g4WdVw1+CWsllEwclWgzDALXWziIqTXQ/1wFpknKC+Z13n4bvII+thn1Kon1lf/DJB/cqxhY17myB8v2aL/cdXKWYNHLcWheGlcmt3r32URP2E1FeqQoatDJrRpI0sJTIzyTEzoxIzY9gMYWY0M1fRXWXOsizdvf18c/6Dv3SNNpBspH8DGMlRhgv8df9WwQ0h1HDaFuXfUopiSQNBR8f4sx5jYvkLhn9ChTh/FnV8AkPImy0xyR9IEidvNstpJjkFn5GSypJWeduHCmn4kPQE5rTFYJL1ZGTiMjKzhFD57hgtBC1m40Ju5vAXrCbkTgLZjFw8Rl4+RxFm+RbLoTBiAR6kMIdXDIo9lKJiHEZJqYACsUPkrHBlMRhmqzzBdsEeCKJYST4nXT+korIqVPFsinsMraqu0cuoLRWZ02CHkeNixLp6fYyGxhweeS2jw5XLgpp02b+AZskhBgSx0i09kNstHA1i0FMqJLS0ame0tXfYKwMQ5RPhAiN2lmhldHUn8IH/gBjntHT09Gpj1PT1s6GODxXntAQm5gwMamEMDUtVFOHCgLTIyc0ZGdXAuCMJNPq+8ISg5Iay/SMhxzF671Z6ZQCFquovb1Bn3LtfydEXrJBUD4oVUR6otu7DRy0c450BlNNUlTQ27psxMYkYUFxfFFqQpnzu3OmZFlGdAZTKWV+QuVLRRqow4K/DaYZrmffOeNzewasygIIGIP+JN8bo05zEwP/NJnUGDEDClJe9EPBMgmZXeTAAbP9zT8iLFoEmjmfAXqCETo9ZfNkN06+JYr1g63jlJihgsj/RY/rV0xKY2P/arTItAkyudkFvXFpufKCDgT8D2gUluOT2rcTqEOM4Re9inK5dj0jrEQOnqOO9A5Ldn2j/oNf1UG6ryoBx8gMKRIcYCMWW8BFOpqQnEHgoKwL4yk8djM5AoEB87F9/0vq5KlBnIBAKxX1RIPM5NjiZekMh2asK5CtHybcb63+5nNpvSm2yWMWaYer5jiA/kBojHsT0D8n+RJBfeGqgVRam5RW/yGLVBlqlanFpaRm8GVYoTPvK6tra+ka7TbcagEibW9s7q6u7G3v7lbgQy8Hh/tbe9vbK1tHhgcWA+Yj+w839o62j/cN+ApeBskIyPM8EQlaxQcd32W/E9Jewb6BBFAAAAABJRU5ErkJggg=="},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";e.Event=n(65),e.Map=n(277).default,e.LatLng=n(42),e.LatLngBounds=n(84),e.Point=n(61),e.VectorTileLayer=n(389).default,e.ImageTileLayer=n(387).default,e.CanvasGroundLayer=n(549).default,e.ImageGroundLayer=n(551).default,e.MaskLayer=n(554).default,e.GeometryOverlay=n(232).default,e.MultiPolygon=n(406),e.PolygonStyle=n(210).PolygonStyle,e.ExtrudablePolygonStyle=n(210).ExtrudablePolygonStyle,e.MultiCircle=n(601),e.CircleStyle=n(210).CircleStyle,e.MultiPolyline=n(407),e.PolylineStyle=n(278).default,e.LabelStyle=n(313).default,e.MultiLabel=n(602),e.MultiMarker=n(603),e.MarkerStyle=n(405),e.InfoWindow=n(600).default,e.DOMOverlay=n(312).default,e.MarkerCluster=n(605).default,e.Light=n(412).default,e.VisualPlugin=n(621),e.ModelPlugin=n(620).default,e.constants={CONTROL_POSITION:n(224).CONTROL_POSITION,DEFAULT_CONTROL_ID:n(224).DEFAULT_CONTROL_ID,GEOMETRY_TYPES:n(139).GEOMETRY_TYPES,LIGHT_TYPE:n(279).LIGHT_TYPE,IMAGE_DISPLAY:n(111).IMAGE_DISPLAY},e.geometry=n(580)},,,,,,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(221),o=n(303),r=function(t){return t&&t.__esModule?t:{default:t}}(o),a=r.default?i.LIGHT_UNIFORM+i.LIGHT_VARYING+i.LIGHT_VERTEX:"",l=r.default?i.LIGHT_VARYING+i.LIGHT_FRAG:"";e.default={v:"\n\t\tprecision highp float;\n\t\tattribute vec2 a_Position;\n\t\tattribute vec4 a_Color;\n\t\tattribute vec2 a_Normal;\n\t\tattribute vec2 a_LineInfo;\n\t\tattribute float a_LineDistance;\n\t\tattribute vec2 a_SideInfo;\n\n\t\tuniform mat4 u_matrix;\n\t\tuniform mat4 u_modelMatrix;\n\t\tuniform float u_SizeScale;\n\n\t\tvarying vec4 v_Color;\n\t\tvarying vec2 v_Normal;\n\t\tvarying vec2 v_LineInfo;\n\t\tvarying vec2 v_Pos;\n\t\tvarying float v_Transform;\n\t\tvarying float v_LineDistance;\n\t\tvarying float v_Width;\n\t\tvarying float v_opaque_part;\n\n\t\t"+a+"\n\n\t\tvoid main(){\n\n\t\t\tfloat isSide = fract(a_SideInfo.x / 2.) * 2.;\n\t\t\tfloat isNoSideLine = floor(a_SideInfo.x / 2.);\n\t\t\tv_opaque_part = mix(1.0, 0.0, smoothstep(0.0, 1.0, isSide * isNoSideLine));\n\n\t\t\tfloat zoom = floor(u_SizeScale / 1000.) / 100.;\n\t\t\tfloat scale = fract(u_SizeScale / 1000.) * 10.;\n\t\t\tfloat preWidth = floor(a_Position.x / 2048.0)/2.0;\n\t\t\tfloat nextWidth = floor(a_Position.y / 2048.0)/2.0;\n\n\t\t\tv_Color = a_Color;\n\t\t\tv_Normal = a_Normal;\n\t\t\tv_LineInfo = a_LineInfo;\n\t\t\tv_LineDistance = floor(a_LineDistance/10.0);\n\t\t\tvec2 point = (fract(a_Position.xy / 2048.0) * 2048.0 - 1024.0) * 0.5;\n\n\t\t\t\n\t\t\tfloat width = a_LineInfo.x / 2.0;\n\t\t\tfloat nearWidth = mix(nextWidth, preWidth, step(0.5, zoom));\n\t\t\tv_Width = mix(\n\t\t\t\twidth,\n\t\t\t\tmix(\n\t\t\t\t\tmix(width, nextWidth, zoom),\n\t\t\t\t\tmix(preWidth, width, zoom),\n\t\t\t\t\tstep(0.5, zoom)\n\t\t\t\t),\n\t\t\t\tfloat(v_LineDistance > 0. && nearWidth > 0.)\n\t\t\t) / scale;\n\n\t\t\tv_Normal = vec2(a_Normal.x - 128.0, a_Normal.y - 128.0) / 63.;\n\t\t\tv_Pos = point + v_Normal * v_Width;\n\t\t\tv_Transform = a_SideInfo.y;\n\t\t\tgl_Position = u_matrix * vec4(v_Pos, 0.0, 1.0);\n\n\t\t\t\n\t\t\t"+(r.default?"lighting_apply_on_vertex(vec3(v_Pos, 0.0), vec3(0.0, 0.0, 1.0), u_modelMatrix, vec2(0.1, 16.0));":"")+"\n\t\t}\n\t",f:"\n\t\tprecision highp float;\n\t\tvarying vec4 v_Color;\n\t\tvarying vec2 v_Normal;\n\t\tvarying vec2 v_LineInfo;\n\t\tvarying vec2 v_Pos;\n\t\tvarying float v_Transform;\n\t\tvarying float v_LineDistance;\n\t\tvarying float v_Width;\n\t\tvarying float v_opaque_part;\n\n\t\t"+l+"\n\n\t\tvoid main(){\n\t\t\tvec4 f_Color;\n\t\t\tf_Color.r = v_Color.r / 255.0;\n\t\t\tf_Color.g = v_Color.g / 255.0;\n\t\t\tf_Color.b = v_Color.b / 255.0;\n\t\t\tf_Color.a = 1.0;\n\n\t\t\tfloat alpha = 1.0;\n\t\t\tfloat minAlpha = 0.0;\n\t\t\tfloat feather = min(v_Width * 0.3, 2.0);\n\n\t\t\t\n\t\t\tfloat transformByte = floor(v_Transform + 0.5);\n\t\t\tvec2 translate = vec2(fract(transformByte / 4.0) * 4.0, floor(fract(transformByte / 16.0) * 4.0));\n\t\t\tfloat scale = floor(transformByte / 16.0);\n\t\t\tvec2 coord = vec2(v_Pos.x, 0. - v_Pos.y) * scale - translate * 256.0;\n\t\t\tbool isOutSide = coord.x < 0. || coord.x > 256.0 || coord.y < 0. || coord.y > 256.0;\n\n\t\t\tfloat dist = abs(length(v_Normal) * v_Width);\n\t\t\tfloat isTransparent = float(\n\t\t\t\t(dist > v_Width || isOutSide) || \n\t\t\t\t(v_LineInfo.y> 0.0 && mod(v_LineDistance, floor(v_LineInfo.y/10.0) * (2.0-fract(v_LineInfo.y/10.0))) > floor(v_LineInfo.y/10.0))\n\t\t\t);\n\n\t\t\talpha = mix(\n\t\t\t\tmix(alpha, clamp((v_Width - dist) / feather, 0.0, 1.0), float(v_Width>0. && dist>(v_Width - feather))),\n\t\t\t\t0.0,\n\t\t\t\tisTransparent\n\t\t\t);\n\n\t\t\t\n\t\t\t"+(r.default?"vec4 colorInLight = lighting_apply_on_color(f_Color);":"vec4 colorInLight = f_Color;")+"\n\t\t\tgl_FragColor =  colorInLight * (v_Color.a /255.0) * alpha * v_opaque_part;\n\t\t}\n\t",name:"base"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={v:"\nattribute vec2 a_Position;\nattribute vec4 a_Info;\nuniform mat4 u_matrix;\nuniform mat4 u_modelMatrix;\nuniform mat4 u_lightPVMatrix;\nvarying vec4 v_pos;\nvarying vec4 v_flatNDCCoord;\n\nvoid main(){\n\tv_pos = vec4(a_Position.xy - 2048.0, a_Info.x, 1.0);\n\n\t\n    v_flatNDCCoord = u_matrix * vec4(v_pos.xy, 0.0, 1.0);\n    \n    vec4 posInLightView = u_lightPVMatrix * u_modelMatrix *  vec4(v_pos.xyz, 1.0);\n\n\tgl_Position = posInLightView;\n}",f:"\nprecision mediump float;\n\nuniform float u_maskScale;\nuniform sampler2D u_maskSampler;\n\nvarying vec4 v_pos;\nvarying vec4 v_flatNDCCoord;\n\nvoid main(){ \n\tvec2 v_texCoord = (v_flatNDCCoord.xy / v_flatNDCCoord.w * u_maskScale + 1.0) / 2.0;\n\n\t\n\tvec4 maskColor = texture2D(u_maskSampler, v_texCoord);\n\tfloat isCulledByMask = maskColor.r;\n\tfloat alpha = 1.0;\n\tif(isCulledByMask > 0.99) {\n\t\tdiscard;\n\t}\n\tif(v_pos.x < -.17 || v_pos.y > .17 || v_pos.x > 256.0 || v_pos.y < -256.0){\n\t\tdiscard;\n\t}\n\n    gl_FragColor = vec4(1.0);\n}",name:"building-shadow"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(221),o="\nattribute vec2 a_Position;\nattribute vec4 a_Color;\nattribute vec4 a_Info;\nattribute vec4 a_Transform;\nattribute float a_Height;\nuniform mat4 u_matrix;\nuniform mat4 u_modelMatrix;\nuniform float u_use3D;\nvarying vec4 v_coord;\nvarying vec4 v_color;\nvarying vec2 v_Transform;\n"+i.LIGHT_UNIFORM+"\n"+i.LIGHT_VARYING+"\n"+i.LIGHT_VERTEX+"\n\nvoid main(){\n\tvec4 v_pos = vec4(a_Position.xy - 2048.0, mix(0.0, a_Height, u_use3D), 1.0);\n\tvec3 a_normal = normalize(vec3(a_Info.xyz-128.0));\n\n\t\n\tv_color = vec4(float(a_Color.r), float(a_Color.g), float(a_Color.b), float(a_Color.a)) / 255.0;\n\tvec2 objSpec = vec2(0.5, 32.0);\n\tlighting_apply_on_vertex(v_pos.xyz, a_normal, u_modelMatrix, objSpec);\n\n\t\n\tvec4 v_flatNDCCoord = u_matrix * vec4(v_pos.xy, 0.0, 1.0);\n\tv_coord = vec4(v_pos.xy, v_flatNDCCoord.xy / v_flatNDCCoord.w);\n\tv_Transform = a_Transform.xy;\n\n\tgl_Position = u_matrix * v_pos;\n}",r="\nprecision mediump float;\n\nuniform float u_maskScale;\nuniform sampler2D u_maskSampler;\n\nvarying vec4 v_coord;\nvarying vec4 v_color;\nvarying vec2 v_Transform;\n\n"+i.LIGHT_VARYING+"\n"+i.LIGHT_FRAG+"\n\nvoid main(){ \n\tvec2 v_texCoord = (v_coord.zw * u_maskScale + 1.0) / 2.0;\n\n\t\n\tvec4 maskColor = texture2D(u_maskSampler, v_texCoord);\n\tfloat isCulledByMask = maskColor.r;\n\t\n\t\n\tif(isCulledByMask > 0.99) {\n\t\tdiscard;\n\t}\n\n\t\n\tvec2 transformRound = floor(v_Transform + 0.5);\n\tvec2 translate = vec2(fract(transformRound.x / 16.0) * 16.0, floor(transformRound.x / 16.0));\n\tfloat scale = transformRound.y;\n\tvec2 coord = vec2(v_coord.x, - v_coord.y) * scale - translate * 256.0;\n\tbool isOutSide = coord.x < -.17 || coord.x > 256.0 || coord.y < -.17 || coord.y > 256.0;\n\t\n\tif(isOutSide){\n\t\t\n\t\tdiscard;\n\t}\n\n\tvec4 color = lighting_apply_on_color(v_color);\n\tgl_FragColor = vec4(color.rgb * color.a, color.a);\n}";e.default={v:o,f:r,name:"building"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.gradientNoise="\n\nvec2 random(vec2 p) {\n\treturn -1.0 + 2.0 * fract(\n            sin(\n                vec2(\n                    dot(p, vec2(127.1, 311.7)),\n                    dot(p, vec2(269.5, 183.3))\n                )\n            ) * 43758.5453123\n        );\n}\n\n\nfloat noise(vec2 p) {\n\n    vec2 i = floor(p);\n    vec2 f = fract(p);\n\n\n    float a1 = dot(random(i), f);\n    float a2 = dot(random(i + vec2(1., 0.)), f + vec2(-1., 0.));\n    float a3 = dot(random(i + vec2(1., 1.)), f + vec2(-1., -1.));\n    float a4 = dot(random(i + vec2(0., 1.)), f + vec2(0., -1.));\n\n\n    vec2 w = smoothstep(0., 1., f);\n    return mix(\n        mix(a1, a2, w.x),\n        mix(a4, a3, w.x),\n        w.y\n    );\n}\n\nconst int FBM_NUM = 5;\nconst float FREQ = 2.;\nfloat fbm(vec2 p, vec2 cellScale) {\n    float f = 0.0;\n    float a = 1.0;\n    p *= cellScale;\n\n    for (int i = 0; i < FBM_NUM; i++) {\n        f += a * noise(p);\n        p *= FREQ;\n        a /= FREQ;\n    }\n    return f;\n}\n"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(478),o=n(303),r=function(t){return t&&t.__esModule?t:{default:t}}(o),a=r.default?"\n\nfloat edgeY = (uFogEdge.x + 1.) / 2.;\nfloat x = fract((vPosition.x * uViewInfo.y + uViewInfo.x) / 2. / PI);\nvec2 skyCoord = vec2(\n\tgetCoordByDisplay(x, uSkyInfo.x * uViewInfo.y / PI, uSkyInfo.z),\n\tgetCoordByDisplay((texCoord.y - edgeY) / (1.0 - edgeY), uSkyInfo.y / (1.0 - edgeY), uSkyInfo.w)\n);\nvec4 skyColor = mix(\n\tuSkyColor,\n\ttexture2D(uSkySampler, skyCoord),\n\tstep(0.001, uSkyInfo.x * uSkyInfo.y)\n);\n\n\nvec2 p = vec2(texCoord.x - uViewInfo.w + uViewInfo.x / uViewInfo.y / 2., texCoord.y - edgeY);\nfloat mask = smoothstep(0., 0.5, p.y);\nfloat n = mix(\n\t0.,\n\tmax(0., fbm(p, vec2(2., 4.)) * mask),\n\tuViewInfo.z\n);\nvec4 skyWithCloud = vec4(mix(skyColor.rgb, vec3(1.0), n) * uSkyBrightness, 1.);\n":"vec4 skyWithCloud = uSkyColor;",l="\n#define SHADER_NAME FogShader-fragment-shader\nprecision highp float;\n\nconst float PI = 3.141592653589793;\n\n\nuniform vec2 uRange;\n\n\nuniform vec3 uFogEdge;\n\nuniform sampler2D uSampler;\nuniform sampler2D uDepthSampler;\nuniform sampler2D uSkySampler;\nuniform vec4 uSkyInfo;\nuniform vec4 uViewInfo;\nuniform float uSkyBrightness;\nuniform vec4 uFogColor;\nuniform vec4 uSkyColor;\n\nvarying vec2 vPosition;\n\nfloat LinearizeDepth(float depth) {\n    float near = 0.1;\n    float far = 100.0;\n    float z = depth * 2.0 - 1.0;\n    return (2.0 * near) / (far + near - z * (far - near));\n}\n\nfloat getDepthFromY(float y) {\n\t\n\treturn min(uFogEdge.z + (uFogEdge.y - uFogEdge.z) * y / uFogEdge.x, 1.);\n}\n\nfloat getCoordByDisplay(float value, float max, float displayType) {\n\t\n\treturn mix(\n\t\tvalue / max,\n\t\tmix(\n\t\t\tvalue,\n\t\t\tfract(value / max),\n\t\t\tstep(2.0, displayType)\n\t\t),\n\t\tstep(1.0, displayType)\n\t);\n}\n\n"+i.gradientNoise+"\n\nvoid main() {\n\tvec2 texCoord = (vPosition + vec2(1.0)) / 2.0;\n\n\t\n\tfloat depth = texture2D(uDepthSampler, texCoord).x;\n\n\t\n\tdepth = min(getDepthFromY(vPosition.y), depth);\n\t\n\n\t\n\tfloat fogFactor = mix(\n\t\tsmoothstep(getDepthFromY(uFogEdge.x - uRange.x), uFogEdge.y, depth),\n\t\t1. - smoothstep(uFogEdge.y, getDepthFromY(uFogEdge.x + uRange.y), depth),\n\t\tstep(uFogEdge.y, depth)\n\t);\n\n\t\n\tvec4 sceneColor = texture2D(uSampler, texCoord);\n\n\t"+a+"\n\t\n\t\n\tvec4 bgColor = mix(sceneColor, skyWithCloud, step(uFogEdge.y, depth));\n\n\t\n\tvec4 blendColor = vec4(mix(bgColor.rgb, uFogColor.rgb, fogFactor), bgColor.a);\n\t\n\t\n\t\n\n\tgl_FragColor = mix(\n\t\tblendColor,\n\t\tsceneColor,\n\t\tfloat(vPosition.y < uFogEdge.x - uRange.x)\n\t);\n}\n";e.default={v:"\n#define SHADER_NAME FogShader-vertex-shader\nattribute vec2 aClipSpacePosition;\nvarying vec2 vPosition;\n\n\nuniform vec2 uRange;\n\nuniform vec3 uFogEdge;\n\nvoid main() {\n\tfloat bottom = uFogEdge.x - uRange.x;\n\tfloat y = mix(\n\t\tbottom,\n\t\taClipSpacePosition.y,\n\t\tstep(0., aClipSpacePosition.y)\n\t);\n\tvPosition = vec2(aClipSpacePosition.x, y);\n\t\n\tgl_Position = vec4(vPosition, 1.0, 1.0);\n}\n",f:l,name:"fog"}},function(t,e,n){"use strict";function i(t){return{v:"\n\t#define SHADER_NAME FXAA3Shader-vertex-shader\n\tattribute vec2 aClipSpacePosition;\n\n\tvoid main() {\n\tgl_Position = vec4(aClipSpacePosition, 1.0, 1.0);\n\t}\n\t",f:"\n\t#define SHADER_NAME FXAA3Shader-fragment-shader\n\tprecision highp float;\n\n\t"+(0,o.getFxaaFunPart)(t)+"\n\n\n\tuniform vec2 uResolution;\n\tuniform sampler2D uSampler;\n\tuniform bool uEnabled;\n\n\tconst float fxaaQualitySubpix = 0.5;\n\tconst float fxaaQualityEdgeThreshold = 0.125;\n\tconst float fxaaQualityEdgeThresholdMin = 0.0833;\n\n\tvoid main()\n\t{\n\t\tvec2 v_textureCoordinates = vec2(gl_FragCoord.xy / uResolution.xy);\n\t\tvec2 fxaaQualityRcpFrame = vec2(1.0) / uResolution.xy;\n\t\tvec4 color = texture2D(uSampler, v_textureCoordinates);\n\n\t\tcolor.rgb = mix(color.rgb,\n\t\tFxaaPixelShader(\n\t\t\tv_textureCoordinates,\n\t\t\tuSampler,\n\t\t\tfxaaQualityRcpFrame,\n\t\t\tfxaaQualitySubpix,\n\t\t\tfxaaQualityEdgeThreshold,\n\t\t\tfxaaQualityEdgeThresholdMin\n\t\t).rgb,\n\t\tfloat(uEnabled)\n\t\t);\n\t\tgl_FragColor = color;\n\t}",name:"fxaa3"}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(481)},function(t,e,n){"use strict";/**
 * @license
 * Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 *  * Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 *  * Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 *  * Neither the name of NVIDIA CORPORATION nor the names of its
 *    contributors may be used to endorse or promote products derived
 *    from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function i(t){return"\n    #define FXAA_QUALITY_PRESET "+t+"\n\n    #if (FXAA_QUALITY_PRESET == 10)\n        #define FXAA_QUALITY_PS 3\n        #define FXAA_QUALITY_P0 1.5\n        #define FXAA_QUALITY_P1 3.0\n        #define FXAA_QUALITY_P2 12.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 11)\n        #define FXAA_QUALITY_PS 4\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 3.0\n        #define FXAA_QUALITY_P3 12.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 12)\n        #define FXAA_QUALITY_PS 5\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 4.0\n        #define FXAA_QUALITY_P4 12.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 13)\n        #define FXAA_QUALITY_PS 6\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 4.0\n        #define FXAA_QUALITY_P5 12.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 14)\n        #define FXAA_QUALITY_PS 7\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 2.0\n        #define FXAA_QUALITY_P5 4.0\n        #define FXAA_QUALITY_P6 12.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 15)\n        #define FXAA_QUALITY_PS 8\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 2.0\n        #define FXAA_QUALITY_P5 2.0\n        #define FXAA_QUALITY_P6 4.0\n        #define FXAA_QUALITY_P7 12.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 20)\n        #define FXAA_QUALITY_PS 3\n        #define FXAA_QUALITY_P0 1.5\n        #define FXAA_QUALITY_P1 2.0\n        #define FXAA_QUALITY_P2 8.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 21)\n        #define FXAA_QUALITY_PS 4\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 8.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 22)\n        #define FXAA_QUALITY_PS 5\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 8.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 23)\n        #define FXAA_QUALITY_PS 6\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 2.0\n        #define FXAA_QUALITY_P5 8.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 24)\n        #define FXAA_QUALITY_PS 7\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 2.0\n        #define FXAA_QUALITY_P5 3.0\n        #define FXAA_QUALITY_P6 8.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 25)\n        #define FXAA_QUALITY_PS 8\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 2.0\n        #define FXAA_QUALITY_P5 2.0\n        #define FXAA_QUALITY_P6 4.0\n        #define FXAA_QUALITY_P7 8.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 26)\n        #define FXAA_QUALITY_PS 9\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 2.0\n        #define FXAA_QUALITY_P5 2.0\n        #define FXAA_QUALITY_P6 2.0\n        #define FXAA_QUALITY_P7 4.0\n        #define FXAA_QUALITY_P8 8.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 27)\n        #define FXAA_QUALITY_PS 10\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 2.0\n        #define FXAA_QUALITY_P5 2.0\n        #define FXAA_QUALITY_P6 2.0\n        #define FXAA_QUALITY_P7 2.0\n        #define FXAA_QUALITY_P8 4.0\n        #define FXAA_QUALITY_P9 8.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 28)\n        #define FXAA_QUALITY_PS 11\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 2.0\n        #define FXAA_QUALITY_P5 2.0\n        #define FXAA_QUALITY_P6 2.0\n        #define FXAA_QUALITY_P7 2.0\n        #define FXAA_QUALITY_P8 2.0\n        #define FXAA_QUALITY_P9 4.0\n        #define FXAA_QUALITY_P10 8.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 29)\n        #define FXAA_QUALITY_PS 12\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 2.0\n        #define FXAA_QUALITY_P5 2.0\n        #define FXAA_QUALITY_P6 2.0\n        #define FXAA_QUALITY_P7 2.0\n        #define FXAA_QUALITY_P8 2.0\n        #define FXAA_QUALITY_P9 2.0\n        #define FXAA_QUALITY_P10 4.0\n        #define FXAA_QUALITY_P11 8.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 39)\n        #define FXAA_QUALITY_PS 12\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.0\n        #define FXAA_QUALITY_P2 1.0\n        #define FXAA_QUALITY_P3 1.0\n        #define FXAA_QUALITY_P4 1.0\n        #define FXAA_QUALITY_P5 1.5\n        #define FXAA_QUALITY_P6 2.0\n        #define FXAA_QUALITY_P7 2.0\n        #define FXAA_QUALITY_P8 2.0\n        #define FXAA_QUALITY_P9 2.0\n        #define FXAA_QUALITY_P10 4.0\n        #define FXAA_QUALITY_P11 8.0\n    #endif\n\n    #define FxaaBool bool\n    #define FxaaFloat float\n    #define FxaaFloat2 vec2\n    #define FxaaFloat3 vec3\n    #define FxaaFloat4 vec4\n    #define FxaaHalf float\n    #define FxaaHalf2 vec2\n    #define FxaaHalf3 vec3\n    #define FxaaHalf4 vec4\n    #define FxaaInt2 vec2\n    #define FxaaTex sampler2D\n\n    #define FxaaSat(x) clamp(x, 0.0, 1.0)\n    #define FxaaTexTop(t, p) texture2D(t, p)\n    #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r))\n\n    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }\n\n    FxaaFloat4 FxaaPixelShader(\n\n\n\n        FxaaFloat2 pos,\n\n\n\n\n\n        FxaaTex tex,\n\n\n\n\n\n        FxaaFloat2 fxaaQualityRcpFrame,\n\n\n\n\n\n\n\n\n\n\n\n        FxaaFloat fxaaQualitySubpix,\n\n\n\n\n\n\n\n\n\n\n        FxaaFloat fxaaQualityEdgeThreshold,\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n        FxaaFloat fxaaQualityEdgeThresholdMin\n    ) {\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat2 posM;\n        posM.x = pos.x;\n        posM.y = pos.y;\n        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\n        #define lumaM rgbyM.y\n        FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));\n        FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));\n        FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));\n        FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat maxSM = max(lumaS, lumaM);\n        FxaaFloat minSM = min(lumaS, lumaM);\n        FxaaFloat maxESM = max(lumaE, maxSM);\n        FxaaFloat minESM = min(lumaE, minSM);\n        FxaaFloat maxWN = max(lumaN, lumaW);\n        FxaaFloat minWN = min(lumaN, lumaW);\n        FxaaFloat rangeMax = max(maxWN, maxESM);\n        FxaaFloat rangeMin = min(minWN, minESM);\n        FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;\n        FxaaFloat range = rangeMax - rangeMin;\n        FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);\n        FxaaBool earlyExit = range < rangeMaxClamped;\n    /*--------------------------------------------------------------------------*/\n        if(earlyExit)\n            return rgbyM;\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));\n        FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));\n        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));\n        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat lumaNS = lumaN + lumaS;\n        FxaaFloat lumaWE = lumaW + lumaE;\n        FxaaFloat subpixRcpRange = 1.0/range;\n        FxaaFloat subpixNSWE = lumaNS + lumaWE;\n        FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;\n        FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat lumaNESE = lumaNE + lumaSE;\n        FxaaFloat lumaNWNE = lumaNW + lumaNE;\n        FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;\n        FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat lumaNWSW = lumaNW + lumaSW;\n        FxaaFloat lumaSWSE = lumaSW + lumaSE;\n        FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);\n        FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);\n        FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;\n        FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;\n        FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;\n        FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;\n        FxaaFloat lengthSign = fxaaQualityRcpFrame.x;\n        FxaaBool horzSpan = edgeHorz >= edgeVert;\n        FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;\n    /*--------------------------------------------------------------------------*/\n        if(!horzSpan) lumaN = lumaW;\n        if(!horzSpan) lumaS = lumaE;\n        if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;\n        FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat gradientN = lumaN - lumaM;\n        FxaaFloat gradientS = lumaS - lumaM;\n        FxaaFloat lumaNN = lumaN + lumaM;\n        FxaaFloat lumaSS = lumaS + lumaM;\n        FxaaBool pairN = abs(gradientN) >= abs(gradientS);\n        FxaaFloat gradient = max(abs(gradientN), abs(gradientS));\n        if(pairN) lengthSign = -lengthSign;\n        FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat2 posB;\n        posB.x = posM.x;\n        posB.y = posM.y;\n        FxaaFloat2 offNP;\n        offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\n        offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\n        if(!horzSpan) posB.x += lengthSign * 0.5;\n        if( horzSpan) posB.y += lengthSign * 0.5;\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat2 posN;\n        posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;\n        posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;\n        FxaaFloat2 posP;\n        posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;\n        posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;\n        FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;\n        FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));\n        FxaaFloat subpixE = subpixC * subpixC;\n        FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));\n    /*--------------------------------------------------------------------------*/\n        if(!pairN) lumaNN = lumaSS;\n        FxaaFloat gradientScaled = gradient * 1.0/4.0;\n        FxaaFloat lumaMM = lumaM - lumaNN * 0.5;\n        FxaaFloat subpixF = subpixD * subpixE;\n        FxaaBool lumaMLTZero = lumaMM < 0.0;\n    /*--------------------------------------------------------------------------*/\n        lumaEndN -= lumaNN * 0.5;\n        lumaEndP -= lumaNN * 0.5;\n        FxaaBool doneN = abs(lumaEndN) >= gradientScaled;\n        FxaaBool doneP = abs(lumaEndP) >= gradientScaled;\n        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;\n        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;\n        FxaaBool doneNP = (!doneN) || (!doneP);\n        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;\n        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;\n    /*--------------------------------------------------------------------------*/\n        if(doneNP) {\n            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n            doneN = abs(lumaEndN) >= gradientScaled;\n            doneP = abs(lumaEndP) >= gradientScaled;\n            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;\n            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;\n            doneNP = (!doneN) || (!doneP);\n            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;\n            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;\n    /*--------------------------------------------------------------------------*/\n            #if (FXAA_QUALITY_PS > 3)\n            if(doneNP) {\n                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                doneN = abs(lumaEndN) >= gradientScaled;\n                doneP = abs(lumaEndP) >= gradientScaled;\n                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;\n                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;\n                doneNP = (!doneN) || (!doneP);\n                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;\n                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;\n    /*--------------------------------------------------------------------------*/\n                #if (FXAA_QUALITY_PS > 4)\n                if(doneNP) {\n                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                    doneN = abs(lumaEndN) >= gradientScaled;\n                    doneP = abs(lumaEndP) >= gradientScaled;\n                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;\n                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;\n                    doneNP = (!doneN) || (!doneP);\n                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;\n                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;\n    /*--------------------------------------------------------------------------*/\n                    #if (FXAA_QUALITY_PS > 5)\n                    if(doneNP) {\n                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                        doneN = abs(lumaEndN) >= gradientScaled;\n                        doneP = abs(lumaEndP) >= gradientScaled;\n                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;\n                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;\n                        doneNP = (!doneN) || (!doneP);\n                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;\n                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;\n    /*--------------------------------------------------------------------------*/\n                        #if (FXAA_QUALITY_PS > 6)\n                        if(doneNP) {\n                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                            doneN = abs(lumaEndN) >= gradientScaled;\n                            doneP = abs(lumaEndP) >= gradientScaled;\n                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;\n                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;\n                            doneNP = (!doneN) || (!doneP);\n                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;\n                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;\n    /*--------------------------------------------------------------------------*/\n                            #if (FXAA_QUALITY_PS > 7)\n                            if(doneNP) {\n                                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                                doneN = abs(lumaEndN) >= gradientScaled;\n                                doneP = abs(lumaEndP) >= gradientScaled;\n                                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;\n                                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;\n                                doneNP = (!doneN) || (!doneP);\n                                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;\n                                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;\n    /*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITY_PS > 8)\n        if(doneNP) {\n            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n            doneN = abs(lumaEndN) >= gradientScaled;\n            doneP = abs(lumaEndP) >= gradientScaled;\n            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;\n            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;\n            doneNP = (!doneN) || (!doneP);\n            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;\n            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;\n    /*--------------------------------------------------------------------------*/\n            #if (FXAA_QUALITY_PS > 9)\n            if(doneNP) {\n                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                doneN = abs(lumaEndN) >= gradientScaled;\n                doneP = abs(lumaEndP) >= gradientScaled;\n                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;\n                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;\n                doneNP = (!doneN) || (!doneP);\n                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;\n                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;\n    /*--------------------------------------------------------------------------*/\n                #if (FXAA_QUALITY_PS > 10)\n                if(doneNP) {\n                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                    doneN = abs(lumaEndN) >= gradientScaled;\n                    doneP = abs(lumaEndP) >= gradientScaled;\n                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;\n                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;\n                    doneNP = (!doneN) || (!doneP);\n                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;\n                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;\n    /*--------------------------------------------------------------------------*/\n                    #if (FXAA_QUALITY_PS > 11)\n                    if(doneNP) {\n                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                        doneN = abs(lumaEndN) >= gradientScaled;\n                        doneP = abs(lumaEndP) >= gradientScaled;\n                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;\n                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;\n                        doneNP = (!doneN) || (!doneP);\n                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;\n                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;\n    /*--------------------------------------------------------------------------*/\n                        #if (FXAA_QUALITY_PS > 12)\n                        if(doneNP) {\n                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                            doneN = abs(lumaEndN) >= gradientScaled;\n                            doneP = abs(lumaEndP) >= gradientScaled;\n                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;\n                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;\n                            doneNP = (!doneN) || (!doneP);\n                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;\n                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;\n    /*--------------------------------------------------------------------------*/\n                        }\n                        #endif\n    /*--------------------------------------------------------------------------*/\n                    }\n                    #endif\n    /*--------------------------------------------------------------------------*/\n                }\n                #endif\n    /*--------------------------------------------------------------------------*/\n            }\n            #endif\n    /*--------------------------------------------------------------------------*/\n        }\n        #endif\n    /*--------------------------------------------------------------------------*/\n                            }\n                            #endif\n    /*--------------------------------------------------------------------------*/\n                        }\n                        #endif\n    /*--------------------------------------------------------------------------*/\n                    }\n                    #endif\n    /*--------------------------------------------------------------------------*/\n                }\n                #endif\n    /*--------------------------------------------------------------------------*/\n            }\n            #endif\n    /*--------------------------------------------------------------------------*/\n        }\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat dstN = posM.x - posN.x;\n        FxaaFloat dstP = posP.x - posM.x;\n        if(!horzSpan) dstN = posM.y - posN.y;\n        if(!horzSpan) dstP = posP.y - posM.y;\n    /*--------------------------------------------------------------------------*/\n        FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;\n        FxaaFloat spanLength = (dstP + dstN);\n        FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;\n        FxaaFloat spanLengthRcp = 1.0/spanLength;\n    /*--------------------------------------------------------------------------*/\n        FxaaBool directionN = dstN < dstP;\n        FxaaFloat dst = min(dstN, dstP);\n        FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;\n        FxaaFloat subpixG = subpixF * subpixF;\n        FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;\n        FxaaFloat subpixH = subpixG * fxaaQualitySubpix;\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;\n        FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);\n        if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;\n        if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;\n        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);\n\t}"}Object.defineProperty(e,"__esModule",{value:!0}),e.getFxaaFunPart=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={v:"\nattribute vec2 a_position;\n\nuniform mat4 u_matrix;\nuniform vec2 u_size;\nuniform vec4 u_texInfo;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n\t\n\tv_texCoord = vec2(u_texInfo[0] + a_position.x * u_texInfo[2], u_texInfo[1] + a_position.y * u_texInfo[3]);\n\n\t\n\tvec2 position = vec2(a_position.x * u_size.x, (a_position.y - 1.0) * u_size.y);\n\n\tgl_Position = u_matrix * vec4(position, 0.0, 1.0);\n}\n",f:"\nprecision mediump float;\n\nuniform float u_opacity;\nuniform sampler2D u_sampler;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n\tvec4 color = texture2D(u_sampler, v_texCoord);\n\t\n\tgl_FragColor = color * u_opacity;\n}\n",name:"instance_tex"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(126),o="\n#define SHADER_NAME indoor-mask-vertex-shader\n\nattribute vec3 aPosition;\n\n"+i.UNIFORM_PART+"\nuniform vec4 uRelativeCenter;\n\n"+i.PROJECTION_PART+"\n\nvoid main(void) {\n\tvec3 maskCenterPoint = vec3(project_view_local_position_precision(uRelativeCenter.xy, uRelativeCenter.zw), 0.0);\n\tgl_Position = uMatrix * vec4(maskCenterPoint + project_scale(aPosition), 1.0);\n}\n";e.default={v:o,f:"\n#define SHADER_NAME mask-fragment-shader\nprecision mediump float;\n\nuniform vec4 uColor;\n\nvoid main(void) {\n\tgl_FragColor = uColor;\n}\n",name:"indoor-mask"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(126),o=n(221),r="\n#define SHADER_NAME indoor-vertex-shader\n\nattribute vec3 aPosition;\nattribute vec3 aColor;\nattribute vec3 aNormal;\n\n"+i.UNIFORM_PART+"\n"+o.LIGHT_UNIFORM+"\nuniform vec4 uRelativeCenter;\n\nvarying vec3 vColor;\n\n"+o.LIGHT_VARYING+"\n\n"+i.PROJECTION_PART+"\n"+o.LIGHT_VERTEX+"\n\nvoid main(void) {\n\tvec3 relativeCenterPoint = vec3(project_view_local_position_precision(uRelativeCenter.xy, uRelativeCenter.zw), 0.0);\n\tvec3 worldspaceCoord = relativeCenterPoint + project_scale(aPosition);\n\tgl_Position = uMatrix * vec4(worldspaceCoord, 1.0);\n\n\tlighting_apply_on_vertex(worldspaceCoord, aNormal, mat4(1.0));\n\n\tvColor = aColor / 255.;\n}\n",a="\n#define SHADER_NAME indoor-fragment-shader\nprecision mediump float;\n\nvarying vec3 vColor;\n\n"+o.LIGHT_VARYING+"\n"+o.LIGHT_FRAG+"\n\nvoid main(void) {\n\tgl_FragColor = lighting_apply_on_color(vec4(vColor, 1.));\n}\n";e.default={v:r,f:a,name:"indoor"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(126),o=n(221),r="\n#define SHADER_NAME indoor-vertex-shader\n\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec3 aColor;\n\nattribute vec2 aInstanceCoord;\nattribute vec4 aInstanceInfo;\n\n"+i.UNIFORM_PART+"\n"+o.LIGHT_UNIFORM+"\nuniform vec4 uRelativeCenter;\nuniform bool uEnableLighting;\nuniform vec3 uBoxMin;\nuniform vec3 uBoxMax;\n\nvarying vec3 vColor;\n"+o.LIGHT_VARYING+"\n\n"+i.PROJECTION_PART+"\n"+o.LIGHT_VERTEX+"\n\nmat3 rotateZ(float deg){\n    float rad = degree_to_radian(deg);\n    return mat3(\n        vec3(cos(rad), -sin(rad), 0.),\n        vec3(sin(rad), cos(rad), 0.),\n        vec3(0., 0., 1.)\n    );\n}\n\nmat3 rotateX(float deg){\n    float rad = degree_to_radian(deg);\n    return mat3(\n        vec3(1.0, 0.0, 0.0),\n        vec3(0.0, cos(rad), -sin(rad)),\n        vec3(0.0, sin(rad), cos(rad))\n    );\n}\n\nvoid main(void) {\n\n\tmat3 modelMatrix = rotateZ(-aInstanceInfo.w);\n\n\n\tvec3 modelNormal = rotateX(-90.0) * aNormal;\n\tmodelNormal = modelMatrix * modelNormal;\n\n\n    vec3 relativeCenterPoint = vec3(project_view_local_position_precision(uRelativeCenter.xy, uRelativeCenter.zw), 0.0);\n    vec3 modelCenterPoint = relativeCenterPoint + project_scale(vec3(aInstanceCoord, 0.0));\n\n\n\n    float scale = pow(2.0, uZoom - 20.0);\n    vec3 modelSize = vec3(aInstanceInfo.xy * scale, aInstanceInfo.z * uPixelsPerMeter.z);\n    vec3 localPosition = modelMatrix * (aPosition * modelSize / (uBoxMax - uBoxMin));\n    \n\n    vec3 worldspaceCoord = modelCenterPoint + localPosition;\n\n    gl_Position = uMatrix * vec4(worldspaceCoord, 1.0);\n\n    lighting_apply_on_vertex(worldspaceCoord, modelNormal, mat4(1.0));\n    \n\n    vColor = aColor / 255.;\n}\n",a="\n#define SHADER_NAME indoor-fragment-shader\nprecision mediump float;\n\nvarying vec3 vColor;\n"+o.LIGHT_VARYING+"\n"+o.LIGHT_FRAG+"\n\nvoid main(void) {\n\tgl_FragColor = lighting_apply_on_color(vec4(vColor, 1.));\n}\n";e.default={v:r,f:a,name:"instance_escalator"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(126),o=n(266);e.default={v:"\n\t\t#define SHADER_NAME instance-polyline-vertex-shader\n\t\t\n\t\t\n\t\tattribute vec2 positions;\n\t\t\n\t\tattribute vec3 instanceStartPositions;\n\t\tattribute vec3 instanceEndPositions;\n\t\tattribute vec3 instanceLeftDeltas;\n\t\tattribute vec3 instanceRightDeltas;\n\t\tattribute vec4 instanceStartEndPositions64xyLow;\n\t\tattribute float instanceWidths;\n\t\tattribute vec4 instanceColors;\n\t\tattribute vec3 instanceLineInfo;\n\t\tattribute vec4 instanceArrowInfo;\n\t\tattribute float instanceArrowStartPositions;\n\t\t\n\t\t\n\t\tattribute vec3 instancePickingColors;\n\t\t\n\t\tuniform float u_isBorder;\n\t\tuniform float u_widthScale;\n\t\tuniform float u_widthMinPixels;\n\t\tuniform float u_widthMaxPixels;\n\t\tuniform float u_miterLimit;\n\t\t\n\t\tuniform float u_lineJoin;\n\t\t\n\t\tuniform float u_opacity;\n\t\t\n\t\tconst float EPSILON = 0.001;\n\t\tconst float PIXEL_EPSILON = 0.1;\n\t\t\n\t\t"+i.UNIFORM_PART+"\n\t\t\n\t\t"+o.PICK_UNIFORM+"\n        \n\t\tvarying vec4 vColor;\n\t\tvarying vec2 vCornerOffset;\n\t\t\n\t\tvarying vec3 vLineInfo;\n\t\t\n\t\tvarying float vWidth;\n\t\tvarying float vHalfLength;\n\t\tvarying vec2 vDashArray;\n\t\tvarying vec4 vArrowArray;\n\n\t\tvarying vec4 vLineSegmentInfo;\n\t\tvarying vec4 vTrimDirection;\n\t\t\n\t\t"+i.PROJECTION_PART+"\n\t\t\n\t\t"+o.PICK_FUNCTION+"\n\n\t\t\n\t\tvec2 calculateTangent(vec3 prevPoint, vec3 currPoint, vec3 nextPoint) {\n\t\t\tvec2 deltaA = currPoint.xy - prevPoint.xy;\n\t\t\tvec2 deltaB = nextPoint.xy - currPoint.xy;\n\t\n\t\t\tfloat lenA = length(deltaA);\n\t\t\tfloat lenB = length(deltaB);\n\t\n\t\t\tlenA = mix(0.0, lenA, step(PIXEL_EPSILON, lenA));\n\t\t\tlenB = mix(0.0, lenB, step(PIXEL_EPSILON, lenB));\n\t\n\t\t\t\n\t\t\tvec2 dirA = mix(vec2(0.0), normalize(deltaA), step(PIXEL_EPSILON, lenA));\n\t\t\tvec2 dirB = mix(vec2(0.0), normalize(deltaB), step(PIXEL_EPSILON, lenB));\n\n\t\t\t\n\t\t\tvec2 tangent = vec2(dirA + dirB);\n\t\t\ttangent = mix(vec2(0.0, 0.0), normalize(tangent), step(EPSILON, length(tangent)));\n\n\t\t\treturn tangent;\n\t\t}\n        \n\t\tvec3 calculateLinePosition(vec3 prevPoint, vec3 currPoint, vec3 nextPoint) {\n\t\t\tfloat lineCap = instanceLineInfo.x;\n\t\t\tvDashArray = instanceLineInfo.yz;\n\t\t\tvLineSegmentInfo.x = lineCap;\n\n\t\t\tfloat isEnd = positions.x;\n\t\t\tfloat width = clamp(instanceWidths * uPixelsPerMeter[0] * u_widthScale, u_widthMinPixels, u_widthMaxPixels) / 2.0;\n\t\t\tvWidth = width;\n\t\t\tvLineSegmentInfo.w = instanceArrowStartPositions / width;\n\t\n\t\t\tvec2 deltaA = currPoint.xy - prevPoint.xy;\n\t\t\tvec2 deltaB = nextPoint.xy - currPoint.xy;\n\t\n\t\t\tfloat lenA = length(deltaA);\n\t\t\tfloat lenB = length(deltaB);\n\t\n\t\t\tlenA = mix(0.0, lenA, step(PIXEL_EPSILON, lenA));\n\t\t\tlenB = mix(0.0, lenB, step(PIXEL_EPSILON, lenB));\n\t\n\t\t\t\n\t\t\tvec2 dirA = mix(vec2(0.0), normalize(deltaA), step(PIXEL_EPSILON, lenA));\n\t\t\tvec2 dirB = mix(vec2(0.0), normalize(deltaB), step(PIXEL_EPSILON, lenB));\n\t\n\t\t\t\n\t\t\tvec2 perpA = vec2(-dirA.y, dirA.x);\n\t\t\tvec2 perpB = vec2(-dirB.y, dirB.x);\n\t\n\t\t\t\n\t\t\tvec2 tangent = vec2(dirA + dirB);\n\t\t\ttangent = mix(perpA, normalize(tangent), step(EPSILON, length(tangent)));\n\t\n\t\t\t\n\t\t\tvec2 miterVec = vec2(-tangent.y, tangent.x);\n\n\t\t\t\n\t\t\tvec2 perp = mix(perpB, perpA, isEnd);\n\t\t\tfloat L = mix(lenB, lenA, isEnd);\n\n\t\t\t\n\t\t\t\n\t\t\t\n\t\n\t\t\t\n\t\t\tvec2 vertical_offset = perp * width * positions.y;\n\t\t\tvLineInfo.x = length(vertical_offset);\n\t\n\t\n\t\t\t\n\t\t\tbool isPathStart = step(0.0, -lenA) > 0.5;\n\t\t\tbool isPathEnd = step(0.0, -lenB) > 0.5;\n\t\t\tvec2 dir = mix(dirB, dirA, isEnd);\n\t\t\tvLineSegmentInfo.y = float(isPathStart);\n\t\t\tvLineSegmentInfo.z = float(isPathEnd);\n\t\t\t\n\t\t\t\n\t\t\tvec2 horizontal_offset = vec2(0.0);\n\n\t\t\t\n\t\t\t\n\t\t\thorizontal_offset = mix(-dir, dir, isEnd) * width;\n\t\t\tvHalfLength = L / width / 2.0;\n\t\t\tfloat capLength = mix(-1.0 - vHalfLength, 1.0 + vHalfLength, isEnd);\n\t\t\tvCornerOffset = vec2(capLength, positions.y);\n\t\t\tvLineInfo.z = capLength;\n\n\t\n\t\t\t\n\n\t\t\t\n\t\t\tif ((isPathStart && !bool(isEnd)) || (isPathEnd && bool(isEnd))) {\n\t\t\t\tcapLength = mix(mix(-vHalfLength, vHalfLength, isEnd), capLength, step(0.1, lineCap));\n\t\t\t\tvCornerOffset = mix(vec2(capLength, positions.y), vCornerOffset, step(0.1, lineCap));\n\n\t\t\t\t\n\t\t\t\thorizontal_offset = mix(vec2(0.0), horizontal_offset, step(0.1, lineCap));\n\t\t\t\tvLineInfo.z = mix(mix(-vHalfLength,  vHalfLength, isEnd), vLineInfo.z, step(0.1, lineCap));\n\t\t\t}\n\t\t\tvLineInfo.y = capLength;\n\t\t\t\n\t\t\treturn currPoint + vec3(vertical_offset, 0.0) + vec3(horizontal_offset, 0.0);\n\t\t}\n\t\t\n\t\t\n\t\tvec2 getSegmentTangent(float isEnd, vec3 segmentDirection) {\n\t\t\t\n\t\t\tvec2 segmentX = mix(-segmentDirection.xy, segmentDirection.xy, isEnd);\n\t\t\tvec2 segmentY = vec2(-segmentX.y, segmentX.x);\n\t\n\t\t\tvec3 prevPosition = instanceStartPositions;\n\t\t\tvec2 prevPosition64xyLow = instanceStartEndPositions64xyLow.xy;\n\t\t\tprevPosition = vec3(project_view_local_position_precision(\n\t\t\t\tprevPosition.xy, prevPosition64xyLow + mix(-instanceLeftDeltas, vec3(0.0), isEnd).xy\n\t\t\t), 0.0);\n\t\n\t\t\tvec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n\t\t\tvec2 currPositionxy64Low = mix(instanceStartEndPositions64xyLow.xy, instanceStartEndPositions64xyLow.zw, isEnd);\n\t\t\tcurrPosition = vec3(project_view_local_position_precision(\n\t\t\t\tcurrPosition.xy, currPositionxy64Low\n\t\t\t), 0.0);\n\t\n\t\t\tvec3 nextPosition = instanceEndPositions;\n\t\t\tvec2 nextPosition64xyLow = instanceStartEndPositions64xyLow.zw;\n\t\t\tnextPosition = vec3(project_view_local_position_precision(\n\t\t\t\tnextPosition.xy, nextPosition64xyLow + mix(vec3(0.0), instanceRightDeltas, isEnd).xy\n\t\t\t), 0.0);\n\n\t\t\tvec2 tangent = calculateTangent(prevPosition, currPosition, nextPosition);\n\n\t\t\t\n\t\t\treturn vec2(dot(tangent, segmentX), dot(tangent, segmentY));\n\t\t}\n\n\t\tvoid main(void) {\n\t\t\tfloat isEnd = positions.x;\n\t\n\t\t\t\n\t\t\tvec3 startLocalPosition = vec3(project_view_local_position_precision(\n\t\t\t\tinstanceStartPositions.xy, instanceStartEndPositions64xyLow.xy\n\t\t\t), 0.0);\n\n\t\t\tvec3 endLocalPosition = vec3(project_view_local_position_precision(\n\t\t\t\tinstanceEndPositions.xy, instanceStartEndPositions64xyLow.zw\n\t\t\t), 0.0);\n\t\t\tvec3 segmentDirection = normalize(mix(startLocalPosition - endLocalPosition, endLocalPosition - startLocalPosition, isEnd));\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tsegmentDirection *= 0.01;\n\t\n\t\n\t\t\tvec3 prevPosition = instanceStartPositions;\n\t\t\tvec2 prevPosition64xyLow = instanceStartEndPositions64xyLow.xy;\n\t\t\tprevPosition = vec3(project_view_local_position_precision(\n\t\t\t\tprevPosition.xy, prevPosition64xyLow + mix(-instanceLeftDeltas, vec3(0.0), isEnd).xy\n\t\t\t), 0.0) + segmentDirection;\n\t\n\t\t\tvec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n\t\t\tvec2 currPositionxy64Low = mix(instanceStartEndPositions64xyLow.xy, instanceStartEndPositions64xyLow.zw, isEnd);\n\t\t\tcurrPosition = vec3(project_view_local_position_precision(\n\t\t\t\tcurrPosition.xy, currPositionxy64Low\n\t\t\t), 0.0);\n\t\n\t\t\tvec3 nextPosition = instanceEndPositions;\n\t\t\tvec2 nextPosition64xyLow = instanceStartEndPositions64xyLow.zw;\n\t\t\tnextPosition = vec3(project_view_local_position_precision(\n\t\t\t\tnextPosition.xy, nextPosition64xyLow + mix(vec3(0.0), instanceRightDeltas, isEnd).xy\n\t\t\t), 0.0) + segmentDirection;\n\t\n\t\t\tvec3 pos = calculateLinePosition(prevPosition, currPosition, nextPosition);\n\n\t\t\t\n\t\t\tvTrimDirection.xy = -getSegmentTangent(0.0, normalize(startLocalPosition - endLocalPosition));\n\t\t\tvTrimDirection.zw = getSegmentTangent(1.0, normalize(endLocalPosition - startLocalPosition));\n\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\n\t\t\t\n\t\t\t\n\t\n\t\t\tgl_Position = uMatrix * vec4(pos, 1.0);\n\t\n\t\t\tvec4 vertexColor = instanceColors.rgba / 255.0 * u_opacity;\n\t\t\tvColor = picking_getFinalColor(vertexColor, instancePickingColors);\n\t\t\tvArrowArray = instanceArrowInfo; \n\t\t}\n    \n    ",f:"\n\t\t#define SHADER_NAME instance-polyline-fragment-shader\n\t\t\n\t\tprecision highp float;\n\t\tuniform float u_isBorder;\n\t\tuniform float u_miterLimit;\n        \n\t\tuniform float u_lineJoin;\n\t\tuniform sampler2D u_arrowSampler;\n        \n\t\tvarying vec4 vColor;\n\t\tvarying vec2 vCornerOffset;\n\t\tvarying vec3 vLineInfo;\n\t\t\n\t\t\n\t\t\n\t\t\n\t\tvarying float vWidth;\n\t\tvarying float vHalfLength;\n\t\tvarying vec2 vDashArray;\n\t\tvarying vec4 vArrowArray;\n\n\t\tvarying vec4 vLineSegmentInfo;\n\t\t\n\t\t\n\t\t\n\t\t\n\t\tvarying vec4 vTrimDirection;\n        \n\t\tvoid main(void) {\n\t\t\tvec4 fColor = vColor;\n\t\t\tvec4 opacity = vec4(0.0, 0.0, 0.0, 0.0);\n\t\t\tvec4 red = vec4(1.0, 0.0, 0.0, 1);\n\n\t\t\tfColor = mix(\n\t\t\t\tfColor,\n\t\t\t\topacity,\n\t\t\t\tfloat(u_lineJoin == 1.0 &&\n\t\t\t\t\tlength(vec2(abs(vCornerOffset.x) - vHalfLength, vCornerOffset.y)) > 1.0 &&\n\t\t\t\t\t(abs(vLineInfo.y) - vHalfLength) >= 0.0 && \n\t\t\t\t\t((vLineSegmentInfo.y < 0.5 && vLineSegmentInfo.z < 0.5) || vLineSegmentInfo.x > 1.1)\n\t\t\t\t)\n\t\t\t);\n\n\t\t\t\n\t\t\t\n\t\t\tfColor = mix(fColor, opacity, float(\n\t\t\t\tdot(vCornerOffset - vec2(-vHalfLength, 0.0), vTrimDirection.xy) > 0.0 &&\n\t\t\t\tvLineSegmentInfo.y < 0.5\n\t\t\t));\n\t\t\t\n\t\t\tfColor = mix(fColor, opacity, float(\n\t\t\t\tdot(vCornerOffset - vec2(vHalfLength, 0.0), vTrimDirection.zw) > 0.0 &&\n\t\t\t\tvLineSegmentInfo.z < 0.5\n\t\t\t));\n\n\t\t\t\n\t\t\tfloat segmentLength = vLineInfo.z + vHalfLength;\n\t\t\t\n\t\t\t\n\t\t\tvec2 normalDashArray = vDashArray / vWidth;\n\t\t\tfloat useDash = step(0.1, vDashArray.y) * step(-vHalfLength, -abs(vLineInfo.z));\n\t\t\tfloat isInGap = step(normalDashArray.x, mod(segmentLength, normalDashArray.x + normalDashArray.y));\n\n\t\t\t\n\t\t\tvec3 normalArrowArray = vArrowArray.xyz / vWidth;\n\t\t\t\n\t\t\tfloat useArrow = (1.0 - u_isBorder) * step(0.1, vArrowArray.x) * step(0.1, vArrowArray.y) * step(-vHalfLength, -abs(vLineInfo.z)) * step(-0.1, vLineSegmentInfo.w);\n\t\t\t\n\t\t\t\n\t\t\tfloat offsetX = mix(\n\t\t\t\tmix(\n\t\t\t\t\t0.5,\n\t\t\t\t\t1.0 / normalArrowArray.x,\n\t\t\t\t\tstep(0.1, vArrowArray.w)\n\t\t\t\t),\n\t\t\t\t1.0 - 1.0 / normalArrowArray.x,\n\t\t\t\tstep(1.1, vArrowArray.w)\n\t\t\t);\n\t\t\tfloat yMod = mod(segmentLength - vLineSegmentInfo.w, normalArrowArray.y + normalArrowArray.z);\n\t\t\tfloat texCoordY = yMod / normalArrowArray.y;\n\t\t\tfloat texCoordX = offsetX + vCornerOffset.y / normalArrowArray.x;\n\t\t\t\n\t\t\t\n\t\t\tfloat isComplete = step(0.0, vHalfLength * 2.0 - (segmentLength + normalArrowArray.y - yMod));\n\t\t\tfloat isFilled = (1.0 - step(1.0, texCoordY)) * step(0.0, texCoordX) * (1.0 - step(1.0, texCoordX));\n\t\t\tvec4 arrowColor = texture2D(u_arrowSampler, vec2(texCoordX, texCoordY));\n\n\t\t\tfColor = mix(\n\t\t\t\tfColor,\n\t\t\t\tmix(fColor, opacity, isInGap),\n\t\t\t\tuseDash\n\t\t\t);\n\t\t\tfColor = mix(\n\t\t\t\tfColor,\n\t\t\t\tvec4(mix(\n\t\t\t\t\tfColor.rgb,\n\t\t\t\t\tarrowColor.rgb,\n\t\t\t\t\tarrowColor.a\n\t\t\t\t), fColor.a),\n\t\t\t\tuseArrow * isFilled * isComplete\n\t\t\t);\n        \n\t\t\tgl_FragColor = fColor;\n\t\t\t\n\t\t\t\n\t\t}\n\t",name:"instance_polyline"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(126);e.default={v:"\n    #define SHADER_NAME mask-vertex-shader\n\n    attribute vec3 positions;\n    attribute vec2 positions64xyLow;\n\n    "+i.UNIFORM_PART+"\n\n    "+i.PROJECTION_PART+"\n    \n    void main(void) {\n      vec3 local_position = project_view_local_position_precision(positions.xyz, positions64xyLow.xy);\n\n      gl_Position = uMatrix * vec4(local_position, 1.0);\n    }\n  ",f:"\n    #define SHADER_NAME mask-fragment-shader\n\n        precision highp float;\n        \n    uniform vec4 uColor;\n    \n    void main(void) {\n      gl_FragColor = uColor;\n    }\n  ",name:"mask"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(126),o=n(266),r=n(374);e.default={v:"\n        #define SHADER_NAME instance-glyph-vertex-shader\n\n        "+r.INSTANCE_PARTS+"\n        attribute vec4 instanceColors;\n\t\t\t\tattribute float instanceShow;\n        \n        "+i.UNIFORM_PART+"\n        \n        "+o.PICK_UNIFORM+"\n\n        "+r.UNIFORM_PARTS+"\n        uniform float u_gamma;\n        \n        varying float vColorMode;\n        varying vec4 vColor;\n        varying vec2 vTextureCoords;\n        varying float vGamma;\n        varying float vOpacity;\n\n        \n        "+i.PROJECTION_PART+"\n        \n        "+o.PICK_FUNCTION+"\n        \n        void main(void) {\n            "+(0,r.generateMainPart)("\n\n                vec2 instanceScale = mix(sizePixels / imageSize.y, vec2(0.0), float(imageSize.y == 0.0));\n                \n\n                vec2 pixelOffset = positions / 2.0 * imageSize + instanceInfos.xy;\n            \n                pixelOffset = rotate_by_angle_onScreen(pixelOffset, instanceInfos.z) * instanceScale;\n                pixelOffset += instancePixelOffset.xy;\n                pixelOffset.y *= -1.0;\n            ","\n                vColor = vec4(instanceColors.rgb, instanceColors.a * u_opacity) / 255.;\n            ")+"\n            \n\t\t\t\t\t\tvGamma = u_gamma / (u_sizeScale * instanceSizes.x / imageSize.y);\n\t\t\t\t\t\tvOpacity = instanceShow * vOpacity;\n            \n\n        }\n    ",f:"\n        #define SHADER_NAME instance-marker-fragment-shader\n\n        precision highp float;\n        \n        uniform sampler2D u_sampler;\n        uniform float u_buffer;\n\n        "+o.PICK_UNIFORM+"\n        \n        varying vec4 vColor;\n        varying vec2 vTextureCoords;\n        varying float vGamma;\n        varying float vOpacity;\n        \n        const float MIN_ALPHA = 0.05;\n        const bool useSdf = true;\n        \n        void main(void) {\n            vec4 texColor = texture2D(u_sampler, vTextureCoords);\n            \n            float alpha = texColor.a;\n            \n\n                float distance = texture2D(u_sampler, vTextureCoords).a;\n                alpha = smoothstep(u_buffer - vGamma, u_buffer + vGamma, distance);\n\n            \n            float a = alpha * vColor.a;\n            \n            a = mix(a, 0.0, float(a < MIN_ALPHA && picking_usePickingColor == 0.0));\n            \n            gl_FragColor = mix(vec4(vColor.rgb, a) * vOpacity, vColor, picking_usePickingColor);\n        }\n    ",name:"instance_glyph"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(126),o=n(266),r=n(374);e.default={v:"\n        #define SHADER_NAME instance-marker-vertex-shader\n\n        "+r.INSTANCE_PARTS+"\n        \n        "+i.UNIFORM_PART+"\n        \n        "+o.PICK_UNIFORM+"\n\n        "+r.UNIFORM_PARTS+"\n        \n        varying vec4 vColor;\n        varying vec2 vTextureCoords;\n        varying float vOpacity;\n\n        \n        "+i.PROJECTION_PART+"\n        \n        "+o.PICK_FUNCTION+"\n        \n        void main(void) {\n            "+(0,r.generateMainPart)("\n\n                vec2 instanceScale = mix(sizePixels / imageSize, vec2(0.0), float(imageSize.y == 0.0));\n                \n\n                vec2 pixelOffset = positions / 2.0 * imageSize;\n            \n\n                pixelOffset = rotate_by_angle_onScreen((pixelOffset * instanceScale + instanceInfos.xy), instanceInfos.z);\n                pixelOffset += instancePixelOffset.xy;\n                pixelOffset.y *= -1.0;\n            ","\n                vColor = vec4(0.0, 0.0, 0.0, 0.0);\n            ")+"\n        }\n    ",f:"\n        #define SHADER_NAME instance-marker-fragment-shader\n\n        precision highp float;\n        \n\t\tuniform sampler2D u_sampler;\n\t\t\n        "+o.PICK_UNIFORM+"\n        \n        varying vec4 vColor;\n        varying vec2 vTextureCoords;\n        varying float vOpacity;\n        \n        const float MIN_ALPHA = 0.05;\n\n        \n        void main(void) {\n            vec4 texColor = texture2D(u_sampler, vTextureCoords);\n            \n            gl_FragColor = mix(texColor * vOpacity, vColor, picking_usePickingColor);\n        }\n    ",name:"instance_marker"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(297);e.default={v:[i.attributePart,"attribute vec4 a_InstanceColors;","attribute vec4 a_InstanceStrokeColors;",i.uniformPart,"uniform vec2 u_glyphTextureResolution;","uniform vec2 u_billboardTextureResolution;","uniform float u_gamma;",i.varyingPart,"varying float v_gamma;","varying vec4 v_color;","varying vec4 v_strokeColor;","varying float v_fontScale;","varying float v_gammaScale;",i.projectScreenPart,i.filterPart,"void main(){","\tvec2 transCoord = a_InstanceTrans.xy;",i.glPositionPart,"    vec2 texCoords = a_Positions.xy * 0.5 + 0.5;","vec4 textureBounds = vec4(a_InstanceTextBounds.x, u_billboardTextureResolution.y - a_InstanceTextBounds.y - a_InstanceTextBounds.w, a_InstanceTextBounds.zw);","\tvec2 billboradTextureCoords = mix(\n\t\t\t\ttextureBounds.xy,\n\t\t\t\ttextureBounds.xy + textureBounds.zw,\n\t\t\t\t\ttexCoords\n\t\t\t\t) / u_billboardTextureResolution;\n\t\t\t\n\t\t","       float xRoad = (a_InstanceTextBounds.x) / u_glyphTextureResolution.x;","       float yRoad = (u_glyphTextureResolution.y - (a_InstanceTextBounds.y)) / u_glyphTextureResolution.y;","       float wRoad = a_InstanceTextBounds.z / u_glyphTextureResolution.x;","       float hRoad = a_InstanceTextBounds.w / u_glyphTextureResolution.y;","       v_TexCoord = mix(\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tbillboradTextureCoords,\n\t\t\t\t\t\t\t\tmix(\n\t\t\t\t\t\t\t\t\tvec2(xRoad + texCoords.x * wRoad, yRoad + (texCoords.y - 1.0) * hRoad),\n\t\t\t\t\t\t\t\t\tvec2(a_InstanceTextBounds.x + a_InstanceTextBounds.z * texCoords.x, a_InstanceTextBounds.y + a_InstanceTextBounds.w * texCoords.y),\n\t\t\t\t\t\t\t\t\ta_InstanceInfo.z\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tstep(0.0, a_InstanceInfo.z)\n\t\t\t\t\t\t\t);","    v_isShow = a_InstanceInfo.y;","    v_isIcon = a_InstanceInfo.z;","    v_opacity = max(0.0, min(1.0, a_InstanceInfo.w + mix(-u_fadeChange, u_fadeChange, v_isShow)));","\t v_opacity = getFilterOpacity(v_opacity, a_InstanceTrans.z);","\t v_color = a_InstanceColors / 255.0;","\t v_strokeColor = a_InstanceStrokeColors / 255.0;","\t v_gamma = u_gamma / (a_InstanceCoords.y / a_InstanceTextBounds.w);","\t v_fontScale = a_InstanceCoords.y / a_InstanceTextBounds.w;","\t v_gammaScale = 1.0;","}"].join("\n"),f:["#define SDF_PX 8.0","#define EDGE_GAMMA 0.105 / 2.0","precision highp float;",i.fragPart,"uniform sampler2D u_SamplerGlyph;","uniform float u_buffer;",i.varyingPart,"varying float v_gamma;","varying vec4 v_color;","varying vec4 v_strokeColor;","varying float v_fontScale;","varying float v_gammaScale;","void main() {",i.maskPart,"\t vec4 vColor = v_color * v_color.a;","\tvec4 color = mix(\n\t\t\t\ttexture2D(u_SamplerGlyph, v_TexCoord),\n\t\t\t\tmix(\n\t\t\t\t\ttexture2D(u_SamplerText, v_TexCoord),\n\t\t\t\t\ttexture2D(u_SamplerIcon, v_TexCoord),\n\t\t\t\t\tstep(0.0, v_isIcon)\n\t\t\t\t),\n\t\t\t\tabs(v_isIcon)\n\t\t\t);\n\t\t","\n\t\t\tfloat alpha = color.a;\n\t\t\tfloat distance = alpha;\n\n\t\t\tfloat usedBuff = u_buffer;\n\t\t\tfloat usedGamma = v_gamma;\n\t\t\talpha = smoothstep(usedBuff - usedGamma, usedBuff + usedGamma, distance);\n\t\t\tfloat a = mix(alpha, color.a, step(0.5, abs(v_isIcon)));\n\n\t\t\tfloat outlineFactor = smoothstep(usedBuff - usedGamma, usedBuff + usedGamma, distance);\n\t\t\tfloat finallAlpha = smoothstep(0.5 - usedGamma, 0.5 + usedGamma, distance);\n\n\t\t\t\n\t\t\tcolor = mix(\n\t\t\t\tmix(v_strokeColor * v_strokeColor.a, vColor, outlineFactor),\n\t\t\t\tcolor,\n\t\t\t\tstep(0.5, abs(v_isIcon))\n\t\t\t) * finallAlpha;\n\t\t\t\n\t\t\t\n\t\t\t\n\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t","    gl_FragColor = color * mix(v_opacity, 0.0, step(0.99, isCulledByMask));","}"].join("\n"),name:"instance_symbol_custom_style"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(297);e.default={v:[i.attributePart,i.uniformPart,i.varyingPart,i.projectScreenPart,i.filterPart,"void main(){","\tvec2 transCoord = a_InstanceTrans.xy;",i.glPositionPart,"        vec2 texCoords = a_Positions.xy * 0.5 + 0.5;","        if (a_InstanceInfo.z != 1.0) {","           float x = (u_InstanceTileTextureOffset.x + a_InstanceTextBounds.x) / u_textTextureResolution.x;","           float y = (u_textTextureResolution.y - (u_InstanceTileTextureOffset.y + a_InstanceTextBounds.y)) / u_textTextureResolution.y;","           float w = a_InstanceTextBounds.z / u_textTextureResolution.x;","           float h = a_InstanceTextBounds.w / u_textTextureResolution.y;","           v_TexCoord = vec2(x + texCoords.x * w, y + (texCoords.y - 1.0) * h);","        } else {","           v_TexCoord = vec2(a_InstanceTextBounds.x + a_InstanceTextBounds.z * texCoords.x, a_InstanceTextBounds.y + a_InstanceTextBounds.w * texCoords.y);","        }","    v_isShow = a_InstanceInfo.y;","    v_isIcon = a_InstanceInfo.z;","    v_opacity = max(0.0, min(1.0, a_InstanceInfo.w + mix(-u_fadeChange, u_fadeChange, v_isShow)));","\t v_opacity = getFilterOpacity(v_opacity, a_InstanceTrans.z);","}"].join("\n"),f:["precision mediump float;",i.fragPart,i.varyingPart,"void main() {",i.maskPart,"    vec4 color = mix(texture2D(u_SamplerText, v_TexCoord), texture2D(u_SamplerIcon, v_TexCoord), v_isIcon);","    gl_FragColor = mix(color, vec4(1.0, 1.0, 1.0, color.a), u_asbackground) * color.a * mix(v_opacity, 0.0, step(0.99, isCulledByMask));","}"].join("\n"),name:"instance_symbol_default_style"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(297),o=n(126),r="\n\t"+o.PROJECTION_PART+"\n\n\tvec2 getWorldspaceCoord(vec4 relativeCenter, vec2 localPosition) {\n\t\tvec2 relativeCenterPoint = project_view_local_position_precision(relativeCenter.xy, relativeCenter.zw);\n\t\tvec2 worldspaceCoord = relativeCenterPoint + project_scale(vec3(localPosition, 0.0)).xy;\n\t\treturn worldspaceCoord;\n\t}\n";e.default={v:[i.attributePart,"attribute vec4 a_InstanceColors;","attribute vec4 a_InstanceStrokeColors;",i.uniformPart,"uniform vec2 u_glyphTextureResolution;","uniform vec2 u_billboardTextureResolution;","uniform float u_gamma;","\n\tuniform vec4 uCenter;\n\tuniform float uZoom;\n\tuniform vec3 uPixelsPerMeter;\n\tuniform vec2 uResolution;\n\tuniform vec3 uProject_uCommonUnitsPerWorldUnit;\n\tuniform vec3 uProject_uCommonUnitsPerWorldUnit2;\n\tuniform vec4 uRelativeCenter;\n",i.varyingPart,"varying float v_gamma;","varying vec4 v_color;","varying vec4 v_strokeColor;","varying float v_fontScale;","varying float v_gammaScale;",i.projectScreenPart,r,i.filterPart,"void main(){","\tvec2 transCoord = getWorldspaceCoord(uRelativeCenter, a_InstanceTrans.xy);",i.glPositionPart,"\n\t\t\tvec2 texCoords = a_Positions.xy * 0.5 + 0.5;\n\t\t\t\n\t\t\t\n\t\t\tvec2 resolution = mix(\n\t\t\t\tu_glyphTextureResolution,\n\t\t\t\tu_billboardTextureResolution,\n\t\t\t\tabs(a_InstanceInfo.z)\n\t\t\t);\n\t\t\tvec4 textureBounds = vec4(a_InstanceTextBounds.x, resolution.y - a_InstanceTextBounds.y - a_InstanceTextBounds.w, a_InstanceTextBounds.zw);\n\t\t\tv_TexCoord = mix(\n\t\t\t\ttextureBounds.xy,\n\t\t\t\ttextureBounds.xy + textureBounds.zw,\n\t\t\t\ttexCoords\n\t\t\t) / resolution;\n\n\t\t\tv_isShow = a_InstanceInfo.y;\n\t\t\tv_isIcon = a_InstanceInfo.z;\n\t\t\tv_opacity = max(0.0, min(1.0, a_InstanceInfo.w + mix(-u_fadeChange, u_fadeChange, v_isShow)));\n\t\t\tv_color = a_InstanceColors / 255.0;\n\t\t\tv_strokeColor = a_InstanceStrokeColors / 255.0;\n\n\t\t\tv_gamma = u_gamma / (a_InstanceCoords.y / a_InstanceTextBounds.w);\n\n\t\t\tv_fontScale = a_InstanceCoords.y / a_InstanceTextBounds.w;\n\t\t\tv_gammaScale = 1.0;\n\t\t}"].join("\n"),f:["#define SDF_PX 8.0","#define EDGE_GAMMA 0.105 / 2.0","precision highp float;","uniform sampler2D u_SamplerText;","uniform sampler2D u_SamplerGlyph;","uniform float u_buffer;","uniform float u_asbackground;",i.varyingPart,"varying float v_gamma;","varying vec4 v_color;","varying vec4 v_strokeColor;","varying float v_fontScale;","varying float v_gammaScale;","void main() {","\t vec4 vColor = v_color * v_color.a;","\n\t\t\tvec4 color = mix(\n\t\t\t\ttexture2D(u_SamplerGlyph, v_TexCoord),\n\t\t\t\ttexture2D(u_SamplerText, v_TexCoord),\n\t\t\t\tabs(v_isIcon)\n\t\t\t);\n\t\t","\n\t\t\tfloat alpha = color.a;\n\t\t\tfloat distance = alpha;\n\n\t\t\tfloat usedBuff = u_buffer;\n\t\t\tfloat usedGamma = v_gamma;\n\t\t\tfloat outlineFactor = smoothstep(usedBuff - usedGamma, usedBuff + usedGamma, distance);\n\t\t\tfloat finalAlpha = smoothstep(0.5 - usedGamma, 0.5 + usedGamma, distance);\n\n\t\t\tcolor = mix(\n\t\t\t\tmix(v_strokeColor * v_strokeColor.a, vColor, outlineFactor),\n\t\t\t\tcolor,\n\t\t\t\tstep(0.5, abs(v_isIcon))\n\t\t\t) * finalAlpha;\n\t\t\t\n\t\t\tgl_FragColor = color * v_opacity;\n\t\t}"].join("\n"),name:"instance_symbol_indoor"}},,,,,,,,,,,,,,,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(1),l=i(a),s=n(7),u=n(376),c=function(){function t(e,n){(0,r.default)(this,t),this.workerPool=e,this.actors=[],this.currentActor=0,this.id=s.uniqueId();for(var i=this.workerPool.acquire(this.id),o=0;o<i.length;o++){var a=i[o],l=new u(a,n,this.id);l.name="Worker "+o,this.actors.push(l)}}return(0,l.default)(t,[{key:"send",value:function(t,e,n,i){return("number"!=typeof i||isNaN(i))&&(this.currentActor=(this.currentActor+1)%this.actors.length,i=this.currentActor),this.actors[i].send(t,e,n),i}},{key:"remove",value:function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)}},{key:"broadcast",value:function(t,e,n){n=n||function(){},s.asyncAll(this.actors,function(n,i){n.send(t,e,i)},n)}},{key:"destroy",value:function(){this.remove()}}]),t}();e.default=c},function(t,e,n){"use strict";var i=n(509),o=i(510);t.exports=function(){var t=new window.Worker(o);return t.objectURL=o,t}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||(0,p.default)(t,n,{configurable:!1,enumerable:!0,get:i})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e.oe=function(t){throw console.error(t),t};var i=e(e.s=ENTRY_MODULE);return i.default||i}function r(t){return(""+t).replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function a(t){return!isNaN(1*t)}function l(t,e,i){var o={};o[i]=[];var l=e.toString(),s=l.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!s)return o;for(var u=s[1],c=new RegExp("(\\\\n|\\W)"+r(u)+_,"g"),f=void 0;f=c.exec(l);)"dll-reference"!==f[3]&&o[i].push(f[3]);for(c=new RegExp("\\("+r(u)+'\\("(dll-reference\\s('+m+'))"\\)\\)'+_,"g");f=c.exec(l);)t[f[2]]||(o[i].push(f[1]),t[f[2]]=n(f[1]).m),o[f[2]]=o[f[2]]||[],o[f[2]].push(f[4]);for(var d=(0,h.default)(o),v=0;v<d.length;v++)for(var p=0;p<o[d[v]].length;p++)a(o[d[v]][p])&&(o[d[v]][p]=1*o[d[v]][p]);return o}function s(t){return(0,h.default)(t).reduce(function(e,n){return e||t[n].length>0},!1)}function u(t,e){for(var n={main:[e]},i={main:[]},o={main:{}};s(n);)for(var r=(0,h.default)(n),a=0;a<r.length;a++){var u=r[a],c=n[u],f=c.pop();if(o[u]=o[u]||{},!o[u][f]&&t[u][f]){o[u][f]=!0,i[u]=i[u]||[],i[u].push(f);for(var d=l(t,t[u][f],u),v=(0,h.default)(d),p=0;p<v.length;p++)n[v[p]]=n[v[p]]||[],n[v[p]]=n[v[p]].concat(d[v[p]])}}return i}var c=n(78),f=i(c),d=n(16),h=i(d),v=n(95),p=i(v),m="[\\.|\\-|\\+|\\w|/|@]+",_="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+m+").*?\\)";t.exports=function(t,e){e=e||{};var i={main:n.m},r=e.all?{main:(0,h.default)(i.main)}:u(i,t),a="";(0,h.default)(r).filter(function(t){return"main"!==t}).forEach(function(t){for(var e=0;r[t][e];)e+=1;r[t].push(e),i[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",a=a+"var "+t+" = ("+o.toString().replace("ENTRY_MODULE",(0,f.default)(e))+")({"+r[t].map(function(e){return(0,f.default)(e)+": "+i[t][e].toString()}).join(",")+"});\n"}),a=a+"new (("+o.toString().replace("ENTRY_MODULE",(0,f.default)(t))+")({"+r.main.map(function(t){return(0,f.default)(t)+": "+i.main[t].toString()}).join(",")+"}))(self);";var l=new window.Blob([a],{type:"text/javascript"});return e.bare?l:(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(l)}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(130),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s);n(373);var c=n(557),f=i(c),d=n(560),h=i(d),v=n(563),p=i(v),m=n(567),_=i(m),g=n(565),y=i(g),x=n(62),b=n(376),S=n(574),w=function(){function t(e){var n,i=this;(0,l.default)(this,t),this.self=e,this.actor=new b(e,this),this.layerIndexes={},this.workerSourceTypes=(n={},(0,r.default)(n,x.SOURCE_TYPE.vector,S),(0,r.default)(n,x.SOURCE_TYPE.geojson,f.default),(0,r.default)(n,x.SOURCE_TYPE.geoTask,h.default),(0,r.default)(n,x.SOURCE_TYPE.imageTile,p.default),(0,r.default)(n,x.SOURCE_TYPE.indoor,_.default),(0,r.default)(n,x.SOURCE_TYPE.indoorIndex,y.default),n),this.workerSources={},this.self.registerWorkerSource=function(t,e){if(i.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');i.workerSourceTypes[t]=e}}return(0,u.default)(t,[{key:"loadTile",value:function(t,e,n){this.getWorkerSource(t,e.type).loadTile(e,n)}},{key:"reloadTile",value:function(t,e,n){this.getWorkerSource(t,e.type).reloadTile(e,n)}},{key:"abortTile",value:function(t,e){this.getWorkerSource(t,e.type).abortTile(e)}},{key:"removeTile",value:function(t,e){this.getWorkerSource(t,e.type).removeTile(e)}},{key:"removeSource",value:function(t,e){var n=this.getWorkerSource(t,e.type);void 0!==n.removeSource&&n.removeSource(e)}},{key:"getWorkerSource",value:function(t,e){var n=this;if(this.workerSources[t]||(this.workerSources[t]={}),!this.workerSources[t][e]){var i={send:function(e,i,o){n.actor.send(e,i,o,t)}};this.workerSources[t][e]=new this.workerSourceTypes[e](i,t)}return this.workerSources[t][e]}},{key:"tileOffset",value:function(t,e,n){this.getWorkerSource(t,e.type).tileOffset(e,n)}}]),t}();t.exports=function(t){return new w(t)}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(16),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(17),f=i(c),d=n(508),h=f.default.isLowMobileDevice()?2:Math.max(Math.floor(f.default.hardwareConcurrency/2),4),v=function(){function t(){(0,l.default)(this,t),this.activeSet={}}return(0,u.default)(t,[{key:"acquire",value:function(t){if(!this.workers)for(this.workers=[];this.workers.length<h;)this.workers.push(new d);return this.activeSet[t]=!0,this.workers.slice()}},{key:"release",value:function(t){delete this.activeSet[t],(0,r.default)(this.activeSet).length>0||this.reset()}},{key:"reset",value:function(){this.activeSet={},this.workers.forEach(function(t){t.terminate()}),this.workers=null}}]),t}(),p=new v;e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(220),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=o.default.key||""},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(160),r=i(o),a=n(2),l=i(a),s=n(0),u=i(s),c=n(1),f=i(c),d=n(4),h=i(d),v=n(3),p=i(v),m=n(65),_=i(m),g=n(153),y=i(g),x=n(38),b=["left:0;","top:0;","overflow:visible;","z-index:102;"],S=function(t){function e(t){(0,u.default)(this,e);var n=(0,h.default)(this,(e.__proto__||(0,l.default)(e)).call(this));return n.map=t,n.controls={},n.createControlContainer(t),n}return(0,p.default)(e,t),(0,f.default)(e,[{key:"createControlContainer",value:function(t){var e=t._overlayer.root;this.controlContainer=document.createElement("div");var n=this.controlContainer;n.style.cssText=b.join(""),e.appendChild(n),t._overlayer.childs.controlLayer=n}},{key:"addControl",value:function(t){if(t instanceof y.default){var e=t.id;this.controls[e]?console.warn("addControl失败：id重复。"):(this.controls[e]=t,t.addTo(this.map,this.controlContainer),this._fire("control_added",{},!0))}else new x.BaseTypeError("control","Control",t).error();return this}},{key:"removeControl",value:function(t){if(this.controls[t]){this.controls[t].remove(),delete this.controls[t],this._fire("control_removed",{},!0)}return this}},{key:"setViewMode",value:function(t){(0,r.default)(this.controls).forEach(function(e){e&&e.setViewMode&&e.setViewMode(t)})}},{key:"getControl",value:function(t){return this.controls[t]}},{key:"destroy",value:function(){(0,r.default)(this.controls).forEach(function(t){t&&t.destroy&&t.destroy()}),this.controls={},this.map=null}}]),e}(_.default);e.default=S},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,CENTER_LEFT:3,CENTER:4,CENTER_RIGHT:5,BOTTOM_LEFT:6,BOTTOM_CENTER:7,BOTTOM_RIGHT:8};e.default=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(153),p=i(v),m=n(905),_=i(m),g=function(t){function e(t){return(0,l.default)(this,e),(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"createDOM",value:function(){var t=document.createElement("div"),e="margin-bottom: 30px; width: 230px; height:34px; background: rgba(255,255,255,0.90); z-index:200;";e+="border: 1px solid #DEDEDE; border-radius: 3px; padding:0 15px 0 40px; box-sizing:border-box; line-height: 32px;",e+="font-family: PingFangSC-Medium;font-size: 13px;color: #EF4D4D;letter-spacing: 0;",t.style.cssText=e,t.innerHTML="鉴权失败，请传入正确的key";var n=document.createElement("img");return n.style.cssText="width:20px; height:20px; position:absolute; top:6px; left:15px",n.src=_.default,t.appendChild(n),t}}]),e}(p.default);e.default=g},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(153),p=i(v),m=n(906),_=i(m),g=n(907),y=i(g),x=(new Date).getFullYear(),b=function(t){function e(t){return(0,l.default)(this,e),(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"createDOM",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.style,n=void 0===e?"default":e,i=document.createElement("div");i.style.cssText="width:80px;height:18px;overflow:visible;margin:1px;";var o=document.createElement("a");o.style.cssText="z-index:1;",o.href="http://map.qq.com?ref=jsapi_v3",o.target="_blank",o.style.cssText="position:absolute;",i.appendChild(o);var r=document.createElement("div");r.className="logo-text",r.style.cssText="position:absolute;left:85px;bottom:0;line-height:18px;font-size:10px;color:#333;font-family:Arial,sans-serif;white-space:nowrap;z-index:0;",r.innerText="©"+x+" Tencent - GS(2020)1720号 - Data© NavInfo",i.appendChild(r);var a=new Image;return a.src="gray"===n?y.default:_.default,a.height=18,a.width=81,o.appendChild(a),i}}]),e}(p.default);t.exports=b},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(153),p=i(v),m={Scale:{m:"米",km:"公里",mile:"英里",feet:"英尺"}},_=function(t,e){"[object String]"===Object.prototype.toString.call(t.innerText)?t.innerText=e:t.textContent=e},g="position:absolute;border:1px solid #ffffff;width:2px;height:6px;background:#000;font-size:0;line-height:0;",y=g+"border-bottom-width:0px;",x=g+"border-top-width:0px;",b=function(t){var e=Math.pow(10,(""+Math.floor(t)).length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=2?2:1,e*n},S=function(t){return Math.round(125*t)-10},w=function(t,e){if(t&&e)return Math.abs(156543.04*Math.cos(t.lat*Math.PI/180))/Math.pow(2,e)},E=function(t){var e=document.createElement("div");return"up"===t?(e.style.cssText=y+";border-right-width:0px",e.style.top="7px",e.style.height="9px"):"down"===t&&(e.style.cssText=x+";border-right-width:0px",e.style.top="17px",e.style.height="6px"),e.style.left=0,e.style.zIndex=0,e.className="tmap-scale-line",e},T=function(t){var e=document.createElement("div");return"up"===t?(e.style.cssText=y,e.style.top="0px"):"down"===t&&(e.style.cssText=x,e.style.top="9px"),e.style.left="81px",e.style.zIndex=2,e.className="tmap-scale-line",e},I=function(){var t=document.createElement("div");return t.style.cssText="position:absolute;border:1px solid #ffffff;width:2px;height:6px;background:#000;font-size:0;line-height:0;z-index:1;border-left-width:0px;",t.style.left="3px",t.style.width="80px",t.style.height="2px",t.style.top="6px",t.className="tmap-scale-line",t},A=function(t){var e=document.createElement("div"),n="up"===t?"top: 0px;":"bottom:-17px;";return e.style.cssText="position:relative; "+n+" font:11px arial,simsun;color:#000;text-align:left; left:5px;",e.className="tmap-scale-text",e},k=function(t){for(var e=[],n=["up","down"],i=0;i<2;i++){var o=n[i],r=document.createElement("div");r.style.cssText="width:100px;position:absolute;";var a=document.createElement("div");a.style.cssText="position:absolute;height:7px;width:84px;bottom:0px;";var l=E(o),s=T(o),u=I(),c=A(o);r.appendChild(l),a.appendChild(s),a.appendChild(u),r.appendChild(c),r.appendChild(a),e[o+"_rr"]=s,e[o+"_rl"]=l,e[o+"_rm"]=u,e[o+"_ruler"]=a,e[o+"_text"]=c,e[o+"_rl"]=l,t.appendChild(r)}var f=void 0;return{getMaxWidth:function(){return f},refresh:function(t){var n=void 0,i=void 0,o=e.up_rr,r=e.up_rm,a=e.up_text,l=e.up_ruler,s=e.down_rr,u=e.down_rm,c=e.down_ruler,d=e.down_text,h=b(t);n=S(h/t);var v=n;i=h<1e3?h+" "+m.Scale.m:h/1e3+" "+m.Scale.km,_(a,i),a.style.width="80px",r.style.width=n+"px",o.style.left=n+0+"px";var p=3.2808399*t,g=void 0,y=void 0,x=void 0;p>5280?(g=p/5280,y=b(g),n=S(y/g),i=y+" "+m.Scale.mile):(x=b(p),n=S(x/p),i=x+" "+m.Scale.feet),_(d,i);var w=parseInt(r.style.width,10),E=n>w?n:w;d.style.width="80px",u.style.width=E+"px",s.style.left=n+"px",u.style.visibility=n>w?"":"hidden",r.style.visibility=n>w?"hidden":"",c.style.zIndex=n>w?0:1,l.style.zIndex=n>w?1:0,f=Math.max(v,E)}}},P=function(t,e,n){var i=document.createElement("div");i.style.cssText="position:absolute;";var o=k(i),r=function(e,n){var i=w(e,n);if(i){var r=125*i;o.refresh(r),t.style.width=o.getMaxWidth()+10+"px"}};return r(e,n),t.style.width="100px",t.style.height="35px",t.appendChild(i),{node:t,updateZoom:r}},M=function(t,e){var n=document.createElement("div");return n.className="tmap-scale-control",P(n,t,e)},L=function(t){function e(t){return(0,l.default)(this,e),(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"createDOM",value:function(t){var e=t.center,n=t.zoom,i=document.createElement("div");return this.scaleControlView=M(e,n),i.appendChild(this.scaleControlView.node),i}},{key:"onAdd",value:function(){this.onZoomChange=this.onZoomChange.bind(this),this.map.on("zoom_changed",this.onZoomChange)}},{key:"onRemove",value:function(){this.map.off("zoom_changed",this.onZoomChange)}},{key:"onZoomChange",value:function(){var t=this.map.getCenter(),e=this.map.getZoom();this.scaleControlView.updateZoom(t,e)}}]),e}(p.default);e.default=L},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(47),r=i(o),a=n(18),l=i(a),s=n(113),u=i(s),c=n(2),f=i(c),d=n(0),h=i(d),v=n(1),p=i(v),m=n(4),_=i(m),g=n(3),y=i(g),x=n(153),b=i(x),S=n(226),w=n(521),E=n(520),T=n(17),I=n(93),A=n(894),k=n(904),P=n(903);n(898);var M=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,h.default)(this,e),!t.floorList||!t.buildingId)return console.error("楼层参数不合法!",t),(0,_.default)(n);var n=(0,_.default)(this,(e.__proto__||(0,f.default)(e)).call(this,t));return n._construct(),n}return(0,y.default)(e,t),(0,p.default)(e,[{key:"onInit",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.buildingId,i=e.selectedFloor,o=e.floorList;this.buildingId=n,this.floorMap=new u.default,this.floors=[],o.map(function(e,n){t.floorMap.set(e.name,String(n)),t.floors.push(e.name)}),this.list=null,this.selectedFloorIdx=this.floorMap.get(i),this._floorIndex=this._getFloorIndex(this.selectedFloorIdx)}},{key:"createDOM",value:function(){var t=(0,S.Template)(A,{floors:this.floors}),e=(0,I.toDom)(t),n=document.createElement("div");return n.appendChild(e.querySelector(".floor-control")),n}},{key:"_construct",value:function(){var t=this;this.wrapperNode=this.dom.querySelector(".floor-control-wrapper"),this.list=this.dom.querySelector(".floor-control-list"),this.arrTopImg=this.dom.querySelector(".arr-top"),this.arrBottomImg=this.dom.querySelector(".arr-bottom"),this.arrTopImg.src=k,this.arrBottomImg.src=P,(0,w.Transform)(this.list),this.floorListScroll=new E.Scroll({touch:this.wrapperNode,vertical:!0,target:this.list,property:"translateY",bindSelf:!0,maxSpeed:2,outFactor:.2,min:-40*Math.max(this.floors.length-4,0),max:0,lockDirection:!1,maxRegion:10,springMaxRegion:1,touchStart:function(){t.floorListScroll.min=-40*Math.max(t.floors.length-4,0)}}),this._bindEvents(),"number"==typeof this._floorIndex&&this._floorIndex>-1&&this._updateSelectedFloor(this._floorIndex,!0)}},{key:"setFreezing",value:function(t){t?(0,I.addClass)(this.wrapperNode,"freezing"):(0,I.removeClass)(this.wrapperNode,"freezing")}},{key:"selectFloor",value:function(t,e){var n=this.floorMap.get(t),i=this._getFloorIndex(n);i>-1?this._updateSelectedFloor(i,!1,e):console.error("楼层不存在!",n)}},{key:"_bindEvents",value:function(){var t=this,e=this._bindClick();if((0,T.isPC)()){e.remove();var n={},i={};(0,T.on)(this.list,"mousedown",function(t){n=(0,I.getPointerXY)(t)}),(0,T.on)(this.list,"mouseup",function(e){if(i=(0,I.getPointerXY)(e),Math.abs(i.y-n.y)<=2&&Math.abs(i.x-n.x)<=2){if((0,I.hasClass)(t.wrapperNode,"freezing"))return!0;var o=e.target.getAttribute("data-floor");t.selectFloor(o)}})}}},{key:"_bindClick",value:function(){var t=this;return(0,T.on)(this.list,".floor-control-item:click",function(e){if((0,I.hasClass)(t.wrapperNode,"freezing"))return!0;var n=e.selectorTarget.getAttribute("data-floor");t.selectFloor(n)})}},{key:"getFloorName",value:function(t){var e=t.toString(),n=!0,i=!1,o=void 0;try{for(var a,s=(0,l.default)(this.floorMap.entries());!(n=(a=s.next()).done);n=!0){var u=(0,r.default)(a.value,2),c=u[0];if(u[1]===e)return c}}catch(t){i=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}}},{key:"_getFloorIndex",value:function(t){var e=this.getFloorName(t);return this.floors.indexOf(e)}},{key:"_getFloorItem",value:function(t){return this.dom.querySelector('.floor-control-item[data-index="'+t+'"]')}},{key:"_addSelected",value:function(t){(0,I.addClass)(t,"selected-item"),3===t.innerHTML.length?t.style.fontSize="13px":4===t.innerHTML.length?t.style.fontSize="10px":t.innerHTML.length>4&&(t.style.fontSize="8px")}},{key:"_removeSelected",value:function(t){(0,I.removeClass)(t,"selected-item"),t.style.fontSize=""}},{key:"_updateSelectedFloor",value:function(t,e,n){var i=this,o=this._getFloorItem(this._floorIndex),r=this._getFloorItem(t);if(this._removeSelected(o),this._addSelected(r),this.floorListScroll){var a=this.floorListScroll.getComputedPosition(),l=Math.floor((this.floorListScroll.max-a)/40);[0,1,2,3].map(function(t){return t+l}).includes(t)||this.floorListScroll.to(Math.min(this.floorListScroll.max,Math.max(-40*(t-2),this.floorListScroll.min)),200)}if(e||t!==this._floorIndex){this._floorIndex=t;var s=parseInt(this.floorMap.get(this.floors[t]),10),u=s>this.selectedFloorIdx;this.selectedFloorIdx=s,n||setTimeout(function(){i.emit("floor-change",{floorIdx:i.selectedFloorIdx,floorName:i.floors[i.selectedFloorIdx],upper:u})},0)}}},{key:"show",value:function(){this.dom.style.display="block"}},{key:"hide",value:function(){this.dom.style.display="none"}},{key:"changeBottom",value:function(t){if(isNaN(t))return void console.error("top需要传数字");this.dom.style.bottom=t+"px"}}]),e}(b.default);e.default=M},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(153),p=i(v),m=n(226),_=n(225),g=n(17),y=i(g),x=n(895),b=n(909),S=n(910),w=n(908);n(899);var E=function(t){function e(t){(0,l.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return n.clickStrategy={compassCircle:function(){"2D"!==n.getViewMode()&&n.map&&n.map.easeTo({pitch:0,heading:0})},rotateTop:function(t){"2D"!==n.getViewMode()&&n.map&&(n.pitchHandle||(n.pitchHandle=n.map.getNonStopPitch()),"start"===t?n.pitchHandle.begin(1):"end"===t&&n.pitchHandle.cancel())},rotateBottom:function(t){"2D"!==n.getViewMode()&&n.map&&(n.pitchHandle||(n.pitchHandle=n.map.getNonStopPitch()),"start"===t?n.pitchHandle.begin(-1):"end"===t&&n.pitchHandle.cancel())},rotateLeft:function(t){"2D"!==n.getViewMode()&&n.map&&(n.rotateHandle||(n.rotateHandle=n.map.getNonStopRotate()),"start"===t?n.rotateHandle.begin(1):"end"===t&&n.rotateHandle.cancel())},rotateRight:function(t){"2D"!==n.getViewMode()&&n.map&&(n.rotateHandle||(n.rotateHandle=n.map.getNonStopRotate()),"start"===t?n.rotateHandle.begin(-1):"end"===t&&n.rotateHandle.cancel())}},n._bindEvents(),n._construct(),n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_construct",value:function(){this.compassImg=this.dom.querySelector(".compass-img"),this.compassCircle=this.dom.querySelector(".compass-circle"),this.rotateLeftImg=this.dom.querySelector(".rotate-left-img"),this.rotateRightImg=this.dom.querySelector(".rotate-right-img"),this.rotateTopImg=this.dom.querySelector(".rotate-top-img"),this.rotateBottomImg=this.dom.querySelector(".rotate-bottom-img"),this.compassImg.src=w,this.rotateLeftImg.src=S,this.rotateRightImg.src=S,this.rotateTopImg.src=b,this.rotateBottomImg.src=b}},{key:"createDOM",value:function(){var t=document.createElement("div"),e=(0,m.Template)(x,{});return t.innerHTML?t.insertAdjacentHTML("afterbegin",e):t.innerHTML=e,t}},{key:"onAdd",value:function(){var t=this.moveChange.bind(this);if(this.throttleMoveChange=y.default.throttle(t,50),this.map.on("move",this.throttleMoveChange),"3D"===this.getViewMode()){var e=this.map.getPitch(),n=this.map.getRotation();this.checkButtonState(e),this.checkCompassState(e,n)}else this.setButtonUseful(!1)}},{key:"_bindEvents",value:function(){var t=this;this.handlers=[],["compass-circle","rotate-left","rotate-right","rotate-top","rotate-bottom"].forEach(function(e){t.handleListen(e)}),this.handlers.push((0,g.on)(this.dom,"dblclick",function(t){t.stopPropagation()})),this.handlers.push((0,g.on)(this.dom,"mousedown,mousemove,mouseup,mouseover,mouseleave,click,dblclick, touchstart,touchmove,touchend",function(t){t.stopPropagation()}))}},{key:"moveChange",value:function(t){var e=t.target.getPitch(),n=t.target.getRotation();this.compassImg.style.transform="rotateZ("+n+"deg)",this.compassCircle.style.transform="rotatex("+e+"deg)",this.checkButtonState(e)}},{key:"handleListen",value:function(t){var e=this,n=this.toCamel(t),i=this.dom.querySelector("."+t),o=new _.Finger(i,{preventDefaultMove:!0,preventDefaultEnd:!0,stopPropagation:!0});this.handlers.push((0,g.on)(o,"touch-start",function(){e.clickStrategy[n]&&e.clickStrategy[n]("start")})),this.handlers.push((0,g.on)(o,"touch-end",function(){e.clickStrategy[n]&&e.clickStrategy[n]("end")}))}},{key:"toCamel",value:function(t){return t&&t.replace(/\-(\w)/g,function(t,e){return e.toUpperCase()})}},{key:"setButtonUseful",value:function(t){var e=["rotate-bottom","rotate-top","rotate-left","rotate-right"];if(t)return void e.forEach(function(t){document.getElementsByClassName(t)[0].classList.add("clickable-"+t),document.getElementsByClassName(t)[0].classList.remove("unclickable-"+t)});e.forEach(function(t){document.getElementsByClassName(t)[0].classList.add("unclickable-"+t),document.getElementsByClassName(t)[0].classList.remove("clickable-"+t)})}},{key:"checkButtonState",value:function(t){0===t&&this.lastPitch!==t?(document.getElementsByClassName("rotate-bottom")[0].classList.add("unclickable-rotate-bottom"),document.getElementsByClassName("rotate-bottom")[0].classList.remove("clickable-rotate-bottom")):0===this.lastPitch&&0!==t?(document.getElementsByClassName("rotate-bottom")[0].classList.add("clickable-rotate-bottom"),document.getElementsByClassName("rotate-bottom")[0].classList.remove("unclickable-rotate-bottom")):80===t&&this.lastPitch!==t?(document.getElementsByClassName("rotate-top")[0].classList.add("unclickable-rotate-top"),document.getElementsByClassName("rotate-top")[0].classList.remove("clickable-rotate-top")):80===this.lastPitch&&80!==t&&(document.getElementsByClassName("rotate-top")[0].classList.add("clickable-rotate-top"),document.getElementsByClassName("rotate-top")[0].classList.remove("unclickable-rotate-top")),this.lastPitch=t}},{key:"checkCompassState",value:function(t,e){this.compassImg.style.transform="rotateZ("+e+"deg)",this.compassCircle.style.transform="rotatex("+t+"deg)"}},{key:"getViewMode",value:function(){return this.map.getViewMode()}},{key:"setViewMode",value:function(t){"2D"===t?this.setButtonUseful(!1):this.setButtonUseful(!0)}},{key:"onRemove",value:function(){this.map.off("move",this.throttleMoveChange),this.rotateHandle=null}},{key:"onDestroy",value:function(){this.handlers.forEach(function(t){t&&t.remove()})}}]),e}(p.default);e.default=E},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return 1-Math.sqrt(1-t*t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Scroll=void 0;var r=n(0),a=i(r),l=n(1),s=i(l),u=n(17),c=n(93),f="cubic-bezier(0.1, 0.57, 0.1, 1)";e.Scroll=function(){function t(e){(0,a.default)(this,t),this.element="string"==typeof e.touch?document.querySelector(e.touch):e.touch,this.scroller=this._getValue(e.target,this.element),this.vertical=this._getValue(e.vertical,!0),this.property=e.property,this.sensitivity=this._getValue(e.sensitivity,1),this.lockDirection=this._getValue(e.lockDirection,!0),this.tickID=0,this.handlers=[],this.initialValue=this._getValue(e.initialValue,this.scroller[this.property]),this.scroller[this.property]=this.initialValue,this.moveFactor=this._getValue(e.moveFactor,1),this.factor=this._getValue(e.factor,1),this.outFactor=this._getValue(e.outFactor,.3),this.min=e.min,this.max=e.max,this.maxRegion=this._getValue(e.maxRegion,600),this.deceleration=6e-4,this.springMaxRegion=this._getValue(e.springMaxRegion,60),this.fixed=this._getValue(e.fixed,!1);var n=function(){};if(this.change=e.change||n,this.touchEnd=e.touchEnd||n,this.touchStart=e.touchStart||n,this.touchMove=e.touchMove||n,this.touchCancel=e.touchCancel||n,this.animationEnd=e.animationEnd||n,this.hasMin=!(void 0===this.min),this.hasMax=!(void 0===this.max),this.isTouchStart=!1,this.step=e.step,this.inertia=this._getValue(e.inertia,!0),this.maxSpeed=e.maxSpeed,this.hasMaxSpeed=!(void 0===this.maxSpeed),this.hasMax&&this.hasMin){if(this.min>this.max)throw"min value can't be greater than max value";this.currentPage=Math.round((this.max-this.scroller[this.property])/this.step)}this.preventDefault=this._getValue(e.preventDefault,!0),this.eventTarget=self,e.bindSelf&&(this.eventTarget=this.element),this.bindEvents(),this._endCallbackTag=!0,this._endTimeout=null}return(0,s.default)(t,[{key:"bindEvents",value:function(){var t=this;(0,u.isPC)()?(this.handlers.push((0,u.on)(this.eventTarget,"mousedown",function(e){t._start(e)})),this.handlers.push((0,u.on)(this.eventTarget,"mouseup",function(e){t._end(e)})),this.handlers.push((0,u.on)(this.eventTarget,"mouseleave",function(e){t._end(e)})),this.handlers.push((0,u.on)(this.eventTarget,"mousemove",function(e){t._move(e)})),this.handlers.push((0,u.on)(this.eventTarget,"click",function(t){t.stopPropagation()}))):(this.handlers.push((0,u.on)(this.eventTarget,"touchstart",function(e){t._start(e)})),this.handlers.push((0,u.on)(this.eventTarget,"touchend",function(e){t._end(e)})),this.handlers.push((0,u.on)(this.eventTarget,"touchcancel",function(e){t._cancel(e)})),this.handlers.push((0,u.on)(this.eventTarget,"touchmove",function(e){t._move(e)}))),this.handlers.push((0,u.on)(this.scroller,c.TRANSITIONEND,function(e){t._transitionEnd(e)}))}},{key:"_getValue",value:function(t,e){return void 0===t?e:t}},{key:"_transitionEnd",value:function(){var t=this;if(this._triggerTransitionEnd){var e=this.scroller[this.property];return e<this.min?void this.to(this.min,600,f):e>this.max?void this.to(this.max,600,f):void(this.step?(this._correction(),this._endCallbackTag&&(this._endCallbackTag=setTimeout(function(){t.animationEnd(e),(0,u.cancelFrame)(t.tickID)},400),this._endCallbackTag=!1)):(this.animationEnd(e),(0,u.cancelFrame)(this.tickID)))}}},{key:"_cancelAnimation",value:function(){this.scroller.style[c.TRANSITIONDURATION]="0ms",this.scroller[this.property]=this.getComputedPosition()}},{key:"getComputedPosition",value:function(){var t=self.getComputedStyle(this.scroller,null);return t=t[c.TRANSFORM].split(")")[0].split(", "),this.vertical?+(t[13]||t[5]):+(t[12]||t[4])}},{key:"_tick",value:function(){this.change(this.getComputedPosition()),this.tickID=(0,u.frame)(this._tick.bind(this))}},{key:"_start",value:function(t){(0,u.cancelFrame)(this.tickID),this._endCallbackTag=!0,this.isTouchStart=!0,this._firstTouchMove=!0,this._preventMove=!1,this.touchStart(t,this.scroller[this.property]),this._cancelAnimation(),clearTimeout(this._endTimeout),this.hasMax&&this.hasMin&&(this.currentPage=Math.round((this.max-this.scroller[this.property])/this.step)),this.startTime=(new Date).getTime();var e=(0,c.getPointerXY)(t);this.preX=e.x,this._startX=this.preX,this.preY=e.y,this._startY=this.preY,this.start=this.vertical?this.preY:this.preX,t.stopPropagation()}},{key:"_move",value:function(t){if(this.isTouchStart){var e=(0,c.getPointerXY)(t),n=Math.abs(e.x-this._startX),i=Math.abs(e.y-this._startY);if(this._firstTouchMove&&this.lockDirection){var o=n-i;o>0&&this.vertical?this._preventMove=!0:o<0&&!this.vertical&&(this._preventMove=!0),this._firstTouchMove=!1}if(n<10&&i<10)return;if(!this._preventMove){var r=this.moveFactor,a=(this.vertical?e.y-this.preY:e.x-this.preX)*this.sensitivity;this.hasMax&&this.scroller[this.property]>this.max&&a>0?r=this.outFactor:this.hasMin&&this.scroller[this.property]<this.min&&a<0&&(r=this.outFactor),a*=r,this.preX=e.x,this.preY=e.y,this.scroller[this.property]+=a;var l=(new Date).getTime();l-this.startTime>300&&(this.startTime=l,this.start=this.vertical?this.preY:this.preX),this.touchMove(t,this.scroller[this.property])}this.preventDefault&&t.cancelable&&t.preventDefault(),t.stopPropagation()}}},{key:"_end",value:function(t){if(this.isTouchStart){var e=this.scroller[this.property],n=(0,c.getPointerXY)(t);if((n.x-this._startX>=2||n.y-this._startY>=2)&&(0,u.isPC)(),!1===this.touchEnd(t,e))return void(this._triggerTransitionEnd=!1);if(this._triggerTransitionEnd=!0,this.hasMax&&e>this.max)this.to(this.max,600,f);else if(this.hasMin&&e<this.min)this.to(this.min,600,f);else if(this.inertia&&!this._preventMove){var i=(new Date).getTime()-this.startTime;if(i<300){var r=((this.vertical?n.y:n.x)-this.start)*this.sensitivity,a=Math.abs(r)/i,l=this.factor*a;this.hasMaxSpeed&&l>this.maxSpeed&&(l=this.maxSpeed);var s=e+l*l/(2*this.deceleration)*(r<0?-1:1),d=1;s<this.min?s<this.min-this.maxRegion?(d=o((e-this.min+this.springMaxRegion)/(e-s)),s=this.min-this.springMaxRegion):(d=o((e-this.min+this.springMaxRegion*(this.min-s)/this.maxRegion)/(e-s)),s=this.min-this.springMaxRegion*(this.min-s)/this.maxRegion):s>this.max&&(s>this.max+this.maxRegion?(d=o((this.max+this.springMaxRegion-e)/(s-e)),s=this.max+this.springMaxRegion):(d=o((this.max+this.springMaxRegion*(s-this.max)/this.maxRegion-e)/(s-e)),s=this.max+this.springMaxRegion*(s-this.max)/this.maxRegion));var h=Math.round(a/this.deceleration)*d;this.to(Math.round(s),h,f)}else this.step&&this._correction()}else this.step&&this._correction();this.isTouchStart=!1,t.stopPropagation()}}},{key:"_cancel",value:function(t){(0,u.cancelFrame)(this.tickID),this.step&&this._correction(),this.touchCancel(t)}},{key:"goMin",value:function(t){var e=this.scroller[this.property];(t||this.hasMin&&e<this.min)&&this.to(this.min,200,f)}},{key:"goMax",value:function(t){var e=this.scroller[this.property];(t||this.hasMax&&e>this.max)&&this.to(this.max,200,f)}},{key:"to",value:function(t,e,n){var i=this.scroller,o=this.property;i.style[c.TRANSITIONDURATION]=this._getValue(e,600)+"ms",i.style[c.TRANSITIONTIMINGFUNCTION]=n||f,i[o]=t}},{key:"_correction",value:function(){var t=self.getComputedStyle(this.scroller)[c.TRANSFORM],e=this.vertical?parseInt(t.split(",")[13]):parseInt(t.split(",")[12]),n=Math.floor(Math.abs(e/this.step)),i=e%this.step,o=void 0;Math.abs(i)>this.step/2?(o=(e<0?-1:1)*(n+1)*this.step,o>this.max&&(o=this.max),o<this.min&&(o=this.min),this.to(o,400,f)):(o=(e<0?-1:1)*n*this.step,o>this.max&&(o=this.max),o<this.min&&(o=this.min),this.to(o,400,f))}},{key:"destroy",value:function(){this.handlers.forEach(function(t){t&&t.remove&&t.remove()})}}]),t}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){for(var i=0,o=e.length;i<o;i++){r(t,e[i],n)}}function r(t,e,n){(0,f.default)(t,e,{get:function(){return this["_"+e]},set:function(t){this["_"+e]=t,n()}})}function a(t){return"object"===("undefined"==typeof HTMLElement?"undefined":(0,u.default)(HTMLElement))?t instanceof HTMLElement:t&&"object"===(void 0===t?"undefined":(0,u.default)(t))&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName}function l(t,e){if(!t.hasOwnProperty("translateX")){var n=["translateX","translateY","translateZ","scaleX","scaleY","scaleZ","rotateX","rotateY","rotateZ","skewX","skewY","originX","originY","originZ"],i=a(t);e||n.push("perspective"),o(t,n,function(){var n=t.matrix3d.identity().appendTransform(t.translateX,t.translateY,t.translateZ,t.scaleX,t.scaleY,t.scaleZ,t.rotateX,t.rotateY,t.rotateZ,t.skewX,t.skewY,t.originX,t.originY,t.originZ),o=(e?"":"perspective("+t.perspective+"px) ")+"matrix3d("+Array.prototype.slice.call(n.elements).join(",")+")";i?(t.style.transform=o,t.style.msTransform=o,t.style.OTransform=o,t.style.MozTransform=o,t.style.webkitTransform=o):t.transform=o}),t.matrix3d=new h,e||(t.perspective=500),t.scaleX=1,t.scaleY=1,t.scaleZ=1,t.translateX=0,t.translateY=0,t.translateZ=0,t.rotateX=0,t.rotateY=0,t.rotateZ=0,t.skewX=0,t.skewY=0,t.originX=0,t.originY=0,t.originZ=0}}Object.defineProperty(e,"__esModule",{value:!0}),e.Transform=void 0;var s=n(26),u=i(s),c=n(95),f=i(c),d=.017453292519943295,h=function(t,e,n,i,o,r,a,l,s,u,c,f,d,h,v,p){this.elements=window.Float32Array?new Float32Array(16):[];var m=this.elements;m[0]=void 0!==t?t:1,m[4]=e||0,m[8]=n||0,m[12]=i||0,m[1]=o||0,m[5]=void 0!==r?r:1,m[9]=a||0,m[13]=l||0,m[2]=s||0,m[6]=u||0,m[10]=void 0!==c?c:1,m[14]=f||0,m[3]=d||0,m[7]=h||0,m[11]=v||0,m[15]=void 0!==p?p:1};h.prototype={set:function(t,e,n,i,o,r,a,l,s,u,c,f,d,h,v,p){var m=this.elements;return m[0]=t,m[4]=e,m[8]=n,m[12]=i,m[1]=o,m[5]=r,m[9]=a,m[13]=l,m[2]=s,m[6]=u,m[10]=c,m[14]=f,m[3]=d,m[7]=h,m[11]=v,m[15]=p,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},multiplyMatrices:function(t,e){var n=t.elements,i=this.elements,o=n[0],r=n[4],a=n[8],l=n[12],s=n[1],u=n[5],c=n[9],f=n[13],d=n[2],h=n[6],v=n[10],p=n[14],m=n[3],_=n[7],g=n[11],y=n[15],x=e[0],b=e[1],S=e[2],w=e[3],E=e[4],T=e[5],I=e[6],A=e[7],k=e[8],P=e[9],M=e[10],L=e[11],C=e[12],N=e[13],O=e[14],R=e[15];return i[0]=o*x+r*E+a*k+l*C,i[4]=o*b+r*T+a*P+l*N,i[8]=o*S+r*I+a*M+l*O,i[12]=o*w+r*A+a*L+l*R,i[1]=s*x+u*E+c*k+f*C,i[5]=s*b+u*T+c*P+f*N,i[9]=s*S+u*I+c*M+f*O,i[13]=s*w+u*A+c*L+f*R,i[2]=d*x+h*E+v*k+p*C,i[6]=d*b+h*T+v*P+p*N,i[10]=d*S+h*I+v*M+p*O,i[14]=d*w+h*A+v*L+p*R,i[3]=m*x+_*E+g*k+y*C,i[7]=m*b+_*T+g*P+y*N,i[11]=m*S+_*I+g*M+y*O,i[15]=m*w+_*A+g*L+y*R,this},_rounded:function(t,e){return e=Math.pow(10,e||15),Math.round(t*e)/e},_arrayWrap:function(t){return self.Float32Array?new Float32Array(t):t},appendTransform:function(t,e,n,i,o,r,a,l,s,u,c,f,h,v){var p=a*d,m=this._rounded(Math.cos(p)),_=this._rounded(Math.sin(p)),g=l*d,y=this._rounded(Math.cos(g)),x=this._rounded(Math.sin(g)),b=s*d,S=this._rounded(Math.cos(-1*b)),w=this._rounded(Math.sin(-1*b));return this.multiplyMatrices(this,this._arrayWrap([1,0,0,t,0,m,_,e,0,-_,m,n,0,0,0,1])),this.multiplyMatrices(this,this._arrayWrap([y,0,x,0,0,1,0,0,-x,0,y,0,0,0,0,1])),this.multiplyMatrices(this,this._arrayWrap([S*i,w*o,0,0,-w*i,S*o,0,0,0,0,1*r,0,0,0,0,1])),(u||c)&&this.multiplyMatrices(this,this._arrayWrap([this._rounded(Math.cos(u*d)),this._rounded(Math.sin(u*d)),0,0,-1*this._rounded(Math.sin(c*d)),this._rounded(Math.cos(c*d)),0,0,0,0,1,0,0,0,0,1])),(f||h||v)&&(this.elements[12]-=f*this.elements[0]+h*this.elements[4]+v*this.elements[8],this.elements[13]-=f*this.elements[1]+h*this.elements[5]+v*this.elements[9],this.elements[14]-=f*this.elements[2]+h*this.elements[6]+v*this.elements[10]),this}};var v=function(t,e,n,i,o,r){return this.a=null===t?1:t,this.b=e||0,this.c=n||0,this.d=null===i?1:i,this.tx=o||0,this.ty=r||0,this};v.prototype={identity:function(){return this.a=1,this.d=1,this.b=0,this.c=0,this.tx=0,this.ty=0,this},appendTransform:function(t,e,n,i,o,r,a,l,s){var u=void 0,c=void 0;if(o%360){var f=o*d;u=Math.cos(f),c=Math.sin(f)}else u=1,c=0;return r||a?(r*=d,a*=d,this.append(Math.cos(a),Math.sin(a),-Math.sin(r),Math.cos(r),t,e),this.append(u*n,c*n,-c*i,u*i,0,0)):this.append(u*n,c*n,-c*i,u*i,t,e),(l||s)&&(this.tx-=l*this.a+s*this.c,this.ty-=l*this.b+s*this.d),this},append:function(t,e,n,i,o,r){var a=this.a,l=this.b,s=this.c,u=this.d;return this.a=t*a+e*s,this.b=t*l+e*u,this.c=n*a+i*s,this.d=n*l+i*u,this.tx=o*a+r*s+this.tx,this.ty=o*l+r*u+this.ty,this},initialize:function(t,e,n,i,o,r){return this.a=t,this.b=e,this.c=n,this.d=i,this.tx=o,this.ty=r,this},setValues:function(t,e,n,i,o,r){return this.a=null===t?1:t,this.b=e||0,this.c=n||0,this.d=null===i?1:i,this.tx=o||0,this.ty=r||0,this},copy:function(t){return this.setValues(t.a,t.b,t.c,t.d,t.tx,t.ty)}},l.getMatrix3D=function(t){var e={translateX:0,translateY:0,translateZ:0,rotateX:0,rotateY:0,rotateZ:0,skewX:0,skewY:0,originX:0,originY:0,originZ:0,scaleX:1,scaleY:1,scaleZ:1};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return(new h).identity().appendTransform(e.translateX,e.translateY,e.translateZ,e.scaleX,e.scaleY,e.scaleZ,e.rotateX,e.rotateY,e.rotateZ,e.skewX,e.skewY,e.originX,e.originY,e.originZ).elements},l.getMatrix2D=function(t){var e={translateX:0,translateY:0,rotation:0,skewX:0,skewY:0,originX:0,originY:0,scaleX:1,scaleY:1};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return(new v).identity().appendTransform(e.translateX,e.translateY,e.scaleX,e.scaleY,e.rotation,e.skewX,e.skewY,e.originX,e.originY)};var p=l;e.Transform=p},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(153),p=i(v),m=n(226),_=n(225),g=n(17),y=n(896);n(900);var x=function(t){function e(t){(0,l.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return n._bindEvents(),n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"createDOM",value:function(){var t=document.createElement("div"),e=(0,m.Template)(y,{});return t.innerHTML?t.insertAdjacentHTML("afterbegin",e):t.innerHTML=e,t}},{key:"_bindEvents",value:function(){var t=this;this.zoomIn=this.dom.querySelector(".tmap-zoom-in"),this.zoomOut=this.dom.querySelector(".tmap-zoom-out"),this.handlers=[],this.zoomInFinger=new _.Finger(this.zoomIn,{preventDefaultMove:!0,preventDefaultEnd:!0,stopPropagation:!0}),this.zoomOutFinger=new _.Finger(this.zoomOut,{preventDefaultMove:!0,preventDefaultEnd:!0,stopPropagation:!0}),this.handlers.push((0,g.on)(this.zoomInFinger,"tap",function(){t.map&&t.map.zoomBy(1)})),this.handlers.push((0,g.on)(this.zoomOutFinger,"tap",function(){t.map&&t.map.zoomBy(-1)})),this.handlers.push((0,g.on)(this.dom,"dblclick",function(t){t.stopPropagation()})),this.handlers.push((0,g.on)(this.dom,"mousedown,mousemove,mouseup,mouseover,mouseleave,click,dblclick, touchstart,touchmove,touchend",function(t){t.stopPropagation()}))}},{key:"onDestroy",value:function(){this.handlers.forEach(function(t){t&&t.remove()})}}]),e}(p.default);e.default=x},function(t,e,n){"use strict";function i(t,e,n,i,o){var r=(e[1]-t[1])*(n[2]-t[2])-(e[2]-t[2])*(n[1]-t[1]),a=(e[2]-t[2])*(n[0]-t[0])-(e[0]-t[0])*(n[2]-t[2]),l=(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0]),s=Math.max(Math.abs(r),Math.abs(a),Math.abs(l));if(i>0&&s>0){var u=i/s;r*=u,a*=u,l*=u}return o=o||0,r+=o,a+=o,l+=o,[~~r,~~a,~~l]}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,n){"use strict";n(373);var i=n(220),o=function(t){return t&&t.__esModule?t:{default:t}}(i),r=n(77),a=n(83),l=window[a]||(window[a]={}),s=n(460),u=n(372);for(var c in s)s.hasOwnProperty(c)&&(l[c]=s[c]);l.Handler=u;var f=+new Date,d=o.default.key,h=o.default.version,v=o.default.loadScriptTime;(0,r.pv)({key:d,version:h,loadDeltaTime:f-v}),location.protocol.indexOf("file")>-1&&console.error("腾讯地图 JavaScript API 不支持在file协议使用，请在http或https协议下使用！"),t.exports=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(27),r=i(o),a=n(14),l=i(a),s=n(2),u=i(s),c=n(0),f=i(c),d=n(1),h=i(d),v=n(4),p=i(v),m=n(3),_=i(m),g=n(65),y=i(g),x=n(42),b=i(x),S=n(84),w=i(S),E=n(552),T=i(E),I=n(43),A=n(62),k=function(t){function e(t,n){(0,f.default)(this,e);var i=(0,p.default)(this,(e.__proto__||(0,u.default)(e)).call(this));return i._buildingId=t,i._cityId=t.substring(0,6),i._map=n.map,i._id="indoor_bulding_"+i._buildingId,i._manager=n.manager,i._buildingInfo=null,i._buildingBounds=null,i._isActiveStatus=!1,i._destroyed=!1,i._createLayer(n),i}return(0,_.default)(e,t),(0,h.default)(e,[{key:"isActive",value:function(){return this._isActiveStatus}},{key:"_setActiveStatus",value:function(t){this._isActiveStatus=t}},{key:"_createLayer",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._sourceId=this._id,this._map.addSource(this._sourceId,{type:A.SOURCE_TYPE.indoor,data:{buildingId:this._buildingId,cityId:this._cityId,indoorStyleId:e.indoorStyleId}}),this._regionLayer=new T.default((0,l.default)(e,{map:this._map,id:this._id+"_region",sourceId:this._sourceId,type:I.RENDER_LAYER_TYPE.indoorRegion})),this._poiLayer=new T.default((0,l.default)(e,{map:this._map,id:this._id+"_poi",sourceId:this._sourceId,type:I.RENDER_LAYER_TYPE.indoorPoi})),this._escalatorLayer=new T.default((0,l.default)(e,{map:this._map,id:this._id+"_escalator",sourceId:this._sourceId,type:I.RENDER_LAYER_TYPE.indoorEscalator})),this._map.getSource(this._sourceId).on("loaded",function(){t._destroyed||t.getManager().emit("building_source_loaded")})}},{key:"_setVisible",value:function(t){if(t!==this._visible){this._regionLayer.setVisible(t),this._poiLayer.setVisible(t),this._escalatorLayer.setVisible(t),this._visible=t;var e=t?"show":"hide";this.emit(e)}}},{key:"getVisible",value:function(){return this._visible}},{key:"setSelectedFloor",value:function(t){if(this.isActive()){var e=this.getSelectedFloor();if(this._map&&e!==t){this._map.getSource(this._sourceId).setSelectedFloor(t)<0?console.warn("该室内建筑物无对应楼层: ",t):this.emit("floor_changed")}}else console.warn("该室内建筑物处于非激活状态，该方法无效!");return this}},{key:"getMap",value:function(){return this._map}},{key:"getManager",value:function(){return this._manager}},{key:"getSelectedFloor",value:function(){if(this._map)return this._map.getSource(this._sourceId).getSelectedFloor()}},{key:"getBuildingInfo",value:function(){if(this._buildingInfo)return this._buildingInfo;var t=this._map&&this._map.getSource(this._sourceId),e=t&&t.getMetaData();return e&&(this._buildingInfo=this._formatBuildingInfo(e)),this._buildingInfo}},{key:"getBuildingInfoAsync",value:function(){var t=this;return new r.default(function(e){t._buildingInfo&&e(t._buildingInfo);var n=t._map&&t._map.getSource(t._sourceId),i=n&&n.getMetaData();i?(t._buildingInfo=t._formatBuildingInfo(i),e(t._buildingInfo)):n.once("loaded",function(){t._destroyed||(t._buildingInfo=t._formatBuildingInfo(n.getMetaData()),e(t._buildingInfo))})})}},{key:"_formatBuildingInfo",value:function(t){var e=t.floorInfo.bounds[0],n=t.floorInfo.bounds[1],i=new b.default(e.lat,e.lng),o=new b.default(n.lat,n.lng),r=new w.default(i,o);return this._buildingBounds=r,{cityId:this._cityId,buildingId:this._buildingId,buildingName:t.buildingName,defaultFloor:t.floorInfo.floorStrArr[t.floorInfo.defaultNum],center:new b.default(t.center.lat,t.center.lng),floorList:t.floorInfo.floorStrArr.map(function(t){return{name:t,bounds:r}}),bounds:r}}},{key:"destroy",value:function(){this._regionLayer=null,this._poiLayer=null,this._escalatorLayer=null,this._buildingId=null,this._cityId=null,this._map=null,this._id=null,this._manager=null,this._buildingInfo=null,this._buildingBounds=null,this._isActiveStatus=!1,this._destroyed=!0}},{key:"buildingId",get:function(){return this._buildingId}}]),e}(y.default);e.default=k},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n=t.getActiveIndoorBuilding();e!==n&&(n&&(n._setActiveStatus(!1),n.off("floor_changed",t._onActiveIndoorBuildingFloorChange)),e&&(e._setActiveStatus(!0),e.on("floor_changed",t._onActiveIndoorBuildingFloorChange)),t._activeIndoorBuilding=e,t._updateFloorControl().then(function(){t.emit("active_changed",t._activeIndoorBuilding)}))}Object.defineProperty(e,"__esModule",{value:!0});var r=n(27),a=i(r),l=n(14),s=i(l),u=n(2),c=i(u),f=n(0),d=i(f),h=n(1),v=i(h),p=n(4),m=i(p),_=n(3),g=i(_),y=n(20),x=i(y),b=n(65),S=i(b),w=n(270),E=n(17),T=i(E),I=n(7),A=n(525),k=i(A),P=n(518),M=i(P),L=n(514),C=i(L),N=n(309),O=n(273),R=n(224),V=n(527),B=i(V),F=n(62),z={map:null,visible:!0,minZoom:x.default.minShowIndoorZoom,maxZoom:x.default.maxZoom},D=0,U=100,Y=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.default)(this,e);var n=(0,m.default)(this,(e.__proto__||(0,c.default)(e)).call(this)),i=(0,s.default)({},z,t);return n._options=i,n._map=i.map,n._visible=i.visible,n._minZoom=i.minZoom,n._maxZoom=i.maxZoom,n._indexSource=null,n._indoorBuildingList=[],n._indoorBuildingIds=[],n._userBuildingIdList=null,n._autoActive=!0,n._activeIndoorBuilding=null,n._floorControl=null,n._initialized=!1,n._isFloorControlVisible=!0,n._indoorStyleId=D,n._onActiveIndoorBuildingFloorChange=n._onActiveIndoorBuildingFloorChange.bind(n),n._initializePromise=n._init(i),n}return(0,g.default)(e,t),(0,v.default)(e,[{key:"_init",value:function(t){var e=this,n=O.IndoorStyleMap.getInstance(),i=this._indoorStyleId,o=0;return(0,w.checkKey)(this._map.id).then(function(t){var r=t&&t.indoor_map;o=r&&r.type;var a=r&&r.enable,l=r&&r.building_list;return 1===a&&Array.isArray(l)?(e._userBuildingIdList=l,n.has(i)?l:(0,N.loadIndoorStyleFile)(i).then(function(t){return t&&n.set(e._indoorStyleId,t),l})):null}).then(function(n){if(n){var i=n.length;U=i>0?i:U;var r=1===o?1:0;return e._map.on("moveend",T.default.debounce(e._createBuildingInView.bind(e,t,r),50)),e._map.on("zoom_changed",T.default.throttle(e._onMapZoomChanged.bind(e),50)),e._map.on("center_changed",T.default.throttle(e._onMapCenterChanged.bind(e),50)),e.on("building_source_loaded",e._onBuildingSourceLoaded.bind(e)),e._createBuildingInView(t,r)}}).then(function(){e._initialized=!0})}},{key:"_createBuildingInView",value:function(t,e){var n=this,i=this._getCityList();this._indexSource||(this._indexSource=this._map.layerResource.addIndoorIndexSource(F.SOURCE_TYPE.indoorIndex));var o=this._getViewBounds();return new a.default(function(r){n._indexSource.loadIndexData(i,o,e,function(e){var i=e;Array.isArray(n._userBuildingIdList)&&n._userBuildingIdList.length>0&&(i=e.filter(function(t){return n._userBuildingIdList.includes(t)})),n._createIndoorBuildingList(i,t),n._visibleCheck(),r()})})}},{key:"_getCityList",value:function(){var t=this._map.getZoom(),e=[];if((0,I.isInRange)(t,this._minZoom,this._maxZoom)){var n=this._map.getCenter();e=B.default.filter(function(t){var e=t.leftBottom,i=t.rightTop,o=n.getLat(),r=n.getLng();return(0,I.isInRange)(o,e.lat,i.lat)&&(0,I.isInRange)(r,e.lng,i.lng)}).map(function(t){return t.cityId})}return e}},{key:"_getViewBounds",value:function(){var t=this._map.getBounds(),e=this._map.transform.latLngToCoord(t.getNorthEast(),20),n=e.x,i=e.y,o=this._map.transform.latLngToCoord(t.getSouthWest(),20);return{left:o.x,right:n,top:i,bottom:o.y}}},{key:"_createIndoorBuildingList",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};0!==t.length&&(0===this._userBuildingIdList&&this._buildingNumLimitCheck(t),t.forEach(function(t){if(!e._indoorBuildingIds.includes(t)){var i=new k.default(t,(0,s.default)(n,{map:e._map,manager:e,indoorStyleId:e._indoorStyleId}));e._indoorBuildingList.push(i),e._indoorBuildingIds.push(t)}}))}},{key:"_buildingNumLimitCheck",value:function(t){var e=this,n=this._indoorBuildingIds.length,i=t.filter(function(t){return e._indoorBuildingIds.includes(t)}),o=i.length,r=t.length-o;if(n+r>U){for(var a=n+r-U,l=[],s=0;s<n&&(i.includes(this._indoorBuildingIds[s])||l.push(s),l.length!==a);s++);for(var u=0;u<a;u++){this._indoorBuildingIds.splice(l[u],1);var c=this._indoorBuildingList.splice(l[u],1)[0];c&&c.destroy(),c=null}}}},{key:"_onBuildingSourceLoaded",value:function(){this.getActiveIndoorBuilding()||this._autoActiveCheck()}},{key:"_onMapCenterChanged",value:function(){this._initialized&&this._autoActiveCheck()}},{key:"_onMapZoomChanged",value:function(){this._visibleCheck()}},{key:"_visibleCheck",value:function(){var t=this._map.getZoom();(0,I.isInRange)(t,this._minZoom,this._maxZoom)?this._visible&&this._indoorBuildingList.forEach(function(t){t._setVisible(!0)}):this._indoorBuildingList.forEach(function(t){t._setVisible(!1)})}},{key:"_autoActiveCheck",value:function(){var t=this;if(this._autoActive){var e=this._map.getCenter(),n=this._map.getZoom();n>=this._minZoom&&n<=this._maxZoom&&this._indoorBuildingList.length>0&&this._indoorBuildingList.some(function(n){var i=n.getBuildingInfo(),r=i&&i.bounds&&i.bounds.contains(e);return r&&o(t,n),r})||o(this,null)}}},{key:"_updateFloorControl",value:function(){var t=this,e=this.getActiveIndoorBuilding();return e?e.getBuildingInfoAsync().then(function(n){t._floorControl&&t._floorControl.buildingId===n.buildingId||(t._floorControl&&(t._map.removeControl(R.DEFAULT_CONTROL_ID.FLOOR),t._floorControl.destroy(),t._floorControl=null),t._floorControl=new M.default({id:R.DEFAULT_CONTROL_ID.FLOOR,position:C.default.BOTTOM_RIGHT,buildingId:n.buildingId,selectedFloor:e.getSelectedFloor()||n.defaultFloor,floorList:n.floorList}),t._map.addControl(t._floorControl),t._floorControl.on("floor-change",function(e){var n=e.floorName;t.getActiveIndoorBuilding()&&t.getActiveIndoorBuilding().setSelectedFloor(n)})),t._isFloorControlVisible&&t._floorControl.show()}):(this._floorControl&&this._floorControl.hide(),a.default.resolve())}},{key:"_onActiveIndoorBuildingFloorChange",value:function(){var t=this.getActiveIndoorBuilding();this._floorControl&&this._initialized&&t&&this._floorControl.selectFloor(t.getSelectedFloor())}},{key:"initialize",value:function(){return this._initializePromise}},{key:"setAutoActive",value:function(t){return this._autoActive=!!t,this._autoActiveCheck(),this}},{key:"setActiveIndoorBuilding",value:function(t){if(this._initialized||console.warn("室内地图管理器尚未初始化完毕，该方法无效!"),this._autoActive)return console.warn("自动激活模式下，该方法无效!"),this;if(!t)return o(this,null),this;var e=this.getIndoorBuilding(t);return e&&o(this,e),this}},{key:"setVisible",value:function(t){t=!!t,this._visible=t;var e=this._map.getZoom();return t&&!(0,I.isInRange)(e,this._minZoom,this._maxZoom)?this:(this._indoorBuildingList.forEach(function(e){e._setVisible(t)}),this)}},{key:"showFloorControl",value:function(){this.getActiveIndoorBuilding()&&(this._isFloorControlVisible=!0,this._floorControl&&this._floorControl.show())}},{key:"hideFloorControl",value:function(){this._isFloorControlVisible=!1,this._floorControl&&this._floorControl.hide()}},{key:"getMap",value:function(){return this._map}},{key:"getAutoActive",value:function(){return this._autoActive}},{key:"getActiveIndoorBuilding",value:function(){return this._initialized||console.warn("室内地图管理器尚未初始化完毕，该方法无效!"),this._activeIndoorBuilding}},{key:"getVisible",value:function(){return this._visible}},{key:"getIndoorBuilding",value:function(t){return this._initialized||console.warn("室内地图管理器尚未初始化完毕，该方法无效!"),"string"!=typeof t?(console.error("室内地图管理器：请传入正确的buildingId"),null):(this._userBuildingIdList&&!this._indoorBuildingIds.includes(t)&&(0===this._userBuildingIdList.length||this._userBuildingIdList.includes(t))&&this._createIndoorBuildingList([t],this._options),this._indoorBuildingList.filter(function(e){return e.buildingId===t})[0]||null)}},{key:"getIndoorBuildingList",value:function(){var t=this;if(!this._userBuildingIdList)return[];if(Array.isArray(this._userBuildingIdList)&&0===this._userBuildingIdList.length)return[];var e=this._userBuildingIdList.filter(function(e){return!t._indoorBuildingIds.includes(e)});return e.length>0&&this._createIndoorBuildingList(e,this._options),this._indoorBuildingList}},{key:"destroy",value:function(){this.removeAllListeners(),this._floorControl&&this._floorControl.destroy(),this._indexSource=null,this._indoorBuildingList&&this._indoorBuildingList.length>0&&this._indoorBuildingList.forEach(function(t){t.destroy()}),this._indoorBuildingList=null,this._indoorBuildingIds=null,this._userBuildingIdList=null}}],[{key:"getInstance",value:function(t){return this(t)}}]),e}(S.default);e.default=Y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=[{cityId:1,cityName:"阿坝藏族羌族自治州",leftBottom:{lng:100.527191,lat:30.5941792},rightTop:{lng:104.437462,lat:34.3129807}},{cityId:2,cityName:"阿克苏地区",leftBottom:{lng:78.0278625,lat:39.46632},rightTop:{lng:84.0897293,lat:42.6467705}},{cityId:3,cityName:"阿拉尔市",leftBottom:{lng:80.5910263,lat:40.3629417},rightTop:{lng:81.9546509,lat:40.9459915}},{cityId:4,cityName:"阿拉善盟",leftBottom:{lng:97.1728973,lat:37.4060097},rightTop:{lng:106.870407,lat:42.7955093}},{cityId:5,cityName:"阿勒泰地区",leftBottom:{lng:85.5280609,lat:45.0013466},rightTop:{lng:91.0756912,lat:49.1796417}},{cityId:6,cityName:"阿里地区",leftBottom:{lng:78.3958511,lat:29.6754494},rightTop:{lng:86.3286438,lat:35.8606606}},{cityId:7,cityName:"安康市",leftBottom:{lng:108.025841,lat:31.7050705},rightTop:{lng:110.206619,lat:33.8416901}},{cityId:8,cityName:"安庆市",leftBottom:{lng:115.762444,lat:29.7817001},rightTop:{lng:117.742203,lat:31.2683601}},{cityId:9,cityName:"鞍山市",leftBottom:{lng:122.187637,lat:40.0004501},rightTop:{lng:123.76844,lat:41.5684013}},{cityId:10,cityName:"安顺市",leftBottom:{lng:105.248627,lat:25.3531303},rightTop:{lng:106.571159,lat:26.6234398}},{cityId:11,cityName:"安阳市",leftBottom:{lng:113.633263,lat:35.2048492},rightTop:{lng:114.989021,lat:36.3664703}},{cityId:12,cityName:"澳門特別行政區",leftBottom:{lng:113.532799,lat:22.1022892},rightTop:{lng:113.610321,lat:22.2143898}},{cityId:13,cityName:"白城市",leftBottom:{lng:121.641777,lat:44.2273903},rightTop:{lng:124.369949,lat:46.3047295}},{cityId:14,cityName:"百色市",leftBottom:{lng:104.45018,lat:22.8547001},rightTop:{lng:107.88459,lat:25.0993195}},{cityId:15,cityName:"白沙黎族自治县",leftBottom:{lng:109.038727,lat:18.9357204},rightTop:{lng:109.701729,lat:19.4867706}},{cityId:16,cityName:"白山市",leftBottom:{lng:126.12088,lat:41.3637886},rightTop:{lng:128.31842,lat:42.8214684}},{cityId:17,cityName:"白银市",leftBottom:{lng:103.555313,lat:35.4118881},rightTop:{lng:105.524643,lat:37.6380882}},{cityId:18,cityName:"保定市",leftBottom:{lng:113.767166,lat:38.2375298},rightTop:{lng:116.335167,lat:39.95224}},{cityId:19,cityName:"宝鸡市",leftBottom:{lng:106.310501,lat:33.579361},rightTop:{lng:108.05732,lat:35.1055908}},{cityId:20,cityName:"保山市",leftBottom:{lng:98.0895004,lat:24.1221294},rightTop:{lng:100.047417,lat:25.8563404}},{cityId:21,cityName:"保亭黎族苗族自治县",leftBottom:{lng:109.405197,lat:18.3876495},rightTop:{lng:109.852119,lat:18.83354}},{cityId:22,cityName:"包头市",leftBottom:{lng:109.254807,lat:40.2477493},rightTop:{lng:111.445999,lat:42.7367783}},{cityId:23,cityName:"巴彦淖尔市",leftBottom:{lng:105.19912,lat:40.1707306},rightTop:{lng:109.904839,lat:42.4640388}},{cityId:24,cityName:"巴音郭楞蒙古自治州",leftBottom:{lng:82.4704132,lat:35.639389},rightTop:{lng:93.8679123,lat:43.5614319}},{cityId:25,cityName:"巴中市",leftBottom:{lng:106.36805,lat:31.25173},rightTop:{lng:107.761841,lat:32.7391319}},{cityId:26,cityName:"北海市",leftBottom:{lng:108.848152,lat:20.8681602},rightTop:{lng:109.792152,lat:21.9190407}},{cityId:27,cityName:"北京市",leftBottom:{lng:115.423866,lat:39.4396019},rightTop:{lng:117.506706,lat:41.0608292}},{cityId:28,cityName:"蚌埠市",leftBottom:{lng:116.73571,lat:32.7119484},rightTop:{lng:118.075287,lat:33.5029106}},{cityId:29,cityName:"本溪市",leftBottom:{lng:123.589394,lat:40.816349},rightTop:{lng:125.791267,lat:41.5696411}},{cityId:30,cityName:"毕节市",leftBottom:{lng:103.602074,lat:26.3577995},rightTop:{lng:106.726822,lat:27.7762299}},{cityId:31,cityName:"滨州市",leftBottom:{lng:117.264549,lat:36.6877708},rightTop:{lng:118.380569,lat:38.3085785}},{cityId:32,cityName:"博尔塔拉蒙古自治州",leftBottom:{lng:79.8846817,lat:44.004612},rightTop:{lng:83.8048172,lat:45.3883896}},{cityId:33,cityName:"亳州市",leftBottom:{lng:115.545723,lat:32.8593216},rightTop:{lng:116.832817,lat:34.0696716}},{cityId:34,cityName:"沧州市",leftBottom:{lng:115.702438,lat:37.4709206},rightTop:{lng:117.953407,lat:38.9453011}},{cityId:35,cityName:"长春市",leftBottom:{lng:124.543671,lat:43.2640915},rightTop:{lng:127.09449,lat:45.2520523}},{cityId:36,cityName:"常德市",leftBottom:{lng:110.491577,lat:28.4049091},rightTop:{lng:112.305939,lat:30.1263695}},{cityId:37,cityName:"昌都市",leftBottom:{lng:93.5946198,lat:28.4352398},rightTop:{lng:99.110817,lat:32.5928612}},{cityId:38,cityName:"昌江黎族自治县",leftBottom:{lng:108.600777,lat:18.8782406},rightTop:{lng:109.29821,lat:19.5490608}},{cityId:39,cityName:"昌吉回族自治州",leftBottom:{lng:85.5804825,lat:43.1013985},rightTop:{lng:91.5870132,lat:45.4880676}},{cityId:40,cityName:"长沙市",leftBottom:{lng:111.896248,lat:27.8480892},rightTop:{lng:114.261261,lat:28.6616306}},{cityId:41,cityName:"长治市",leftBottom:{lng:111.981598,lat:35.8231201},rightTop:{lng:113.739258,lat:37.1247711}},{cityId:42,cityName:"常州市",leftBottom:{lng:119.140572,lat:31.1525402},rightTop:{lng:120.201859,lat:32.0591393}},{cityId:43,cityName:"朝阳市",leftBottom:{lng:118.84597,lat:40.6007118},rightTop:{lng:121.300911,lat:42.3829689}},{cityId:44,cityName:"潮州市",leftBottom:{lng:116.36805,lat:23.4261494},rightTop:{lng:117.206261,lat:24.23279}},{cityId:45,cityName:"承德市",leftBottom:{lng:115.908173,lat:40.1918907},rightTop:{lng:119.25309,lat:42.6180382}},{cityId:46,cityName:"成都市",leftBottom:{lng:103.023376,lat:30.0939312},rightTop:{lng:104.892853,lat:31.4346695}},{cityId:47,cityName:"澄迈县",leftBottom:{lng:109.725159,lat:19.372879},rightTop:{lng:110.261864,lat:20.0893803}},{cityId:48,cityName:"郴州市",leftBottom:{lng:112.229713,lat:24.8905201},rightTop:{lng:114.237503,lat:26.8396797}},{cityId:49,cityName:"赤峰市",leftBottom:{lng:116.367401,lat:41.285511},rightTop:{lng:120.987038,lat:45.2432518}},{cityId:50,cityName:"池州市",leftBottom:{lng:116.648598,lat:29.5614605},rightTop:{lng:118.131439,lat:30.8452892}},{cityId:51,cityName:"重庆市",leftBottom:{lng:105.289787,lat:28.1602497},rightTop:{lng:110.200401,lat:32.2011986}},{cityId:52,cityName:"崇左市",leftBottom:{lng:106.56028,lat:21.594059},rightTop:{lng:108.112556,lat:23.3547306}},{cityId:53,cityName:"楚雄彝族自治州",leftBottom:{lng:100.721611,lat:24.2197895},rightTop:{lng:102.482277,lat:26.4988899}},{cityId:54,cityName:"滁州市",leftBottom:{lng:117.16095,lat:31.8509197},rightTop:{lng:119.22979,lat:33.216671}},{cityId:55,cityName:"大连市",leftBottom:{lng:120.920418,lat:38.250061},rightTop:{lng:123.534721,lat:40.2038498}},{cityId:56,cityName:"大理白族自治州",leftBottom:{lng:98.8642807,lat:24.6606007},rightTop:{lng:101.04641,lat:26.696579}},{cityId:57,cityName:"丹东市",leftBottom:{lng:117.608596,lat:36.843903},rightTop:{lng:137.14943,lat:43.72608}},{cityId:58,cityName:"儋州市",leftBottom:{lng:108.891983,lat:19.1788597},rightTop:{lng:109.766167,lat:19.9512997}},{cityId:59,cityName:"大庆市",leftBottom:{lng:123.755363,lat:45.3827896},rightTop:{lng:125.79126,lat:47.47612}},{cityId:60,cityName:"大同市",leftBottom:{lng:112.579514,lat:39.0481491},rightTop:{lng:114.562531,lat:40.7433701}},{cityId:61,cityName:"大兴安岭地区",leftBottom:{lng:121.182663,lat:50.9030266},rightTop:{lng:127.029572,lat:53.5634804}},{cityId:62,cityName:"达州市",leftBottom:{lng:106.6661,lat:30.3247604},rightTop:{lng:108.54673,lat:32.3382301}},{cityId:63,cityName:"德宏傣族景颇族自治州",leftBottom:{lng:97.5288391,lat:23.8391094},rightTop:{lng:98.7270432,lat:25.33605}},{cityId:64,cityName:"德阳市",leftBottom:{lng:103.795441,lat:30.5235405},rightTop:{lng:105.17466,lat:31.6984806}},{cityId:65,cityName:"德州市",leftBottom:{lng:115.75869,lat:36.4085388},rightTop:{lng:117.6073,lat:38.0099792}},{cityId:66,cityName:"定安县",leftBottom:{lng:110.123848,lat:19.2112808},rightTop:{lng:110.552711,lat:19.7281208}},{cityId:67,cityName:"定西市",leftBottom:{lng:103.467056,lat:34.1242905},rightTop:{lng:105.64782,lat:36.0434189}},{cityId:68,cityName:"迪庆藏族自治州",leftBottom:{lng:98.5940475,lat:26.8659992},rightTop:{lng:100.309219,lat:29.2484894}},{cityId:69,cityName:"东方市",leftBottom:{lng:108.572449,lat:18.7147293},rightTop:{lng:109.126282,lat:19.3674297}},{cityId:70,cityName:"东莞市",leftBottom:{lng:113.521858,lat:22.65555},rightTop:{lng:114.260269,lat:23.1431999}},{cityId:71,cityName:"东营市",leftBottom:{lng:118.105743,lat:36.9369011},rightTop:{lng:119.342072,lat:38.1630707}},{cityId:72,cityName:"鄂尔多斯市",leftBottom:{lng:106.475952,lat:37.6173286},rightTop:{lng:111.463211,lat:40.8837891}},{cityId:73,cityName:"恩施土家族苗族自治州",leftBottom:{lng:108.36776,lat:29.1143303},rightTop:{lng:110.642776,lat:31.3971806}},{cityId:74,cityName:"鄂州市",leftBottom:{lng:114.506058,lat:30.0165501},rightTop:{lng:115.091293,lat:30.6148701}},{cityId:75,cityName:"防城港市",leftBottom:{lng:107.48481,lat:21.4794598},rightTop:{lng:108.607368,lat:22.3736801}},{cityId:76,cityName:"佛山市",leftBottom:{lng:112.390572,lat:22.6437092},rightTop:{lng:113.391747,lat:23.5727692}},{cityId:77,cityName:"福州市",leftBottom:{lng:118.384598,lat:25.2075596},rightTop:{lng:120.532837,lat:26.6392307}},{cityId:78,cityName:"抚州市",leftBottom:{lng:115.591858,lat:26.4950104},rightTop:{lng:117.303299,lat:28.4933796}},{cityId:79,cityName:"抚顺市",leftBottom:{lng:123.669518,lat:41.2389412},rightTop:{lng:125.489891,lat:42.4778481}},{cityId:80,cityName:"阜新市",leftBottom:{lng:121.019867,lat:41.6928291},rightTop:{lng:122.976601,lat:42.8437309}},{cityId:81,cityName:"阜阳市",leftBottom:{lng:114.8825,lat:32.4035416},rightTop:{lng:116.635048,lat:33.5840912}},{cityId:82,cityName:"甘南藏族自治州",leftBottom:{lng:100.764427,lat:33.1030006},rightTop:{lng:104.76194,lat:35.5940895}},{cityId:83,cityName:"赣州市",leftBottom:{lng:113.913612,lat:24.4862404},rightTop:{lng:116.64431,lat:27.1436405}},{cityId:84,cityName:"甘孜藏族自治州",leftBottom:{lng:97.3528519,lat:27.9609203},rightTop:{lng:102.494583,lat:34.1957703}},{cityId:85,cityName:"广安市",leftBottom:{lng:105.947571,lat:30.0171814},rightTop:{lng:107.314011,lat:30.852869}},{cityId:86,cityName:"广元市",leftBottom:{lng:104.61628,lat:31.5252304},rightTop:{lng:106.766747,lat:32.9328995}},{cityId:87,cityName:"广州市",leftBottom:{lng:112.96196,lat:22.5145607},rightTop:{lng:114.059258,lat:23.9292698}},{cityId:88,cityName:"贵港市",leftBottom:{lng:109.20845,lat:22.6535206},rightTop:{lng:110.662659,lat:24.0421696}},{cityId:89,cityName:"桂林市",leftBottom:{lng:109.618279,lat:24.2535},rightTop:{lng:111.492561,lat:26.3854103}},{cityId:90,cityName:"贵阳市",leftBottom:{lng:106.124077,lat:26.1840305},rightTop:{lng:107.2798,lat:27.3553791}},{cityId:91,cityName:"果洛藏族自治州",leftBottom:{lng:96.9792175,lat:32.5127792},rightTop:{lng:101.778862,lat:35.5824699}},{cityId:92,cityName:"固原市",leftBottom:{lng:105.32505,lat:35.2382889},rightTop:{lng:106.958679,lat:36.5176315}},{cityId:93,cityName:"哈尔滨市",leftBottom:{lng:125.688599,lat:44.0616989},rightTop:{lng:130.240707,lat:46.6744576}},{cityId:94,cityName:"海北藏族自治州",leftBottom:{lng:98.0933533,lat:36.7344704},rightTop:{lng:102.642166,lat:39.090271}},{cityId:95,cityName:"海东市",leftBottom:{lng:101.666412,lat:35.4483185},rightTop:{lng:103.072693,lat:37.1489296}},{cityId:96,cityName:"海口市",leftBottom:{lng:110.069496,lat:19.5237503},rightTop:{lng:110.709084,lat:20.1800804}},{cityId:97,cityName:"海南藏族自治州",leftBottom:{lng:98.9322205,lat:34.6409912},rightTop:{lng:101.799133,lat:37.2373505}},{cityId:98,cityName:"海西蒙古族藏族自治州",leftBottom:{lng:89.6401367,lat:32.7208214},rightTop:{lng:99.78508,lat:39.2215195}},{cityId:99,cityName:"哈密地区",leftBottom:{lng:91.1776886,lat:40.7524414},rightTop:{lng:96.3890991,lat:45.0900536}},{cityId:100,cityName:"邯郸市",leftBottom:{lng:113.46228,lat:36.048851},rightTop:{lng:115.4841,lat:37.022171}},{cityId:101,cityName:"杭州市",leftBottom:{lng:118.344948,lat:29.1887302},rightTop:{lng:120.721947,lat:30.5664806}},{cityId:102,cityName:"汉中市",leftBottom:{lng:105.491577,lat:32.146019},rightTop:{lng:108.284073,lat:33.8785019}},{cityId:103,cityName:"鹤壁市",leftBottom:{lng:113.996048,lat:35.4426689},rightTop:{lng:114.758102,lat:36.0485992}},{cityId:104,cityName:"河池市",leftBottom:{lng:106.571083,lat:23.5531693},rightTop:{lng:109.161217,lat:25.6107407}},{cityId:105,cityName:"合肥市",leftBottom:{lng:116.687492,lat:30.9508095},rightTop:{lng:117.965851,lat:32.5360794}},{cityId:106,cityName:"鹤岗市",leftBottom:{lng:129.673492,lat:47.0608521},rightTop:{lng:132.524826,lat:48.3533325}},{cityId:107,cityName:"黑河市",leftBottom:{lng:124.74855,lat:47.5869026},rightTop:{lng:129.537567,lat:51.0035477}},{cityId:108,cityName:"衡水市",leftBottom:{lng:115.19146,lat:37.0597992},rightTop:{lng:116.56501,lat:38.3703995}},{cityId:109,cityName:"衡阳市",leftBottom:{lng:111.54361,lat:26.1142292},rightTop:{lng:113.283943,lat:27.4670391}},{cityId:110,cityName:"和田地区",leftBottom:{lng:77.4038315,lat:34.3325081},rightTop:{lng:84.9199219,lat:39.6336403}},{cityId:111,cityName:"河源市",leftBottom:{lng:114.241814,lat:23.1641808},rightTop:{lng:115.59301,lat:24.7810192}},{cityId:112,cityName:"菏泽市",leftBottom:{lng:114.823349,lat:34.5508614},rightTop:{lng:116.414032,lat:35.8635483}},{cityId:113,cityName:"贺州市",leftBottom:{lng:110.57074,lat:23.6517391},rightTop:{lng:112.061867,lat:25.1515808}},{cityId:114,cityName:"红河哈尼族彝族自治州",leftBottom:{lng:101.80204,lat:22.4412899},rightTop:{lng:104.282463,lat:24.7642708}},{cityId:115,cityName:"淮安市",leftBottom:{lng:118.21949,lat:32.7160492},rightTop:{lng:119.645187,lat:34.0930214}},{cityId:116,cityName:"淮北市",leftBottom:{lng:116.3937,lat:33.2784386},rightTop:{lng:117.058311,lat:34.2487183}},{cityId:117,cityName:"怀化市",leftBottom:{lng:108.790848,lat:25.8655605},rightTop:{lng:111.113068,lat:29.0210991}},{cityId:118,cityName:"淮南市",leftBottom:{lng:116.364891,lat:32.3860397},rightTop:{lng:117.215286,lat:33.003521}},{cityId:119,cityName:"黄冈市",leftBottom:{lng:114.402023,lat:29.7205601},rightTop:{lng:116.136841,lat:31.6047497}},{cityId:120,cityName:"黄南藏族自治州",leftBottom:{lng:100.68679,lat:34.0640984},rightTop:{lng:102.456642,lat:36.1696205}},{cityId:121,cityName:"黄山市",leftBottom:{lng:117.202583,lat:29.3929996},rightTop:{lng:118.902573,lat:30.5166492}},{cityId:122,cityName:"黄石市",leftBottom:{lng:114.531693,lat:29.5069904},rightTop:{lng:115.510941,lat:30.33041}},{cityId:123,cityName:"呼和浩特市",leftBottom:{lng:110.5187,lat:39.5889397},rightTop:{lng:112.30896,lat:41.3858604}},{cityId:124,cityName:"惠州市",leftBottom:{lng:113.812828,lat:22.3743896},rightTop:{lng:115.41877,lat:23.9594307}},{cityId:125,cityName:"葫芦岛市",leftBottom:{lng:119.216583,lat:39.954071},rightTop:{lng:121.101257,lat:41.2059708}},{cityId:126,cityName:"呼伦贝尔市",leftBottom:{lng:115.528923,lat:47.0968704},rightTop:{lng:126.07608,lat:53.3356628}},{cityId:127,cityName:"湖州市",leftBottom:{lng:119.236954,lat:30.3732891},rightTop:{lng:120.490501,lat:31.1787891}},{cityId:128,cityName:"佳木斯市",leftBottom:{lng:129.507706,lat:45.9452362},rightTop:{lng:135.09726,lat:48.4652023}},{cityId:129,cityName:"江门市",leftBottom:{lng:112.003487,lat:21.4434299},rightTop:{lng:113.263329,lat:22.8528194}},{cityId:130,cityName:"吉安市",leftBottom:{lng:113.834587,lat:25.9722195},rightTop:{lng:115.935379,lat:27.9613094}},{cityId:131,cityName:"焦作市",leftBottom:{lng:112.568733,lat:34.8115196},rightTop:{lng:113.646973,lat:35.4944992}},{cityId:132,cityName:"嘉兴市",leftBottom:{lng:120.295967,lat:30.2451706},rightTop:{lng:121.541481,lat:31.0303497}},{cityId:133,cityName:"嘉峪关市",leftBottom:{lng:97.8316422,lat:39.6320496},rightTop:{lng:98.5236893,lat:39.9784012}},{cityId:134,cityName:"揭阳市",leftBottom:{lng:115.61335,lat:22.8476601},rightTop:{lng:116.636101,lat:23.7733994}},{cityId:135,cityName:"吉林市",leftBottom:{lng:125.650551,lat:42.5628281},rightTop:{lng:128.017487,lat:44.6469116}},{cityId:136,cityName:"济南市",leftBottom:{lng:116.223824,lat:36.0293388},rightTop:{lng:117.747437,lat:37.5390282}},{cityId:137,cityName:"金昌市",leftBottom:{lng:101.41864,lat:38.0237007},rightTop:{lng:102.734329,lat:38.9994812}},{cityId:138,cityName:"晋城市",leftBottom:{lng:111.939537,lat:35.2033615},rightTop:{lng:113.625061,lat:36.0641708}},{cityId:139,cityName:"景德镇市",leftBottom:{lng:116.962708,lat:28.7178898},rightTop:{lng:117.71064,lat:29.9314899}},{cityId:140,cityName:"荆门市",leftBottom:{lng:111.860252,lat:30.3902397},rightTop:{lng:113.490494,lat:31.6106396}},{cityId:141,cityName:"荆州市",leftBottom:{lng:111.243797,lat:29.4276199},rightTop:{lng:114.091049,lat:30.6581097}},{cityId:142,cityName:"金华市",leftBottom:{lng:119.228706,lat:28.5226898},rightTop:{lng:120.783852,lat:29.6822205}},{cityId:143,cityName:"济宁市",leftBottom:{lng:115.866364,lat:34.4502602},rightTop:{lng:117.597542,lat:35.9813309}},{cityId:144,cityName:"晋中市",leftBottom:{lng:111.408463,lat:36.6441498},rightTop:{lng:114.139923,lat:38.0931816}},{cityId:145,cityName:"锦州市",leftBottom:{lng:120.717194,lat:40.7294807},rightTop:{lng:122.600273,lat:42.1297379}},{cityId:146,cityName:"九江市",leftBottom:{lng:113.942047,lat:28.6851692},rightTop:{lng:116.904037,lat:30.0746002}},{cityId:147,cityName:"酒泉市",leftBottom:{lng:92.3222809,lat:38.1041794},rightTop:{lng:100.20182,lat:42.7955093}},{cityId:148,cityName:"鸡西市",leftBottom:{lng:130.399857,lat:44.53383},rightTop:{lng:133.949524,lat:46.6113396}},{cityId:149,cityName:"济源市",leftBottom:{lng:112.036949,lat:34.8956909},rightTop:{lng:112.767319,lat:35.2798004}},{cityId:150,cityName:"开封市",leftBottom:{lng:113.877296,lat:34.1970482},rightTop:{lng:115.26548,lat:35.0226517}},{cityId:151,cityName:"喀什地区",leftBottom:{lng:74.4605026,lat:35.4513206},rightTop:{lng:79.8657608,lat:40.2581711}},{cityId:152,cityName:"克拉玛依市",leftBottom:{lng:84.5517731,lat:44.1077805},rightTop:{lng:86.036171,lat:46.2131767}},{cityId:153,cityName:"克孜勒苏柯尔克孜自治州",leftBottom:{lng:73.4909286,lat:37.6508789},rightTop:{lng:78.8792191,lat:41.3994408}},{cityId:154,cityName:"昆明市",leftBottom:{lng:102.168663,lat:24.38521},rightTop:{lng:103.673592,lat:26.5426903}},{cityId:155,cityName:"来宾市",leftBottom:{lng:108.418243,lat:23.2688408},rightTop:{lng:110.458473,lat:24.4675598}},{cityId:156,cityName:"莱芜市",leftBottom:{lng:117.331367,lat:35.9906311},rightTop:{lng:117.974678,lat:36.552948}},{cityId:157,cityName:"廊坊市",leftBottom:{lng:116.116913,lat:38.4735794},rightTop:{lng:117.260078,lat:40.0967293}},{cityId:158,cityName:"兰州市",leftBottom:{lng:102.600906,lat:35.5711288},rightTop:{lng:104.576378,lat:37.0364189}},{cityId:159,cityName:"拉萨市",leftBottom:{lng:89.7535477,lat:29.2380791},rightTop:{lng:92.6215668,lat:31.0558205}},{cityId:160,cityName:"乐东黎族自治县",leftBottom:{lng:108.64994,lat:18.2978306},rightTop:{lng:109.407997,lat:18.9620495}},{cityId:161,cityName:"乐山市",leftBottom:{lng:102.911041,lat:28.4202309},rightTop:{lng:104.252129,lat:29.9285908}},{cityId:162,cityName:"凉山彝族自治州",leftBottom:{lng:100.061317,lat:26.0457802},rightTop:{lng:103.877457,lat:29.3026409}},{cityId:163,cityName:"连云港市",leftBottom:{lng:118.408463,lat:33.979599},rightTop:{lng:119.850807,lat:35.1229095}},{cityId:164,cityName:"聊城市",leftBottom:{lng:115.282509,lat:35.7792015},rightTop:{lng:116.545616,lat:37.0232506}},{cityId:165,cityName:"辽阳市",leftBottom:{lng:122.590973,lat:40.7083397},rightTop:{lng:123.688843,lat:41.6118279}},{cityId:166,cityName:"辽源市",leftBottom:{lng:124.840012,lat:42.2995682},rightTop:{lng:125.843849,lat:43.2328987}},{cityId:167,cityName:"丽江市",leftBottom:{lng:99.3820267,lat:25.9848804},rightTop:{lng:101.51403,lat:27.9242191}},{cityId:168,cityName:"临沧市",leftBottom:{lng:98.6727905,lat:23.0779896},rightTop:{lng:100.547028,lat:25.0324001}},{cityId:169,cityName:"临汾市",leftBottom:{lng:110.374191,lat:35.3865089},rightTop:{lng:112.57444,lat:36.9346809}},{cityId:170,cityName:"临高县",leftBottom:{lng:109.49408,lat:19.5733795},rightTop:{lng:109.897087,lat:20.0396595}},{cityId:171,cityName:"陵水黎族自治县",leftBottom:{lng:109.755768,lat:18.2743607},rightTop:{lng:110.229263,lat:18.8091908}},{cityId:172,cityName:"临夏回族自治州",leftBottom:{lng:102.685997,lat:34.9414787},rightTop:{lng:103.858818,lat:36.2103004}},{cityId:173,cityName:"临沂市",leftBottom:{lng:117.418716,lat:34.3773499},rightTop:{lng:119.203239,lat:36.2068405}},{cityId:174,cityName:"林芝市",leftBottom:{lng:92.1635284,lat:27.5596104},rightTop:{lng:98.7536392,lat:30.6712303}},{cityId:175,cityName:"丽水市",leftBottom:{lng:118.699173,lat:27.4168701},rightTop:{lng:120.438812,lat:28.9501591}},{cityId:176,cityName:"六盘水市",leftBottom:{lng:104.308571,lat:25.3223705},rightTop:{lng:105.721603,lat:26.9198208}},{cityId:177,cityName:"柳州市",leftBottom:{lng:108.5877,lat:23.9060192},rightTop:{lng:110.177963,lat:26.0515099}},{cityId:178,cityName:"陇南市",leftBottom:{lng:104.023758,lat:32.5941086},rightTop:{lng:106.583961,lat:34.5327415}},{cityId:179,cityName:"龙岩市",leftBottom:{lng:115.853439,lat:24.3703594},rightTop:{lng:117.753151,lat:26.0330791}},{cityId:180,cityName:"娄底市",leftBottom:{lng:110.772034,lat:27.2053204},rightTop:{lng:112.524193,lat:28.2342796}},{cityId:181,cityName:"六安市",leftBottom:{lng:115.371033,lat:31.008419},rightTop:{lng:117.25489,lat:32.6611099}},{cityId:182,cityName:"漯河市",leftBottom:{lng:113.461662,lat:33.4047318},rightTop:{lng:114.29541,lat:33.9852104}},{cityId:183,cityName:"洛阳市",leftBottom:{lng:111.138443,lat:33.5629883},rightTop:{lng:112.984749,lat:35.0709305}},{cityId:184,cityName:"泸州市",leftBottom:{lng:105.145111,lat:27.6595192},rightTop:{lng:106.380608,lat:29.3267193}},{cityId:185,cityName:"吕梁市",leftBottom:{lng:110.375908,lat:36.7321091},rightTop:{lng:112.329323,lat:38.7314987}},{cityId:186,cityName:"马鞍山市",leftBottom:{lng:117.896248,lat:31.2918797},rightTop:{lng:118.888832,lat:32.0581093}},{cityId:187,cityName:"茂名市",leftBottom:{lng:110.325279,lat:21.3386803},rightTop:{lng:111.68351,lat:22.7048607}},{cityId:188,cityName:"眉山市",leftBottom:{lng:102.8526,lat:29.4004898},rightTop:{lng:104.503937,lat:30.3617306}},{cityId:189,cityName:"梅州市",leftBottom:{lng:115.315277,lat:23.3734493},rightTop:{lng:116.941513,lat:24.9373608}},{cityId:190,cityName:"绵阳市",leftBottom:{lng:103.748787,lat:30.7056789},rightTop:{lng:105.726219,lat:33.0419884}},{cityId:191,cityName:"牡丹江市",leftBottom:{lng:128.230911,lat:43.4264488},rightTop:{lng:131.322891,lat:45.9873085}},{cityId:192,cityName:"南昌市",leftBottom:{lng:115.438721,lat:28.1574993},rightTop:{lng:116.565491,lat:29.1733303}},{cityId:193,cityName:"南充市",leftBottom:{lng:105.444649,lat:30.4580097},rightTop:{lng:106.968391,lat:31.8483696}},{cityId:194,cityName:"南京市",leftBottom:{lng:118.362877,lat:31.2292004},rightTop:{lng:119.240486,lat:32.6129684}},{cityId:195,cityName:"南宁市",leftBottom:{lng:107.329353,lat:22.2025299},rightTop:{lng:109.620338,lat:24.0322609}},{cityId:196,cityName:"南平市",leftBottom:{lng:117.003418,lat:26.2546902},rightTop:{lng:119.275322,lat:28.3129005}},{cityId:197,cityName:"南通市",leftBottom:{lng:120.202339,lat:31.6141701},rightTop:{lng:121.999161,lat:32.7111397}},{cityId:198,cityName:"南阳市",leftBottom:{lng:110.982887,lat:32.26894},rightTop:{lng:113.814667,lat:33.80159}},{cityId:199,cityName:"那曲地区",leftBottom:{lng:85.0527191,lat:29.9365005},rightTop:{lng:95.0232468,lat:36.4849815}},{cityId:200,cityName:"内江市",leftBottom:{lng:104.269539,lat:29.1844292},rightTop:{lng:105.446068,lat:30.0394707}},{cityId:201,cityName:"宁波市",leftBottom:{lng:120.877373,lat:28.8407707},rightTop:{lng:122.309402,lat:30.4506607}},{cityId:202,cityName:"宁德市",leftBottom:{lng:118.548332,lat:26.2919006},rightTop:{lng:120.749741,lat:27.67519}},{cityId:203,cityName:"怒江傈僳族自治州",leftBottom:{lng:98.1321182,lat:25.5491695},rightTop:{lng:99.6433868,lat:28.3944302}},{cityId:204,cityName:"盘锦市",leftBottom:{lng:121.476044,lat:40.6391411},rightTop:{lng:122.42057,lat:41.4518394}},{cityId:205,cityName:"攀枝花市",leftBottom:{lng:101.138229,lat:26.0817795},rightTop:{lng:102.24749,lat:27.3427906}},{cityId:206,cityName:"平顶山市",leftBottom:{lng:112.249092,lat:33.1282196},rightTop:{lng:113.688469,lat:34.3456802}},{cityId:207,cityName:"平凉市",leftBottom:{lng:105.345482,lat:34.8834305},rightTop:{lng:107.86409,lat:35.7500687}},{cityId:208,cityName:"萍乡市",leftBottom:{lng:113.576149,lat:26.9584789},rightTop:{lng:114.275276,lat:28.0050907}},{cityId:209,cityName:"普洱市",leftBottom:{lng:99.1557236,lat:22.0240002},rightTop:{lng:102.323448,lat:24.8268108}},{cityId:210,cityName:"莆田市",leftBottom:{lng:118.452957,lat:24.9391499},rightTop:{lng:119.720039,lat:25.7518406}},{cityId:211,cityName:"濮阳市",leftBottom:{lng:114.874611,lat:35.3308716},rightTop:{lng:116.110443,lat:36.2104416}},{cityId:212,cityName:"黔东南苗族侗族自治州",leftBottom:{lng:107.298981,lat:25.3063107},rightTop:{lng:109.595367,lat:27.527689}},{cityId:213,cityName:"潜江市",leftBottom:{lng:112.502739,lat:30.0774097},rightTop:{lng:113.033577,lat:30.6462498}},{cityId:214,cityName:"黔南布依族苗族自治州",leftBottom:{lng:106.211052,lat:25.0581398},rightTop:{lng:108.30368,lat:27.4843292}},{cityId:215,cityName:"黔西南布依族苗族自治州",leftBottom:{lng:104.529549,lat:24.6183891},rightTop:{lng:106.531639,lat:26.1756592}},{cityId:216,cityName:"青岛市",leftBottom:{lng:119.513107,lat:35.5273285},rightTop:{lng:121.406502,lat:37.1468506}},{cityId:217,cityName:"庆阳市",leftBottom:{lng:106.362221,lat:35.2414398},rightTop:{lng:108.715538,lat:37.1590881}},{cityId:218,cityName:"清远市",leftBottom:{lng:111.927452,lat:23.4543591},rightTop:{lng:113.916321,lat:25.2019005}},{cityId:219,cityName:"秦皇岛市",leftBottom:{lng:118.568459,lat:39.4296112},rightTop:{lng:119.863167,lat:40.6130486}},{cityId:220,cityName:"钦州市",leftBottom:{lng:108.183693,lat:21.5037308},rightTop:{lng:109.870689,lat:22.6821098}},{cityId:221,cityName:"琼海市",leftBottom:{lng:110.120117,lat:18.9760704},rightTop:{lng:110.721657,lat:19.4722805}},{cityId:222,cityName:"琼中黎族苗族自治县",leftBottom:{lng:109.523941,lat:18.7276707},rightTop:{lng:110.158569,lat:19.4198208}},{cityId:223,cityName:"齐齐哈尔市",leftBottom:{lng:122.400597,lat:46.2237282},rightTop:{lng:126.675209,lat:48.9354706}},{cityId:224,cityName:"七台河市",leftBottom:{lng:130.104813,lat:45.5882797},rightTop:{lng:131.935455,lat:46.3353882}},{cityId:225,cityName:"泉州市",leftBottom:{lng:117.578499,lat:24.3017101},rightTop:{lng:119.06678,lat:25.9316406}},{cityId:226,cityName:"曲靖市",leftBottom:{lng:103.052559,lat:24.3475895},rightTop:{lng:104.828751,lat:27.0522289}},{cityId:227,cityName:"衢州市",leftBottom:{lng:118.028282,lat:28.23909},rightTop:{lng:119.346153,lat:29.4968891}},{cityId:228,cityName:"日喀则市",leftBottom:{lng:82.141983,lat:27.2101307},rightTop:{lng:90.3494492,lat:31.8070793}},{cityId:229,cityName:"日照市",leftBottom:{lng:118.601082,lat:34.9581299},rightTop:{lng:119.952026,lat:36.0414581}},{cityId:230,cityName:"三门峡市",leftBottom:{lng:110.359917,lat:33.5501289},rightTop:{lng:112.031097,lat:35.0837898}},{cityId:231,cityName:"三明市",leftBottom:{lng:116.383308,lat:25.4776897},rightTop:{lng:118.672607,lat:27.1298294}},{cityId:232,cityName:"三沙市",leftBottom:{lng:105.590164,lat:2},rightTop:{lng:125.76929,lat:28.130243}},{cityId:233,cityName:"三亚市",leftBottom:{lng:108.931976,lat:18.1160793},rightTop:{lng:109.810959,lat:18.6233902}},{cityId:234,cityName:"上海市",leftBottom:{lng:120.855919,lat:30.6703892},rightTop:{lng:121.999474,lat:31.8675308}},{cityId:235,cityName:"商洛市",leftBottom:{lng:108.575882,lat:33.0947304},rightTop:{lng:111.036926,lat:34.4323502}},{cityId:236,cityName:"商丘市",leftBottom:{lng:114.826897,lat:33.7067184},rightTop:{lng:116.65036,lat:34.8606682}},{cityId:237,cityName:"上饶市",leftBottom:{lng:116.235687,lat:27.8003101},rightTop:{lng:118.487686,lat:29.6993198}},{cityId:238,cityName:"山南地区",leftBottom:{lng:90.0673676,lat:26.8494492},rightTop:{lng:94.3594894,lat:29.8240604}},{cityId:239,cityName:"汕头市",leftBottom:{lng:116.25029,lat:23.0408096},rightTop:{lng:117.359306,lat:23.6460304}},{cityId:240,cityName:"汕尾市",leftBottom:{lng:114.918297,lat:22.6116199},rightTop:{lng:116.227768,lat:23.4721298}},{cityId:241,cityName:"韶关市",leftBottom:{lng:112.852386,lat:23.8879204},rightTop:{lng:114.745323,lat:25.5167599}},{cityId:242,cityName:"绍兴市",leftBottom:{lng:119.888496,lat:29.2250595},rightTop:{lng:121.231552,lat:30.2862892}},{cityId:243,cityName:"邵阳市",leftBottom:{lng:109.822113,lat:25.962019},rightTop:{lng:112.091141,lat:27.6624203}},{cityId:244,cityName:"神农架林区",leftBottom:{lng:109.939919,lat:31.2963295},rightTop:{lng:110.982727,lat:31.8611107}},{cityId:245,cityName:"沈阳市",leftBottom:{lng:122.425743,lat:41.1994896},rightTop:{lng:123.813599,lat:43.0429192}},{cityId:246,cityName:"深圳市",leftBottom:{lng:113.676979,lat:22.2339993},rightTop:{lng:114.652138,lat:22.8514996}},{cityId:247,cityName:"石河子市",leftBottom:{lng:85.9007874,lat:44.1234818},rightTop:{lng:86.170639,lat:44.4628601}},{cityId:248,cityName:"石家庄市",leftBottom:{lng:113.522743,lat:37.4392509},rightTop:{lng:115.483467,lat:38.7645683}},{cityId:249,cityName:"十堰市",leftBottom:{lng:109.43557,lat:31.5059605},rightTop:{lng:111.585602,lat:33.271431}},{cityId:250,cityName:"石嘴山市",leftBottom:{lng:105.986122,lat:38.616909},rightTop:{lng:106.988083,lat:39.3917503}},{cityId:251,cityName:"双鸭山市",leftBottom:{lng:130.666473,lat:45.7880974},rightTop:{lng:134.347366,lat:47.5725212}},{cityId:252,cityName:"朔州市",leftBottom:{lng:111.898064,lat:39.0895805},rightTop:{lng:113.572723,lat:40.2991905}},{cityId:253,cityName:"四平市",leftBottom:{lng:123.305931,lat:42.8219604},rightTop:{lng:125.784317,lat:44.1563187}},{cityId:254,cityName:"松原市",leftBottom:{lng:123.109871,lat:43.9916496},rightTop:{lng:126.194168,lat:45.5417976}},{cityId:255,cityName:"苏州市",leftBottom:{lng:119.918633,lat:30.7580795},rightTop:{lng:121.386993,lat:32.0347214}},{cityId:256,cityName:"宿州市",leftBottom:{lng:116.159286,lat:33.2740517},rightTop:{lng:118.187599,lat:34.6508217}},{cityId:257,cityName:"绥化市",leftBottom:{lng:124.873772,lat:45.5043678},rightTop:{lng:128.555862,lat:48.0974007}},{cityId:258,cityName:"遂宁市",leftBottom:{lng:105.059341,lat:30.1749001},rightTop:{lng:106.001053,lat:31.1609001}},{cityId:259,cityName:"随州市",leftBottom:{lng:112.727821,lat:31.32621},rightTop:{lng:114.13459,lat:32.4321213}},{cityId:260,cityName:"宿迁市",leftBottom:{lng:117.940071,lat:33.13694},rightTop:{lng:119.1763,lat:34.4222298}},{cityId:261,cityName:"塔城地区",leftBottom:{lng:82.2501907,lat:43.4809608},rightTop:{lng:87.3363266,lat:47.2344589}},{cityId:262,cityName:"台州市",leftBottom:{lng:120.289917,lat:28.0003605},rightTop:{lng:121.979637,lat:29.3401108}},{cityId:263,cityName:"泰州市",leftBottom:{lng:119.646523,lat:31.9272804},rightTop:{lng:120.559113,lat:33.2190819}},{cityId:264,cityName:"泰安市",leftBottom:{lng:116.048439,lat:35.6303978},rightTop:{lng:118.002647,lat:36.4768715}},{cityId:265,cityName:"太原市",leftBottom:{lng:111.51593,lat:37.4562302},rightTop:{lng:113.156342,lat:38.4213486}},{cityId:266,cityName:"唐山市",leftBottom:{lng:117.512032,lat:38.900631},rightTop:{lng:119.448532,lat:40.4650192}},{cityId:267,cityName:"天津市",leftBottom:{lng:116.707947,lat:38.555481},rightTop:{lng:118.06942,lat:40.2532692}},{cityId:268,cityName:"天门市",leftBottom:{lng:112.592613,lat:30.3778706},rightTop:{lng:113.467369,lat:30.9039803}},{cityId:269,cityName:"天水市",leftBottom:{lng:104.577477,lat:34.0765991},rightTop:{lng:106.714996,lat:35.1779099}},{cityId:270,cityName:"铁岭市",leftBottom:{lng:123.452957,lat:41.9868889},rightTop:{lng:125.109543,lat:43.4924316}},{cityId:271,cityName:"铜川市",leftBottom:{lng:108.583549,lat:34.8046417},rightTop:{lng:109.496582,lat:35.5810814}},{cityId:272,cityName:"通化市",leftBottom:{lng:125.264076,lat:40.8618813},rightTop:{lng:126.754272,lat:43.0220795}},{cityId:273,cityName:"通辽市",leftBottom:{lng:119.238251,lat:42.2457581},rightTop:{lng:123.720779,lat:45.6865997}},{cityId:274,cityName:"铜陵市",leftBottom:{lng:117.249451,lat:30.4141502},rightTop:{lng:118.165527,lat:31.1289902}},{cityId:275,cityName:"铜仁市",leftBottom:{lng:107.753067,lat:27.1212196},rightTop:{lng:109.474548,lat:29.0864506}},{cityId:276,cityName:"吐鲁番市",leftBottom:{lng:87.2599487,lat:41.1891403},rightTop:{lng:91.9163666,lat:43.6343918}},{cityId:277,cityName:"图木舒克市",leftBottom:{lng:78.6532364,lat:39.6160011},rightTop:{lng:79.6058426,lat:40.1293716}},{cityId:278,cityName:"屯昌县",leftBottom:{lng:109.821892,lat:19.1306705},rightTop:{lng:110.252731,lat:19.5927391}},{cityId:279,cityName:"万宁市",leftBottom:{lng:110.012733,lat:18.5727806},rightTop:{lng:110.614479,lat:19.1047993}},{cityId:280,cityName:"潍坊市",leftBottom:{lng:118.175079,lat:35.7119408},rightTop:{lng:120.011307,lat:37.3332787}},{cityId:281,cityName:"威海市",leftBottom:{lng:121.176933,lat:36.6739082},rightTop:{lng:122.726158,lat:38.2525711}},{cityId:282,cityName:"渭南市",leftBottom:{lng:108.9645,lat:34.20961},rightTop:{lng:110.606941,lat:35.8539581}},{cityId:283,cityName:"文昌市",leftBottom:{lng:110.462769,lat:19.3158607},rightTop:{lng:111.31723,lat:20.2484207}},{cityId:284,cityName:"文山壮族苗族自治州",leftBottom:{lng:103.574097,lat:22.6856899},rightTop:{lng:106.200073,lat:24.4594593}},{cityId:285,cityName:"温州市",leftBottom:{lng:119.625343,lat:27.0132389},rightTop:{lng:121.372627,lat:28.6110497}},{cityId:286,cityName:"乌海市",leftBottom:{lng:106.59095,lat:39.0368309},rightTop:{lng:107.181061,lat:39.9054604}},{cityId:287,cityName:"武汉市",leftBottom:{lng:113.700409,lat:29.9666405},rightTop:{lng:115.080811,lat:31.3612499}},{cityId:288,cityName:"芜湖市",leftBottom:{lng:117.48262,lat:30.6380501},rightTop:{lng:118.73336,lat:31.5359898}},{cityId:289,cityName:"五家渠市",leftBottom:{lng:87.3679199,lat:44.0043602},rightTop:{lng:87.7174988,lat:44.5968704}},{cityId:290,cityName:"乌兰察布市",leftBottom:{lng:110.337868,lat:40.1639404},rightTop:{lng:114.81105,lat:43.379879}},{cityId:291,cityName:"乌鲁木齐市",leftBottom:{lng:86.7889175,lat:42.9170418},rightTop:{lng:88.9795074,lat:45.0016747}},{cityId:292,cityName:"武威市",leftBottom:{lng:101.830902,lat:36.7551613},rightTop:{lng:104.207367,lat:39.4612999}},{cityId:293,cityName:"无锡市",leftBottom:{lng:119.519676,lat:31.1206703},rightTop:{lng:120.604446,lat:31.9852009}},{cityId:294,cityName:"五指山市",leftBottom:{lng:109.323799,lat:18.6266804},rightTop:{lng:109.732292,lat:19.0324993}},{cityId:295,cityName:"吴忠市",leftBottom:{lng:105.571373,lat:36.572319},rightTop:{lng:107.657066,lat:38.2624283}},{cityId:296,cityName:"梧州市",leftBottom:{lng:110.325142,lat:22.6071396},rightTop:{lng:111.667213,lat:24.4049206}},{cityId:297,cityName:"厦门市",leftBottom:{lng:117.886009,lat:24.3841305},rightTop:{lng:118.453987,lat:24.9073391}},{cityId:298,cityName:"香港特別行政區",leftBottom:{lng:113.616013,lat:22.0750065},rightTop:{lng:114.50898,lat:22.5916195}},{cityId:299,cityName:"湘潭市",leftBottom:{lng:111.99971,lat:27.3380604},rightTop:{lng:113.091919,lat:28.0735798}},{cityId:300,cityName:"湘西土家族苗族自治州",leftBottom:{lng:109.186653,lat:27.7199993},rightTop:{lng:110.391006,lat:29.6338406}},{cityId:301,cityName:"襄阳市",leftBottom:{lng:110.764,lat:31.2297993},rightTop:{lng:113.118736,lat:32.6276398}},{cityId:302,cityName:"咸宁市",leftBottom:{lng:113.537819,lat:29.0294895},rightTop:{lng:114.973717,lat:30.2978191}},{cityId:303,cityName:"西安市",leftBottom:{lng:107.62751,lat:33.693882},rightTop:{lng:109.822456,lat:34.74366}},{cityId:304,cityName:"仙桃市",leftBottom:{lng:112.940979,lat:30.0696602},rightTop:{lng:113.824944,lat:30.5324593}},{cityId:305,cityName:"咸阳市",leftBottom:{lng:107.651894,lat:34.1955299},rightTop:{lng:109.178223,lat:35.544239}},{cityId:306,cityName:"孝感市",leftBottom:{lng:113.316689,lat:30.3799992},rightTop:{lng:114.591988,lat:31.853899}},{cityId:307,cityName:"锡林郭勒盟",leftBottom:{lng:111.154129,lat:41.575779},rightTop:{lng:120.123337,lat:46.77705}},{cityId:308,cityName:"兴安盟",leftBottom:{lng:119.482262,lat:44.2563591},rightTop:{lng:123.643593,lat:47.6574402}},{cityId:309,cityName:"邢台市",leftBottom:{lng:113.760094,lat:36.7540207},rightTop:{lng:115.852943,lat:37.8066902}},{cityId:310,cityName:"西宁市",leftBottom:{lng:100.90403,lat:36.2311096},rightTop:{lng:101.91449,lat:37.4052696}},{cityId:311,cityName:"新乡市",leftBottom:{lng:113.382111,lat:34.8777008},rightTop:{lng:115.018753,lat:35.839138}},{cityId:312,cityName:"信阳市",leftBottom:{lng:113.710114,lat:31.3823605},rightTop:{lng:115.943787,lat:32.6597099}},{cityId:313,cityName:"新余市",leftBottom:{lng:114.485558,lat:27.53022},rightTop:{lng:115.406487,lat:28.1076393}},{cityId:314,cityName:"忻州市",leftBottom:{lng:110.944801,lat:38.1324005},rightTop:{lng:113.967003,lat:39.6637001}},{cityId:315,cityName:"西双版纳傣族自治州",leftBottom:{lng:99.9450912,lat:21.1399498},rightTop:{lng:101.844193,lat:22.5901508}},{cityId:316,cityName:"宣城市",leftBottom:{lng:117.970444,lat:29.9435902},rightTop:{lng:119.649498,lat:31.3047504}},{cityId:317,cityName:"许昌市",leftBottom:{lng:113.065529,lat:33.6887512},rightTop:{lng:114.324966,lat:34.4069214}},{cityId:318,cityName:"徐州市",leftBottom:{lng:116.361816,lat:33.7185211},rightTop:{lng:118.674423,lat:34.9399414}},{cityId:319,cityName:"雅安市",leftBottom:{lng:101.936493,lat:28.8487797},rightTop:{lng:103.395248,lat:30.9384594}},{cityId:320,cityName:"延安市",leftBottom:{lng:107.659721,lat:35.3443909},rightTop:{lng:110.552528,lat:37.5010109}},{cityId:321,cityName:"延边朝鲜族自治州",leftBottom:{lng:127.46888,lat:41.9987984},rightTop:{lng:131.319122,lat:44.5139198}},{cityId:322,cityName:"盐城市",leftBottom:{lng:119.459297,lat:32.5754509},rightTop:{lng:120.994926,lat:34.5445213}},{cityId:323,cityName:"阳江市",leftBottom:{lng:111.282082,lat:21.4660397},rightTop:{lng:112.369362,lat:22.6784}},{cityId:324,cityName:"阳泉市",leftBottom:{lng:112.919868,lat:37.6619492},rightTop:{lng:114.044571,lat:38.5243607}},{cityId:325,cityName:"扬州市",leftBottom:{lng:119.016487,lat:32.2179298},rightTop:{lng:119.911797,lat:33.4158211}},{cityId:326,cityName:"烟台市",leftBottom:{lng:119.553398,lat:36.559639},rightTop:{lng:122.03804,lat:38.6573601}},{cityId:327,cityName:"宜春市",leftBottom:{lng:113.889679,lat:27.5454998},rightTop:{lng:116.149887,lat:29.0996895}},{cityId:328,cityName:"伊春市",leftBottom:{lng:127.631432,lat:46.4828873},rightTop:{lng:130.777573,lat:49.441349}},{cityId:329,cityName:"宜宾市",leftBottom:{lng:103.611809,lat:27.8405991},rightTop:{lng:105.355797,lat:29.2660408}},{cityId:330,cityName:"宜昌市",leftBottom:{lng:110.255661,lat:29.9457092},rightTop:{lng:112.084328,lat:31.5735302}},{cityId:331,cityName:"伊犁哈萨克自治州",leftBottom:{lng:80.1640167,lat:42.258461},rightTop:{lng:85.2510071,lat:44.8430405}},{cityId:332,cityName:"银川市",leftBottom:{lng:105.838699,lat:37.6021194},rightTop:{lng:106.87043,lat:38.8690491}},{cityId:333,cityName:"营口市",leftBottom:{lng:121.859306,lat:39.9198418},rightTop:{lng:123.007309,lat:40.9410782}},{cityId:334,cityName:"鹰潭市",leftBottom:{lng:116.692207,lat:27.84659},rightTop:{lng:117.472794,lat:28.6279202}},{cityId:335,cityName:"益阳市",leftBottom:{lng:110.721138,lat:27.9746494},rightTop:{lng:112.950127,lat:29.5243607}},{cityId:336,cityName:"永州市",leftBottom:{lng:110.9515,lat:24.6363602},rightTop:{lng:112.457367,lat:26.8679295}},{cityId:337,cityName:"榆林市",leftBottom:{lng:107.263802,lat:36.8189201},rightTop:{lng:111.246147,lat:39.5869904}},{cityId:338,cityName:"玉林市",leftBottom:{lng:109.541069,lat:21.6341991},rightTop:{lng:110.898888,lat:23.1247902}},{cityId:339,cityName:"岳阳市",leftBottom:{lng:112.315292,lat:28.4218502},rightTop:{lng:114.15712,lat:29.8472996}},{cityId:340,cityName:"运城市",leftBottom:{lng:110.219887,lat:34.5842896},rightTop:{lng:112.081917,lat:35.8212814}},{cityId:341,cityName:"云浮市",leftBottom:{lng:111.056427,lat:22.3756905},rightTop:{lng:112.521652,lat:23.3238392}},{cityId:342,cityName:"玉树藏族自治州",leftBottom:{lng:89.4090881,lat:31.6002407},rightTop:{lng:97.776123,lat:36.2771111}},{cityId:343,cityName:"玉溪市",leftBottom:{lng:101.276817,lat:23.3137798},rightTop:{lng:103.153099,lat:24.9523697}},{cityId:344,cityName:"枣庄市",leftBottom:{lng:116.811401,lat:34.4612503},rightTop:{lng:117.832039,lat:35.3204498}},{cityId:345,cityName:"张家界市",leftBottom:{lng:109.693748,lat:28.8672409},rightTop:{lng:111.337532,lat:29.7908993}},{cityId:346,cityName:"张家口市",leftBottom:{lng:113.825562,lat:39.5560112},rightTop:{lng:116.465561,lat:42.1491394}},{cityId:347,cityName:"张掖市",leftBottom:{lng:97.3878403,lat:37.6070404},rightTop:{lng:102.215363,lat:39.8840218}},{cityId:348,cityName:"漳州市",leftBottom:{lng:116.899567,lat:23.5487995},rightTop:{lng:118.24514,lat:25.1944695}},{cityId:349,cityName:"湛江市",leftBottom:{lng:109.628792,lat:20.0595989},rightTop:{lng:111.081047,lat:21.9182796}},{cityId:350,cityName:"肇庆市",leftBottom:{lng:111.361977,lat:22.7697697},rightTop:{lng:112.88179,lat:24.3998203}},{cityId:351,cityName:"昭通市",leftBottom:{lng:102.87149,lat:26.5343094},rightTop:{lng:105.316383,lat:28.6684303}},{cityId:352,cityName:"郑州市",leftBottom:{lng:112.721176,lat:34.2621002},rightTop:{lng:114.22319,lat:34.9885406}},{cityId:353,cityName:"镇江市",leftBottom:{lng:118.969482,lat:31.6252193},rightTop:{lng:119.981506,lat:32.3162003}},{cityId:354,cityName:"中山市",leftBottom:{lng:113.158546,lat:22.2039089},rightTop:{lng:113.693253,lat:22.7772007}},{cityId:355,cityName:"中卫市",leftBottom:{lng:104.293633,lat:36.1216583},rightTop:{lng:106.459618,lat:37.7277107}},{cityId:356,cityName:"周口市",leftBottom:{lng:114.091621,lat:33.0526619},rightTop:{lng:115.653214,lat:34.3372002}},{cityId:357,cityName:"舟山市",leftBottom:{lng:121.521332,lat:29.545639},rightTop:{lng:122.992256,lat:30.9029293}},{cityId:358,cityName:"珠海市",leftBottom:{lng:113.059349,lat:21.7801895},rightTop:{lng:114.411263,lat:22.4543991}},{cityId:359,cityName:"驻马店市",leftBottom:{lng:113.097687,lat:32.2771912},rightTop:{lng:115.219704,lat:33.5306091}},{cityId:360,cityName:"株洲市",leftBottom:{lng:112.966667,lat:26.0451908},rightTop:{lng:114.106934,lat:28.0290203}},{cityId:361,cityName:"淄博市",leftBottom:{lng:117.545601,lat:35.9234695},rightTop:{lng:118.520798,lat:37.2891502}},{cityId:362,cityName:"自贡市",leftBottom:{lng:104.052917,lat:28.9241199},rightTop:{lng:105.270042,lat:29.6372604}},{cityId:363,cityName:"资阳市",leftBottom:{lng:104.192131,lat:29.6740208},rightTop:{lng:105.753868,lat:30.6436806}},{cityId:364,cityName:"遵义市",leftBottom:{lng:105.608841,lat:27.1325493},rightTop:{lng:108.21476,lat:29.2213001}},{cityId:365,cityName:"taiwan",leftBottom:{lng:119.198798,lat:21.835159},rightTop:{lng:122.331982,lat:25.72666}}];e.default=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){var i=function(e){var n=t.styles[e.styleId];return n?(0,d.default)({},{text:e.content||S.text,color:n.color||S.color,size:n.size||S.size,scale:n.scale||S.scale,offset:n.offset||S.offset,angle:n.angle||S.angle,alignment:x[n.alignment]||x[S.alignment],verticalAlignment:b[n.verticalAlignment]||b[S.verticalAlignment]}):(0,d.default)({},S,{color:"rgba(0, 0, 0, 0)"})},o={};t.geometries.forEach(function(t){var e=i(t),n=e.text;n&&(0,c.default)(n).forEach(function(t){o[t]=1})});var l=(0,s.default)(o);e.send("addGlyphs",{glyphs:l},function(e,o){var l=JSON.parse(o.mapping),s=r(t.geometries,l,i),u=a(s,l,i);n&&n(u)})}function r(t,e,n){var i=[];return t.forEach(function(t,o){if(t.position){var r=n(t),a=r.text;if(a){var l=(0,c.default)(a),s=[0],u=0;l.forEach(function(n,r){var l={letter:n,index:r,offsets:s,len:a.length,geometry:t,geometryIndex:o},c=e[n];u+=c?c.width:y,s.push(u),i.push(l)})}}}),i}function a(t,e,n){var i=t.length,o=new Float32Array(3*i),r=new Float32Array(2*i),a=new Uint16Array(2*i),l=new Float32Array(4*i),s=new Uint16Array(4*i),u=new Uint8ClampedArray(4*i),c=new Uint8ClampedArray(i),f=new Uint8ClampedArray(3*i),d=new Float32Array(3*i),p=0,_=0,g=0,y=0,x=0,b=0,S=0,w=0,E=0,T=[];return t.forEach(function(t){var i=n(t.geometry),I=e[t.letter],A=new m.default(i.color).toUpArray(),k=t.geometry.position,P="lat"in k&&"lng"in k,M=(0,h.splitLatLngNumber)(k.lng||0),L=(0,h.splitLatLngNumber)(k.lat||0);o[p]=M.high,p+=1,o[p]=L.high,p+=1,o[p]=0,p+=1,r[_]=M.low,_+=1,r[_]=L.low,_+=1,a[g]=i.size,g+=1,a[g]=i.size,g+=1;var C=t.offsets[t.offsets.length-1],N=t.offsets[t.index];l[y]=(i.alignment-1)*C/2+I.width/2+N||0,y+=1,l[y]=I.height/2*i.verticalAlignment||0,y+=1,l[y]=i.angle,y+=1,l[y]=1,y+=1,s[x]=I.x||0,x+=1,s[x]=I.y||0,x+=1,s[x]=I.width||0,x+=1,s[x]=I.height||0,x+=1,u[b]=P?A[0]:0,b+=1,u[b]=P?A[1]:0,b+=1,u[b]=P?A[2]:0,b+=1,u[b]=P?A[3]:0,b+=1,c[S]=1,S+=1;var O=(0,v.encodePickingColor)(t.geometryIndex);f[w]=P?O[0]:0,w+=1,f[w]=P?O[1]:0,w+=1,f[w]=P?O[2]:0,w+=1,d[E]=i.offset.x,E+=1,d[E]=i.offset.y,E+=1,d[E]=1,E+=1;var R=t.geometryIndex;if(T[R])T[R].lettersCount+=1,T[R].widthSum+=I.width;else{var V=t.geometry;T[R]={geometryIndex:R,geometry:V,style:i,lettersCount:1,fontSize:I.fontSize,widthSum:I.width}}}),{count:i,instancePositionList:o,instancePosition64xyLowList:r,instanceSizeList:a,instanceInfoList:l,instanceFrameList:s,instanceColorList:u,instanceShowList:c,instancePickingColorList:f,instancePixelOffsetList:d,labelInfoList:T}}Object.defineProperty(e,"__esModule",{value:!0});var l=n(16),s=i(l),u=n(86),c=i(u),f=n(14),d=i(f),h=n(104),v=n(234),p=n(233),m=i(p),_=n(313),g=i(_),y=32,x={left:1,center:0,right:-1},b={top:1,middle:0,bottom:-1},S=new g.default;S.text="",e.default=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){var i=function(e){var n=t.styles[e.styleId];return n?(0,u.default)({},{src:n.src||d.src,width:n.width||d.width,height:n.height||d.height,anchor:n.anchor||d.anchor,rotate:n.rotate||d.rotate,offset:n.offset||d.offset,opacity:"opacity"in n?n.opacity:d.opacity,faceTo:"faceTo"in n?n.faceTo:d.faceTo}):(0,u.default)({},d)},o=[];(0,l.default)(t.styles).forEach(function(e){t.styles[e].src&&o.push(t.styles[e].src)}),e.send("addMarkers",{markerSrcs:o},function(e,o){var a=JSON.parse(o.mapping),l=r(t.geometries,a,i);n&&n(l)})}function r(t,e,n){var i=t.length,o=new Float32Array(3*i),r=new Float32Array(2*i),a=new Uint16Array(2*i),l=new Float32Array(4*i),s=new Uint16Array(4*i),u=new Uint8ClampedArray(3*i),d=new Float32Array(3*i),h=0,v=0,p=0,m=0,_=0,g=0,y=0;return t.forEach(function(t,i){var x=n(t),b=e[x.src],S=t.position,w=(0,c.splitLatLngNumber)(S.lng),E=(0,c.splitLatLngNumber)(S.lat);o[h]=w.high,h+=1,o[h]=E.high,h+=1,o[h]=0,h+=1,r[v]=w.low,v+=1,r[v]=E.low,v+=1,a[p]=parseInt(x.width,10),p+=1,a[p]=parseInt(x.height,10),p+=1,l[m]=x.width/2-x.anchor.x||0,m+=1,l[m]=x.height/2-x.anchor.y||0,m+=1,l[m]=t.properties&&"$angle"in t.properties?t.properties.$angle:x.rotate,m+=1,l[m]=x.faceTo,m+=1,s[_]=b&&b.x||0,_+=1,s[_]=b&&b.y||0,_+=1,s[_]=b&&b.width||0,_+=1,s[_]=b&&b.height||0,_+=1;var T=(0,f.encodePickingColor)(i);u[g]=T[0],g+=1,u[g]=T[1],g+=1,u[g]=T[2],g+=1,d[y]=x.offset.x,y+=1,d[y]=x.offset.y,y+=1,d[y]=x.opacity,y+=1}),{count:i,instancePositionList:o,instancePosition64xyLowList:r,instanceSizeList:a,instanceInfoList:l,instanceFrameList:s,instancePickingColorList:u,instancePixelOffsetList:d}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(16),l=i(a),s=n(14),u=i(s),c=n(104),f=n(234),d={src:"",width:32,height:32,anchor:{x:0,y:0},rotate:0,offset:{x:0,y:0},opacity:1,faceTo:1};e.default=o},function(t,e,n){"use strict";function i(t){var e=t.geometries.map(function(t){return t.paths||[]}),n=new o.PolygonParseHelper({complexPolygons:e,IndexType:Uint32Array});n.updatePositions({fp64:!0});var i=n.getPositions();return{indices:n.getIndices(),positions:i,positions64xyLow:n.getPositions64xyLow()}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(380);e.default=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return new h.default(t).toUpArray()}function r(t){var e=function(e){var n=t.styles[e]||_,i=o(n.color),r=o(n.borderColor);return{color:i.slice(0,3),borderColor:r.slice(0,3),width:n.width,borderWidth:n.borderWidth?2*n.borderWidth+n.width:0,opacity:i[3],borderOpacity:r[3],lineCap:n.lineCap||0,dashArray:n.dashArray,arrowInfo:n.arrowInfo}};t.geometries.forEach(function(t){var e=t.rainbowPaths;if(e&&e.length>0){var n=[],i=[],o=!0,r=!1,a=void 0;try{for(var s,c=(0,u.default)(e.entries());!(o=(s=c.next()).done);o=!0){var f=(0,l.default)(s.value,2),d=f[0],h=f[1];if(d>0){var p=e[d-1].path,m=p[p.length-1],_=h.path[0];if(m.lat===_.lat&&m.lng===_.lng){var g=(0,v.deduplicatePoint)(h.path.slice(1));n[n.length-1]=n[n.length-1].concat(g);var y=i[i.length-1],x=y[y.length-1].end;y.push({color:h.color,borderColor:h.borderColor,start:x,end:n[n.length-1].length-1})}else n.push((0,v.deduplicatePoint)(h.path)),i.push([{color:h.color,borderColor:h.borderColor,start:0,end:h.path.length-1}])}else n.push((0,v.deduplicatePoint)(h.path)),i.push([{color:h.color,borderColor:h.borderColor,start:0,end:h.path.length-1}])}}catch(t){r=!0,a=t}finally{try{!o&&c.return&&c.return()}finally{if(r)throw a}}t.paths=n,t.styleIdList=i}else t.paths=(0,v.normalize)(t.paths)});var n=t.geometries.reduce(function(t,e){return t+e.paths.reduce(function(t,e){return t+e.length-1},0)},0),i=new Float32Array(3*n),r=new Float32Array(3*n),a=new Float32Array(3*n),s=new Float32Array(3*n),d=new Float32Array(4*n),h=new Uint8ClampedArray(4*n),p=new Uint8ClampedArray(4*n),m=new Uint8ClampedArray(3*n),g=new Float32Array(1*n),y=new Float32Array(1*n),x=new Uint8ClampedArray(3*n),b=new Uint8ClampedArray(4*n),S=0,w=0,E=0,T=0,I=0,A=0,k=0,P=0,M=0,L=0;return t.geometries.forEach(function(t,n){var l=e(t.styleId),u=l.color,v=l.opacity,_=l.borderColor,C=l.borderOpacity;t.paths.forEach(function(e,N){for(var O=e[0],R=0;R<e.length;R++)!function(R){if(t.rainbowPaths){var V=t.styleIdList[N].find(function(t){return R>=t.start&&R<=t.end});if(V.color){var B=o(V.color);l.color=B.slice(0,3),l.opacity=B[3]}else l.color=u,l.opacity=v;if(V.borderColor){var F=o(V.borderColor);l.borderColor=F.slice(0,3),l.borderOpacity=F[3]}else l.borderColor=_,l.borderOpacity=C}var z=e[R],D=(0,c.splitLatLngNumber)(z.lat),U=(0,c.splitLatLngNumber)(z.lng);if(R<e.length-1){i[S]=U.high,S+=1,i[S]=D.high,S+=1,i[S]=0,S+=1,a[E]=z.lng-O.lng,E+=1,a[E]=z.lat-O.lat,E+=1,a[E]=0,E+=1,O=z;var Y=e[R+1],j=(0,c.splitLatLngNumber)(Y.lat),G=(0,c.splitLatLngNumber)(Y.lng);d[I]=U.low,I+=1,d[I]=D.low,I+=1,d[I]=G.low,I+=1,d[I]=j.low,I+=1}if(R>0){var W=e[R+1];W||(W=z),r[w]=U.high,w+=1,r[w]=D.high,w+=1,r[w]=0,w+=1,s[T]=W.lng-z.lng,T+=1,s[T]=W.lat-z.lat,T+=1,s[T]=0,T+=1}if(R>0){h[A]=l.color[0],p[A]=l.borderColor[0],A+=1,h[A]=l.color[1],p[A]=l.borderColor[1],A+=1,h[A]=l.color[2],p[A]=l.borderColor[2],A+=1,h[A]=l.opacity,p[A]=l.borderOpacity,A+=1;var Z=(0,f.encodePickingColor)(n);m[3*k+0]=Z[0],m[3*k+1]=Z[1],m[3*k+2]=Z[2],k+=1,x[M]=l.lineCap,M+=1,x[M]=l.dashArray[0],M+=1,x[M]=l.dashArray[1],M+=1,g[P]=l.width,y[P]=l.borderWidth,P+=1,b[L]=l.arrowInfo[0],L+=1,b[L]=l.arrowInfo[1],L+=1,b[L]=l.arrowInfo[2],L+=1,b[L]=l.arrowInfo[3],L+=1}}(R)})}),{instanceStartPositionList:i,instanceEndPositionList:r,instanceLeftDeltaList:a,instanceRightDeltaList:s,instanceStartEndPostions64xyLowList:d,instanceColorList:h,instanceBorderColorList:p,instancePickingColorList:m,instanceWidthList:g,instanceBorderWidthList:y,instanceLineInfoList:x,instanceArrowInfoList:b,count:n}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(47),l=i(a),s=n(18),u=i(s),c=n(104),f=n(234),d=n(233),h=i(d),v=n(382),p=n(278),m=i(p),_=new m.default;e.default=r},function(t,e,n){"use strict";function i(t){var e=t.getSouthWest(),n=t.getNorthEast(),i=t.getSouthEast();return[n,t.getNorthWest(),e,i]}function o(t){return(0,a.default)(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.getBoundsPath=i;var r=n(304),a=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){if(t.getLng()<e.getLng()){n.getLng()>=0?t.lng=180:e.lng=-179.9999}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),a=i(r),l=n(1),s=i(l),u=n(42),c=i(u),f=n(84),d=i(f),h=n(317),v=i(h),p=n(379),m=i(p),_=function(){function t(e,n){(0,a.default)(this,t),this.geometries=e.map(function(t){return t.position=c.default.convert(t.position),t}),this.clusters=[],this.minimumClusterSize=n.minimumClusterSize,this.gridSize=n.gridSize,this.averageCenter=n.averageCenter,this.projection=new v.default}return(0,s.default)(t,[{key:"createClusters",value:function(t){var e=this,n=t.zoom>t.maxZoom;(t.resetCluster||n)&&this._resetClusters();var i=t.pixelsPerDegree,o=new d.default(c.default.convert(t.mapBounds.sw),c.default.convert(t.mapBounds.ne)),r=this._getExtendedBounds(o,t.zoom);return this.geometries.filter(function(t){return r.contains(t.position)&&!t.hasCluster}).forEach(function(o){n?(e._createNewCluster(o,t.zoom),o.hasCluster=!0):e._addToClosestCluster(o,i,t.zoom)}),this.clusters.forEach(function(t){t.getGeometries().length<e.minimumClusterSize&&e._breakUpCluster(t)}),this.clusters=this.clusters.filter(function(t){return t.getGeometries().length}),this.clusters.map(function(t){return t.getClusterInfo()})}},{key:"_resetClusters",value:function(){this.clusters.forEach(function(t){return t.remove()}),this.clusters=[],this.geometries.forEach(function(t){return delete t.hasCluster})}},{key:"_addToClosestCluster",value:function(t,e,n){var i=null,o=4e3;this.clusters.filter(function(e){return e.isInBounds(t)}).forEach(function(n){var r=n.getCenter();if(r){var a=(r.lng-t.position.lng)*e[0],l=(r.lat-t.position.lat)*e[1],s=Math.sqrt(a*a+l*l);s<o&&(o=s,i=n)}}),i&&i.isInBounds(t)?i.add(t):this._createNewCluster(t,n),t.hasCluster=!0}},{key:"_createNewCluster",value:function(t,e){var n=new m.default(this,e);n.add(t),this.clusters.push(n)}},{key:"_getExtendedBounds",value:function(t,e){var n=t.getNorthEast(),i=t.getSouthWest(),r=this.projection.latLngToCoord(n,e),a=this.projection.latLngToCoord(i,e);r.x+=this.gridSize,r.y-=this.gridSize,a.x-=this.gridSize,a.y+=this.gridSize;var l=this.projection.coordToLatLng(r,e),s=this.projection.coordToLatLng(a,e);return o(l,s,t.getCenter()),new d.default(s,l)}},{key:"_breakUpCluster",value:function(t){var e=this;t.getGeometries().length<2||(t.getGeometries().forEach(function(n){e._createNewCluster(n,t.zoom)}),t.remove())}}]),t}();e.default=_},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(538),p=i(v),m=n(381),_=i(m),g=function(t){function e(){(0,l.default)(this,e);var t=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this));return t.materials={escalator2:[.34999999403954,.34999999403954,.34999999403954],escalator3:[1,1,1]},t}return(0,h.default)(e,t),(0,u.default)(e,[{key:"parse",value:function(t){var e=this,n=(0,_.default)(t),i=n.meshes;i.forEach(function(t){var n=t.materials[0]&&t.materials[0].name;if(n){for(var i=new Float32Array(t.attributes.POSITION.value.length),o=0;o<i.length;o+=3)i[o]=e.materials[n][0],i[o+1]=e.materials[n][1],i[o+2]=e.materials[n][2];t.attributes.COLOR_0={size:3,value:i}}});var o=i.reduce(function(t,e){return t+e.header.vertexCount},0);return{mode:4,vertexCount:o,attributes:this.mergeAttributes(i,o)}}}]),e}(p.default);e.default=g},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n=(0,E.latLng2Mercator)(t.x||t.lng,t.y||t.lat),i=new I.default;return i.x=n.x-e.x,i.y=n.y-e.y,i}function r(t,e){return o((0,E.pixels2LongLat)(t.x,t.y),e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(18),l=i(a),s=n(86),u=i(s),c=n(236),f=i(c),d=n(16),h=i(d),v=n(14),p=i(v),m=n(32),_=i(m),g=n(47),y=i(g),x=n(0),b=i(x),S=n(1),w=i(S),E=n(306),T=n(61),I=i(T),A=n(42),k=i(A),P=n(7),M=i(P),L=n(662),C=i(L),N=n(317),O=i(N),R=n(273),V=n(305),B=n(274),F=function(){function t(e,n){(0,b.default)(this,t),this.buildingId=e,this.dataView=n.buffer,this.zoom=20,this.areaCenter=(0,E.latLng2Mercator)(n.areaCenter.lng,n.areaCenter.lat),this.floorInfo=n.floorInfo,this.selectedFloorNum=n.selectedFloorNum,this.indoorStyle=n.indoorStyle,this.projection=new O.default,this._initialize()}return(0,w.default)(t,[{key:"_initialize",value:function(){var t=this,e=(0,y.default)(this.floorInfo.bounds,2),n=e[0],i=e[1],r=[new k.default(i.lat,n.lng),n,new k.default(n.lat,i.lng),i],a=r.map(function(e){return o(e,t.areaCenter)}),l={displayType:2,gateNum:0,gates:[],height:0,point:a,regionId:"",brickness:1},s=this._translateLatLngForSingleRegion(l,0,!0,null,0);s.isWall=!1,this._boundsRegion=s}},{key:"parseBuilding",value:function(){var t=this.buildingId,e=new DataView(this.dataView.buffer),n=0,i={};i.Attribute_size=e.getInt32(n,!0),n+=4,i.Data_size=e.getInt32(n,!0),n+=4,i.Topology_size=e.getInt32(n,!0),n+=4,i.Name_CN_size=e.getUint8(n,!0),n+=1,i.Name_CN=String.fromCharCode.apply(String,(0,_.default)(new Uint16Array(e.buffer.slice(n,n+i.Name_CN_size)))),n+=i.Name_CN_size,i.DefaultFloor=e.getUint8(n,!0),n+=1,i.Floor_num=e.getUint8(n,!0),n+=1,i.Floor_str_size=e.getUint8(n,!0),n+=1;for(var o=[],r=0;r<i.Floor_str_size;r++){var a=e.getUint8(n,!0);o.push(a),n+=1}i.floorStr=String.fromCharCode.apply(null,o);for(var l=[],s=0;s<4;s++){var u=e.getInt32(n,!0);l.push(u),n+=4}i.Floor_num=e.getInt32(n,!0),n+=4;for(var c=[],f=0;f<i.Floor_num;f++){var d=e.getInt32(n,!0);c.push(d),n+=4}for(var h=[],v=[],p=[],m=[],g=[],y=[],x=[],b=[],S=[],w=[],E=[],T=0;T<i.Floor_num;T++)if(T===this.selectedFloorNum+1){var I=T,A=[],k=[],P=[],M=[],L=[],C=[],N=[],O=[],R=[],V=[],B=I,F=e.getInt32(n,!0);n+=4;for(var z=[],D=0;D<F;D++){var U={},Y=e.getInt32(n,!0);n+=4;var j=e.getInt32(n,!0);U.type=Y,U.size=j,z.push(U),n+=4}for(var G=0;G<F;G++){var W=z[G].type,Z=z[G].size,X=G;if(9===W){var H=this._parseFloorPointLayer(e,n,B,{nowFloorPoints22:M,nowFloorPoints21:L,nowFloorPoints20:C,nowFloorPoints19:N,nowFloorPoints18:O,nowFloorPoints17:R,nowFloorPoints16:V});n+=Z,M=H.nowFloorPoints22,L=H.nowFloorPoints21,C=H.nowFloorPoints20,N=H.nowFloorPoints19,O=H.nowFloorPoints18,R=H.nowFloorPoints17,V=H.nowFloorPoints16}else if(4===W){var Q=this._parseFloorRegionLayer(e,n,G);n+=Z;var q=Q.nowLayerRegions,J=Q.nowLayerEscalatorRegions;0===k.length&&A.push({styleId:q.styleId,points:[this._boundsRegion],layerId:X}),J.length>0&&P.push.apply(P,(0,_.default)(J)),k.push(q)}else if(11===W){n+=Z;continue}}for(var K=[],$=0;$<4;$++){var tt=e.getUint8(n,!0);K.push(tt),n+=1}p[I]=A,h[I]=k,v[I]=P,x[I]=this._refactorFloorPoints(C,t,I),b[I]=this._refactorFloorPoints(N,t,I),S[I]=this._refactorFloorPoints(O,t,I),w[I]=this._refactorFloorPoints(R,t,I),E[I]=this._refactorFloorPoints(V,t,I);var et={};et.zoom22=g,et.zoom21=y,et.zoom20=x,et.zoom19=b,et.zoom18=S,et.zoom17=w,et.zoom16=E}else n+=c[T];return i.floorBoundsData=p,i.buildingData=h,i.buildingEscalator=v,i.buildingPoint=et,i.buildingLine=m,i}},{key:"_parseFloorPointLayer",value:function(t,e,n,i){var o=i.nowFloorPoints22,r=i.nowFloorPoints21,a=i.nowFloorPoints20,l=i.nowFloorPoints19,s=i.nowFloorPoints18,u=i.nowFloorPoints17,c=i.nowFloorPoints16;e+=2,e+=2;var f=t.getInt32(e,!0);e+=4;for(var d=[],h=[],v=0;v<f;v++){var p={},m=(0,E.readUint24)(new Uint8Array(t.buffer.slice(e,e+3))),g=4095&m;g^=65536,p.classCode=g;var y=m>>12&15,x=m>>16&255;e+=3;var b=t.getUint16(e,!0);e+=2,p.hPoi_count=b;var S=t.getInt32(e,!0);e+=4,p.poiPriority=S;var w=t.getUint8(e,!0);e+=1,p.Strace=w;var T={};T.strace16=1&w,T.strace17=2&w,T.strace18=4&w,T.strace19=8&w,T.strace20=16&w,T.strace21=32&w,T.strace22=64&w,p.zoomStrace=T;var I=t.getUint32(e,!0);e+=4,p.direct=I;var A=String.fromCharCode.apply(String,(0,_.default)(new Uint16Array(t.buffer.slice(e,e+2*y))));e+=2*y,p.Name_str1=A;var k=x-y,P=String.fromCharCode.apply(String,(0,_.default)(new Uint16Array(t.buffer.slice(e,e+2*k))));h.push(P),e+=2*k,p.Name_str2=P,d.push(p)}for(var L=[],C=0;C<d.length;C++)for(var N=d[C].hPoi_count,O=0;O<N;O++){var R=t.getInt32(e,!0);e+=4;var V=t.getInt32(e,!0);e+=4;var B=(0,E.pixels2LongLat)(R,V);L.push(B)}var F=new Uint8Array(t.buffer.slice(e,e+4));F=String.fromCharCode.apply(null,F),F=F.toUpperCase(),e+=4;var z=[];if("EXPH"===F)for(var D=0;D<f;D++){var U=t.getUint16(e,!0);e+=2,z.push(U)}F=new Uint8Array(t.buffer.slice(e,e+4)),F=String.fromCharCode.apply(null,F),F=F.toUpperCase(),e+=4;var Y=[];if("EXNR"===F){for(var j=[],G=0;G<f;G++){var W=t.getUint16(e,!0);e+=2;for(var Z=15&W,X=[],H=0;H<Z;H++)X.push(t.getUint8(e,!0)),e+=1;j.push(X)}for(var Q=0;Q<j.length;Q++){for(var q=[],J=j[Q],K=0;K<J.length;K++){var $=new Uint16Array(t.buffer.slice(e,e+2*J[K])),tt=String.fromCharCode.apply(null,$);q.push(tt),e+=2*J[K]}Y.push(q)}}for(var et=0;et<L.length;et++){for(var nt={},it=[],ot=d[et].hPoi_count,rt=0;rt<ot;rt++);var at="";d[et].Name_str2&&(at="\\"+d[et].Name_str2),it.push(L[et]),nt.points=it,nt.styleId=d[et].classCode,nt.rank=d[et].poiPriority,nt.uuid=M.default.uniqueId(),nt.text=d[et].Name_str1+at,nt.buildingId=this.buildingId;var lt=d[et].zoomStrace;if(0!==lt.strace20){var st=d[et].direct;st=st>>16&15;var ut=(0,E.extendCopy)(nt);ut.direct=st;var ct=z[et],ft=this._translateLatLngPointForSinglePoint(ut,ct,n,a.length);a.push(ft)}if(0!==lt.strace19){var dt=d[et].direct;dt=dt>>12&15;var ht=(0,E.extendCopy)(nt);ht.direct=dt;var vt=z[et],pt=this._translateLatLngPointForSinglePoint(ht,vt,n,l.length);l.push(pt)}if(0!==lt.strace18){var mt=d[et].direct;mt=mt>>8&15;var _t=(0,E.extendCopy)(nt);_t.direct=mt;var gt=z[et],yt=this._translateLatLngPointForSinglePoint(_t,gt,n,s.length);s.push(yt)}if(0!==lt.strace17){var xt=d[et].direct;xt=xt>>4&15;var bt=(0,E.extendCopy)(nt);bt.direct=xt;var St=z[et],wt=this._translateLatLngPointForSinglePoint(bt,St,n,u.length);u.push(wt)}if(0!==lt.strace16){var Et=d[et].direct;Et&=15;var Tt=(0,E.extendCopy)(nt);Tt.direct=Et;var It=z[et],At=this._translateLatLngPointForSinglePoint(Tt,It,n,c.length);c.push(At)}}return{offset:e,nowFloorPoints22:o,nowFloorPoints21:r,nowFloorPoints20:a,nowFloorPoints19:l,nowFloorPoints18:s,nowFloorPoints17:u,nowFloorPoints16:c}}},{key:"_parseFloorRegionLayer",value:function(t,e,n){var i=this,o={};e+=2;var a=t.getUint16(e,!0);e+=2,e+=4;var l=t.getInt32(e,!0);e+=4;for(var s=[],u=0;u<l;u++){var c=t.getInt32(e,!0);s.push(c),e+=4}for(var f=[],d={},h=0,v=0;v<l;v++){d[v]={},d[v].start=h;var m=t.getUint16(e,!0);f.push(m),h+=m,d[v].end=h,e+=2}for(var g=[],y=0;y<h;y++){var x=t.getUint32(e,!0);e+=4;var b=t.getUint32(e,!0);e+=4;var S={x:x,y:b};g.push(S)}var w=new Uint8Array(t.buffer.slice(e,e+4));w=String.fromCharCode.apply(null,w),w=w.toUpperCase(),e+=4;var E=[];if("EXPI"===w){for(var T=[],I=0;I<l;I++){var A=t.getUint8(e,!0);T.push(A),e+=1}for(var k=0;k<T.length;k++){var P=T[k],M=String.fromCharCode.apply(String,(0,_.default)(new Uint8Array(t.buffer.slice(e,e+P))));E.push(M),e+=T[k]}}if(w=new Uint8Array(t.buffer.slice(e,e+4)),w=String.fromCharCode.apply(null,w),w=w.toUpperCase(),e+=4,"EXMP"===w)for(var L=0;L<g.length;L++){var C=t.getUint8(e,!0);e+=1;var N=t.getUint8(e,!0);e+=1,g[L].x+=C/100,g[L].y+=N/100}for(var O=[],R=0,V=0;V<f.length;V++){var B=void 0;B=0===V?g.slice(V,f[V]):g.slice(R,R+f[V]),R+=f[V],O.push(B)}for(var F=[],z=0;z<O.length;z++){var D=O[z].map(function(t){return r(t,i.areaCenter)}),U=E[z],Y={point:D,height:s[z],regionId:U};F.push(Y)}if(w=new Uint8Array(t.buffer.slice(e,e+4)),w=String.fromCharCode.apply(null,w),w=w.toUpperCase(),e+=4,"EX3D"===w)for(var j=0;j<F.length;j++){var G=t.getInt8(e,!0);e+=1;var W=t.getUint8(e,!0);e+=1;var Z=t.getUint8(e,!0);e+=1;var X=t.getInt16(e,!0);e+=2;var H=t.getUint16(e,!0);e+=2;var Q=t.getUint16(e,!0);e+=2;var q=t.getUint32(e,!0);e+=4;var J=t.getUint32(e,!0);e+=4,F[j].height=G/10,F[j].displayType=W,F[j].brickness=Z,F[j].angle=X,F[j].rectWidth=H,F[j].rectHeight=Q,F[j].centerX=q,F[j].centerY=J}if(w=new Uint8Array(t.buffer.slice(e,e+4)),w=String.fromCharCode.apply(null,w),w=w.toUpperCase(),e+=4,"EXGT"===w)for(var K=0;K<F.length;K++){var $=F[K],tt=t.getUint16(e,!0);if(e+=2,$.gateNum=tt,$.gates=[],tt>0){for(var et=0;et<tt;et++){var nt={};nt.hasCelling=!!t.getUint8(e,!0),e+=1,$.gates.push(nt)}for(var it=0;it<tt;it++){var ot=$.gates[it];ot.pt=[{},{}];for(var rt=0;rt<2;rt++)ot.pt[rt].x=t.getUint32(e,!0),e+=4,ot.pt[rt].y=t.getUint32(e,!0),e+=4,ot.pt[rt].x+=t.getUint8(e,!0)/100,e+=1,ot.pt[rt].y+=t.getUint8(e,!0)/100,e+=1}}}for(var at=[],lt=[],st=0;st<F.length;st++){var ut=F[st],ct=null;if(1===ut.displayType)ct=this._translateLatLngForSingleRegion(ut,n,!1);else{if(4===ut.displayType){lt.push(ut);continue}var ft=this._extrudePolygon(ut.point,0===n?0:1,.2,function(t,e,n){return 0===e?n[n.length-1]:n[e-1]},function(t,e,n){return e===n.length-1?n[0]:n[e+1]}),dt=(0,p.default)({},ut,{point:ft});ct=this._translateLatLngForSingleRegion(dt,0,!0,null,0===n?0:.5)}ct.originRegion=ut,ct.isWall=!1,at.push(ct)}var ht=this._getWallRegions(at,n);return o.styleId=196608^a,o.points=[].concat(at,(0,_.default)(ht)),o.layerId=n,{offset:e,nowLayerRegions:o,nowLayerEscalatorRegions:lt}}},{key:"_getWallRegions",value:function(t,e){for(var n=this,i=[],o=t,r=o.slice(),a=0;a<r.length;a++){(function(t){var o=r[t],a=o.originRegion;if(2!==a.displayType)return"continue";var l=a.point,s=l[0],u=l;u[0].x===u[u.length-1].x&&u[0].y===u[u.length-1].y||u.push(u[0]),(0,E.isClockWise)(u)&&u.reverse();var c={},f=a.gates.map(function(t){return{hasCelling:t.hasCelling,pt:t.pt.map(function(t){var e=(0,E.pixels2LongLat)(t.x,t.y),i=(0,E.latLng2Mercator)(e.x,e.y),o={};return o.x=i.x-n.areaCenter.x,o.y=i.y-n.areaCenter.y,new I.default(o.x,o.y)})}}).filter(function(t){var e=t.pt.reduce(function(t,e){return""+t+e.x+"+"+e.y+";"},"");if(!c[e])return c[e]=!0,!0}),d=[[]],h=0;u.forEach(function(t,e){if(e!==u.length-1){d[h].push(t);var n=u[e+1],i=n.clone().sub(t),o=i.clone().normalize(),r=[];f.forEach(function(e){var a=e.pt[1].clone().sub(e.pt[0]),l=a.clone().normalize(),s=Math.abs(i.x*a.y-a.x*i.y),u=s<=.3,c=e.pt[0].x>=Math.min(t.x,n.x)&&e.pt[0].x<=Math.max(t.x,n.x)&&e.pt[0].y>=Math.min(t.y,n.y)&&e.pt[0].y<=Math.max(t.y,n.y)&&e.pt[1].x>=Math.min(t.x,n.x)&&e.pt[1].x<=Math.max(t.x,n.x)&&e.pt[1].y>=Math.min(t.y,n.y)&&e.pt[1].y<=Math.max(t.y,n.y);if(u&&c){var f=e.pt.slice();o.dot(l)+1<.1&&f.reverse(),r.push(f)}}),r.sort(function(e,n){return e[0].clone().sub(t).lengthSq()-n[0].clone().sub(t).lengthSq()});var a=[];r.forEach(function(t){if(0===a.length)a.push(t);else{var e=a[a.length-1];(Math.abs(t[0].x-e[0].x)>.1||Math.abs(t[0].y-e[0].y)>.1)&&a.push(t)}}),a.forEach(function(t){d[h].push(t[0]),h+=1,d[h]=[t[1]]})}}),d[h].push(s);var v=null;if(d.length>1){var m=d[0],g=m[0],y=d[d.length-1],x=y[y.length-1];x.x===g.x&&x.y===g.y&&(d.shift(),y.pop(),y.push.apply(y,(0,_.default)(m)))}v=d.map(function(t){var i=t,o=i.slice().reverse(),r=n._extrudePolygon(o,0===e?1:-1,.2,function(t,e,n){return 0===e?1===d.length?n[n.length-2]:t:n[e-1]},function(t,e,n){return e===n.length-1?1===d.length?n[1]:t:n[e+1]}),a=[].concat((0,_.default)(i),(0,_.default)(r));return(0,E.isClockWise)(a)&&0===e&&a.reverse(),a}),v.forEach(function(t){var e=(0,p.default)({},a);e.point=t;var o=n._translateLatLngForSingleRegion(e,1,!1,t.holeIndecies);o.height/=10,o.isWall=!0,i.push(o)})})(a)}return i}},{key:"_extrudePolygon",value:function(t,e,n,i,o){var r=t;return r.map(function(t,a){var l=i(t,a,r),s=o(t,a,r),u=t.clone().sub(l).normalize(),c=s.clone().sub(t).normalize(),f=new I.default(-u.y,u.x),d=new I.default(-c.y,c.x),h=0===a?d:f,v=u.clone().add(c).normalize(),p=new I.default(-v.y,v.x),m=Math.abs(p.dot(h)),_=p.clone().mult(e).mult(n/(Math.abs(m-0)<.1?1:m));return t.clone().add(_)})}},{key:"getEscalatorAttributes",value:function(t){var e=this,n=new Float32Array(2*t.length),i=new Int16Array(4*t.length);return t.forEach(function(t,o){var r=(0,E.pixels2LongLat)(t.centerX,t.centerY),a=(0,E.latLng2Mercator)(r.x,r.y);n[2*o]=a.x-e.areaCenter.x,n[2*o+1]=a.y-e.areaCenter.y,i[4*o]=t.rectWidth,i[4*o+1]=t.rectHeight,i[4*o+2]=t.height,i[4*o+3]=t.angle}),{instanceCoordsTypeArray:n,instanceInfosTypeArray:i,count:t.length}}},{key:"getTopGeometryAttributes",value:function(t){var e=this,n=this.zoom,i=t.reduce(function(t,e){return t+e.points.reduce(function(t,e){return t+(e.point&&e.point.length||0)},0)},0),o=t.reduce(function(t,e){return t+e.points.reduce(function(t,e){return t+(e.index.top&&e.index.top.length||0)},0)},0),r=o>65535?new Uint32Array(o):new Uint16Array(o),a=new Float32Array(i),l=new Uint8ClampedArray(i),s=0,u=0;t.forEach(function(t){var i=t.styleId,o=(0,R.getStyle)(i,n,e.indoorStyle);o&&t.points.forEach(function(t){if(!t._fail){var e=s,n=u;t.index.top&&(t.index.top.forEach(function(t,i){r[n+i]=t+e/3}),t.point.forEach(function(n,i){a[e+i]=n,l[e+i]=t.isWall?o.topStyle[i%3]:o.bottomStyle[i%3]}),u+=t.index.top.length,s+=t.point.length)}})});var c=this._computeNormals(a,r);return{color:l,position:a,index:r,normal:c}}},{key:"getSidesGeometryAttributes",value:function(t){var e=this,n=this.zoom,i=t.reduce(function(t,e){return t+e.points.reduce(function(t,e){return t+(e.index.sides&&6*e.index.sides.length*3||0)},0)},0),o=t.reduce(function(t,e){return t+e.points.reduce(function(t,e){return t+(e.index.sides&&6*e.index.sides.length||0)},0)},0),r=o>65535?new Uint32Array(o):new Uint16Array(o),a=new Float32Array(i),l=new Uint8ClampedArray(i),s=0,u=0;t.forEach(function(t){var i=t.styleId,o=(0,R.getStyle)(i,n,e.indoorStyle);o&&t.points.forEach(function(t){if(!t._fail){var e=s,n=u;if(t.index.sides){var i=t.index.top,c=Math.max.apply(null,i||[0]);t.index.sides.forEach(function(i,s){var u=t.isWall&&c>0&&i.every(function(t){return t>c?t-c>=c/2:t>=c/2});i.forEach(function(i,c){var f=t.point[3*i],d=t.point[3*i+1],h=t.point[3*i+2],v=e+6*s*3+3*c;a[v+0]=f,a[v+1]=d,a[v+2]=h,l[v+0]=u?o.insideStyle[0]:o.outsideStyle[0],l[v+1]=u?o.insideStyle[1]:o.outsideStyle[1],l[v+2]=u?o.insideStyle[2]:o.outsideStyle[2];var p=e/3+6*s+c;r[n+6*s+c]=p})}),s+=6*t.index.sides.length*3,u+=6*t.index.sides.length}}})});var c=this._computeNormals(a,r);return{color:l,position:a,index:r,normal:c}}},{key:"getBuildingPointInfo",value:function(t){var e=this.indoorStyle,n={},i="",o=[];(0,h.default)(t).forEach(function(r){var a=parseInt(r.replace("zoom",""),10);n[r]=[],t[r].forEach(function(t,l){return n[r][l]=[],t.directs.map(function(s,u){var c=t.styleIds[u],f=t.texts[u],d=t.ranks[u],h=t.positions.slice(3*u,3*u+3),v=(0,R.getStyle)(c,a,e);if(v){var p=(0,R.getStyle)(v.labelid,a,e);if(p){var m=v.icon_offset,_=null,g=p.fontSize,y=p.font,x=(0,E.getPoiDrawInfo)(c,a,s,e);x.drawIcon&&(_=V.ConfigUtil.getIconSrc(m),o.push(_)),i+=f;var b={direct:s,styleId:c,text:f,rank:d,font:y,fontSize:g,position:[h[0],h[1],h[2]],iconSrc:_,drawInfo:x};n[r][l].push(b)}}})}),n[r].shift()});var r=new f.default(i.split("")),a=(0,u.default)(r),l=new f.default(o);return o=(0,u.default)(l),{pointInfoSet:n,glyphList:a,iconSrcList:o}}},{key:"parseInstanceBuildingPoint",value:function(t,e,n,i){var o=this.indoorStyle;return(0,h.default)(t).forEach(function(r){var a=parseInt(r.replace("zoom",""),10);t[r].filter(function(t){return!!t}).forEach(function(t,r){var l=0,s=[],c=[],f=[],d=[],h=[],v=[],p=i[a][r];t.forEach(function(t,i){var r=p[i],m=(0,R.getStyle)(t.styleId,a,o),g=(0,R.getStyle)(m.labelid,a,o);if(r.forEach(function(e){return e.rank=t.rank}),t.drawInfo.drawIcon){var y=e[t.iconSrc];if(y){var x=V.INDOOR_ICON_SIZE/2,b=V.INDOOR_ICON_SIZE/2;s.push(t.position[0],t.position[1],0),c.push(V.INDOOR_ICON_SIZE,V.INDOOR_ICON_SIZE,x,b),f.push(y.x,y.y,y.width,y.height),d.push(0,1,-1,1),h.push(1,1,1,1),v.push(0,0,0,0),r.iconSymbolIndex=l,l+=1}}t.drawInfo.drawLabel&&r.forEach(function(e){var i=e.anchor,o=e.textBounds,r=o.w,a=o.h,p=new Uint16Array(e.text.length),m=e.text.length,y=[0],x=0,b=0;(0,u.default)(e.text).forEach(function(e){var i=t.fontSize/n[e].fontSize;x=y[y.length-1]+n[e].width*i,b=Math.max(b,n[e].height*i),y.push(x)});for(var S=Math.max(1,x/r,b/a),w={x:x/2-i.x*S,y:b/2-i.y*S},E=0;E<m;E++){var T=n[e.text[E]],I=t.fontSize/T.fontSize;s.push(t.position[0],t.position[1],0),c.push(T.width*I,T.height*I,w.x-y[E],w.y),f.push(T.x,T.y,T.width,T.height),d.push(0,1,0,1),h.push.apply(h,(0,_.default)(g.fillStyle)),v.push.apply(v,(0,_.default)(g.strokeStyle)),p[E]=l,l+=1}e.textSymbolIndexList=p,e.instance_trans=t.position,e.instance_coords=[x,b,w.x,w.y]})});var m=new Float32Array(s),g=new Float32Array(c),y=new Float32Array(f),x=new Float32Array(d),b=new Uint8ClampedArray(h),S=new Uint8ClampedArray(v);p.instance={isIndoor:!0,instanceTransTypeArray:m,instanceCoordsTypeArray:g,instanceTextBoundsTypeArray:y,instanceInfosTypeArray:x,instanceColorsTypeArray:b,instanceStrokeColorsTypeArray:S,count:d.length/4}})}),i}},{key:"_computeNormals",value:function(t,e){var n=t,i=new Float32Array(t.length),o=void 0,r=void 0,a=void 0,l=C.default.create(),s=C.default.create(),u=C.default.create(),c=C.default.create(),f=C.default.create();if(e)for(var d=e,h=0;h<d.length;h+=3)o=3*d[h+0],r=3*d[h+1],a=3*d[h+2],l[0]=n[o+0],l[1]=n[o+1],l[2]=n[o+2],s[0]=n[r+0],s[1]=n[r+1],s[2]=n[r+2],u[0]=n[a+0],u[1]=n[a+1],u[2]=n[a+2],C.default.subtract(c,u,s),C.default.subtract(f,l,s),C.default.cross(c,c,f),i[o]+=c[0],i[o+1]+=c[1],i[o+2]+=c[2],i[r]+=c[0],i[r+1]+=c[1],i[r+2]+=c[2],i[a]+=c[0],i[a+1]+=c[1],i[a+2]+=c[2];else for(var v=0;v<n.length;v+=9)l[0]=n[v+0],l[1]=n[v+1],l[2]=n[v+2],s[0]=n[v+3],s[1]=n[v+4],s[2]=n[v+5],u[0]=n[v+6],u[1]=n[v+7],u[2]=n[v+8],C.default.subtract(c,u,s),C.default.subtract(f,l,s),C.default.cross(c,c,f),i[o]+=c[0],i[o+1]+=c[1],i[o+2]+=c[2],i[r]+=c[0],i[r+1]+=c[1],i[r+2]+=c[2],i[a]+=c[0],i[a+1]+=c[1],i[a+2]+=c[2];for(var p=C.default.create(),m=0;m<i.length;m+=3)p[0]=i[m+0],p[1]=i[m+1],p[2]=i[m+2],C.default.normalize(p,p),i[m+0]=p[0],i[m+1]=p[1],i[m+2]=p[2];return i}},{key:"_translateLatLngPointForSinglePoint",value:function(t,e,n){var i=(0,p.default)({},t),o=i.points[0],r=(0,E.latLng2Mercator)(o.x,o.y);return i.points=[{x:r.x-this.areaCenter.x,y:r.y-this.areaCenter.y,z:e}],i.height=this.poiHeight/9,i.floorId=n,i}},{key:"_translateLatLngForSingleRegion",value:function(t,e,n,i,o){var r=e,a="",s=t,u=s.height,c=t,f=c.regionId;t=t.point;var d={},h=[],v=[];d.height=u;var p="";if(t.length>=3&&(0===r?(p="bottom",a="floor"):p="other",h=this.cutTrianleRegion(t,p,i)),"bottom"!==p&&!n){var m=!0,_=!1,g=void 0;try{for(var y,x=(0,l.default)(t);!(m=(y=x.next()).done);m=!0){var b=y.value;v.push(b.x),v.push(b.y),v.push(u)}}catch(t){_=!0,g=t}finally{try{!m&&x.return&&x.return()}finally{if(_)throw g}}}var S=!0,w=!1,E=void 0;try{for(var T,I=(0,l.default)(t);!(S=(T=I.next()).done);S=!0){var A=T.value;v.push(A.x),v.push(A.y),v.push(o||0)}}catch(t){w=!0,E=t}finally{try{!S&&I.return&&I.return()}finally{if(w)throw E}}return d.index={top:h.top||"",sides:h.sides||"",bottom:h.bottom||""},d.point=v,d.type=a,d.regionId=f,d}},{key:"cutTrianleRegion",value:function(t,e,n){var i=t,o=[],r=!0,a=!1,s=void 0;try{for(var u,c=(0,l.default)(i);!(r=(u=c.next()).done);r=!0){var f=u.value;o.push(f.x),o.push(f.y)}}catch(t){a=!0,s=t}finally{try{!r&&c.return&&c.return()}finally{if(a)throw s}}var d=n&&n.length>0?B(o,n):B(o);if("bottom"===e)return{top:d};var h=[],v=!0,p=!1,m=void 0;try{for(var _,g=(0,l.default)(d);!(v=(_=g.next()).done);v=!0){var y=_.value;h.push(y+i.length)}}catch(t){p=!0,m=t}finally{try{!v&&g.return&&g.return()}finally{if(p)throw m}}for(var x=[],b=0;b<i.length;b++){var S=[];S.push(b),S.push(b+i.length),S.push((b+1)%i.length),S.push(b+i.length),S.push(b===i.length-1?b+1:b+i.length+1),S.push((b+1)%i.length),x.push(S)}return{top:d,sides:x,bottom:h}}},{key:"_translateLatLngForSingleLine",value:function(t){var e=[],n=!0,i=!1,o=void 0;try{for(var r,a=(0,l.default)(t);!(n=(r=a.next()).done);n=!0){var s=r.value,u=(0,E.latLng2Mercator)(s.x,s.y);u.x=u.x-this.areaCenter.x,u.y=u.y-this.areaCenter.y;var c={};c.x=u.x,c.y=u.y,c.z=0,e.push(c)}}catch(t){i=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return e}},{key:"_refactorFloorPoints",value:function(t,e,n){var i={buildingId:e,floorId:n,positions:new Float32Array(3*t.length),styleIds:new Uint32Array(t.length),poiIds:[],texts:[],ranks:[],heights:new Uint32Array(t.length),directs:new Uint32Array(t.length),uuids:[]};return t.forEach(function(t,e){i.positions[3*e]=t.points[0].x,i.positions[3*e+1]=t.points[0].y,i.positions[3*e+2]=t.points[0].z,i.styleIds[e]=t.styleId,i.poiIds.push(t.poiId),i.texts.push(t.text),i.ranks.push(t.rank),i.heights[e]=t.height,i.directs[e]=t.direct,i.uuids.push(t.uuid)}),i}}]),t}();e.default=F},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.STYLE=function(){return{regionStyles:{196609:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:0,maxScaleVal:22,color_side:-1118482,color_border:0,bottom_color:-1}],196610:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-1,maxScaleVal:22,color_side:-1118482,color_border:-1,bottom_color:-1}],196611:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-2953734,maxScaleVal:22,color_side:-5712919,color_border:-5712919,bottom_color:-2953734}],196612:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-203803,maxScaleVal:22,color_side:-1520948,color_border:-1520948,bottom_color:-203803}],196613:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-1117483,maxScaleVal:22,color_side:-3025487,color_border:-3025487,bottom_color:-1117483}],196614:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-3283714,maxScaleVal:22,color_side:-5519384,color_border:-5519384,bottom_color:-3283714}],196615:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-202279,maxScaleVal:22,color_side:-1191237,color_border:-1191237,bottom_color:-202279}],196616:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-1117483,maxScaleVal:22,color_side:-3025487,color_border:-3025487,bottom_color:-1117483}],196617:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-202279,maxScaleVal:22,color_side:-1191237,color_border:-1191237,bottom_color:-202279}],196618:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-855310,maxScaleVal:22,color_side:-2039584,color_border:-2039584,bottom_color:-855310}],196619:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-1117483,maxScaleVal:22,color_side:-3025487,color_border:-3025487,bottom_color:-1117483}],196620:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-2698028,maxScaleVal:22,color_side:-2039584,color_border:-2039584,bottom_color:-2698028}],196621:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-202279,maxScaleVal:22,color_side:-1191237,color_border:-1191237,bottom_color:-202279}],196622:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-202279,maxScaleVal:22,color_side:-1191237,color_border:-1191237,bottom_color:-202279}],196623:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-3283714,maxScaleVal:22,color_side:-5519384,color_border:-5519384,bottom_color:-3283714}],196624:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-2953734,maxScaleVal:22,color_side:-5712919,color_border:-5712919,bottom_color:-2953734}],196625:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-202279,maxScaleVal:22,color_side:-1191237,color_border:-1191237,bottom_color:-202279}],196626:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-1316376,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-1316376}],196627:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-2170631,maxScaleVal:22,color_side:-4012824,color_border:-4012824,bottom_color:-2170631}],196628:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-2170631,maxScaleVal:22,color_side:-4012824,color_border:-4012824,bottom_color:-2170631}],196629:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-2953734,maxScaleVal:22,color_side:-5712919,color_border:-5712919,bottom_color:-2953734}],196630:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-2953734,maxScaleVal:22,color_side:-5712919,color_border:-5712919,bottom_color:-2953734}],196631:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-202279,maxScaleVal:22,color_side:-1191237,color_border:-1191237,bottom_color:-202279}],196632:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-202279,maxScaleVal:22,color_side:-1191237,color_border:-1191237,bottom_color:-202279}],196633:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-202279,maxScaleVal:22,color_side:-1191237,color_border:-1191237,bottom_color:-202279}],196634:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-1117483,maxScaleVal:22,color_side:-3025487,color_border:-3025487,bottom_color:-1117483}],196635:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-1316376,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-1316376}],196636:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-657931,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-657931}],196637:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-657931,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-657931}],196638:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-656385,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-656385}],196639:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-1545,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-1545}],196640:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-1545,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-1545}],196641:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-656385,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-656385}],196642:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-459272,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-459272}],196643:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-656385,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-656385}],196644:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-328961,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-328961}],196645:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-328961,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-328961}],196646:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-66569,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-66569}],196647:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-66569,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-66569}],196648:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-328961,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-328961}],196649:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-2953734,maxScaleVal:22,color_side:-5712919,color_border:-5712919,bottom_color:-2953734}],196650:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-657931,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-657931}],196651:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-657931,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-657931}],196652:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-1969153,maxScaleVal:22,color_side:-2889739,color_border:-2889739,bottom_color:-1969153}],196653:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-135449,maxScaleVal:22,color_side:-859430,color_border:-859430,bottom_color:-135449}],196654:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-135449,maxScaleVal:22,color_side:-859430,color_border:-859430,bottom_color:-135449}],196655:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-1969153,maxScaleVal:22,color_side:-2889739,color_border:-2889739,bottom_color:-1969153}],196656:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-1378325,maxScaleVal:22,color_side:-2101793,color_border:-2101793,bottom_color:-1378325}],196657:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-1969153,maxScaleVal:22,color_side:-2889739,color_border:-2889739,bottom_color:-1969153}],196658:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-986625,maxScaleVal:22,color_side:-1776139,color_border:-1776139,bottom_color:-986625}],196659:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-986625,maxScaleVal:22,color_side:-1776139,color_border:-1776139,bottom_color:-986625}],196660:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-199962,maxScaleVal:22,color_side:-858152,color_border:-858152,bottom_color:-199962}],196661:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-199962,maxScaleVal:22,color_side:-858152,color_border:-858152,bottom_color:-199962}],196662:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-986625,maxScaleVal:22,color_side:-1776139,color_border:-1776139,bottom_color:-986625}],196663:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-596290,maxScaleVal:22,color_side:-596290,color_border:-1,bottom_color:-596290}],196664:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-3289606,maxScaleVal:22,color_side:-3289606,color_border:-1,bottom_color:-3289606}],196665:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-4861953,maxScaleVal:22,color_side:-4861953,color_border:-1,bottom_color:-4861953}],196666:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-5513217,maxScaleVal:22,color_side:-5513217,color_border:-1,bottom_color:-5513217}],196667:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-4656129,maxScaleVal:22,color_side:-4656129,color_border:-1,bottom_color:-4656129}],196668:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-4984092,maxScaleVal:22,color_side:-4984092,color_border:-1,bottom_color:-4984092}],196669:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-4069182,maxScaleVal:22,color_side:-4069182,color_border:-1,bottom_color:-4069182}],196670:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-1972315,maxScaleVal:22,color_side:-1972315,color_border:-1,bottom_color:-1972315}],196671:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-663120,maxScaleVal:22,color_side:-663120,color_border:-1,bottom_color:-663120}],196672:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-337216,maxScaleVal:22,color_side:-337216,color_border:-1,bottom_color:-337216}],196673:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-796706,maxScaleVal:22,color_side:-796706,color_border:-1,bottom_color:-796706}],196674:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-863247,maxScaleVal:22,color_side:-863247,color_border:-1,bottom_color:-863247}],196675:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-2108430,maxScaleVal:22,color_side:-2108430,color_border:-1,bottom_color:-2108430}],196676:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-1514785,maxScaleVal:22,color_side:-1514785,color_border:-1,bottom_color:-1514785}],196677:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-596290,maxScaleVal:22,color_side:-596290,color_border:-1,bottom_color:-596290}],196678:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-3289606,maxScaleVal:22,color_side:-3289606,color_border:-1,bottom_color:-3289606}],196679:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-4861953,maxScaleVal:22,color_side:-4861953,color_border:-1,bottom_color:-4861953}],196680:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-5513217,maxScaleVal:22,color_side:-5513217,color_border:-1,bottom_color:-5513217}],196681:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-4656129,maxScaleVal:22,color_side:-4656129,color_border:-1,bottom_color:-4656129}],196682:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-4984092,maxScaleVal:22,color_side:-4984092,color_border:-1,bottom_color:-4984092}],196683:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-4069182,maxScaleVal:22,color_side:-4069182,color_border:-1,bottom_color:-4069182}],196684:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-1972315,maxScaleVal:22,color_side:-1972315,color_border:-1,bottom_color:-1972315}],196685:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-663120,maxScaleVal:22,color_side:-663120,color_border:-1,bottom_color:-663120}],196686:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-337216,maxScaleVal:22,color_side:-337216,color_border:-1,bottom_color:-337216}],196687:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-796706,maxScaleVal:22,color_side:-796706,color_border:-1,bottom_color:-796706}],196688:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-329739,maxScaleVal:22,color_side:-1186079,color_border:-4543842,bottom_color:-329739}],196689:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-6710887,color_fill:-1,maxScaleVal:22,color_side:-1118482,color_border:-6710887,bottom_color:-1}],196690:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-6710887,color_fill:-1,maxScaleVal:22,color_side:-1118482,color_border:-6710887,bottom_color:-1}],196691:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-6710887,color_fill:-1,maxScaleVal:22,color_side:-1118482,color_border:-6710887,bottom_color:-1}],196692:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-6710887,color_fill:-1,maxScaleVal:22,color_side:-1118482,color_border:-6710887,bottom_color:-1}],196693:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-265762,maxScaleVal:22,color_side:-1648708,color_border:-1648708,bottom_color:-265762}],196694:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-6710887,color_fill:-1,maxScaleVal:22,color_side:-1118482,color_border:-6710887,bottom_color:-1}],196695:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-265762,maxScaleVal:22,color_side:-1648708,color_border:-1648708,bottom_color:-265762}]},labelStyles:{262145:[{font_size:0,maxScaleVal:18,effect:5,font_weight:0,font_color:-11385024,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:0,maxScaleVal:19,effect:5,font_weight:0,font_color:-11385024,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:0,maxScaleVal:22,effect:5,font_weight:0,font_color:-11385024,minScaleVal:20,background_color:-1,effect_size:.9}],262146:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-11385024,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:19,effect:5,font_weight:1,font_color:-11385024,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-11385024,minScaleVal:20,background_color:-1,effect_size:.9}],262147:[{font_size:13,maxScaleVal:17,effect:5,font_weight:1,font_color:-11385024,minScaleVal:0,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:19,effect:5,font_weight:1,font_color:-11385024,minScaleVal:18,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11385024,minScaleVal:20,background_color:-1,effect_size:1}],262148:[{font_size:13,maxScaleVal:17,effect:5,font_weight:1,font_color:-3050966,minScaleVal:0,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:19,effect:5,font_weight:1,font_color:-3050966,minScaleVal:18,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-3050966,minScaleVal:20,background_color:-1,effect_size:1}],262149:[{font_size:13,maxScaleVal:17,effect:5,font_weight:1,font_color:-3050966,minScaleVal:0,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:19,effect:5,font_weight:1,font_color:-3050966,minScaleVal:18,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-3050966,minScaleVal:20,background_color:-1,effect_size:1}],262150:[{font_size:13,maxScaleVal:17,effect:5,font_weight:1,font_color:-16743471,minScaleVal:0,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:19,effect:5,font_weight:1,font_color:-16743471,minScaleVal:18,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-16743471,minScaleVal:20,background_color:-1,effect_size:1}],262151:[{font_size:13,maxScaleVal:17,effect:5,font_weight:1,font_color:-3050966,minScaleVal:0,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:19,effect:5,font_weight:1,font_color:-3050966,minScaleVal:18,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-3050966,minScaleVal:20,background_color:-1,effect_size:1}],262152:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-11564867,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:19,effect:5,font_weight:1,font_color:-11564867,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-11564867,minScaleVal:20,background_color:-1,effect_size:.9}],262153:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-4687280,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:19,effect:5,font_weight:1,font_color:-4687280,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-4687280,minScaleVal:20,background_color:-1,effect_size:.9}],262154:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-8288957,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:19,effect:5,font_weight:1,font_color:-8288957,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-8288957,minScaleVal:20,background_color:-1,effect_size:.9}],262155:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-10847555,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:19,effect:5,font_weight:1,font_color:-10847555,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-10847555,minScaleVal:20,background_color:-1,effect_size:.9}],262156:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-4687280,minScaleVal:0,background_color:-1,effect_size:1},{font_size:12,maxScaleVal:19,effect:5,font_weight:1,font_color:-4687280,minScaleVal:19,background_color:-1,effect_size:1},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-4687280,minScaleVal:20,background_color:-1,effect_size:1}],262157:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-11052612,minScaleVal:0,background_color:-1,effect_size:1},{font_size:12,maxScaleVal:21,effect:5,font_weight:1,font_color:-11052612,minScaleVal:19,background_color:-1,effect_size:1},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-11052612,minScaleVal:22,background_color:-1,effect_size:1}],262158:[{font_size:13,maxScaleVal:17,effect:5,font_weight:1,font_color:-10008623,minScaleVal:0,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:19,effect:5,font_weight:1,font_color:-10008623,minScaleVal:18,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-10008623,minScaleVal:20,background_color:-1,effect_size:1}],262159:[{font_size:13,maxScaleVal:17,effect:5,font_weight:1,font_color:-16743471,minScaleVal:0,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:19,effect:5,font_weight:1,font_color:-16743471,minScaleVal:18,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-16743471,minScaleVal:20,background_color:-1,effect_size:1}],262160:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-10847555,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:21,effect:5,font_weight:1,font_color:-10847555,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-10847555,minScaleVal:22,background_color:-1,effect_size:.9}],262161:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-11385024,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:19,effect:5,font_weight:1,font_color:-11385024,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-11385024,minScaleVal:20,background_color:-1,effect_size:.9}],262162:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-13278798,minScaleVal:0,background_color:-1,effect_size:.9}],262163:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-7248559,minScaleVal:0,background_color:-1,effect_size:.9}],262164:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-7248559,minScaleVal:0,background_color:-1,effect_size:.9}],262165:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-13278798,minScaleVal:0,background_color:-1,effect_size:.9}],262166:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-12878512,minScaleVal:0,background_color:-1,effect_size:.9}],262167:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-13278798,minScaleVal:0,background_color:-1,effect_size:.9}],262168:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262169:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262170:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-7182279,minScaleVal:0,background_color:-1,effect_size:.9}],262171:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-7182279,minScaleVal:0,background_color:-1,effect_size:.9}],262172:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262173:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-13278798,minScaleVal:0,background_color:-1,effect_size:.9}],262174:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-7248559,minScaleVal:0,background_color:-1,effect_size:.9}],262175:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-7248559,minScaleVal:0,background_color:-1,effect_size:.9}],262176:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-13278798,minScaleVal:0,background_color:-1,effect_size:.9}],262177:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-12878512,minScaleVal:0,background_color:-1,effect_size:.9}],262178:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-13278798,minScaleVal:0,background_color:-1,effect_size:.9}],262179:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262180:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262181:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-7182279,minScaleVal:0,background_color:-1,effect_size:.9}],262182:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-7182279,minScaleVal:0,background_color:-1,effect_size:.9}],262183:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262184:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262185:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11844161,minScaleVal:0,background_color:-1,effect_size:.9}],262186:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-13870145,minScaleVal:0,background_color:-1,effect_size:.9}],262187:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-15305788,minScaleVal:0,background_color:-1,effect_size:.9}],262188:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-16739907,minScaleVal:0,background_color:-1,effect_size:.9}],262189:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-14250907,minScaleVal:0,background_color:-1,effect_size:.9}],262190:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-12480718,minScaleVal:0,background_color:-1,effect_size:.9}],262191:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-7568090,minScaleVal:0,background_color:-1,effect_size:.9}],262192:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-5013962,minScaleVal:0,background_color:-1,effect_size:.9}],262193:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-4559043,minScaleVal:0,background_color:-1,effect_size:.9}],262194:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-6204330,minScaleVal:0,background_color:-1,effect_size:.9}],262195:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-7583631,minScaleVal:0,background_color:-1,effect_size:.9}],262196:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-9223276,minScaleVal:0,background_color:-1,effect_size:.9}],262197:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-7568770,minScaleVal:0,background_color:-1,effect_size:.9}],262198:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262199:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262200:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262201:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262202:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262203:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262204:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262205:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262206:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262207:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262208:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262209:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-4687280,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:19,effect:5,font_weight:1,font_color:-4687280,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-4687280,minScaleVal:20,background_color:-1,effect_size:.9}],262210:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-4687280,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:19,effect:5,font_weight:1,font_color:-4687280,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-4687280,minScaleVal:20,background_color:-1,effect_size:.9}],262211:[{font_size:14,maxScaleVal:18,effect:5,font_weight:1,font_color:-16752231,minScaleVal:0,background_color:1291845631,effect_size:1},{font_size:0,maxScaleVal:22,effect:5,font_weight:1,font_color:0,minScaleVal:19,background_color:16777215,effect_size:0}],262212:[{font_size:14,maxScaleVal:18,effect:5,font_weight:1,font_color:-4023420,minScaleVal:0,background_color:1291845631,effect_size:1},{font_size:0,maxScaleVal:22,effect:5,font_weight:1,font_color:0,minScaleVal:19,background_color:16777215,effect_size:0}],262213:[{font_size:14,maxScaleVal:19,effect:5,font_weight:1,font_color:-10057525,minScaleVal:0,background_color:1291845631,effect_size:1},{font_size:0,maxScaleVal:22,effect:5,font_weight:1,font_color:0,minScaleVal:20,background_color:16777215,effect_size:0}],262214:[{font_size:14,maxScaleVal:18,effect:5,font_weight:1,font_color:-11848551,minScaleVal:0,background_color:1291845631,effect_size:1},{font_size:0,maxScaleVal:22,effect:5,font_weight:1,font_color:0,minScaleVal:19,background_color:16777215,effect_size:0}],262215:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11844161,minScaleVal:0,background_color:-1,effect_size:.9}],262216:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-13870145,minScaleVal:0,background_color:-1,effect_size:.9}],262217:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-15305788,minScaleVal:0,background_color:-1,effect_size:.9}],262218:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-16739907,minScaleVal:0,background_color:-1,effect_size:.9}],262219:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-14250907,minScaleVal:0,background_color:-1,effect_size:.9}],262220:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-12480718,minScaleVal:0,background_color:-1,effect_size:.9}],262221:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-7568090,minScaleVal:0,background_color:-1,effect_size:.9}],262222:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-5013962,minScaleVal:0,background_color:-1,effect_size:.9}],262223:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-4559043,minScaleVal:0,background_color:-1,effect_size:.9}],262224:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-6204330,minScaleVal:0,background_color:-1,effect_size:.9}],262225:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-7583631,minScaleVal:0,background_color:-1,effect_size:.9}],262226:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-9223276,minScaleVal:0,background_color:-1,effect_size:.9}],262227:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-7568770,minScaleVal:0,background_color:-1,effect_size:.9}],262228:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262229:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262230:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262231:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262232:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262233:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262234:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262235:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262236:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262237:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262238:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262239:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-4756097,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:21,effect:5,font_weight:1,font_color:-4756097,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-4756097,minScaleVal:22,background_color:-1,effect_size:.9}],262240:[{font_size:10,maxScaleVal:18,effect:4,font_weight:0,font_color:-1,minScaleVal:0,background_color:-8411598,effect_size:1},{font_size:10,maxScaleVal:19,effect:4,font_weight:0,font_color:-1,minScaleVal:19,background_color:-8411598,effect_size:1},{font_size:10,maxScaleVal:22,effect:4,font_weight:0,font_color:-1,minScaleVal:20,background_color:-8411598,effect_size:1}],262241:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-4023420,minScaleVal:0,background_color:1291845631,effect_size:1}],262242:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-11385024,minScaleVal:0,background_color:-1,effect_size:.9}],262243:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-8288957,minScaleVal:0,background_color:-1,effect_size:.9}],262244:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-8288957,minScaleVal:0,background_color:-1,effect_size:.9}],262245:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-6127544,minScaleVal:0,background_color:-1,effect_size:.9}],262246:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-5923176,minScaleVal:0,background_color:1291845631,effect_size:1}]},lineStyles:{131072:[{linelevel:0,has_side:1,minScaleVal:16,sidewidth:1.5,joinround:1,color_fill:-6313288,maxScaleVal:16,color_side:0,joincap:0,dash_length:0,width:1.5,dash_space:0,has_dash:0},{linelevel:0,has_side:1,minScaleVal:17,sidewidth:3.2,joinround:1,color_fill:-6313288,maxScaleVal:18,color_side:0,joincap:0,dash_length:0,width:3.2,dash_space:0,has_dash:0},{linelevel:0,has_side:1,minScaleVal:19,sidewidth:3.2,joinround:1,color_fill:-6313288,maxScaleVal:22,color_side:0,joincap:0,dash_length:0,width:3.2,dash_space:0,has_dash:0}],131073:[{linelevel:0,has_side:1,minScaleVal:20,sidewidth:1,joinround:1,color_fill:-6052957,maxScaleVal:22,color_side:0,joincap:0,dash_length:2,width:1,dash_space:2,has_dash:1}],131074:[{linelevel:0,has_side:1,minScaleVal:20,sidewidth:1,joinround:1,color_fill:-6052957,maxScaleVal:22,color_side:0,joincap:0,dash_length:0,width:1,dash_space:0,has_dash:0}],131075:[{linelevel:0,has_side:1,minScaleVal:20,sidewidth:1,joinround:1,color_fill:-6052957,maxScaleVal:22,color_side:0,joincap:0,dash_length:0,width:1,dash_space:0,has_dash:0}],131076:[{linelevel:0,has_side:1,minScaleVal:20,sidewidth:1,joinround:1,color_fill:-2894893,maxScaleVal:22,color_side:0,joincap:0,dash_length:0,width:1,dash_space:0,has_dash:0}],131077:[{linelevel:0,has_side:1,minScaleVal:16,sidewidth:1.5,joinround:1,color_fill:-6313288,maxScaleVal:16,color_side:0,joincap:0,dash_length:0,width:1.5,dash_space:0,has_dash:0},{linelevel:0,has_side:1,minScaleVal:17,sidewidth:3.2,joinround:1,color_fill:-6313288,maxScaleVal:18,color_side:0,joincap:0,dash_length:0,width:3.2,dash_space:0,has_dash:0},{linelevel:0,has_side:1,minScaleVal:19,sidewidth:3.2,joinround:1,color_fill:-6313288,maxScaleVal:22,color_side:0,joincap:0,dash_length:0,width:3.2,dash_space:0,has_dash:0}],131078:[{linelevel:0,has_side:1,minScaleVal:16,sidewidth:1.5,joinround:1,color_fill:-6313288,maxScaleVal:16,color_side:0,joincap:0,dash_length:0,width:1.5,dash_space:0,has_dash:0},{linelevel:0,has_side:1,minScaleVal:17,sidewidth:3.2,joinround:1,color_fill:-6313288,maxScaleVal:18,color_side:0,joincap:0,dash_length:0,width:3.2,dash_space:0,has_dash:0},{linelevel:0,has_side:1,minScaleVal:19,sidewidth:3.2,joinround:1,color_fill:-6313288,maxScaleVal:22,color_side:0,joincap:0,dash_length:0,width:3.2,dash_space:0,has_dash:0}]},pointStyles:{65537:[{icon_offset:0,maxScaleVal:22,minScaleVal:16,labelid:262153,density:6}],65538:[{icon_offset:1,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65539:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:2,maxScaleVal:22,minScaleVal:19,labelid:262145,density:0}],65540:[{icon_offset:16,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:16,maxScaleVal:22,minScaleVal:19,labelid:262243,density:0}],65541:[{icon_offset:4,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65542:[{icon_offset:5,maxScaleVal:22,minScaleVal:16,labelid:262239,density:0}],65543:[{icon_offset:6,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:6,maxScaleVal:22,minScaleVal:18,labelid:262153,density:0}],65544:[{icon_offset:7,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65545:[{icon_offset:-1,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:8,maxScaleVal:22,minScaleVal:20,labelid:262145,density:0}],65546:[{icon_offset:9,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65547:[{icon_offset:10,maxScaleVal:22,minScaleVal:16,labelid:262245,density:0}],65548:[{icon_offset:11,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65549:[{icon_offset:12,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65550:[{icon_offset:13,maxScaleVal:22,minScaleVal:16,labelid:262239,density:0}],65551:[{icon_offset:14,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65552:[{icon_offset:15,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65553:[{icon_offset:16,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:16,maxScaleVal:22,minScaleVal:19,labelid:262243,density:0}],65554:[{icon_offset:17,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65555:[{icon_offset:18,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65556:[{icon_offset:19,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65557:[{icon_offset:109,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65558:[{icon_offset:21,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65559:[{icon_offset:22,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65560:[{icon_offset:23,maxScaleVal:22,minScaleVal:16,labelid:262239,density:0}],65561:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:24,maxScaleVal:22,minScaleVal:19,labelid:262244,density:0}],65562:[{icon_offset:25,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65563:[{icon_offset:26,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:26,maxScaleVal:22,minScaleVal:18,labelid:262153,density:0}],65564:[{icon_offset:27,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65565:[{icon_offset:28,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:28,maxScaleVal:22,minScaleVal:20,labelid:262145,density:0}],65566:[{icon_offset:29,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:29,maxScaleVal:22,minScaleVal:20,labelid:262154,density:0}],65567:[{icon_offset:30,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:30,maxScaleVal:22,minScaleVal:20,labelid:262145,density:0}],65568:[{icon_offset:31,maxScaleVal:22,minScaleVal:16,labelid:262239,density:0}],65569:[{icon_offset:32,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65570:[{icon_offset:33,maxScaleVal:22,minScaleVal:16,labelid:262155,density:0}],65571:[{icon_offset:34,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:34,maxScaleVal:22,minScaleVal:19,labelid:262244,density:0}],65572:[{icon_offset:35,maxScaleVal:22,minScaleVal:16,labelid:262145,density:0}],65573:[{icon_offset:36,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:36,maxScaleVal:22,minScaleVal:19,labelid:262153,density:0}],65574:[{icon_offset:37,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:37,maxScaleVal:22,minScaleVal:20,labelid:262145,density:0}],65575:[{icon_offset:38,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65576:[{icon_offset:39,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65577:[{icon_offset:40,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:40,maxScaleVal:22,minScaleVal:20,labelid:262145,density:0}],65578:[{icon_offset:41,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65579:[{icon_offset:143,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:143,maxScaleVal:22,minScaleVal:18,labelid:262239,density:0}],65580:[{icon_offset:43,maxScaleVal:22,minScaleVal:16,labelid:262155,density:0}],65581:[{icon_offset:44,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:44,maxScaleVal:22,minScaleVal:20,labelid:262153,density:0}],65582:[{icon_offset:45,maxScaleVal:22,minScaleVal:16,labelid:262239,density:0}],65583:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:46,maxScaleVal:22,minScaleVal:19,labelid:262145,density:0}],65584:[{icon_offset:47,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:47,maxScaleVal:22,minScaleVal:20,labelid:262145,density:0}],65585:[{icon_offset:48,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65586:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262147,density:0}],65587:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262145,density:0}],65588:[{icon_offset:49,maxScaleVal:22,minScaleVal:16,labelid:262239,density:0}],65589:[{icon_offset:50,maxScaleVal:22,minScaleVal:16,labelid:262145,density:0}],65590:[{icon_offset:52,maxScaleVal:22,minScaleVal:16,labelid:262155,density:0}],65591:[{icon_offset:53,maxScaleVal:22,minScaleVal:16,labelid:262155,density:0}],65592:[{icon_offset:54,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:54,maxScaleVal:22,minScaleVal:19,labelid:262153,density:0}],65593:[{icon_offset:82,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65594:[{icon_offset:-1,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:149,maxScaleVal:22,minScaleVal:20,labelid:262156,density:0}],65595:[{icon_offset:84,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65596:[{icon_offset:85,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65597:[{icon_offset:55,maxScaleVal:22,minScaleVal:16,labelid:262239,density:0}],65598:[{icon_offset:56,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:56,maxScaleVal:22,minScaleVal:19,labelid:262245,density:0}],65599:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262148,density:0}],65600:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262149,density:0}],65601:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262150,density:0}],65602:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262151,density:0}],65603:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:109,maxScaleVal:19,minScaleVal:19,labelid:262145,density:0},{icon_offset:109,maxScaleVal:22,minScaleVal:20,labelid:262153,density:0}],65604:[{icon_offset:-1,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:20,labelid:262153,density:0}],65605:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:110,maxScaleVal:22,minScaleVal:19,labelid:262152,density:0}],65606:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:111,maxScaleVal:22,minScaleVal:18,labelid:262155,density:0}],65607:[{icon_offset:112,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65608:[{icon_offset:113,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65609:[{icon_offset:114,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65610:[{icon_offset:115,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65611:[{icon_offset:116,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65612:[{icon_offset:117,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65613:[{icon_offset:118,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65614:[{icon_offset:132,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65615:[{icon_offset:118,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65616:[{icon_offset:118,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65617:[{icon_offset:119,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65618:[{icon_offset:116,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65619:[{icon_offset:119,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65620:[{icon_offset:119,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65621:[{icon_offset:119,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65622:[{icon_offset:115,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65623:[{icon_offset:120,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65624:[{icon_offset:119,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65625:[{icon_offset:121,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65626:[{icon_offset:122,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65627:[{icon_offset:123,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65628:[{icon_offset:124,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65629:[{icon_offset:125,maxScaleVal:22,minScaleVal:16,labelid:262154,density:0}],65630:[{icon_offset:126,maxScaleVal:22,minScaleVal:16,labelid:262154,density:0}],65631:[{icon_offset:127,maxScaleVal:22,minScaleVal:16,labelid:262154,density:0}],65632:[{icon_offset:128,maxScaleVal:22,minScaleVal:16,labelid:262154,density:0}],65633:[{icon_offset:129,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65634:[{icon_offset:130,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65635:[{icon_offset:131,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65636:[{icon_offset:133,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65637:[{icon_offset:134,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65638:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262158,density:0}],65639:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262159,density:0}],65640:[{icon_offset:136,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65641:[{icon_offset:137,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65642:[{icon_offset:138,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65643:[{icon_offset:139,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65644:[{icon_offset:140,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65645:[{icon_offset:141,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65646:[{icon_offset:140,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65647:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262146,density:0}],65648:[{icon_offset:146,maxScaleVal:22,minScaleVal:16,labelid:262162,density:0}],65649:[{icon_offset:143,maxScaleVal:22,minScaleVal:16,labelid:262163,density:0}],65650:[{icon_offset:143,maxScaleVal:22,minScaleVal:16,labelid:262164,density:0}],65651:[{icon_offset:146,maxScaleVal:22,minScaleVal:16,labelid:262165,density:0}],65652:[{icon_offset:145,maxScaleVal:22,minScaleVal:16,labelid:262166,density:0}],65653:[{icon_offset:146,maxScaleVal:22,minScaleVal:16,labelid:262167,density:0}],65654:[{icon_offset:147,maxScaleVal:22,minScaleVal:16,labelid:262168,density:0}],65655:[{icon_offset:147,maxScaleVal:22,minScaleVal:16,labelid:262169,density:0}],65656:[{icon_offset:144,maxScaleVal:22,minScaleVal:16,labelid:262170,density:0}],65657:[{icon_offset:144,maxScaleVal:22,minScaleVal:16,labelid:262171,density:0}],65658:[{icon_offset:147,maxScaleVal:22,minScaleVal:16,labelid:262172,density:0}],65659:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262146,density:0}],65660:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262173,density:0}],65661:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262174,density:0}],65662:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262175,density:0}],65663:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262176,density:0}],65664:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262177,density:0}],65665:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262178,density:0}],65666:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262179,density:0}],65667:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262180,density:0}],65668:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262181,density:0}],65669:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262182,density:0}],65670:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262183,density:0}],65671:[{icon_offset:42,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65672:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262185,density:0}],65673:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262186,density:0}],65674:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262187,density:0}],65675:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262188,density:0}],65676:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262189,density:0}],65677:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262190,density:0}],65678:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262191,density:0}],65679:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262192,density:0}],65680:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262193,density:0}],65681:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262194,density:0}],65682:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262195,density:0}],65683:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262196,density:0}],65684:[{icon_offset:-1,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:8,maxScaleVal:22,minScaleVal:20,labelid:262145,density:0}],65685:[{icon_offset:40,maxScaleVal:22,minScaleVal:16,labelid:262145,density:0}],65686:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:29,maxScaleVal:22,minScaleVal:19,labelid:262145,density:0}],65687:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:46,maxScaleVal:22,minScaleVal:19,labelid:262145,density:0}],65688:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262145,density:0}],65689:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262145,density:0}],65690:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262197,density:0}],65691:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262198,density:0}],65692:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262199,density:0}],65693:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262200,density:0}],65694:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262201,density:0}],65695:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262202,density:0}],65696:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262203,density:0}],65697:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262204,density:0}],65698:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262205,density:0}],65699:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262206,density:0}],65700:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262207,density:0}],65701:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262208,density:0}],65702:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262211,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262145,density:0}],65703:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262212,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262145,density:0}],65704:[{icon_offset:-1,maxScaleVal:19,minScaleVal:16,labelid:262213,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:20,labelid:262145,density:0}],65705:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262214,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262145,density:0}],65706:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262145,density:0}],65707:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262215,density:0}],65708:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262216,density:0}],65709:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262217,density:0}],65710:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262218,density:0}],65711:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262219,density:0}],65712:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262220,density:0}],65713:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262221,density:0}],65714:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262222,density:0}],65715:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262223,density:0}],65716:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262224,density:0}],65717:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262225,density:0}],65718:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262226,density:0}],65719:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262227,density:0}],65720:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262228,density:0}],65721:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262229,density:0}],65722:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262230,density:0}],65723:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262231,density:0}],65724:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262232,density:0}],65725:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262233,density:0}],65726:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262234,density:0}],65727:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262235,density:0}],65728:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262236,density:0}],65729:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262237,density:0}],65730:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262238,density:0}],65731:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:51,maxScaleVal:22,minScaleVal:18,labelid:262156,density:0}],65732:[{icon_offset:148,maxScaleVal:22,minScaleVal:16,labelid:262156,density:0}],65733:[{icon_offset:-1,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:50,maxScaleVal:22,minScaleVal:20,labelid:262156,density:0}],65734:[{icon_offset:150,maxScaleVal:22,minScaleVal:16,labelid:262156,density:0}],65735:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262241,density:0}],65736:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:143,maxScaleVal:22,minScaleVal:19,labelid:262239,density:0}],65737:[{icon_offset:13,maxScaleVal:22,minScaleVal:16,labelid:262239,density:0}],65738:[{icon_offset:-1,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:109,maxScaleVal:22,minScaleVal:20,labelid:262153,density:0}],65739:[{icon_offset:110,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:110,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],65740:[{icon_offset:29,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262246,density:0}],65741:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:152,maxScaleVal:22,minScaleVal:19,labelid:262245,density:0}],65742:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:152,maxScaleVal:22,minScaleVal:19,labelid:262245,density:0}],66437:[{icon_offset:57,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:57,maxScaleVal:22,minScaleVal:20,labelid:262155,density:0}],66438:[{icon_offset:58,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:58,maxScaleVal:22,minScaleVal:20,labelid:262155,density:0}],66439:[{icon_offset:59,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:59,maxScaleVal:22,minScaleVal:20,labelid:262155,density:0}],66440:[{icon_offset:60,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:60,maxScaleVal:22,minScaleVal:20,labelid:262155,density:0}],66441:[{icon_offset:61,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:61,maxScaleVal:22,minScaleVal:20,labelid:262155,density:0}],66442:[{icon_offset:62,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:62,maxScaleVal:22,minScaleVal:20,labelid:262155,density:0}],66443:[{icon_offset:63,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:63,maxScaleVal:22,minScaleVal:20,labelid:262155,density:0}],66444:[{icon_offset:64,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:64,maxScaleVal:22,minScaleVal:20,labelid:262155,density:0}],66445:[{icon_offset:65,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:65,maxScaleVal:22,minScaleVal:20,labelid:262155,density:0}],66446:[{icon_offset:66,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:66,maxScaleVal:22,minScaleVal:20,labelid:262155,density:0}],66447:[{icon_offset:67,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:67,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66448:[{icon_offset:68,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],66449:[{icon_offset:69,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],66450:[{icon_offset:70,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:70,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66451:[{icon_offset:71,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],66452:[{icon_offset:72,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],66453:[{icon_offset:73,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],66454:[{icon_offset:74,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],66455:[{icon_offset:75,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],66456:[{icon_offset:76,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],66457:[{icon_offset:77,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],66458:[{icon_offset:78,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],66459:[{icon_offset:79,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],66460:[{icon_offset:80,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],66461:[{icon_offset:81,maxScaleVal:22,minScaleVal:16,labelid:262146,density:0}],66462:[{icon_offset:86,maxScaleVal:22,minScaleVal:16,labelid:262146,density:0}],66463:[{icon_offset:87,maxScaleVal:22,minScaleVal:16,labelid:262146,density:0}],66464:[{icon_offset:88,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:88,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66465:[{icon_offset:89,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:89,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66466:[{icon_offset:90,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:90,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66467:[{icon_offset:91,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:91,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66468:[{icon_offset:92,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:92,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66469:[{icon_offset:93,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:93,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66470:[{icon_offset:94,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:94,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66471:[{icon_offset:95,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:95,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66472:[{icon_offset:96,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:96,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66473:[{icon_offset:97,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:97,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66474:[{icon_offset:98,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:98,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66475:[{icon_offset:99,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:99,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66476:[{icon_offset:100,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:100,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66477:[{icon_offset:101,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:101,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66478:[{icon_offset:102,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:102,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66479:[{icon_offset:103,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:103,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66480:[{icon_offset:104,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:104,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66481:[{icon_offset:105,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:105,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66482:[{icon_offset:106,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:106,maxScaleVal:22,minScaleVal:20,labelid:262146,density:0}],66483:[{icon_offset:107,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:107,maxScaleVal:22,minScaleVal:20,labelid:262146,density:0}],66484:[{icon_offset:108,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:108,maxScaleVal:22,minScaleVal:20,labelid:262146,density:0}],66485:[{icon_offset:151,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}]},arrowStyles:{},bgColor:"#123182",stylesId:"default"}}()},function(t,e,n){"use strict";function i(t){return t=(0,l.colorToRGBA)(t),[t[0],t[1],t[2],255*t[3]]}function o(){return""}function r(){return s?"bold":""}function a(t){var e=s?"Microsoft YaHei UI,Microsoft YaHei,黑体,Hiragino Sans GB,sans-serif":"Microsoft YaHei UI,Microsoft YaHei,黑体,sans-serif";return t&&t.length>0?t:e}Object.defineProperty(e,"__esModule",{value:!0}),e.convertColorToHex=i,e.getFontStyle=o,e.getFontWeight=r,e.getFontFamily=a;var l=n(7),s=!1},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(18),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(381),f=i(c),d=function(){function t(){(0,l.default)(this,t)}return(0,u.default)(t,[{key:"parse",value:function(t){var e=(0,f.default)(t),n=e.meshes,i=n.reduce(function(t,e){return t+e.header.vertexCount},0);return{mode:4,vertexCount:i,attributes:this.mergeAttributes(n,i)}}},{key:"mergeAttributes",value:function(t,e){var n=new Float32Array(3*e),i=void 0,o=void 0,a=void 0,l=0,s=!0,u=!1,c=void 0;try{for(var f,d=(0,r.default)(t);!(s=(f=d.next()).done);s=!0){var h=f.value,v=h.attributes,p=v.POSITION,m=v.NORMAL,_=v.COLOR_0,g=v.TEXCOORD_0;n.set(p.value,3*l),m&&(i=i||new Int8Array(3*e),i.set(m.value,3*l)),_&&(o=o||new Uint8Array(3*e),o.set(_.value.map(function(t){return Math.round(255*t)}),3*l)),g&&(a=a||new Float32Array(2*e),a.set(g.value,2*l)),l+=p.value.length/3}}catch(t){u=!0,c=t}finally{try{!s&&d.return&&d.return()}finally{if(u)throw c}}var y={};return y.POSITION={value:n,size:3},i&&(y.NORMAL={value:i,size:3}),o&&(y.COLOR_0={value:o,size:3}),a&&(y.TEXCOORD_0={value:a,size:2}),y}}]),t}();e.default=d},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(1),l=i(a),s={Int8:Int8Array,Uint8:Uint8Array,Uint8Clamped:Uint8ClampedArray,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array,Float64:Float64Array},u=function(){function t(e,n,i){(0,r.default)(this,t),n=[].concat(n),this.extendEntitySize=1024,this.entitySize=e||this.extendEntitySize,this.struct=n,this.attributes=i;for(var o=void 0,a=void 0,l=0,u=0,c=n.length;u<c;u++)o=n[u],a=s[o].BYTES_PER_ELEMENT,n[u]={type:o,BYTES_PER_ELEMENT:a},l+=a;this.unit8=new Uint8Array(e*l),this.arrayBuffer=this.unit8.buffer,this.dataView=new DataView(this.arrayBuffer),this.bytesPerElement=l,this.length=0}return(0,l.default)(t,[{key:"add",value:function(t){if(t instanceof Array&&0!==t.length){if(t[0]instanceof Array)for(var e=0,n=t.length;e<n;e++)this.addItem(t[e]);else for(var i=0,o=t.length;i<o;i++)this.addItem([t[i]])}}},{key:"addItem",value:function(t){var e=this.struct;if(t.length!==e.length)throw new Error("add data error");(this.length+1)*this.bytesPerElement>this.arrayBuffer.byteLength&&this.extend();for(var n=this.length,i=this.bytesPerElement,o=void 0,r=void 0,a=this.dataView,l=0,s=0,u=e.length;s<u;s++)o=e[s?s-1:0],r=e[s],s>0&&(l+=o.BYTES_PER_ELEMENT),a["set"+r.type](n*i+l,t[s],!0);this.length+=1}},{key:"extend",value:function(){this.resize(this.entitySize+this.extendEntitySize)}},{key:"compress",value:function(){this.resize(this.length)}},{key:"resize",value:function(t){var e=this.unit8;t>this.entitySize?(this.arrayBuffer=new ArrayBuffer(t*this.bytesPerElement),this.unit8=new Uint8Array(this.arrayBuffer),this.unit8.set(e)):this.entitySize,this.entitySize=t,this.dataView=new DataView(this.arrayBuffer)}},{key:"toArray",value:function(){for(var t=this.struct,e=this.length,n=this.bytesPerElement,i=this.dataView,o=[],r=void 0,a=0;a<e;a++)for(var l=0,s=0;s<t.length;s++)r=t[s],o.push(i["get"+r.type](n*a+l,!0)),l+=r.BYTES_PER_ELEMENT;return o}}]),t}();e.default=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){for(var n=void 0,i=new p.default,o=[],a=(0,h.default)(t).sort(function(t,e){return Number(t)-Number(e)}),l=0,s=a.length;l<s;l++){n=t[a[l]];var c=n[0].type;c===m.BASE_LAYER_TYPE.line?(o.push(Number(a[l])),r(n,i)):c===m.BASE_LAYER_TYPE.region&&u(n,i)}return{vertices:i.vertiesDataBuffer,indeices:i.indicesDataBuffer,size:i.indicesDataBuffer.length,id:e,vertiesCount:i.vertiesDataBuffer.length,lineCount:i.lineCount,lineRankKeys:o}}function r(t,e){for(var n=0,i=t.length;n<i;n++)s(t[n],e,"side");for(var o=0,r=t.length;o<r;o++)s(t[o],e,"fill")}function a(t){return t=Math.ceil(t||0)}function l(t,e){var n=t.style,i=n.sidewidth,o=n.width,r=t.style,l=r.has_side,s=r.has_dash,u=r.color_side,c=r.color_fill,d=r.dash_length,h=r.dash_space,v=t.preStyle,p=t.nextStyle,m=t.zLevel,_=t.options,g=t.transform;return o=a(o),i=a(i),"side"===e?l?(i=i-o<2?o+2:i,{hasDash:!1,color:f(u),width:i,preWidth:a(v&&v.sidewidth),nextWidth:a(p&&p.sidewidth),noTerminal:m||s,deltaSideWidth:Math.ceil(i-o),isSide:1,styleId:t.layerId,transform:g}):null:{hasDash:s,dashLength:s?d:0,dashSpace:s?h:0,color:f(c),width:o,preWidth:a(v&&v.width),nextWidth:a(p&&p.width),noTerminal:m||s,startDistance:_&&_.startDistance||0,isSide:0,styleId:t.layerId,transform:g}}function s(t,e,n){var i=l(t,n);if(i){var o=i.color,r=i.width,a=i.dashLength,s=i.dashSpace,u=i.startDistance;t.datas.forEach(function(t){e.addLine(i,t,o,r,a,s,u)})}}function u(t,e){for(var n=0,i=t.length;n<i;n++)c(t[n],e)}function c(t,e){var n=t.datas,i=t.style,o=f(i.color_border||i.color_side),r=f(i.color_fill),a=i.sidewidth;if(0!==r[3]){if(o[3]>0&&a>0)for(var l=0,s=n.length;l<s;l++){var u=n[l];if(!(u.length<=4)){var c={transform:t.transform};e.addLine(c,u,o,a,null,null,null,!0)}}for(var d=0,h=n.length;d<h;d++){var v=n[d];v.length<=4||e.addPolygon(v,r,{transform:t.transform})}}}function f(t){return t[0]<=1&&t[1]<=1&&t[2]<=1&&(t[0]=Math.floor(255*t[0]),t[1]=Math.floor(255*t[1]),t[2]=Math.floor(255*t[2])),t[3]<2&&(t[3]=Math.floor(255*t[3])),t}Object.defineProperty(e,"__esModule",{value:!0});var d=n(16),h=i(d),v=n(545),p=i(v),m=n(43);e.default=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return t.map(function(t,e){return 3===e?Math.round(255*t):Math.round(t)})}function r(t,e){var n=new u.default,i=!0,r=!1,a=void 0;try{for(var s,c=(0,l.default)(t);!(i=(s=c.next()).done);i=!0){var f=s.value;n.add({points:f.datas,height:f.h,colorFill:o(f.colorFill),colorSide:o(f.colorSide),transform:f.transform})}}catch(t){r=!0,a=t}finally{try{!i&&c.return&&c.return()}finally{if(r)throw a}}return{vertices:n.vertiesDataBuffer,indeices:n.indicesDataBuffer,size:n.indicesDataBuffer.length,id:e}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(18),l=i(a),s=n(546),u=i(s);e.default=r},function(t,e,n){"use strict";function i(t,e){var n=e.info,i=!0,o=!1,a=void 0;try{for(var l,s=(0,r.default)(t);!(i=(l=s.next()).done);i=!0){var u=l.value,c=u.datas[0];if(c&&c.icon&&c.icon_coords){if(!n[String(c.icon)])continue;u.id="icon_"+u.id}}}catch(t){o=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}return t}Object.defineProperty(e,"__esModule",{value:!0});var o=n(18),r=function(t){return t&&t.__esModule?t:{default:t}}(o);e.default=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){return t&&!(0,v.isInterceptForPlacement)(e,t.coordZ)?t:null}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),a=i(r),l=n(1),s=i(l),u=n(17),c=i(u),f=n(544),d=i(f),h=n(43),v=n(385),p=function(){function t(e,n){(0,a.default)(this,t),this._textCache=e,this.placement=new d.default({textCache:this._textCache}),this._currentPlacementIndex=n.length-1,this._currentTileIndex=0,this._isDone=!1,this._batchedUpdate=!1,this._fadeUntil=0,this._batchUpdateTime=0,this._destroyed=!1}return(0,s.default)(t,[{key:"isDone",value:function(){return this._isDone}},{key:"continuePlacement",value:function(t,e,n,i){if(!this._destroyed){for(var r=i.zoom,a=Math.round(r),l=c.default.now(),s=!1;this._currentPlacementIndex>=0;){var u=t[this._currentPlacementIndex];if(u&&u.type===h.BASE_LAYER_TYPE.text){var f=t.filter(function(t){return t.type===h.BASE_LAYER_TYPE.point})[0],d=t.filter(function(t){return t.type===h.BASE_LAYER_TYPE.label})[0];for(u=f||d||u;this._currentTileIndex<u.tiles.length;){var v=u.tiles[this._currentTileIndex],p=d&&d.tiles[this._currentTileIndex],m=f&&f.tiles[this._currentTileIndex],_=e[v.id],g=this._textCache?this._textCache.tiles[v.id]:null,y=p&&p.features&&p.features.instance&&p.features.instance.count>0||m&&m.features&&m.features.instance&&m.features.instance.count>0;if(_&&(this._textCache?g:y)&&(this.placement.calculateTextByTile({label:o(p,r),poi:o(m,r),icon:o(m,r)},_,n,i),this.placement.impactTextByTile(v)),this._currentTileIndex+=1,c.default.now()-l>4){s=!0;break}}if(s)return}if(u&&u.type===h.RENDER_LAYER_TYPE.indoorPoi&&u.tiles.length>0){var x=u.tiles[0],b=n.pvMatrix,S=x.features.pois[a]&&x.features.pois[a][0],w=S&&S.instance&&S.instance.count>0;b&&w&&(this.placement.calculateAllIndoorPois(S,x.features.center,b,n,i,x),this.placement.impactTextByTile(x))}this._currentPlacementIndex-=1}this._isDone=!0}}},{key:"batchUpdate",value:function(t){return this.placement.batchUpdate(t),this._batchedUpdate=!0,this._fadeUntil=c.default.now()+300,this.placement}},{key:"isFading",value:function(){return this._isDone&&c.default.now()<this._fadeUntil}},{key:"destroy",value:function(){this._destroyed||(this._textCache=null,this.placement.clear(),this.placement=null,this._currentPlacementIndex=null,this._currentTileIndex=null,this._isDone=null,this._batchedUpdate=null,this._fadeUntil=null,this._batchUpdateTime=null,this._destroyed=!0)}}]),t}();e.default=p},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(47),r=i(o),a=n(14),l=i(a),s=n(18),u=i(s),c=n(16),f=i(c),d=n(0),h=i(d),v=n(1),p=i(v),m=n(140),_=n(20),g=i(_),y=n(7),x=i(y),b=n(17),S=i(b),w=n(138),E=80,T=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,h.default)(this,t),this.DELTA_SCREEN_CELL=Math.round(E*(e.textCache&&e.textCache.scale||1)),this.boundsBuffer=0,this.iconBoundsBuffer=0,this.textScreenCoordList={},this.textDataSet={},this.textTileCellSet={},this.textFeatureSet={},this.poiScreenCoordList={},this.poiDataSet={},this.poiTileCellSet={},this.iconScreenCoordList={},this.iconDataSet={},this.iconTileCellSet={},this.v=1,this.instanceSet={},this.cellSet={},this._batchUpdateTime=0}return(0,p.default)(t,[{key:"updateVersion",value:function(){this.v+=1}},{key:"clear",value:function(){this.clearText(),this.clearPoi(),this.clearIcon(),this.instanceSet={},this.cellSet={}}},{key:"clearText",value:function(){var t=this,e=this.v,n=this.textDataSet,i=this.textScreenCoordList;x.default.forIn(n,function(i,o){if(o.v!==e){var r=o.tileId,a=o.roadSymbolIndex;t.instanceSet[r]&&(t.instanceSet[r].instanceInfosTypeArray[4*a+1]=0),delete n[i]}}),x.default.forIn(i,function(t,n){x.default.forIn(n,function(t,i){"cell"!==t&&i.v!==e&&delete n[t]})}),this.textTileCellSet={}}},{key:"clearPoi",value:function(){var t=this;(0,f.default)(this.poiDataSet).forEach(function(e){var n=t.poiDataSet[e],i=n.tileId,o=n.textSymbolIndexList;t.instanceSet[i]&&o.forEach(function(e){t.instanceSet[i].instanceInfosTypeArray[4*e+1]=1})}),this.poiDataSet={},this.poiScreenCoordList={},this.poiTileCellSet={}}},{key:"clearIcon",value:function(){var t=this;(0,f.default)(this.iconDataSet).forEach(function(e){var n=t.iconDataSet[e],i=n.tileId,o=n.iconSymbolIndex;t.instanceSet[i]&&(t.instanceSet[i].instanceInfosTypeArray[4*o+1]=1)}),this.iconDataSet={},this.iconScreenCoordList={},this.iconTileCellSet={}}},{key:"_sortValue",value:function(t,e){return e.y-t.y>t.x-e.x?1:-1}},{key:"getFadeChange",value:function(){return(S.default.now()-this._batchUpdateTime)/500}},{key:"batchUpdate",value:function(t){this._batchUpdateTime=S.default.now(),this.batchUpdateShow();var e=0;t&&(e=(this._batchUpdateTime-t._batchUpdateTime)/500),this.batchChangeOpacity(t,e),this.batchUpdateOpacities()}},{key:"batchUpdateShow",value:function(){var t=this;(0,f.default)(this.textDataSet).forEach(function(e){var n=t.textDataSet[e];n.updateShow&&n.updateShow()}),(0,f.default)(this.poiDataSet).forEach(function(e){var n=t.poiDataSet[e];n.updateShow&&n.updateShow()}),(0,f.default)(this.iconDataSet).forEach(function(e){var n=t.iconDataSet[e];n.updateShow&&n.updateShow()})}},{key:"batchChangeOpacity",value:function(t,e){var n=this;(0,f.default)(this.textDataSet).forEach(function(i){var o=n.textDataSet[i];if(o.setOpacity){var r=t&&t.textDataSet&&t.textDataSet[i];r&&null!==r._opacity?o.setOpacity(r.getShow()!==o.getShow()?r.getOpacity():x.default.clamp(r._opacity+(o.getShow()?e:-e),0,1)):o.setOpacity(o.getShow()?1:0)}}),(0,f.default)(this.poiDataSet).forEach(function(i){var o=n.poiDataSet[i];if(o.setOpacity){var r=t&&t.poiDataSet&&t.poiDataSet[i];r&&null!==r._opacity?o.setOpacity(r.getShow()!==o.getShow()?r.getOpacity():x.default.clamp(r._opacity+(o.getShow()?e:-e),0,1)):r&&r.getShow()?o.setOpacity(1):o.setOpacity(o.isIndoor&&o.getShow()?1:0)}}),(0,f.default)(this.iconDataSet).forEach(function(i){var o=n.iconDataSet[i];if(o.setOpacity){var r=t&&t.iconDataSet&&t.iconDataSet[i];r&&null!==r._opacity?o.setOpacity(r.getShow()!==o.getShow()?r.getOpacity():x.default.clamp(r._opacity+(o.getShow()?e:-e),0,1)):r&&r.getShow()?o.setOpacity(1):o.setOpacity(o.isIndoor&&o.getShow()?1:0)}})}},{key:"batchUpdateOpacities",value:function(){var t=this;(0,f.default)(this.textDataSet).forEach(function(e){var n=t.textDataSet[e];n.updateOpacity&&n.updateOpacity()}),(0,f.default)(this.poiDataSet).forEach(function(e){var n=t.poiDataSet[e];n.updateOpacity&&n.updateOpacity()}),(0,f.default)(this.iconDataSet).forEach(function(e){var n=t.iconDataSet[e];n.updateOpacity&&n.updateOpacity()})}},{key:"calculateAlsoShowedLabel",value:function(t,e,n){var i=this;(0,f.default)(this.textFeatureSet).filter(function(t){return i.textFeatureSet[t].getShow()}).forEach(function(o){var r=i.textFeatureSet[o];t[r.tileId]&&i.calculateLabelFeatures({matrix:t[r.tileId]},r.roadFeature.roads,e,r.tile,n,r.tileFeatures,r.roadFeature)})}},{key:"calculateTextByTile",value:function(t,e,n,i){t.label&&this.calculateLabelByTile(t.label,e,n,i),t.poi&&this.calculatePoiByTile(t.poi,e,n,i),t.icon&&this.calculateIconByTile(t.icon,e,n,i)}},{key:"calculateLabelByTile",value:function(t,e,n,i){var o=!0,r=!1,a=void 0;try{for(var l,s=(0,u.default)(t.features);!(o=(l=s.next()).done);o=!0){var c=l.value;c.roads instanceof Array&&c.roads.length&&this.calculateLabelFeatures({matrix:e},c.roads,n,t,i,t.features,c)}}catch(t){r=!0,a=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw a}}}},{key:"calculatePoiByTile",value:function(t,e,n,i){var o=!0,r=!1,a=void 0;try{for(var l,s=(0,u.default)(t.features);!(o=(l=s.next()).done);o=!0){var c=l.value;if(c.datas&&c.datas[0]&&c.datas[0].text){var f=void 0;c.datas[0].icon&&(f=c.id),this.calculatePoi({matrix:e},c,t.scale,null,n,t.offset,f,t,i,t.features)}}}catch(t){r=!0,a=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw a}}}},{key:"calculateIconByTile",value:function(t,e,n,i){var o=1/t.scale,r=!0,a=!1,l=void 0;try{for(var s,c=(0,u.default)(t.features);!(r=(s=c.next()).done);r=!0){var f=s.value;"iconSymbolIndex"in f&&this.calculateIcon({matrix:e,scale:o},f.id,t,f,n,i,t.features)}}catch(t){a=!0,l=t}finally{try{!r&&c.return&&c.return()}finally{if(a)throw l}}}},{key:"impactTextByTile",value:function(t){var e=this,n=this.textTileCellSet[t.id]||null,i=this.poiTileCellSet[t.id]||null,o=this.iconTileCellSet[t.id]||null,r=(0,l.default)({},n,i,o);(0,f.default)(r).forEach(function(t){e.impactTextByCellId(t)})}},{key:"impactTextByCellId",value:function(t){var e=this,n=this.textDataSet,i=this.poiDataSet,o=this.iconDataSet,r=this.textScreenCoordList,a=this.poiScreenCoordList,l=this.iconScreenCoordList,s=void 0,u=void 0;x.default.forIn(r[t],function(s,c){if((u=n[s])&&u.getShow())for(var f=u,d=f.linkIds,h=r[t].cell,v=0;v<3;v++)if(u&&u.getShow())for(var p=0;p<3;p++)if(u&&u.getShow()){var m=h[0]+v-1+"_"+(h[1]+p-1),_=r[m],g=a[m],y=l[m];_&&x.default.forIn(_,function(t,i){var o=n[t];if(o&&o.getShow&&t!==s&&(!d||!d[t])&&e._impact(c,i))if(u.rank>o.rank){o.setShow(!1);var r=o.linkIds;x.default.forIn(r,function(t){n[t].setShow(!1)})}else{u.setShow(!1);var a=u,l=a.linkIds;x.default.forIn(l,function(t){n[t].setShow(!1)})}}),g&&x.default.forIn(g,function(t,o){var r=i[t];if(r&&r.getShow()&&e._impact(c,o)){u.setShow(!1);var a=u,l=a.linkIds;x.default.forIn(l,function(t){n[t].setShow(!1)})}}),y&&x.default.forIn(y,function(t,n){var i=o[t];i&&i.getShow()&&u.rank>=i.rank&&e._impact(c,n)&&i.setShow(!1)})}}),x.default.forIn(a[t],function(n,r){if((s=i[n])&&s.getShow())for(var u=s.linkId,c=a[t].cell,f=0;f<3;f++)if(s&&s.getShow())for(var d=0;d<3;d++)if(s&&s.getShow()){var h=c[0]+f-1+"_"+(c[1]+d-1),v=a[h],p=l[h];p&&x.default.forIn(p,function(t,n){var i=o[t];i&&i.getShow()&&s.iconId!==i.id&&s.rank>=i.rank&&e._impact(r,n)&&i.setShow(!1)}),v&&x.default.forIn(v,function(t,a){var l=i[t];if(n!==t&&l&&l.getShow()&&(!u||u!==t)&&e._impact(r,a))if(s.rank>l.rank){l.setShow(!1),o[l.iconId]&&o[l.iconId].setShow(!1);var c=l.linkId;c&&i[c]&&i[c].setShow(!1)}else{s.setShow(!1),o[s.iconId]&&o[s.iconId].setShow(!1);var f=s,d=f.linkId;d&&i[d]&&i[d].setShow(!1)}})}}),x.default.forIn(l[t],function(n,i){var r=o[n];if(r&&r.getShow())for(var a=l[t].cell,s=0;s<3;s++)if(r&&r.getShow())for(var u=0;u<3;u++)if(r&&r.getShow()){var c=a[0]+s-1+"_"+(a[1]+u-1),f=l[c];i.isInCell&&c!==t||f&&x.default.forIn(f,function(t,a){var l=o[t];n!==t&&l&&l.getShow()&&e._impact(i,a)&&(r.rank>l.rank?l.setShow(!1):r.setShow(!1))})}})}},{key:"textImpact",value:function(){var t=this;x.default.forIn(this.cellSet,function(e){t.impactTextByCellId(e)})}},{key:"_impactCoord",value:function(t,e){return!(Math.abs(t.z-e.z)>0||Math.abs(t.x-e.x)>1||Math.abs(t.y-e.y)>1)}},{key:"_impact",value:function(t,e){var n=t.x<=e.x?e.x:t.x,i=t.y<=e.y?e.y:t.y;return n>=t.x&&n<=t.x+t.w&&i>=t.y&&i<=t.y+t.h&&n>=e.x&&n<=e.x+e.w&&i>=e.y&&i<=e.y+e.h}},{key:"calculateLabelFeatures",value:function(t,e,n,i,o,r,a){if(r.instance){this.instanceSet[i.id]=r.instance;var l=e.length/2-.5,s=Math.floor(l),c=e[0].font_size||12,f=void 0;if(l%1==0)f=e[l].datas[0].coords;else{var d=e[Math.floor(l)].datas[0].coords,h=e[Math.ceil(l)].datas[0].coords;f=[(d[0]+h[0])/2,(d[1]+h[1])/2]}var v=new m.Vector4(0,0,0,1),p=!0,_=!1,g=void 0;try{for(var y,x=(0,u.default)(e);!(p=(y=x.next()).done);p=!0){var b=y.value,S=b.datas[0].screenCoords;if(!S||S.version!==n.version){v.elements[0]=b.datas[0].coords[0]+c/2,v.elements[1]=-(b.datas[0].coords[1]+c/2);var w=n.getScreenCoordsByCustomMatrix(t.matrix,v);w.rank=b.datas[0].rank,b.datas[0].screenCoords=w}}}catch(t){_=!0,g=t}finally{try{!p&&x.return&&x.return()}finally{if(_)throw g}}for(var E=e[Math.floor(l)],T=e[Math.ceil(l)],I=E.datas[0].screenCoords,A=T.datas[0].screenCoords,k={x:(I.x+A.x)/2,y:(I.y+A.y)/2},P=e[0].datas[0].coords,M=e[e.length-1].datas[0].coords,L={x:P[0],y:P[1]},C={x:M[0],y:M[1]},N=this._sortValue(L,C),O=this._sortValue(e[0].datas[0].screenCoords,e[e.length-1].datas[0].screenCoords),R=N!==O,V=void 0,B={},F=0,z=0,D=void 0,U=0,Y=e.length;U<Y;U++){var j=e[U].datas[0],G=void 0,W=void 0,Z=R?e[Y-U-1]:e[U];j.text=Z.datas[1].text,j.text_bounds=Z.datas[1].text_bounds,j.glyph_text_bounds=Z.datas[1].glyph_text_bounds;var X=Z.roadSymbolIndex,H=r.instance.instanceTransTypeArray[3*X],Q=r.instance.instanceTransTypeArray[3*X+1],q=r.instance.instanceTransTypeArray[3*X+2];Z.roadSymbolIndex=e[U].roadSymbolIndex,r.instance.instanceTransTypeArray[3*Z.roadSymbolIndex]=r.instance.instanceTransTypeArray[3*e[U].roadSymbolIndex],r.instance.instanceTransTypeArray[3*Z.roadSymbolIndex+1]=r.instance.instanceTransTypeArray[3*e[U].roadSymbolIndex+1],r.instance.instanceTransTypeArray[3*Z.roadSymbolIndex+2]=r.instance.instanceTransTypeArray[3*e[U].roadSymbolIndex+2],e[U].roadSymbolIndex=X,r.instance.instanceTransTypeArray[3*e[U].roadSymbolIndex]=H,r.instance.instanceTransTypeArray[3*e[U].roadSymbolIndex+1]=Q,r.instance.instanceTransTypeArray[3*e[U].roadSymbolIndex+2]=q,U<Y-1&&(G=e[U+1].datas[0],W=this.lineAngle(j.screenCoords,G.screenCoords),V=U===Y-2?W:0),j.line=U===Y-1?V:W,j.line>=45&&j.line<=135||j.line>=225&&j.line<=315?z+=1:F+=1;var J="label_"+e[U].datas[0].text+"_"+e[U].id;B[J]=J}if(F===z){var K=e[0].datas[0].line;D=!(K>=45&&K<=135||K>=225&&K<=315)}else D=F>=z;for(var $=e.map(function(t){return t.id}).join(),tt=s;tt>=0;tt--){var et={coords:tt===s?f:e[tt+1].datas[0].coords,newCoords:tt===s?f:e[tt+1].datas[0].newCoords,screenCoords:tt===s?k:e[tt+1].datas[0].screenCoords};this.calculate({transform:t,feature:e[tt],camera:n,tile:i,neighbor:et,linkIds:B,fixType:D,gltrans:o,tileFeatures:r,roadFeature:a,roadFeatureId:$})}for(var nt=s+1;nt<e.length;nt++){var it={coords:nt===s+1?f:e[nt-1].datas[0].coords,newCoords:nt===s+1?f:e[nt-1].datas[0].newCoords,screenCoords:nt===s+1?k:e[nt-1].datas[0].screenCoords};this.calculate({transform:t,feature:e[nt],camera:n,tile:i,neighbor:it,linkIds:B,fixType:D,gltrans:o,tileFeatures:r,roadFeature:a,roadFeatureId:$})}}}},{key:"calculate",value:function(t){var e=t.transform,n=t.feature,i=t.camera,o=t.tile,r=t.neighbor,a=t.linkIds,l=t.fixType,s=t.gltrans,u=t.tileFeatures,c=t.roadFeature,f=t.roadFeatureId,d=n.datas[0],h=i.scale,v=n.roadSymbolIndex,p=d.text,_="label_"+p+"_"+n.id,g=u.instance.instanceCoordsTypeArray[4*v]*h,y=u.instance.instanceCoordsTypeArray[4*v+1]*h,x=d.screenCoords,b=d.line||0,S=360-this.calMix(l,b)||0,w=Math.sqrt(Math.pow(x.x-r.screenCoords.x,2)+Math.pow(x.y-r.screenCoords.y,2)),E=this.calCoords(r.coords,d.coords,w,r.newCoords,d.coordScale,h),T=E[0],I=E[1];d.newCoords=[T,I],u.instance.instanceTransTypeArray[3*v]=T,u.instance.instanceTransTypeArray[3*v+1]=-I;var A=d.newScreenCoords;if(!A||A.version!==i.version){var k=new m.Vector4(0,0,0,1);k.elements[0]=T,k.elements[1]=-I,d.newScreenCoords=i.getScreenCoordsByCustomMatrix(e.matrix,k),A=d.newScreenCoords,A.rank=d.rank,A.w=g,A.h=y,A.x-=g/2,A.y-=y/2}var P=Math.floor(A.x/this.DELTA_SCREEN_CELL),M=Math.floor(A.y/this.DELTA_SCREEN_CELL),L=P+"_"+M;A.isInCell=P===Math.floor((A.x+A.w)/this.DELTA_SCREEN_CELL)&&M===Math.floor((A.y+A.h)/this.DELTA_SCREEN_CELL),this.textFeatureSet[f]||(this.textFeatureSet[f]={_show:!0,tileId:o.id,roadFeature:c,tile:o,tileFeatures:u,getShow:function(){return this._show},setShow:function(t){this._show=t}});var C=this,N={v:this.v,_show:!0,roadSymbolIndex:v,rank:d.rank,tileId:o.id,linkIds:a,coordX:o.coordX,coordY:o.coordY,coordZ:o.coordZ,_opacity:null,getOpacity:function(){return this._opacity},setOpacity:function(t){this._opacity=t},updateOpacity:function(){u.instance.instanceInfosTypeArray[4*this.roadSymbolIndex+3]=this._opacity},getShow:function(){return this._show},setShow:function(t){this._show=t,C.textFeatureSet[f].setShow(t)},updateShow:function(){u.instance.instanceInfosTypeArray[4*this.roadSymbolIndex+1]=this._show?1:0}};A.x+A.w<-120||A.x>s.width+120||A.y+A.h<-120||A.y>s.height+120?N.setShow(!1):(A.v=this.v,this.textTileCellSet[o.id]=this.textTileCellSet[o.id]||{},this.textTileCellSet[o.id][L]=!0,this.textScreenCoordList[L]=this.textScreenCoordList[L]||{cell:[P,M]},this.textScreenCoordList[L][_]=A,this.cellSet[L]=!0),u.instance.instanceInfosTypeArray[4*v]=-S%360*Math.PI/180,u.instance.instanceInfosTypeArray[4*v+1]=1;var O=this.textDataSet[_];O&&(N.setShow(O.getShow()),N.setOpacity(O.getOpacity())),this.textDataSet[_]=N}},{key:"calculateAllIndoorPois",value:function(t,e,n,i,o,r){var a=this;if(t.instance){this.instanceSet[r.id]=t.instance;var l=o.getDistanceScales(),s=o.center,u=1/(0,w.getSpatialResolution)(o.zoom);t.forEach(function(c){var f="iconSymbolIndex"in c,d=c.length>0&&c[0].instance_trans;if(f||d){var h=c.iconSymbolIndex,v=r.id+"_icon_"+h,p=c.map(function(t,e){return"indoor_"+t.text+"_"+r.id+"_"+(t.textSymbolIndexList&&t.textSymbolIndexList[e]||"")}),m=c.map(function(t){return t.text}).join("/"),_=o.latLngToCenterLocalPixelByDistanceScales(e,{distanceScales:l,center:s,pixelsPerMeter:u,offsetMercator:f?{x:t.instance.instanceTransTypeArray[3*h],y:t.instance.instanceTransTypeArray[3*h+1]}:{x:c[0].instance_trans[0],y:c[0].instance_trans[1]}});a.calculateSingleIndoorPoi(c,{linkIds:p,indoorTile:r,hasIcon:f,iconId:v,localPixel:_,camera:i,tileMatrix:n,transform:o,indoorPois:t,textName:m}),f&&a.calculateIndoorPoiIcon({indoorPois:t,iconId:v,poiInfo:c,localPixel:_,tileMatrix:n,camera:i,transform:o,tile:r,textName:m})}})}}},{key:"calculateSingleIndoorPoi",value:function(t,e){var n=this,i=t,o=e.linkIds,a=e.indoorTile,l=e.hasIcon,s=e.iconId,u=e.localPixel,c=e.camera,f=e.tileMatrix,d=e.transform,h=e.indoorPois,v=e.textName;i.forEach(function(t,e){if(0!==t.textBounds.w&&0!==t.textBounds.h){var p=o[e],m=0===e?o[1]:o[0],_=n._generatePoiDataItem({isIndoor:!0,textSymbolIndexList:t.textSymbolIndexList,rank:t.rank,tile:a,linkId:m,iconId:s,instance:h.instance,name:v});if(n.poiDataSet[p]=_,!(e>0)){var y=1,x=1,b=0;if(i.length>1){var S=i.map(function(t){return t.textBounds}),w=(0,r.default)(S,2),E=w[0],T=w[1],I=i.map(function(t){return t.anchor}),A=(0,r.default)(I,2),k=A[0],P=A[1];T.w>E.w&&(y=T.w/E.w);var M=Math.abs(P.y-k.y)-(E.h+T.h)/2;x=(E.h+T.h+M)/E.h;var L=k.x-E.w/2-(P.x-T.w/2);L>0&&(b=L)}var C=n._generateScreenCoordsForPoi({screenCoordsContainer:t,localPixel:u,textInfo:t,boundsScale:y,boundsH:x,camera:c,tileMatrix:f,correctCallback:function(e){if(e.x-=b,l){var n=g.default.iconSize*c.scale,i=t.anchor;i.x>0?(e.x-=n,e.w+=n):i.x<0?e.w+=n:(e.h+=n,i.y>0&&(e.y-=n))}}});n._packPoiToSet(C,{item:_,transform:d,infoId:p,tile:a})}}})}},{key:"calculateIndoorPoiIcon",value:function(t){var e=t.indoorPois,n=t.iconId,i=t.poiInfo,o=t.localPixel,r=t.tileMatrix,a=t.camera,l=t.transform,s=t.tile,u=t.textName,c=new m.Vector4(0,0,0,1);c.elements[0]=o.x,c.elements[1]=o.y;var f=i.iconScreenCoods;if(!f||f.version!==a.version){i.iconScreenCoods=a.getScreenCoordsByCustomMatrix(r,c),f=i.iconScreenCoods,f.rank=i[0].rank||0,f.coord={x:f.x,y:f.y};var d=g.default.iconSize*a.scale;f.x-=d/2,f.y-=d/2,f.w=d,f.h=d,f.iconSymbolIndex=i.iconSymbolIndex}this._packIconToSet(f,{id:n,isIndoor:!0,tileId:s.id,gltrans:l,instance:e.instance,needIcon:!i[0].textSymbolIndex,name:u})}},{key:"calculatePoi",value:function(t,e,n,i,o,r,a,l,s,u){if(u.instance){this.instanceSet[l.id]=u.instance;var c=e.datas[0];if(c.coords.length)for(var f=c.text,d=1,h=1,v=c.text_bounds,p=void 0,m=0,_=f.length;m<_;m++){var g="text_"+f[m].text+"_"+e.id,y=void 0;if(p=2===_?v.slice(4*(1-m),4*(1-m)+4):v.slice(4*m,4*m+4),!(p[2]<10||p[3]<10)&&f[m].instance_trans){if(2===_){var x=f[1].text,b=f[0].text;y=0===m?"text_"+x+"_"+e.id:"text_"+b+"_"+e.id,d=f[0].instance_coords&&f[1].instance_coords?f[0].instance_coords[0]>f[1].instance_coords[0]?1:f[1].instance_coords[0]/f[0].instance_coords[0]:1,h=2}this.calculateSingle(t,f[m],g,a,e,o,y,l,m,d,h,s,u)}}}}},{key:"calculateSingle",value:function(t,e,n,i,o,r,a,l,s,u,c,f,d){var h=e.textSymbolIndexList,v=e.rank,p=this._generatePoiDataItem({isIndoor:!1,textSymbolIndexList:h,rank:v,tile:l,linkId:a,iconId:i,instance:d.instance,index:s,name:o.datas[0].textName});if(this.poiDataSet[n]=p,s)return void(this.poiDataSet[n]=p);var m=this._generateScreenCoordsForPoi({screenCoordsContainer:o.datas[0],localPixel:{x:e.instance_trans[0],y:e.instance_trans[1]},textInfo:e,boundsScale:u,boundsH:c,tileMatrix:t.matrix,camera:r,correctCallback:function(t){var n=e.centerOffset,o=g.default.iconSize,a=r.scale,l=e.instance_coords[0],s=!!i;if(n){var c={x:0,y:0},f={x:0,y:0};if(0===n.x){if(c.x=-l*(u-1)/2,s){var d=Math.abs(e.instance_coords[3])+o/2;c.y=n.y>0?-d:0,f.y=d}}else{var h=Math.abs(e.instance_coords[2])+o/2;c.x=n.x<0?-l*(u-1):-h,f.x=h}t.x+=c.x*a,t.y+=c.y*a,t.w+=f.x*a,t.h+=f.y*a}}});this._packPoiToSet(m,{item:p,infoId:n,tile:l,transform:f})}},{key:"_generateScreenCoordsForPoi",value:function(t){var e=t.screenCoordsContainer,n=t.localPixel,i=t.textInfo,o=t.boundsScale,r=t.boundsH,a=t.camera,l=t.tileMatrix,s=t.correctCallback,u=new m.Vector4(0,0,0,1),c=e.poiScreenCoords,f=a.scale;if(!c||c.version!==a.version){u.elements[0]=n.x,u.elements[1]=n.y;var d=i.instance_coords[0]*f,h=i.instance_coords[1]*f,v={x:i.instance_coords[2]*f,y:i.instance_coords[3]*f};e.poiScreenCoords=a.getScreenCoordsByCustomMatrix(l,u),c=e.poiScreenCoords,c.rank=i.rank||0,c.coord={x:c.x,y:c.y},c.x-=v.x,c.y-=v.y,c.w=d*o,c.h=h*r,s&&s(c)}return c}},{key:"_generatePoiDataItem",value:function(t){return{name:t.name||"",_show:!0,textSymbolIndexList:t.textSymbolIndexList,rank:t.rank,isIndoor:t.isIndoor,tileId:t.tile.id,linkId:t.linkId,iconId:t.iconId,coordX:t.tile.coordX,coordY:t.tile.coordY,coordZ:t.tile.coordZ,index:t.index||0,_opacity:null,getOpacity:function(){return this._opacity},setOpacity:function(t){this._opacity=t},updateOpacity:function(){var e=this;this.textSymbolIndexList.forEach(function(n){t.instance.instanceInfosTypeArray[4*n+3]=e._opacity})},getShow:function(){return this._show},setShow:function(t){this._show=t},updateShow:function(){var e=this;this.textSymbolIndexList.forEach(function(n){t.instance.instanceInfosTypeArray[4*n+1]=e._show?1:0})}}}},{key:"_packPoiToSet",value:function(t,e){var n=this.calCellCoord(t),i=n.hIdx,o=n.vIdx,r=n.cellId;t.isInCell=i===Math.floor((t.x+t.w)/this.DELTA_SCREEN_CELL)&&o===Math.floor((t.y+t.h)/this.DELTA_SCREEN_CELL),t.x+t.w<-120||t.x>e.transform.width+120||t.y+t.h<-120||t.y>e.transform.height+120?e.item.setShow(!1):(this.poiScreenCoordList[r]?this.poiScreenCoordList[r][e.infoId]=t:(this.poiScreenCoordList[r]={cell:[i,o]},this.poiScreenCoordList[r][e.infoId]=t),this.poiTileCellSet[e.tile.id]=this.poiTileCellSet[e.tile.id]||{},this.poiTileCellSet[e.tile.id][r]=!0,this.cellSet[r]=!0)}},{key:"calculateIcon",value:function(t,e,n,i,o,r,a){a.instance&&(this.instanceSet[n.id]=a.instance);var l=i.datas[0].text,s=g.default.iconSize,u=new m.Vector4(0,0,0,1);u.elements[0]=a.instance.instanceTransTypeArray[3*i.iconSymbolIndex],u.elements[1]=a.instance.instanceTransTypeArray[3*i.iconSymbolIndex+1];var c=i.datas[0].iconScreenCoods;if(!c||c.version!==o.version){i.datas[0].iconScreenCoods=o.getScreenCoordsByCustomMatrix(t.matrix,u),c=i.datas[0].iconScreenCoods,c.rank=l&&l[0]&&l[0].rank||0;var f=s*c.depthScale*o.scale,d=s*c.depthScale*o.scale;c.coord={x:c.x,y:c.y},c.x-=f/2+this.iconBoundsBuffer,c.y-=d/2+this.iconBoundsBuffer,c.w=f+2*this.iconBoundsBuffer,c.h=d+2*this.iconBoundsBuffer,c.iconSymbolIndex=i.iconSymbolIndex}this._packIconToSet(c,{id:e,tileId:n.id,isIndoor:!1,gltrans:r,instance:a.instance,needIcon:l.length<=0,name:i.datas[0].textName})}},{key:"_packIconToSet",value:function(t,e){var n=e.id,i=e.tileId,o=e.isIndoor,r=e.gltrans,a=e.instance,l=e.needIcon,s=e.name,u=Math.floor(t.x/this.DELTA_SCREEN_CELL),c=Math.floor(t.y/this.DELTA_SCREEN_CELL),f=u+"_"+c;t.isInCell=u===Math.floor((t.x+t.w)/this.DELTA_SCREEN_CELL)&&c===Math.floor((t.y+t.h)/this.DELTA_SCREEN_CELL),this.iconDataSet[n]={id:n,name:s,isIndoor:o,tileId:i,rank:t.rank,_show:!0,iconSymbolIndex:t.iconSymbolIndex,_opacity:null,getOpacity:function(){return this._opacity},setOpacity:function(t){this._opacity=t},updateOpacity:function(){a.instanceInfosTypeArray[4*this.iconSymbolIndex+3]=this._opacity},getShow:function(){return this._show},setShow:function(t){this._show=t},updateShow:function(){a.instanceInfosTypeArray[4*this.iconSymbolIndex+1]=this._show?1:0}},t.x+t.w<-120||t.x>r.width+120||t.y+t.h<-120||t.y>r.height+120?this.iconDataSet[n].setShow(!1):l&&(this.iconScreenCoordList[f]?this.iconScreenCoordList[f][n]=t:(this.iconScreenCoordList[f]={cell:[u,c]},this.iconScreenCoordList[f][n]=t),this.iconTileCellSet[i]=this.iconTileCellSet[i]||{},this.iconTileCellSet[i][f]=!0,this.cellSet[f]=!0)}},{key:"calMix",value:function(t,e){var n=0;return n=t?e>=90&&e<=270?e-180:e:e<=180?e-90:e-270,Math.round(n)}},{key:"lineAngle",value:function(t,e){var n=t.x,i=t.y,o=e.x,r=e.y,a=o-n,l=r-i,s=Math.sqrt(a*a+l*l),u=a/s,c=Math.acos(u),f=180*c/Math.PI;return l>0?f=-f:0===l&&a<0&&(f=180),f=f>90?360-(f-90):90-f,Math.round(f)}},{key:"calCoords",value:function(t,e,n,i,o,r){if(!n)return i;var a=e[0]-t[0],l=e[1]-t[1],s=Math.sqrt(a*a+l*l),u=s/o*r,c=u/n;return[i[0]+a*c,i[1]+l*c]}},{key:"calCellCoord",value:function(t){var e=Math.floor(t.x/this.DELTA_SCREEN_CELL),n=Math.floor(t.y/this.DELTA_SCREEN_CELL);return{hIdx:e,vIdx:n,cellId:e+"_"+n}}},{key:"getDataInCell",value:function(t,e){var n=this[e+"ScreenCoordList"],i=this[e+"DataSet"],o=[];return n&&i&&x.default.forIn(n[t],function(t,e){"cell"!==t&&o.push(x.default.extend({poiId:t},e,i[t]))}),o}},{key:"getPoi",value:function(t){var e=this,n=null,i=this.calCellCoord(t),o=i.hIdx,r=i.vIdx,a=[[0,0],[0,-1],[-1,0],[-1,-1]],l=[];a.forEach(function(t){var n=o+t[0]+"_"+(r+t[1]),i=!!(t[0]+t[1]),a=e.getDataInCell(n,"poi").filter(function(t){return t._show&&!(i&&t.isInCell)}),s=e.getDataInCell(n,"icon").filter(function(t){return t._show&&!(i&&t.isInCell)});l=l.concat(a).concat(s)});for(var s=0;s<l.length;s++){var u=l[s],c=u.x,f=u.y,d=u.w,h=u.h,v=u.coord,p=u.isIndoor,m=u.name,_={x:t.x-c,y:t.y-f},g=d+2,y=h+2;if(_.x>=-2&&_.x<=g&&_.y>=-2&&_.y<=y){n={coord:v,bounds:[c,f,d,h],isIndoor:p,name:m?m.replace("/",""):""};break}}return n}}]),t}();e.default=T},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(){return[{name:"a_Position",components:2,type:"UNSIGNED_SHORT",offset:0},{name:"a_Color",components:4,type:"UNSIGNED_BYTE",offset:4},{name:"a_Normal",components:2,type:"UNSIGNED_BYTE",offset:8},{name:"a_LineInfo",components:2,type:"UNSIGNED_BYTE",offset:10},{name:"a_LineDistance",components:1,type:"UNSIGNED_SHORT",offset:12},{name:"a_SideInfo",components:2,type:"UNSIGNED_BYTE",offset:14}]}function r(){return["Uint16","Uint16","Uint8","Uint8","Uint8","Uint8","Uint8","Uint8","Uint8","Uint8","Uint16","Uint8","Uint8"]}function a(t){var e=t.transX,n=void 0===e?0:e,i=t.transY,o=void 0===i?0:i,r=t.scale,a=void 0===r?1:r;return Math.round(n/256)+4*Math.round(o/256)+16*Math.round(1/a)}Object.defineProperty(e,"__esModule",{value:!0});var l=n(0),s=i(l),u=n(1),c=i(u),f=n(61),d=i(f),h=n(384),v=i(h),p=n(274),m=i(p),_=n(208),g=i(_),y=n(383),x=i(y),b=n(20),S=i(b),w=S.default.batchRender?"Uint32":"Uint16",E=function(){function t(e){(0,s.default)(this,t),e=e||{},this.normalScale=63,this.type=e.type||"default",this.noTerminal=e.noTerminal||!1,this.lineDistance=e.startDistance||0;var n=(0,v.default)(r(),o()),i=(0,v.default)([w]);this.vertiesDataBuffer=n(4096),this.indicesDataBuffer=i(4096),this.lineCount=0}return(0,c.default)(t,[{key:"addLine",value:function(t,e,n,i,o,r,l,s){function u(t,e,o,r){y=e.sub(t);var a=y.perp().unit().mult(b)._round(),l=a.mult(-1),s=e.dist(t),u=Math.max(1,Math.floor(f+s)),c=o.length,d=1024+~~t.x+w,h=1024+~~t.y+E,v=1024+~~e.x+w,p=1024+~~e.y+E;a.x+=128,a.y+=128,l.x+=128,l.y+=128,o.add([[d,h,n[0],n[1],n[2],n[3],a.x,a.y,i,S,10*f+T,P,M],[d,h,n[0],n[1],n[2],n[3],l.x,l.y,i,S,10*f+T,P,M],[v,p,n[0],n[1],n[2],n[3],l.x,l.y,i,S,10*u+T,P,M],[v,p,n[0],n[1],n[2],n[3],a.x,a.y,i,S,10*u+T,P,M]]),r.add([[c+0],[c+1],[c+3],[c+1],[c+2],[c+3]]),f=u}function c(t,e,o){var r=1.732*b,a=e.length,l=1024+~~t.x+w,s=1024+~~t.y+E;e.add([[l,s,n[0],n[1],n[2],n[3],128,2*b+128,i-0,0,10+T,P,M],[l,s,n[0],n[1],n[2],n[3],128-r,-1*b+128,i-0,0,10+T,P,M],[l,s,n[0],n[1],n[2],n[3],r+128,-1*b+128,i-0,0,10+T,P,M]]),o.add([[a+0],[a+1],[a+2]])}this.lineCount+=1,t=t||{};var f=l||1,h=t,v=h.noTerminal,p=this.vertiesDataBuffer,m=this.indicesDataBuffer,_=void 0,g=void 0,y=void 0,b=this.normalScale,S=0;o&&r?S=Math.min(10*o,240)+Math.floor(10-r/o*10):(o=0,r=0);var w=2048*(t.preWidth||0),E=2048*(t.nextWidth||0),T=t.deltaSideWidth||0,I=t.isSide||0,A=t.styleId||0,k=x.default.isNoSideLine(A),P=I+2*k,M=a(t.transform);f=f%(o+r)||1;for(var L=[],C=0,N=e.length/2;C<N;C++)L.push(new d.default(2*e[2*C],2*-e[2*C+1]));if(s&&L.push(L[0],L[1]),!S&&!v&&L.length>2){v||c(L[0],p,m);for(var O=1,R=L.length;O<R;O++)g=L[O],c.bind(this)(g,p,m)}for(var V=1,B=L.length;V<B;V++)_=L[V-1],g=L[V],u.bind(this)(_,g,p,m)}},{key:"addPolygon",value:function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.vertiesDataBuffer,o=this.indicesDataBuffer,r=a(n.transform),l=g.default.mixCoords(t,"polygon",e.concat([0,0,0,0,0,0,r]),1024,2),s=m.default.flatten([l]),u=s.vertices,c=s.dimensions,f=(0,m.default)(u,s.holes,c,i.length),d=0,h=u.length/c;d<h;d++){for(var v=[],p=d*c,_=(d+1)*c;p<_;p++)v.push(u[p]);i.add([v])}o.add(f)}}]),t}();e.default=E},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(){return[{name:"a_Position",components:2,type:"UNSIGNED_SHORT",offset:0},{name:"a_Info",components:4,type:"UNSIGNED_BYTE",offset:4},{name:"a_Color",components:4,type:"UNSIGNED_BYTE",offset:8},{name:"a_Transform",components:2,type:"UNSIGNED_BYTE",offset:12},{name:"a_Height",components:1,type:"UNSIGNED_SHORT",offset:14}]}function r(){return["Uint16","Uint16","Uint8","Uint8","Uint8","Uint8","Uint8","Uint8","Uint8","Uint8","Uint8","Uint8","Uint16"]}Object.defineProperty(e,"__esModule",{value:!0});var a=n(18),l=i(a),s=n(32),u=i(s),c=n(0),f=i(c),d=n(1),h=i(d),v=n(384),p=i(v),m=n(274),_=i(m),g=n(208),y=i(g),x=n(523),b=i(x),S=function(){function t(){(0,f.default)(this,t);var e=(0,p.default)(r(),o()),n=(0,p.default)(["Int16"]);this.vertiesDataBuffer=e(1024),this.indicesDataBuffer=n(1024)}return(0,h.default)(t,[{key:"add",value:function(t){var e=t.points,n=t.height,i=t.colorFill,o=t.colorSide,r=t.transform;n*=1;for(var a=r.transX,l=void 0===a?0:a,s=r.transY,c=void 0===s?0:s,f=r.scale,d=void 0===f?1:f,h=[Math.round(l/256)+16*Math.round(c/256),Math.round(1/d)],v=this.vertiesDataBuffer,p=this.indicesDataBuffer,m=y.default.mixCoords(e,"polygon",[128,128,129,0].concat((0,u.default)(i),h,[n]),2048),g=_.default.flatten([m]),x=g.vertices,b=g.dimensions,S=(0,_.default)(x,g.holes,b,v.length),w=0,E=x.length/b;w<E;w++){for(var T=[],I=w*b,A=(w+1)*b;I<A;I++)T.push(x[I]);v.add([T])}p.add(S),this.addWalls(e,m,o,h)}},{key:"addWalls",value:function(t,e,n,i){for(var o=this.vertiesDataBuffer,r=this.indicesDataBuffer,a=o.length,s=e.length,c=y.default.mixCoords(t,"polygon",[0,0,0,0].concat((0,u.default)(n),(0,u.default)(i),[0]),2048),f=[],d=[],h=1;h<s;h++){var v=[[].concat(e[h-1]),[].concat(e[h]),[].concat(c[h-1]),[].concat(c[h])],p=(0,b.default)(v[0],v[1],v[2],127,128),m=!0,_=!1,g=void 0;try{for(var x,S=(0,l.default)(v);!(m=(x=S.next()).done);m=!0){var w=x.value;w.splice.apply(w,[6,4].concat((0,u.default)(n))),w.splice(2,3,p[0],p[1],p[2])}}catch(t){_=!0,g=t}finally{try{!m&&S.return&&S.return()}finally{if(_)throw g}}[].push.apply(f,v),d.push(a+0,a+1,a+2,a+1,a+3,a+2),a+=v.length}o.add(f),r.add(d)}}]),t}();e.default=S},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n={increase:{},decrease:{}},i=[a(t),a(e)],o=i[0],r=i[1],l=s((0,m.default)(o),(0,m.default)(r)),u=l.sameList,c=l.increaseList,f=l.decreaseList;return c.forEach(function(t){n.increase[t]=r[t]}),f.forEach(function(t){n.decrease[t]=o[t]}),u.forEach(function(t){var e=s(o[t],r[t]),i=e.increaseList,a=e.decreaseList;i.forEach(function(e){n.increase[t]?n.increase[t].push(e):n.increase[t]=[e]}),a.forEach(function(e){n.decrease[t]?n.decrease[t].push(e):n.decrease[t]=[e]})}),n}function r(t){if("object"!==(void 0===t?"undefined":(0,v.default)(t))||null===t)return!1;if(Array.isArray(t)){var e=!0,n=!1,i=void 0;try{for(var o,a=(0,d.default)(t);!(e=(o=a.next()).done);e=!0){return!!r(o.value)}}catch(t){n=!0,i=t}finally{try{!e&&a.return&&a.return()}finally{if(n)throw i}}}return!0}function a(t){var e={};if(Array.isArray(t))t.forEach(function(t){var n=t.type,i=t.features;n&&(e[n]=l(n,i))});else{var n=t.type,i=t.features;n&&(e[n]=l(n,i))}return e}function l(t,e){if(!Array.isArray(e))return _.DEFAULT_BASEMAP[t]&&_.DEFAULT_BASEMAP[t].features;switch(t){case _.MAP_TYPE.vector:var n=[].concat((0,c.default)(e));if(n.includes("building")){var i=n.indexOf("building");n.includes("building3d")?n.splice(i,1):n.splice(i,1,"building3d")}if(n.includes("building2d")&&n.includes("building3d")){var o=n.indexOf("building2d");n.splice(o,1)}return n;case _.MAP_TYPE.satellite:case _.MAP_TYPE.traffic:case _.MAP_TYPE.handdraw:default:return e}}function s(t,e){var n=[],i=[],o=[];return Array.isArray(t)&&Array.isArray(e)&&(e.forEach(function(e){t.includes(e)?n.push(e):i.push(e)}),o=t.filter(function(t){return!n.includes(t)})),{sameList:n,increaseList:i,decreaseList:o}}Object.defineProperty(e,"__esModule",{value:!0}),e.isVerifiedBaseMap=e.formatBaseMap=e.compareBaseMap=void 0;var u=n(32),c=i(u),f=n(18),d=i(f),h=n(26),v=i(h),p=n(16),m=i(p),_=n(318);e.compareBaseMap=o,e.formatBaseMap=a,e.isVerifiedBaseMap=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(){return c||(c=new a.default(function(t){u(null,s.default.verSrc,function(e){e&&e.info&&0===e.error&&(s.default.dataVersion.sat=e.info.sat,s.default.dataVersion.tile=e.info["1d"],s.default.dataVersion.scenic=e.info.scenic),t()},function(){t()})})),c}Object.defineProperty(e,"__esModule",{value:!0});var r=n(27),a=i(r);e.default=o;var l=n(20),s=i(l),u=n(410).send,c=void 0},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(21),h=i(d),v=n(3),p=i(v),m=n(386),_=i(m),g=n(43),y=n(38),x=n(84),b=i(x),S=n(77),w=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,l.default)(this,e),t.type=g.RENDER_LAYER_TYPE.canvasGround;var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return(0,S.statCn)("CanvasGroundLayer"),n}return(0,p.default)(e,t),(0,u.default)(e,[{key:"_initialize",value:function(t){(0,h.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"_initialize",this).call(this,t),t.canvas||new y.BaseTypeError("CanvasGroundLayer.canvas","HTMLCanvasElement",t.canvas).error(),t.bounds instanceof b.default||new y.BaseTypeError("CanvasGroundLayer.bounds","LatLngBounds",t.bounds).error(),this._mediaSource=t.canvas,this._bounds=t.bounds}},{key:"setCanvas",value:function(t){t||new y.BaseTypeError("CanvasGroundLayer.canvas","HTMLCanvasElement",t).error(),this._mediaSource!==t&&this._updateMediaSource(t)}},{key:"refresh",value:function(){this._resetData()}}]),e}(_.default);e.default=w},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return t===b.RENDER_LAYER_TYPE.marker||t===b.RENDER_LAYER_TYPE.label}Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),a=i(r),l=n(0),s=i(l),u=n(1),c=i(u),f=n(4),d=i(f),h=n(21),v=i(h),p=n(3),m=i(p),_=n(209),g=i(_),y=n(62),x=n(154),b=n(43),S=function(t){function e(t){return(0,s.default)(this,e),(0,d.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t))}return(0,m.default)(e,t),(0,c.default)(e,[{key:"calculateRank",value:function(){return o(this.type)?(0,x.getRank)(this.zIndex,"OVERLAY_NAA"):(0,x.getRank)(this.zIndex,"OVERLAY_AA")}},{key:"_initialize",value:function(t){(0,v.default)(e.prototype.__proto__||(0,a.default)(e.prototype),"_initialize",this).call(this,t),this.sourceData=t.sourceData,this.sourceId=this.id}},{key:"_addSource",value:function(){this.map&&!this.map.getSource(this.sourceId)&&this.map.addSource(this.sourceId,{type:y.SOURCE_TYPE.geojson,tileSize:this.tileSize,data:this.sourceData})}},{key:"_removeSource",value:function(){this.map&&this.map.removeSource(this.sourceId)}}]),e}(g.default);e.default=S},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(21),h=i(d),v=n(3),p=i(v),m=n(386),_=i(m),g=n(43),y=n(38),x=n(84),b=i(x),S=n(77),w=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,l.default)(this,e),t.type=g.RENDER_LAYER_TYPE.imageGround;var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return(0,S.statCn)("ImageGroundLayer"),n}return(0,p.default)(e,t),(0,u.default)(e,[{key:"_initialize",value:function(t){var n=this;(0,h.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"_initialize",this).call(this,t),t.src||new y.BaseTypeError("ImageGroundLayer.src","URL",t.src).error(),t.bounds instanceof b.default||new y.BaseTypeError("ImageGroundLayer.bounds","LatLngBounds",t.bounds).error();var i=new Image;this._image=i,i.crossOrigin="anonymous",i.onload=function(){n._mediaSource=i,n._bounds=t.bounds;var e=n.map;e&&n.setMap(null),n.setMap(e),n.emit("image_loaded")},i.onerror=function(){console.error("图片资源获取失败: "+t.src)},i.src=t.src}},{key:"setSrc",value:function(t){var e=this;t||new y.BaseTypeError("ImageGroundLayer.src","URL",t).error(),this._image.src!==t&&(this._image.onload=function(){e._updateMediaSource(e._image),e.emit("image_loaded")},this._image.src=t)}}]),e}(_.default);e.default=w},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(21),h=i(d),v=n(3),p=i(v),m=n(209),_=i(m),g=n(62),y=n(154),x=n(43),b=function(t){function e(t){return(0,l.default)(this,e),(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t))}return(0,p.default)(e,t),(0,u.default)(e,[{key:"_initialize",value:function(t){(0,h.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"_initialize",this).call(this,t),this.buildingData=t.buildingData,this.filter=t.type,this.sourceId||(this.sourceId=this.id)}},{key:"_addSource",value:function(){this.map&&!this.map.getSource(this.sourceId)&&this.map.addSource(this.sourceId,{type:g.SOURCE_TYPE.indoor,data:this.buildingData})}},{key:"_removeSource",value:function(){this.map&&this.map.removeSource(this.sourceId)}},{key:"calculateRank",value:function(){return this.type!==x.RENDER_LAYER_TYPE.indoorPoi?y.RANK_CONFIG.INDOOR.min:y.RANK_CONFIG.POI.min}}]),e}(_.default);e.default=b},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(21),h=i(d),v=n(3),p=i(v),m=n(209),_=i(m),g=n(62),y=function(t){function e(t){return(0,l.default)(this,e),(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t))}return(0,p.default)(e,t),(0,u.default)(e,[{key:"_initialize",value:function(t){(0,h.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"_initialize",this).call(this,t),this.sourceData=t.sourceData,this.sourceId=this.id,this.minimumClusterSize=t.minimumClusterSize,this.gridSize=t.gridSize,this.averageCenter=t.averageCenter}},{key:"_addSource",value:function(){this.map&&!this.map.getSource(this.sourceId)&&this.map.addSource(this.sourceId,{type:g.SOURCE_TYPE.geoTask,data:this.sourceData,workerOptions:{gridSize:this.gridSize,minimumClusterSize:this.minimumClusterSize,averageCenter:this.averageCenter},maxZoom:this.maxZoom})}},{key:"_removeSource",value:function(){this.map&&this.map.removeSource(this.sourceId)}}]),e}(_.default);e.default=y},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){if(P(t)){var e=t.id,n=void 0===e?(0,b.uniqueId)():e,i=t.paths;return t.id=n,k(i)?i.flat(3).every(function(t,e){var n=M(t);return n||new A.ClassTypeError("MaskGeometry.path["+e+"]","LatLng",t).error(),n}):(new A.BaseTypeError("MaskGeometry.paths","Array",i).error(),!1)}return new A.BaseTypeError("MaskGeometry","Object",t).error(),!1}Object.defineProperty(e,"__esModule",{value:!0});var r=n(32),a=i(r),l=n(113),s=i(l),u=n(2),c=i(u),f=n(0),d=i(f),h=n(1),v=i(h),p=n(4),m=i(p),_=n(3),g=i(_),y=n(209),x=i(y),b=n(7),S=n(62),w=n(139),E=n(43),T=n(51),I=i(T),A=n(38),k=I.default.isArray,P=I.default.isObject,M=I.default.isValidLatLng,L=function(t){function e(t){return(0,d.default)(this,e),t.type=E.RENDER_LAYER_TYPE.mask,(0,m.default)(this,(e.__proto__||(0,c.default)(e)).call(this,t))}return(0,g.default)(e,t),(0,v.default)(e,[{key:"calculateRank",value:function(){return-1}},{key:"_initialize",value:function(t){var e=t.geometries,n=void 0===e?[]:e,i=new s.default;this.sourceId=this.id,this.maskGeoMap=i,this.add(n)}},{key:"_addSource",value:function(){this.map&&!this.map.getSource(this.sourceId)&&this.map.addSource(this.sourceId,{type:S.SOURCE_TYPE.geojson,data:{type:w.GEOMETRY_TYPES.MASK,geometries:[].concat((0,a.default)(this.maskGeoMap.values()))}})}},{key:"_removeSource",value:function(){this.map&&this.map.removeSource(this.sourceId)}},{key:"add",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return k(e)?(e.forEach(function(e){if(o(e)){var n=e.id;t.maskGeoMap.has(n)?console.warn("MaskLayer.add: 已存在id为"+n+"的MaskGeometry对象。"):t.maskGeoMap.set(n,e)}}),this._updateData(),this):(new A.BaseTypeError("MaskLayer.add()传入参数","Array",e).error(),this)}},{key:"get",value:function(t){return this.maskGeoMap.get(t)}},{key:"getAll",value:function(){return[].concat((0,a.default)(this.maskGeoMap.values()))}},{key:"remove",value:function(t){if(!k(t))return new A.BaseTypeError("MaskLayer.remove()传入参数","Array",t).error(),this;var e=this.maskGeoMap;return t.forEach(function(t){e.has(t)?e.delete(t):console.warn("MaskLayer.remove: 不存在id为"+t+"的MaskGeometry对象。")}),this._updateData(),this}},{key:"clear",value:function(){return this.maskGeoMap.clear(),this._updateData(),this}},{key:"update",value:function(t){if(!k(t))return new A.BaseTypeError("MaskLayer.update()传入参数","Array",t).error(),this;var e=this.maskGeoMap;return t.forEach(function(t){o(t)&&e.set(t.id,t)}),this._updateData(),this}},{key:"_updateData",value:function(){this.map&&this.map.getSource(this.sourceId).setData({type:w.GEOMETRY_TYPES.MASK,geometries:[].concat((0,a.default)(this.maskGeoMap.values()))})}}]),e}(x.default);e.default=L},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n=Array.isArray(e.features)?e.features:h.DEFAULT_BASEMAP.vector.features,i=[];if(n.includes(d.BASE_LAYER_TYPE.base)){var o=new u.default({map:t,id:h.VECTOR_LAYER_ID.base,features:[{type:d.BASE_LAYER_TYPE.base,filter:d.BASE_LAYER_TYPE.base},{type:d.BASE_LAYER_TYPE.ground,filter:d.BASE_LAYER_TYPE.ground},{type:d.BASE_LAYER_TYPE.arrow,filter:d.BASE_LAYER_TYPE.arrow}]});t.moveLayer(o.id,m.RANK_CONFIG.BASE.min),i.push(o)}var r=n.includes(d.BASE_LAYER_TYPE.building3d)||n.includes("building"),a=n.includes(d.BASE_LAYER_TYPE.building2d);if(r||a){var l=new u.default({map:t,id:h.VECTOR_LAYER_ID.building,features:[r?{type:d.BASE_LAYER_TYPE.building3d,filter:d.BASE_LAYER_TYPE.building3d}:{type:d.BASE_LAYER_TYPE.building2d,filter:d.BASE_LAYER_TYPE.building3d}]});t.moveLayer(l.id,m.RANK_CONFIG.BUILDING.min),i.push(l)}var s=n.includes(d.BASE_LAYER_TYPE.point),c=n.includes(d.BASE_LAYER_TYPE.label);if(s||c){var f=new u.default({map:t,id:h.VECTOR_LAYER_ID.poi,features:[s?{type:d.BASE_LAYER_TYPE.point,filter:d.BASE_LAYER_TYPE.point}:null,c?{type:d.BASE_LAYER_TYPE.label,filter:d.BASE_LAYER_TYPE.label}:null,{type:d.BASE_LAYER_TYPE.text,filter:d.BASE_LAYER_TYPE.text}].filter(function(t){return!!t})});t.moveLayer(f.id,m.RANK_CONFIG.POI.min),i.push(f)}return i}function r(t){return new f.default({map:t,id:h.DEFAULT_BASEMAP.handdraw.type,getTileUrl:function(t,e,n){e=Math.pow(2,n)-1-e;var i=p.default.handdrawSrc;return i[(t+e)%i.length]+"?z="+n+"&x="+t+"&y="+e+"&version="+p.default.dataVersion.scenic},maxDataZoom:20})}function a(t,e){var n=Array.isArray(e.features)?e.features:h.DEFAULT_BASEMAP.satellite.features,i=[];if(n.includes(h.SATELLITE_FEATURE.satellite)){var o=new f.default({map:t,id:h.SATELLITE_LAYER_ID[h.SATELLITE_FEATURE.satellite],getTileUrl:function(t,e,n){e=Math.pow(2,n)-1-e;var i=p.default.satelliteSrc;return i[(t+e)%i.length]+"/"+n+"/"+(t>>4)+"/"+(e>>4)+"/"+t+"_"+e+".jpg?version="+p.default.dataVersion.sat},maxDataZoom:18});t.moveLayer(o.id,m.RANK_CONFIG.BASE.min),i.push(o)}if(n.includes(h.SATELLITE_FEATURE.road)){var r=new f.default({map:t,id:h.SATELLITE_LAYER_ID[h.SATELLITE_FEATURE.road],getTileUrl:function(t,e,n){e=Math.pow(2,n)-e-1;var i=p.default.roadSrc;return i[(t+e)%i.length]+"?z="+n+"&x="+t+"&y="+e+"&styleid=2&scene=0&version="+p.default.dataVersion.tile},maxDataZoom:18});t.moveLayer(r.id,m.RANK_CONFIG.BASE.min),i.push(r)}return i}function l(t){var e=new f.default({map:t,id:"traffic",getTileUrl:function(t,e,n){e=Math.pow(2,n)-1-e;var i=p.default.trafficSrc,o=(t+e)%i.length,r=window.devicePixelRatio>1?2:1;return i[o]+"?z="+n+"&x="+t+"&y="+e+"&times="+r+"&time="+(new Date).getTime()},maxDataZoom:18}),n=t.getSource(e.sourceId);return e._interval=setInterval(function(){n.reload(),n.once("tilesloaded",function(){t.renderEngine.getImageCache(e.id).clear()})},6e4),e.once("source_removed",function(){clearInterval(e._interval),delete e._interval}),t.moveLayer(e.id,m.RANK_CONFIG.BASE.min),e}Object.defineProperty(e,"__esModule",{value:!0}),e.createHanddrawLayer=e.createTrafficLayer=e.createSatelliteLayer=e.createVectorLayer=void 0;var s=n(389),u=i(s),c=n(387),f=i(c),d=n(43),h=n(318),v=n(20),p=i(v),m=n(154);e.createVectorLayer=o,e.createSatelliteLayer=a,e.createTrafficLayer=l,e.createHanddrawLayer=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){return new Et[e.type](t,e,n)}function r(t,e){return t instanceof Array?{imgBase64List:[].concat(t).concat(e),extOffset:t.length}:{imgBase64List:[t,e],extOffset:1}}function a(t,e){var n=e.id;return new I.default(function(e,i){if(t){var o=new Image;o.onload=function(){e(o)},o.onerror=function(){i(n)},o.src="data:img/png;base64,"+t}else e(null)})}function l(t){var e=document.createElement("canvas"),n=[],i=0,o=0;if(t.forEach(function(t){t&&(i=Math.max(t.width,i),o+=t.height)}),e.width=i,e.height=o,i&&o){var r=e.getContext("2d"),a=0;return t.forEach(function(t){n.push(a),t&&(r.drawImage(t,0,a),a+=t.height)}),{canvas:e,yOffset:n}}return{}}var s,u=n(78),c=i(u),f=n(16),d=i(f),h=n(47),v=i(h),p=n(18),m=i(p),_=n(160),g=i(_),y=n(129),x=i(y),b=n(238),S=i(b),w=n(237),E=i(w),T=n(27),I=i(T),A=n(2),k=i(A),P=n(0),M=i(P),L=n(1),C=i(L),N=n(4),O=i(N),R=n(3),V=i(R),B=n(130),F=i(B),z=n(555),D=n(507),U=i(D),Y=n(511),j=i(Y),G=n(573),W=i(G),Z=n(394),X=i(Z),H=n(559),Q=i(H),q=n(562),J=i(q),K=n(566),$=i(K),tt=n(564),et=i(tt),nt=n(561),it=i(nt),ot=n(62),rt=n(43),at=n(318),lt=n(547),st=n(275),ut=n(575),ct=i(ut),ft=n(576),dt=n(398),ht=n(309),vt=n(548),pt=i(vt),mt=n(409),_t=n(653),gt=i(_t),yt=n(306),xt=n(385),bt=n(65),St=n(20),wt=n(7),Et=(s={},(0,F.default)(s,ot.SOURCE_TYPE.vector,W.default),(0,F.default)(s,ot.SOURCE_TYPE.geojson,X.default),(0,F.default)(s,ot.SOURCE_TYPE.geoTask,Q.default),(0,F.default)(s,ot.SOURCE_TYPE.imageTile,J.default),(0,F.default)(s,ot.SOURCE_TYPE.indoor,$.default),(0,F.default)(s,ot.SOURCE_TYPE.ground,it.default),s),Tt=function(t){function e(t,n){(0,M.default)(this,e);var i=(0,O.default)(this,(e.__proto__||(0,k.default)(e)).call(this));return i.map=n,i._visualPlugins={},i._layers={},i._order=[],i._sources={},i._stylePromise=null,i.dispatcher=new U.default(j.default,i),i.iconsLoader=new gt.default,i._mapStyleId=t.mapStyleId,i._finalUsedMapStyleId=st.STYLE_ID[i._mapStyleId],i._lastStyleId=st.STYLE_ID[i._mapStyleId],i._baseMap=null===t.baseMap?null:t.baseMap||at.DEFAULT_BASEMAP.vector,i._baseLayerList=[],i._setEventedParent(n,null),i._on("loaderror",function(t){var e=t.tile,n=t.error;console.error("加载瓦片发生错误："+e.coord.id,e,n)}),(0,pt.default)().then(function(){i.initBaseLayer()}),i.loadStyle().then(function(t){var e=t.styleId;i._fire("mapstyle_changed",{styleId:e})}).catch(function(){}),i}return(0,V.default)(e,t),(0,C.default)(e,[{key:"loadStyle",value:function(){var t=this;if(!this._stylePromise){var e=!1;this._stylePromise=(0,ct.default)(this._mapStyleId,this.map.id).then(function(n){if(e)return I.default.reject(new Error("aborted"));t._finalUsedMapStyleId=n,t._lastStyleId=n;var i=(0,ft.loadPoiIconFile)(n,St.iconSrc).then(function(e){return t.iconsLoader.load(e)}),o=(0,dt.loadPoiIconIndexFile)(n,St.iconIndexSrc),r=(0,ht.loadStyleFile)(n,n);return I.default.all([i,o,r]).then(function(){return e?I.default.reject(new Error("aborted")):{styleId:n,iconInfo:{scale:t.iconsLoader.scale,w:t.iconsLoader.w,h:t.iconsLoader.h}}})}),this._stylePromise.abort=function(){e=!0}}return this._stylePromise}},{key:"setMapStyleId",value:function(){function t(t){return e.apply(this,arguments)}var e=(0,E.default)(S.default.mark(function t(e){var n,i=this;return S.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e!==this._mapStyleId||"config"===this._finalUsedMapStyleId){t.next=2;break}return t.abrupt("return");case 2:return this._mapStyleId=e,n=this._finalUsedMapStyleId,this._stylePromise.abort(),this._stylePromise=null,this.loadStyle().then(function(t){var e=t.styleId,o=t.iconInfo;e!==n&&i.resetStyle(e,o)}),t.abrupt("return",this);case 8:case"end":return t.stop()}},t,this)}));return t}()},{key:"setMapStyleConfig",value:function(t){var e=this,n=t.style;if(!n)return void console.error("setMapStyleConfig中style属性不合法");var i=!1;this._stylePromise.abort(),this._stylePromise=(0,ht.setStyleConfig)(n,"config").then(function(t){return t&&!i?e._loadStyleConfig():I.default.reject(new Error("aborted"))}),this._stylePromise.then(function(t){var n=t.styleId,i=t.iconInfo;e.resetStyle(n,i)}).catch(function(){}),this._stylePromise.abort=function(){i=!0}}},{key:"_loadStyleConfig",value:function(){function t(){return e.apply(this,arguments)}var e=(0,E.default)(S.default.mark(function t(){var e,n,i,o,r=this;return S.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e="config",this._finalUsedMapStyleId!==e&&(this._lastStyleId=this._finalUsedMapStyleId,this._finalUsedMapStyleId=e),n={styleId:this._lastStyleId,iconSrc:St.iconSrc,iconIndexSrc:St.iconIndexSrc},i=(0,ft.setPoiIcon)(n).then(function(t){return r.iconsLoader.load(t)}),o=(0,dt.setPoiIconIndex)(n),t.next=7,I.default.all([i,o]);case 7:return t.abrupt("return",{styleId:e,iconInfo:{scale:this.iconsLoader.scale,w:this.iconsLoader.w,h:this.iconsLoader.h}});case 8:case"end":return t.stop()}},t,this)}));return t}()},{key:"resetStyle",value:function(t,e){var n=this.getSource("vector_source");n&&(n.setStyleAndIconInfo(t,e),n.clearTiles()),this._fire("mapstyle_changed",{styleId:t})}},{key:"initBaseLayer",value:function(t){var e=this;if(this._baseMap||t){if(t||(t=this._baseMap),Array.isArray(t))return void t.forEach(function(t){e.initBaseLayer(t)});switch(t.type){case at.MAP_TYPE.handdraw:(0,z.createHanddrawLayer)(this.map);break;case at.MAP_TYPE.satellite:(0,z.createSatelliteLayer)(this.map,{features:t.features});break;case at.MAP_TYPE.traffic:(0,z.createTrafficLayer)(this.map);break;case at.MAP_TYPE.vector:default:(0,z.createVectorLayer)(this.map,{features:t.features})}}}},{key:"resetBaseLayer",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at.DEFAULT_BASEMAP.vector;if(!(0,lt.isVerifiedBaseMap)(e))return console.error("setBaseMap传入的参数不合法",e),this;var n=Array.isArray(e)?e.map(function(t){return t.type}):[e.type],i=(0,lt.compareBaseMap)(this._baseMap,e),o=i?(0,x.default)(i.increase):[],r=i?(0,x.default)(i.decrease):[];r.length>0&&this._handleDecreaseBaseMap(r),o.length>0&&this._handleIncreaseBaseMap(o);var a=(0,lt.formatBaseMap)(e).vector;a&&0===a.length?this._setSourceFrozen("vector_source",!0):this._setSourceFrozen("vector_source",!1);var l=(0,g.default)(at.SATELLITE_LAYER_ID);return n.forEach(function(e,n){switch(e){case at.MAP_TYPE.traffic:t.moveLayer(at.MAP_TYPE.handdraw,n);break;case at.MAP_TYPE.satellite:l.forEach(function(e){t.moveLayer(e,n)});break;case at.MAP_TYPE.traffic:t.moveLayer(at.MAP_TYPE.traffic,n);break;case at.MAP_TYPE.vector:t.moveLayer(at.VECTOR_LAYER_ID.base,n)}}),this._baseMap=e,this}},{key:"_handleIncreaseBaseMap",value:function(t){var e=this,n=[],i=!0,o=!1,r=void 0;try{for(var a,l=(0,m.default)(t);!(i=(a=l.next()).done);i=!0)!function(){var t=(0,v.default)(a.value,2),i=t[0],o=t[1],r=[];switch(i){case at.MAP_TYPE.satellite:o.forEach(function(t){e._layers[at.SATELLITE_LAYER_ID[t]]?(e._setLayerVisible(at.SATELLITE_LAYER_ID[t],!0),e._setSourceFrozen(at.SATELLITE_LAYER_ID[t],!1)):r.push(t)}),r.length>0&&n.push({type:i,features:r});break;case at.MAP_TYPE.handdraw:e._layers[i]?(e._setLayerVisible(at.MAP_TYPE.handdraw,!0),e._setSourceFrozen(at.MAP_TYPE.handdraw,!1)):n.push({type:i});break;case at.MAP_TYPE.traffic:e._layers[i]?(e._setLayerVisible(at.MAP_TYPE.traffic,!0),e._setSourceFrozen(at.MAP_TYPE.traffic,!1)):n.push({type:i});break;case at.MAP_TYPE.vector:o.forEach(function(t){switch(t){case rt.BASE_LAYER_TYPE.base:e._layers[at.VECTOR_LAYER_ID.base]?e._setLayerVisible(at.VECTOR_LAYER_ID.base,!0):r.push(t);break;case rt.BASE_LAYER_TYPE.building2d:case rt.BASE_LAYER_TYPE.building3d:r.push(t);break;case rt.BASE_LAYER_TYPE.point:case rt.BASE_LAYER_TYPE.label:var n=e._layers[at.VECTOR_LAYER_ID.poi],i=t===rt.BASE_LAYER_TYPE.point?rt.BASE_LAYER_TYPE.label:rt.BASE_LAYER_TYPE.point;n?n.hasChild(t)?n.getChild(t).setVisible(!0):(n.hasChild(i)&&r.push(i),n.setMap(null),r.push(t)):r.push(t)}}),r.length>0&&n.push({type:i,features:r})}}()}catch(t){o=!0,r=t}finally{try{!i&&l.return&&l.return()}finally{if(o)throw r}}this.initBaseLayer(n)}},{key:"_handleDecreaseBaseMap",value:function(t){var e=this,n=!0,i=!1,o=void 0;try{for(var r,a=(0,m.default)(t);!(n=(r=a.next()).done);n=!0){var l=(0,v.default)(r.value,2),s=l[0],u=l[1];switch(s){case at.MAP_TYPE.satellite:if("break"===function(){var t=(0,d.default)(at.SATELLITE_LAYER_ID);return u.forEach(function(n){t.includes(n)&&(e._setLayerVisible(at.SATELLITE_LAYER_ID[n],!1),e._setSourceFrozen(at.SATELLITE_LAYER_ID[n],!0))}),"break"}())break;case at.MAP_TYPE.handdraw:this._setLayerVisible(at.MAP_TYPE.handdraw,!1),this._setSourceFrozen(at.MAP_TYPE.handdraw,!0);break;case at.MAP_TYPE.traffic:this._setLayerVisible(at.MAP_TYPE.traffic,!1),this._setSourceFrozen(at.MAP_TYPE.traffic,!0);break;case at.MAP_TYPE.vector:u.forEach(function(t){var n=e._layers[at.VECTOR_LAYER_ID.poi],i=n?n.getChild(t):null;switch(t){case rt.BASE_LAYER_TYPE.base:e._setLayerVisible(at.VECTOR_LAYER_ID.base,!1);break;case rt.BASE_LAYER_TYPE.building2d:case rt.BASE_LAYER_TYPE.building3d:e._layers[at.VECTOR_LAYER_ID.building].setMap(null);break;case rt.BASE_LAYER_TYPE.point:case rt.BASE_LAYER_TYPE.label:i&&i.setVisible(!1)}})}}}catch(t){i=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}}},{key:"_setLayerVisible",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._layers[t];return n&&n.setVisible(e),this}},{key:"_setSourceFrozen",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getSource(t);return n&&(n.isFrozen=e),this}},{key:"getFinalUsedMapStyleId",value:function(){return this._finalUsedMapStyleId}},{key:"getSource",value:function(t){return this._sources[t]}},{key:"addSource",value:function(t,e){var n=o(t,e,this.dispatcher);this._sources[t]=n,n._setEventedParent(this,function(){return{source:n,sourceId:t}}),n.onAdd(this.map)}},{key:"removeSource",value:function(t){if(this._sources[t]){var e=this._sources[t];delete this._sources[t],e._setEventedParent(null),e.clear(),e.onRemove&&e.onRemove(this.map)}}},{key:"addIndoorIndexSource",value:function(t){return new et.default(t,this.dispatcher)}},{key:"removeLayer",value:function(t){var e=this._layers[t];if(!e)return void this._fire("error",{error:new Error("The layer '"+t+"' does not exist in map")});e._setEventedParent(null),delete this._layers[t],this._order=this._serializeLayers()}},{key:"getLayer",value:function(t){return this._layers[t]}},{key:"findLayer",value:function(t){return(0,g.default)(this._layers).find(t)}},{key:"addLayer",value:function(t){this._layers[t.id]=t,this._order=this._serializeLayers(),t._setEventedParent(this,{layer:{id:t.id}})}},{key:"_serializeLayers",value:function(){var t=[],e=(0,d.default)(this._layers),n=!0,i=!1,o=void 0;try{for(var r,a=(0,m.default)(e);!(n=(r=a.next()).done);n=!0){var l=r.value,s=this._layers[l];t.push(s)}}catch(t){i=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return t.length>1&&t.sort(function(t,e){return t.rank-e.rank}),t}},{key:"getDrawLayers",value:function(){return this._order.reduce(function(t,e){return t.concat(e.flat())},[])}},{key:"_updateSource",value:function(t,e,n){wt.forIn(this._sources,function(i,o){!0!==o.isFrozen&&o.update(t,e,n)})}},{key:"moveLayer",value:function(t,e){this._layers[t]&&(this._layers[t].setRank(e),this._order=this._serializeLayers())}},{key:"update",value:function(){}},{key:"addVisualPlugin",value:function(t){var e=t.id;if(this._visualPlugins[e])return void console.warn("The visualPlugin '"+e+"' already exists in map");this._visualPlugins[e]=t}},{key:"removeVisualPlugin",value:function(t){if(!this._visualPlugins[t])return void console.warn("The visualPlugin '"+t+"' does not exist in map");delete this._visualPlugins[t]}},{key:"getPlugins",value:function(){return this._sortPlugins(this._visualPlugins,"zIndex")}},{key:"_sortPlugins",value:function(t,e){var n=(0,g.default)(t);return wt.bubbleSort(n,e),n}},{key:"uploadTileImage",value:function(t,e,n){var i=this,o=e.tileId,s=r(e.imgBase64,e.extImgBase64),u=s.imgBase64List,c=s.extOffset;if(o&&u.length){this.map.renderEngine.painters.symbol.preDraw({iconsLoader:this.iconsLoader});var f=this.map.renderEngine.textCache;if(f&&!f.tiles[o]){var d=new mt.ScheduleTaskNode;d.tileId=o;var h=function(){if(f.tiles[o])return n(null,null),null;var t=null,r=!1,s=!1,d=null,h=[];if((0,xt.isInterceptForBase64)(i.map.getZoom(),e.zoom))return r=!0,s=!0,n(null,null),null;var v=u.map(function(t,e){return a(t,{id:o+"_"+e})});return I.default.all(v).then(function(e){var n=l(e),i=n.canvas,o=n.yOffset;t=i,h=o,r=!0}).catch(function(t){console.error("img upload failed ",t)}),d=function(){if(r&&!s)return(0,xt.isInterceptForGPU)(i.map.getZoom(),e.zoom)?(s=!0,n(null,null),null):t?(f.addImage(o,t,function(){t=null,f.tiles[o].yOffsetList=h,s=!0,n(null,{yOffsetList:h,extOffset:c})}),d):(n(null,{yOffsetList:h,extOffset:c}),null);if(s){if((0,xt.isInterceptForTileData)(i.map.getZoom(),e.zoom))return null;var a=i.getSource("vector_source"),l=a&&a.getDrawItems(),u=l&&l[o],v=u&&u.getData();return v?(v[rt.BASE_LAYER_TYPE.text]||(v[rt.BASE_LAYER_TYPE.text]={},v[rt.BASE_LAYER_TYPE.text][o]=t&&t.toDataURL()||""),null):d}return d},d.tileId=o,d};h.tileId=o,d.setCallback(h),d.addToQueue(this.map.fpsManager.scheduleTaskQueue)}else f&&n(null,{yOffsetList:f.tiles[o].yOffsetList,extOffset:c})}else n(null,null)}},{key:"addGlyphs",value:function(t,e,n){if(e.glyphs&&e.glyphs.length>0){var i=this.map.renderEngine.glyphManager.generateAtlas(e.glyphs);n(null,{mapping:(0,c.default)(i.mapping)})}else n(null,{mapping:"{}"})}},{key:"addMarkers",value:function(t,e,n){e.markerSrcs&&e.markerSrcs.length>0?this.map.renderEngine.markerManager.generateAtlas(e.markerSrcs).then(function(t){n(null,{mapping:(0,c.default)(t)})}).catch(function(t){console.error(t),n(null,{mapping:"{}"})}):n(null,{mapping:"{}"})}},{key:"addBillboards",value:function(t,e,n){if(e.markerSrcs&&e.markerSrcs.length>0||e.tileId){var i=e.markerSrcs,o=null;e.tileId&&(o=JSON.parse(e.billboardData),i=o.map(function(t){return t.text})),this.map.renderEngine.markerManager.generateAtlas(i,{tileId:e.tileId,tileImage64:e.tileImage64,billboardData:o}).then(function(t){n(null,{mapping:(0,c.default)(t)})}).catch(function(t){console.error(t),n(null,{mapping:"{}"})})}else n(null,{mapping:"{}"})}},{key:"uploadTileTexture",value:function(t,e,n){var i=this;if(e.billboard||e.glyphs){var o=new I.default(function(n){i.addBillboards(t,e.billboard,function(t,e){n(e.mapping)})}),r=new I.default(function(n){i.addGlyphs(t,e,function(t,e){n(e.mapping)})});I.default.all([o,r]).then(function(t){n(null,{billboardMapping:t[0],glyphMapping:t[1]})})}else n(null,{billboardMapping:"{}",glyphMapping:"{}"})}},{key:"getIndoorGlyphInfo",value:function(t,e,n){var i=this;if(e.pointInfoSet||e.glyphList||e.iconSrcList){var o=new I.default(function(n){i.addMarkers(t,{markerSrcs:e.iconSrcList},function(t,e){n(e.mapping)})}),r=new I.default(function(n){i.addGlyphs(t,{glyphs:e.glyphList},function(t,e){n(e.mapping)})}),a=JSON.parse(e.indoorStyle),l=new I.default(function(t){var n=document.createElement("canvas"),i=n.getContext("2d"),o=JSON.parse(e.pointInfoSet),r={};(0,d.default)(o).forEach(function(t){var e=parseInt(t.replace("zoom",""),10);r[e]=o[t].filter(function(t){return!!t}).map(function(t){return t.map(function(t){return(0,yt.getPoiRect)(t,e,i,a)})})}),t((0,c.default)(r))});I.default.all([o,r,l]).then(function(t){n(null,{iconMapping:t[0],glyphMapping:t[1],poiMapping:t[2]})})}else n(null,{iconMapping:"{}",glyphMapping:"{}",poiMapping:"{}"})}},{key:"destroy",value:function(){var t=this;(0,d.default)(this._visualPlugins).forEach(function(e){t._visualPlugins[e].remove()}),this._visualPlugins=null,(0,d.default)(this._layers).forEach(function(e){t.removeLayer(e)}),this._layers=null,this._order=null,(0,d.default)(this._sources).forEach(function(e){t.removeSource(e)}),this._sources=null,this._stylePromise=null,this.dispatcher.destroy(),this.iconsLoader=null,this._mapStyleId=null,this._finalUsedMapStyleId=null,this._lastStyleId=null,this._baseMap=null,this._clearAllListeners(),this.map=null}},{key:"baseMap",get:function(){return this._baseMap},set:function(t){this.resetBaseLayer(t)}}]),e}(bt);t.exports=Tt},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(558),p=i(v),m=n(393),_=i(m),g=function(t){function e(t,n,i){(0,l.default)(this,e);var o=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,n,i));return o.loading={},o.loaded={},o}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_indexData",value:function(t,e,n){try{var i={features:{geometries:e.geometries,styles:e.styles},type:e.type};n(null,i)}catch(t){return n(t)}}},{key:"loadTile",value:function(t,e){function n(t,n){return delete this.loading[i][o],t?e(t):n?(r.vectorTile=n,r.parse(n,this.actor,e),this.loaded[i]=this.loaded[i]||{},void(this.loaded[i][o]=r)):e(null,null)}var i=t.source,o=t.uid;this.loading[i]||(this.loading[i]={}),this.loading[i][o]=new p.default(t);var r=this.loading[i][o];r.abort=this.loadVectorData(t,n.bind(this))}},{key:"abortTile",value:function(t){var e=this.loading[t.source],n=t.uid;e&&e[n]&&e[n].abort&&(e[n].abort(),delete e[n])}},{key:"removeTile",value:function(t){var e=this.loaded[t.source],n=t.uid;e&&e[n]&&delete e[n],this.removeSource(t)}}]),e}(_.default);e.default=g},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(1),l=i(a),s=n(304),u=i(s),c=n(531),f=i(c),d=n(529),h=i(d),v=n(528),p=i(v),m=n(378),_=i(m),g=n(532),y=i(g),x=n(530),b=i(x),S=n(139),w=function(){function t(e){(0,r.default)(this,t),this.uid=e.uid,this.coord=e.coord}return(0,l.default)(t,[{key:"parse",value:function(t,e,n){var i=void 0,o=this.coord.x+"_"+this.coord.y+"_"+this.coord.z,r={};switch(t.type){case S.GEOMETRY_TYPES.MASK:i=(0,b.default)(t.features,e);break;case S.GEOMETRY_TYPES.POLYGON:i=(0,u.default)(t.features,e);break;case S.GEOMETRY_TYPES.CIRCLE:i=(0,_.default)(t.features,e);break;case S.GEOMETRY_TYPES.RECTANGLE:i=(0,y.default)(t.features,e);break;case S.GEOMETRY_TYPES.POLYLINE:i=(0,f.default)(t.features,e),i.uid=this.uid;break;case S.GEOMETRY_TYPES.POINT:return void(0,h.default)(t.features,e,function(t){r[o]=t,n(null,r)});case S.GEOMETRY_TYPES.LABEL:return void(0,p.default)(t.features,e,function(t){r[o]=t,n(null,r)})}r[o]=i,n(null,r)}}]),t}();e.default=w},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(394),p=i(v),m=n(62),_=function(t){function e(t,n,i){return(0,l.default)(this,e),(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,n,i))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_initialize",value:function(){this.type=m.SOURCE_TYPE.geoTask}},{key:"update",value:function(){}},{key:"getCluster",value:function(t,e){var n={type:this.type,pixelsPerDegree:t.pixelsPerDegree,resetCluster:t.resetCluster,mapBounds:t.mapBounds,zoom:t.zoom,maxZoom:this.maxZoom,source:this.getUniqueId()};this.dispatcher.send(this.type+".getCluster",n,function(t,n){if(t||!n)return void console.error(t);var i=JSON.parse(n);return e(i)},this.workerID)}}]),e}(p.default);e.default=_},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(78),r=i(o),a=n(2),l=i(a),s=n(0),u=i(s),c=n(1),f=i(c),d=n(4),h=i(d),v=n(3),p=i(v),m=n(393),_=i(m),g=n(533),y=i(g),x=!1,b=function(t){function e(t,n,i){return(0,u.default)(this,e),(0,h.default)(this,(e.__proto__||(0,l.default)(e)).call(this,t,n,i))}return(0,p.default)(e,t),(0,f.default)(e,[{key:"_indexData",value:function(t,e,n){try{var i={task:new y.default(e,{minimumClusterSize:t.minimumClusterSize,gridSize:t.gridSize,averageCenter:t.averageCenter})};n(null,i)}catch(t){return n(t)}}},{key:"getCluster",value:function(t,e){function n(n,i){x&&console.log(i),x&&console.time("createClusters");var o=i.task,a=o.createClusters(t);x&&console.timeEnd("createClusters"),e(null,(0,r.default)(a))}x&&console.log("getCluster",t),this.loadVectorData(t,n.bind(this))}}]),e}(_.default);e.default=b},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(21),h=i(d),v=n(3),p=i(v),m=n(208),_=n(227),g=i(_),y=n(228),x=i(y),b=n(390),S=i(b),w=n(103),E=i(w),T=function(t){function e(t,n,i){(0,l.default)(this,e);var o=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,n,i));return o._data=n.data||null,o._data&&(o._data.center=o._data.bounds.getCenter()),o._glTexture=null,o._items={},o}return(0,p.default)(e,t),(0,u.default)(e,[{key:"onAdd",value:function(t){this.map=t,this._glTexture||(this._glTexture=new E.default(this.map.renderEngine.gl,{tex:this._data.mediaSource})),this._fire("data",{dataType:"source",sourceDataType:"metadata"})}},{key:"setData",value:function(t){if(this._data=t,this._data&&(this._data.center=this._data.bounds.getCenter()),this._glTexture){var e=this.map.renderEngine.gl;this._glTexture.update(this._data.mediaSource,{textureIndex:0,minFilter:e.LINEAR,magFilter:e.LINEAR,wrapS:e.CLAMP_TO_EDGE,wrapT:e.CLAMP_TO_EDGE,premultiply:!0,useMipmap:!1,flipY:!0})}this.transform,this.camera&&this.update(this.transform,this.camera),this._fire("setData",{dataType:"source",sourceDataType:"content"})}},{key:"update",value:function(t,e){if(this.transform=t,this.camera=e,this._data&&(0,m.isInFrustum)(this.map,this._data.bounds)){var n=new x.default(0,0,0,0);this.addItem(n)}}},{key:"addItem",value:function(t){var e=this._items[t.id];if(this._data&&!e){e=new g.default(t,this.tileSize,this.maxZoom,this.transform,this.camera),this._items[t.id]=e,e.setData({bounds:this._data.bounds,center:this._data.center,texture:this._glTexture,texInfo:{s:0,t:0,w:1,h:1}});var n=this.map.renderEngine.gl;this._glTexture.upload({textureIndex:0,minFilter:n.LINEAR,magFilter:n.LINEAR,wrapS:n.CLAMP_TO_EDGE,wrapT:n.CLAMP_TO_EDGE,premultiply:!0,useMipmap:!1,flipY:!0})}else{var i=e.getData();i.bounds=this._data.bounds,i.center=this._data.center,e.setData(i)}}},{key:"getDrawItems",value:function(){var t=this._items;return this._data?(0,m.isInFrustum)(this.map,this._data.bounds)?t:{}:t}},{key:"onRemove",value:function(){(0,h.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"onRemove",this).call(this),this._items={},this._glTexture.destroy()}}]),e}(S.default);e.default=T},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return(0,a.default)(t).every(function(e){return t[e]&&t[e].hasData()&&t[e].state===x.TILE_STATE.loaded})}Object.defineProperty(e,"__esModule",{value:!0});var r=n(16),a=i(r),l=n(2),s=i(l),u=n(0),c=i(u),f=n(1),d=i(f),h=n(4),v=i(h),p=n(3),m=i(p),_=n(308),g=i(_),y=n(62),x=n(227),b=i(x),S=n(408),w=i(S),E=n(663),T=function(t){function e(t,n,i){(0,c.default)(this,e);var o=(0,v.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t,n,i));return o.type=y.SOURCE_TYPE.imageTile,o._tileBuffer={},o.on("tilebufferloaded",function(){var t={};o._visibleCoordList.forEach(function(e){var n=o._items[e.id]||o._tileBuffer[e.id];n&&n.hasData()&&(t[e.id]=n)});for(var e in o._items)t.hasOwnProperty(e)||o.removeTile(e);o._tileBuffer={},o._items=t,o._fire("data",{dataType:"source"}),o._fire("tilesloaded",{dataType:"source",tiles:o._items})}),o}return(0,m.default)(e,t),(0,d.default)(e,[{key:"loadTile",value:function(t,e,n){function i(e,i){if(e)return void n(e);i.bitmap?(t.setData(i.bitmap),n(null)):i.image?(0,E.blobToImage)(i.image).then(function(e){return(0,E.canvasToImage)((0,E.imageToCanvas)(e,{width:t.tileSize,height:t.tileSize}))}).then(function(e){t.setData(e),n(null)}).catch(function(t){console.error(t),n("Image格式转换失败")}):n("Invalid Data")}var o=t.coord,r=t.uid,a=t.tileSize,l=this._data(o.x,o.y,o.z),s={url:l,uid:r,tileSize:a,type:this.type,isBitmapEnabled:window.createImageBitmap&&"Firefox"!==w.default.browser};t.workerID&&t.state!==x.TILE_STATE.expired?t.state===x.TILE_STATE.loading||this.dispatcher.send("reloadTile",s,i.bind(this),t.workerID):t.workerID=this.dispatcher.send("loadTile",s,i.bind(this))}},{key:"unloadTile",value:function(t){t.clear(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type},null,t.workerID)}},{key:"abortTile",value:function(t){this.dispatcher.send("abortTile",{uid:t.uid,type:this.type},null,t.workerID)}},{key:"reloadTile",value:function(t){t.state!==x.TILE_STATE.reloading&&(t.state=x.TILE_STATE.reloading,this._tileBuffer[t.coord.id]=t,this.loadTile(t,{},this._tileLoaded.bind(this,t)))}},{key:"update",value:function(t,e){var n=this;this.transform=t,this.camera=e,this.updateCacheSize(t);var i=t.coveringTiles({round:!0,tileSize:this.tileSize,minZoom:this.minZoom,maxZoom:this.maxZoom,pixelGeo:this._isPixelGeo});this._visibleCoordList=i;var r=i.filter(function(t){var e=n._items[t.id];return!(e&&e.hasData())});r.length&&(r.forEach(function(t){t.id in n._tileBuffer||n.addTileToBuffer(t,null,null)}),o(this._tileBuffer)&&this._fire("tilebufferloaded"))}},{key:"addTileToBuffer",value:function(t,e,n){var i=this._items[t.id];return i||((i=this._cache.get(t.id))?(this._tileBuffer[t.id]=i,i):(i=new b.default(t,this.tileSize,this.maxZoom,this.transform,this.camera),this._tileBuffer[t.id]=i,this.loadTile(i,e,n?n.bind(this):this._tileLoaded.bind(this,i)),i))}},{key:"_tileLoaded",value:function(t,e){e&&(404!==e.status?(t.state=x.TILE_STATE.loaded,this._fire("loaderror",{tile:t,error:e})):t.state=x.TILE_STATE.loaded),o(this._tileBuffer)&&this._fire("tilebufferloaded")}}]),e}(g.default);e.default=T},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(1),l=i(a),s=n(137),u=n(85),c=function(){function t(e){(0,r.default)(this,t),this.actor=e,this.cache=new u.Store("imageTileLoader",1e3)}return(0,l.default)(t,[{key:"loadTile",value:function(t,e){var n=t.url,i=t.uid,o=t.tileSize,r=t.isBitmapEnabled;i in this.cache||(this.cache[i]=(0,s.getImage)(n,12e3)),this.cache[i].promise.then(function(t){r?self.createImageBitmap(t,{imageOrientation:"flipY",premultiplyAlpha:"premultiply",resizeWidth:o,resizeHeight:o}).then(function(t){e(null,{bitmap:t,transferableList:[t]})}).catch(function(t){console.warn(t),e(t)}):e(null,{image:t,transfertableList:[t]})}).catch(function(t){switch(t.message){case"abort":break;default:e(t)}})}},{key:"abortTile",value:function(t){var e=t.uid;e in this.cache&&(this.cache[e].xhr.abort(),this.cache[e]=null)}},{key:"removeTile",value:function(t){this.abortTile(t)}},{key:"reloadTile",value:function(t,e){t.uid in this.cache&&delete this.cache[t.uid],this.loadTile(t,e)}}]),t}();e.default=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(1),l=i(a),s=n(62),u=function(){function t(e,n){(0,r.default)(this,t),this.id=e,this.dispatcher=n,this.type=s.SOURCE_TYPE.indoorIndex,this.workerId=null}return(0,l.default)(t,[{key:"loadIndexData",value:function(t,e,n,i){t.length>0?this.workerId?this.dispatcher.send(this.type+".calcBuildingListInView",{ids:t,viewBounds:e,indexType:n},i,this.workerId):this.workerId=this.dispatcher.send(this.type+".calcBuildingListInView",{ids:t,viewBounds:e,indexType:n},i):i&&i([])}},{key:"onAdd",value:function(t){this._map=t}}]),t}();e.default=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){var i=t.getUint32(e,n),o=t.getUint32(e+4,n);return n?i+Math.pow(2,32)*o:Math.pow(2,32)*i+o}Object.defineProperty(e,"__esModule",{value:!0});var r=n(32),a=i(r),l=n(238),s=i(l),u=n(212),c=i(u),f=n(27),d=i(f),h=n(237),v=i(h),p=n(26),m=i(p),_=n(160),g=i(_),y=n(18),x=i(y),b=n(0),S=i(b),w=n(1),E=i(w),T=n(20),I=i(T),A=n(136),k=i(A),P=n(111),M=i(P),L=n(137),C=function(){function t(e,n){(0,S.default)(this,t),this._mapId=n,this.actor=e,this._cityIdsCache={}}return(0,E.default)(t,[{key:"calcBuildingListInView",value:function(t,e){var n=this,i=t.ids,o=void 0===i?[]:i,r=t.viewBounds,a=t.indexType;this._getIndoorIndexList(o,a).then(function(t){var i=[],o=!0,a=!1,l=void 0;try{for(var s,u=(0,x.default)((0,g.default)(t));!(o=(s=u.next()).done);o=!0){var c=s.value;if("object"===(void 0===c?"undefined":(0,m.default)(c))&&c.dataLength>0){var f=n.getBuildingIdsInView(c.buildingList.infoList,r);i=i.concat(f)}}}catch(t){a=!0,l=t}finally{try{!o&&u.return&&u.return()}finally{if(a)throw l}}return e(i),i})}},{key:"_getIndoorIndexList",value:function(){function t(t,n){return e.apply(this,arguments)}var e=(0,v.default)(s.default.mark(function t(e,n){var i,o,r,a,l,u,f=this;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i={},o=this._getSortedCityId(e),r=o.oldIds,a=o.newIds,l=r.map(function(t){return f._getCityIndexCache(t)}),t.next=6,d.default.all(l);case 6:return u=t.sent,u.forEach(function(t,e){t?i[r[e]]=t:a.push(r[e])}),t.abrupt("return",this._loadCityData(a,n).then(function(t){return i=(0,c.default)({},i,t)}));case 11:t.prev=11,t.t0=t.catch(0),console.warn(t.t0);case 14:case"end":return t.stop()}},t,this,[[0,11]])}));return t}()},{key:"_loadCityData",value:function(t,e){var n=this,i={};if(t.length>0){var o=t.map(function(t){return t+",0"}).join(","),r=I.default.indoorIndexSrc+"&all="+e+"&data="+o;return new d.default(function(t,e){L.getArrayBuffer(r,function(o,r){if(!o&&r&&r.data){var a=new DataView(r.data);i=n._extract(a),t(i)}else e(o||"未知错误：获取室内索引失败。")})})}return new d.default(function(t){t(i)})}},{key:"_getSortedCityId",value:function(t){var e=this,n=[],i=[];return t.forEach(function(t){e._cityIdsCache[t]?n.push(t):(i.push(t),e._cityIdsCache[t]=!0)}),{oldIds:n,newIds:i}}},{key:"_getCityIndexCache",value:function(t){var e=M.default.QMAPI_indoor_index+t;return new d.default(function(t){k.default.get(e,function(e){t(e)})})}},{key:"_extract",value:function(t){var e={},n=0,i=t.getInt8(n,!0);e.cityNum=i,n+=1;for(var o=0,r=0;r<i;r++){o=t.getInt16(n,!0),n+=2,e[o]||(e[o]={}),e[o].version=t.getInt32(n,!0),n+=4,e[o].intervel=t.getInt16(n,!0),n+=2,e[o].status=t.getInt8(n,!0),n+=1;var a=t.getInt32(n,!0);e[o].dataLength=a,n+=4,a>0&&(e[o].buildingList=this._extractCityInfo(t,n)),n+=a,k.default.set(M.default.QMAPI_indoor_index+o,e[o])}return e}},{key:"_extractCityInfo",value:function(t,e){var n=e,i={};i.sign=String.fromCharCode.apply(String,(0,a.default)(new Uint8Array(t.buffer.slice(n,n+4)))),n+=4,i.df=t.getInt32(n,!0),n+=4,i.dataVer=t.getInt32(n,!0),n+=4,i.confSize=t.getInt32(n,!0),n+=4,i.crc=t.getInt32(n+i.confSize,!0),i.cityIndex=t.getInt16(n,!0),n+=2,n+=6,i.buildingNum=t.getInt32(n,!0),n+=4,i.infoList=[];for(var r=0;r<i.buildingNum;r++){var l={},s=t.getInt32(n,!0)+e;n+=4,n+=4,l.buildingId=String(parseInt(o(t,s,!0))),s+=8,l.version=t.getInt32(s,!0),s+=4,l.left=t.getInt32(s,!0),s+=4,l.right=t.getInt32(s,!0),s+=4,l.top=t.getInt32(s,!0),s+=4,l.bottom=t.getInt32(s,!0),s+=4,i.infoList.push(l)}return i}},{key:"getBuildingIdsInView",value:function(t,e){var n=[],i=e.left,o=e.right,r=e.top,a=e.bottom;return t.forEach(function(t){var e=t.buildingId,l=t.left,s=t.right,u=t.top,c=t.bottom;l>0&&s>0&&i<s&&o>l&&a>u&&r<c&&n.push(e)}),n}}]),t}();e.default=C},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(130),r=i(o),a=n(47),l=i(a),s=n(78),u=i(s),c=n(2),f=i(c),d=n(0),h=i(d),v=n(1),p=i(v),m=n(4),_=i(m),g=n(3),y=i(g),x=n(20),b=i(x),S=n(42),w=i(S),E=n(84),T=i(E),I=n(392),A=i(I),k=n(228),P=i(k),M=n(208),L=n(62),C=n(273),N=function(t){function e(t,n,i){return(0,h.default)(this,e),(0,_.default)(this,(e.__proto__||(0,f.default)(e)).call(this,t,n,i))}return(0,y.default)(e,t),(0,p.default)(e,[{key:"setSelectedFloor",value:function(t){if(!this._loaded)return-1;var e=this.getMetaData(),n=e.floorInfo.floorStrArr.indexOf(t);return n>=0&&(this._selectedFloorNum=n,this.update(this.map.transform)),n}},{key:"getSelectedFloor",value:function(){return this._loaded?this.getMetaData().floorInfo.floorStrArr[this._selectedFloorNum]||null:null}},{key:"_initialize",value:function(){this.type=L.SOURCE_TYPE.indoor,this._selectedFloorNum=null}},{key:"_onLoadDataStart",value:function(){var t=C.IndoorStyleMap.getInstance().get(this._data.indoorStyleId);t.id=this._data.indoorStyleId,this.workerID=this.dispatcher.send(this.type+".setStyle",{indoorStyle:(0,u.default)(t)})}},{key:"_onLoadDataEnd",value:function(){var t=this.getMetaData(),e=t.floorInfo.defaultNum;this._selectedFloorNum=e;var n=(0,l.default)(t.floorInfo.bounds,2),i=n[0],o=n[1];this._buildingBounds=new T.default(new w.default(i.lat,i.lng),new w.default(o.lat,o.lng)),this._fire("loaded")}},{key:"_onLoadDataError",value:function(t){console.error("室内建筑物 "+this._data.buildingId+" 加载出错",t)}},{key:"update",value:function(t){if(this.transform=t,this._loaded&&(0,M.isInFrustum)(this.map,this._buildingBounds)&&t.zoom>=b.default.minShowIndoorZoom){var e=this.getMetaData(),n=new P.default(0,e.buildingId,this._selectedFloorNum,0);this.addItem(n)}}},{key:"getDrawItems",value:function(){var t=this._items,e=this.getMetaData();if(!e)return t;if(!(0,M.isInFrustum)(this.map,this._buildingBounds))return{};var n=e.buildingId+"_"+this._selectedFloorNum+"_0",i=t[n];return i&&i.hasData()&&(this._currentItems=(0,r.default)({},n,i)),this._currentItems||{}}}]),e}(A.default);e.default=N},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(32),r=i(o),a=n(27),l=i(a),s=n(26),u=i(s),c=n(113),f=i(c),d=n(0),h=i(d),v=n(1),p=i(v),m=n(20),_=i(m),g=n(42),y=i(g),x=n(305),b=n(306),S=n(568),w=i(S),E=n(136),T=i(E),I=n(111),A=i(I),k=n(880),P=n(882),M=n(137),L=function(){function t(e,n){(0,h.default)(this,t),this._indoorBuildingSet={},this._mapId=n,this.actor=e,this.loading={},this.loaded={},this.versionPromiseMap=new f.default}return(0,p.default)(t,[{key:"setStyle",value:function(t){this._indoorStyle=JSON.parse(t.indoorStyle)}},{key:"loadTile",value:function(t,e){function n(t,n){return delete this.loading[i][o],t?e(t):n?(r.vectorTile=n,r.parse(n,this.actor,this._indoorStyle,e),this.loaded[i]=this.loaded[i]||{},void(this.loaded[i][o]=r)):e(null,null)}var i=t.source,o=t.uid;this.loading[i]||(this.loading[i]={}),this.loading[i][o]=new w.default(t);var r=this.loading[i][o];r.abort=this.loadVectorData(t,n.bind(this))}},{key:"removeTile",value:function(t){this.removeSource(t)}},{key:"loadVectorData",value:function(t,e){var n=t.source;if(!this._indoorBuildingSet[n])return e(null,null);e(null,this._indoorBuildingSet[n])}},{key:"loadData",value:function(t,e){var n=function(n,i){return n?e(n):"object"!==(void 0===i?"undefined":(0,u.default)(i))?e(new Error("Input data is not a valid Indoor object.")):(this._indoorBuildingSet[t.source]=i,void e(null,{buildingId:i.buildingId,buildingName:i.Name_CN,floorInfo:i.floorInfo,center:i.areaCenter}))}.bind(this);this.loadIndoorBuffer(t,n)}},{key:"loadIndoorBuffer",value:function(t,e){var n=this,i=JSON.parse(t.data),o=A.default.QMAPI_indoor_buffer+i.buildingId;new l.default(function(t){T.default.get(o,function(e){t(e)})}).then(function(t){return n._getVersion(t).then(function(e){return n._getIndoorInfoData(i,t,e)})}).then(function(t){x.ConfigUtil.setBV(t.version),e(null,t.buildingData)}).catch(function(t){e(t,null)})}},{key:"_getVersion",value:function(t){var e=null;if(t){var n=_.default.indoorBuildingSrc+"?df=1&type=dataver&cid="+t.cityId;e=this.versionPromiseMap.get(t.cityId)||new l.default(function(t){M.getJSON(null,n,function(e,n){var i=1/0;e?console.error(e):i=n&&n.metadata&&n.metadata.version&&n.metadata.version.data,t({version:i})})}),this.versionPromiseMap.set(t.cityId,e)}else e=l.default.resolve({version:1/0});return e}},{key:"_getIndoorInfoData",value:function(t,e,n){var i=this,o=A.default.QMAPI_indoor_buffer+t.buildingId,r=_.default.indoorBuildingSrc+"?df=1&cid="+(e&&e.cityId||t.cityId)+"&bid="+t.buildingId,a=n.version;return e&&e.version>=a?l.default.resolve(e):new l.default(function(e,n){M.getArrayBuffer(r,function(r,a){if(r)n(r);else{var l=null,s=a.data,u=new DataView(s);l=i.extract(u,t.buildingId),T.default.set(o,l),e(l)}})}).catch(function(t){if(console.error(t),e)return e;throw new Error(t)})}},{key:"removeSource",value:function(t){this._indoorBuildingSet[t.source]&&delete this._indoorBuildingSet[t.source]}},{key:"extract",value:function(t,e){var n={},i=0;n.sign=String.fromCharCode.apply(String,(0,r.default)(new Uint8Array(t.buffer.slice(i,4)))),i+=4,n.version=t.getInt32(i,!0),i+=4,n.cityId=t.getInt32(i,!0),i+=4,n.buildId=t.getInt32(i,!0),i+=4,n.zipSize=t.getInt32(i,!0),i+=4,n.srcSize=t.getInt32(i,!0),i+=4,n.CRC=t.getInt32(i),i+=4,k(t.byteLength-28===n.zipSize,"Check zip size");var o=P.inflate(t.buffer.slice(i),{windowBits:-15});return k(o.length===n.srcSize,"Check unzipped size"),n.buildingData=this.extractFloorInfo(o,e),n.buildingData.buildingId=e,n.buildingData.buffer=o,n}},{key:"extractFloorInfo",value:function(t){var e=new DataView(t.buffer),n=0,i={};i.Attribute_size=e.getInt32(n,!0),n+=4,i.Data_size=e.getInt32(n,!0),n+=4,i.Topology_size=e.getInt32(n,!0),n+=4,i.Name_CN_size=e.getUint8(n,!0),n+=1,i.Name_CN=String.fromCharCode.apply(String,(0,r.default)(new Uint16Array(e.buffer.slice(n,n+i.Name_CN_size)))),n+=i.Name_CN_size,i.DefaultFloor=e.getUint8(n,!0),n+=1,i.Floor_num=e.getUint8(n,!0),n+=1,i.Floor_str_size=e.getUint8(n,!0),n+=1;for(var o=[],a=0;a<i.Floor_str_size;a++){var l=e.getUint8(n,!0);o.push(l),n+=1}i.floorStr=String.fromCharCode.apply(null,o);for(var s=[],u=0;u<4;u++){var c=e.getInt32(n,!0);s.push(c),n+=4}var f=[],d={},h={};d.x=s[0],h.x=s[1],d.y=s[2],h.y=s[3];var v=void 0,p=void 0;try{v=(0,b.pixels2LongLat)(d.x,h.y),p=(0,b.pixels2LongLat)(h.x,d.y),f.push(v),f.push(p)}catch(t){throw new Error("数据错误，bounds无效。")}return i.floorInfo={floorNum:i.Floor_num,floorStr:i.floorStr,floorStrArr:i.floorStr.split(","),bounds:f,defaultNum:i.DefaultFloor},i.Floor_num=e.getInt32(n,!0),i.areaCenter=new y.default((v.lat+p.lat)/2,(v.lng+p.lng)/2),i}}]),t}();e.default=L},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(16),r=i(o),a=n(130),l=i(a),s=n(78),u=i(s),c=n(27),f=i(c),d=n(0),h=i(d),v=n(1),p=i(v),m=n(43),_=n(535),g=i(_),y=function(){function t(e){(0,h.default)(this,t),this.uid=e.uid,this.coord=e.coord}return(0,p.default)(t,[{key:"_parseEscalator",value:function(){}},{key:"parse",value:function(t,e,n,i){var o=this.coord.x+"_"+this.coord.y+"_"+this.coord.z,r={},a=t.buffer,s=t.buildingId,c=t.areaCenter,d=new g.default(s,{buffer:a,areaCenter:c,floorInfo:t.floorInfo,selectedFloorNum:this.coord.y,indoorStyle:n}),h=d.parseBuilding(),v=d.getBuildingPointInfo(h.buildingPoint),p=new f.default(function(t){e.send("getIndoorGlyphInfo",{glyphList:v.glyphList,iconSrcList:v.iconSrcList,pointInfoSet:(0,u.default)(v.pointInfoSet),indoorStyle:(0,u.default)(n)},function(e,n){if(e)console.error(e),t(null);else{var i=JSON.parse(n.iconMapping),o=JSON.parse(n.glyphMapping),r=JSON.parse(n.poiMapping);t({poiMapping:r,iconMapping:i,glyphMapping:o})}})}),_=h.buildingData.map(function(t){if(t.length>0){return{top:d.getTopGeometryAttributes(t),sides:d.getSidesGeometryAttributes(t)}}return null}).filter(function(t){return!!t}),y=h.buildingEscalator.map(function(t){if(t.length>0){return d.getEscalatorAttributes(t)}return null}).filter(function(t){return!!t}),x=h.floorBoundsData.map(function(t){if(t.length>0){var e=d.getTopGeometryAttributes(t);return delete e.normal,delete e.color,{top:e}}}).filter(function(t){return!!t});p.then(function(t){var e=d.parseInstanceBuildingPoint(v.pointInfoSet,t.iconMapping,t.glyphMapping,t.poiMapping);r[m.RENDER_LAYER_TYPE.indoorRegion]=(0,l.default)({},o,{regions:_,bounds:x,center:c,floorIndex:d.selectedFloorNum}),r[m.RENDER_LAYER_TYPE.indoorPoi]=(0,l.default)({},o,{pois:e,bounds:x,center:c,floorIndex:d.selectedFloorNum}),r[m.RENDER_LAYER_TYPE.indoorEscalator]=(0,l.default)({},o,{escalators:y,bounds:x,center:c}),r.id=o,i(null,r)})}},{key:"transferData",value:function(t,e){var n=[],i=["top","sides"],o=["position","index","color","normal"];["regions","bounds"].forEach(function(r){e[m.RENDER_LAYER_TYPE.indoorRegion][t][r].forEach(function(t){i.forEach(function(e){o.forEach(function(i){var o=t[e]&&t[e][i]&&t[e][i].buffer;o&&n.push(o)})})})});var a=e[m.RENDER_LAYER_TYPE.indoorPoi][t].pois;(0,r.default)(a).forEach(function(t){a[t].forEach(function(t){t.instance.count>0&&["instanceTransTypeArray","instanceCoordsTypeArray","instanceTextBoundsTypeArray","instanceInfosTypeArray","instanceColorsTypeArray","instanceStrokeColorsTypeArray"].forEach(function(e){n.push(t.instance[e].buffer)})})});var l=e[m.RENDER_LAYER_TYPE.indoorEscalator][t].escalators;return l.length>0&&["instanceCoordsTypeArray","instanceInfosTypeArray"].forEach(function(t){n.push(l[0][t].buffer)}),e.transferableList=n,e}}]),t}();e.default=y},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n=t.z-e.z,i=Math.pow(2,n);return{transX:(t.x-e.x*i)*t.tileSize,transY:(t.y-e.y*i)*t.tileSize,scale:1/i}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(14),a=i(r),l=n(0),s=i(l),u=n(1),c=i(u),f=n(228),d=i(f),h=n(395),v=i(h),p=n(20),m=i(p),_=function(){function t(e){(0,s.default)(this,t);var n=d.default.converter(e.coord);this._batchCoord=n,this._workerTile=new v.default((0,a.default)({},e,{coord:n})),this._workerTile.dataZoom=n.z+1,this._batchTiles=n.children().map(function(t){return new v.default((0,a.default)({},e,{coord:t}))})}return(0,c.default)(t,[{key:"parse",value:function(t,e,n,i,o,r,a){function l(t,e){return function(t,n){if(t&&(console.error(t),n=null),s[e]=n,(u+=1)===c.length){var i=s.reduce(function(t,e){return e&&(Array.prototype.push.apply(t,e.transferableList),delete e.transferableList),t},[]);s.transferableList=i,r(null,s)}}}if(m.default.batchRender)return void this.batchParse.apply(this,arguments);var s=[],u=0,c=this._batchTiles;this._batchTiles.forEach(function(r,s){var u=l(r.coord,s);if(!e||!e.datas||!e.datas[s])return void u(new Error("瓦片："+r.coord.id+" 加载失败!"),null);r.parse(t,e.datas[s],n,i,o,u,a)})}},{key:"batchParse",value:function(t,e,n,i,r,a,l){function s(t,e){if(t)return console.error(t),void a(t);a(null,e)}var u=this._batchCoord,c=e.datas;u.children().forEach(function(t,e){c[e].tileTransform=o(t,u)}),this._workerTile.parse(t,c,n,i,r,s,l)}}]),t}();e.default=_},function(t,e,n){"use strict";function i(t){return 64===f.indexOf(t.charAt(t.length-1))?t.substring(0,t.length-1):t}function o(t){if(!t)return null;t=i(t),t=i(t);var e=parseInt(t.length/4*3,10),n=[];t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");var o=void 0,r=void 0,a=void 0,l=void 0,s=void 0,u=void 0,c=void 0,d=0,h=0;for(d=0;d<e;d+=3)l=f.indexOf(t.charAt(h)),h+=1,s=f.indexOf(t.charAt(h)),h+=1,u=f.indexOf(t.charAt(h)),h+=1,c=f.indexOf(t.charAt(h)),h+=1,o=l<<2|s>>4,r=(15&s)<<4|u>>2,a=(3&u)<<6|c,n.push(o),64!==u&&n.push(r),64!==c&&n.push(a);return n}function r(t,e){return t>>8-e&255|t<<e&255}function a(t){return r(t,2)^r(t,1)&r(t,3)}function l(t,e){return{x:e,y:t^a(e)}}function s(t){for(var e=t.length,n=[],i=0;i<e;i+=2){var o=t[i],r=0;i+1<e&&(r=t[i+1]);for(var a=0,s=0,u=0;u<3;u++){var c=l(o,r);a=c.x,o=a,s=c.y,r=s}n.push(a),n.push(s)}return n}function u(t){for(var e="",n=0;n<t.length;){var i=t[n],o=0,r=0;i<128?(e+=String.fromCharCode(i),n+=1):i>191&&i<224?(o=t[n+1],e+=String.fromCharCode((31&i)<<6|63&o),n+=2):(o=t[n+1],r=t[n+2],e+=String.fromCharCode((15&i)<<12|(63&o)<<6|63&r),n+=3)}return e}function c(t){var e=t.lastIndexOf("}");return t.substring(0,e+1)}var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.decode=function(t){return c(u(s(o(t))))}},function(t,e,n){"use strict";function i(t){return!!t&&t[0]instanceof Number&&!t[2]}e.merge=function(t){if(!t||!t.length)return t;for(var e=[],n=null,o=!1,r=void 0,a=void 0,l=0;l<t.length;l++)r=t[l],n&&i(r)&&r[0]===n[0]?o?(a=n[1],a.push(r[1])):(n[1]=[n[1]],a=n[1],a.push(r[1]),o=!0):(e.push(r),o=!1,n=i(r)?r:null);return e}},function(t,e,n){"use strict";function i(t){for(var e=[],n=t.slice(),i=0,o=n.length;i<o;i+=2)if(0===e.length)e.push(n[0],n[1]);else{var r=e[i-2]+n[i],a=e[i-1]+n[i+1];e.push(r,a)}return e}e.restores=function(t){for(var e=t||[],n=0;n<e.length;n++){var o=e[n];if(o[0]instanceof Array)for(var r=0;r<o.length;r++){var a=o[r];a[1]=i(a[1])}else o[1]=i(o[1])}return t}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return t>=C.default.maxDataZoom}Object.defineProperty(e,"__esModule",{value:!0});var r=n(16),a=i(r),l=n(18),s=i(l),u=n(2),c=i(u),f=n(0),d=i(f),h=n(1),v=i(h),p=n(4),m=i(p),_=n(21),g=i(_),y=n(3),x=i(y),b=n(77),S=n(227),w=i(S),E=n(391),T=i(E),I=n(7),A=i(I),k=n(308),P=i(k),M=n(62),L=n(20),C=i(L),N=C.default.batchRender,O=function(t){function e(t,n,i){(0,d.default)(this,e);var o=(0,m.default)(this,(e.__proto__||(0,c.default)(e)).call(this,t,n,i));return o._data=n.data,o.type=M.SOURCE_TYPE.vector,o.iconInfo=n.iconInfo||null,o.enc=n.enc,o.styleId=n.styleId,o._shadowTiles={},o._parentTiles={},o._parentCache=new T.default(0,o.unloadTile.bind(o)),o}return(0,x.default)(e,t),(0,v.default)(e,[{key:"setStyleAndIconInfo",value:function(t,e){this.styleId=t,this.iconInfo=e}},{key:"clear",value:function(){this._shadowTiles={},(0,g.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"clear",this).call(this),this._parentTiles={},this._parentCache.reset()}},{key:"clearTiles",value:function(){var t=this;A.default.forIn(this._parentTiles,function(e){t.removeBatchTile(e)}),this._cache.reset(),this._parentCache.reset()}},{key:"reload",value:function(){var t=this;this._cache.reset(),this._parentCache.reset(),A.default.forIn(this._items,function(e,n){t.reloadTile(n,!0)})}},{key:"reloadTile",value:function(t,e){(e||t.state!==S.TILE_STATE.reloading)&&(t.state=S.TILE_STATE.reloading,this.loadBatchTile(t,{},this._tileLoaded.bind(this,t)))}},{key:"updateCacheSize",value:function(t){(0,g.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"updateCacheSize",this).call(this,t),this._parentCache.setMaxSize(this._cache.max/4)}},{key:"update",value:function(t,e,n){var i=this;this.transform=t,this.camera=e;var o={},r={},a=void 0,l=void 0,u=!0;this.updateCacheSize(t);var c=this.transform.zoom,f=Math.max(c-4,this.minZoom),d=Math.max(c+3,this.minZoom),h=t.coveringTiles({round:!0,tileSize:this.tileSize,minZoom:this.minZoom,maxZoom:this.maxZoom,zoom:c-1});if(h.forEach(function(t){var e=i._parentTiles[t.id];e&&e.hasData()||(u=!1,r[t.id]=!0)}),0!==A.default.keysDifference(r,this._parentTiles).length||u||c>C.default.maxDataZoom){for(var v=0;v<h.length;v++){var p=h[v];if(p.z>=C.default.maxDataZoom){var m=p.ancestor(C.default.maxDataZoom-1)||p;this.addTile(m,n,null),o[m.id]=!0}else{if(this.icon&&p.setIconUrls(this.icon),!(a=this.addTile(p,n,null)))continue;if(o[p.id]=!0,a.hasData())continue;this._findLoadedChildren(p,d,o)||(l=this.findLoadedParent(p,f,o))&&this.addTile(l.coord,n,null)}}var _=A.default.keysDifference(this._parentTiles,o),g=!0,y=!1,x=void 0;try{for(var b,S=(0,s.default)(_);!(g=(b=S.next()).done);g=!0){var w=b.value;this.removeBatchTile(w)}}catch(t){y=!0,x=t}finally{try{!g&&S.return&&S.return()}finally{if(y)throw x}}}else h.forEach(function(t){if(i._parentTiles[t.id].hasData()){var e=t.parent(d);i.removeBatchTile(e&&e.id),t.children(d).forEach(function(t){i.removeBatchTile(t&&t.id)})}})}},{key:"_findLoadedChildren",value:function(t,e,n){var i=this,o=!1;return A.default.forIn(this._parentTiles,function(r,a){if(!(n[r]||!a.hasData()||a.coord.z<=t.z||a.coord.z>e)){var l=Math.pow(2,Math.min(a.coord.z,i.maxZoom)-Math.min(t.z,i.maxZoom));if(Math.floor(a.coord.x/l)===t.x&&Math.floor(a.coord.y/l)===t.y)for(n[r]=!0,o=!0;a&&a.coord.z-1>t.z;){var s=a.coord.parent(i.maxZoom).id;a=i._parentTiles[s],a&&a.hasData()&&(delete n[r],n[s]=!0)}}}),o}},{key:"findLoadedParent",value:function(t,e,n){for(var i=t.z-1;i>=e;i--){t=t.parent(this.maxZoom);var o=this._parentTiles[t.id];if(o&&o.hasData())return n[t.id]=!0,o}}},{key:"addTile",value:function(t,e,n){var i=this;if(A.default.isDefined(this.styleId)&&A.default.isDefined(this.iconInfo)){var r=this._parentTiles[t.id];return r?((N||o(r.coord.z))&&r.hasData()&&(this._items[r.coord.id]=r),r):(r=this._parentCache.get(t.id))?(this._parentTiles[t.id]=r,o(t.z)||N?this._items[t.id]=r:r.coord.children().forEach(function(t){var e=i._cache.get(t.id);e&&(i._items[t.id]=e)}),r):(r=new w.default(t,this.tileSize,this.maxZoom,this.transform,this.camera),this._parentTiles[t.id]=r,(o(t.z)||N)&&(this._items[t.id]=r),this.loadBatchTile(r,e,n?n.bind(this):this._tileLoaded.bind(this,r)),r)}return null}},{key:"removeBatchTile",value:function(t){var e=this,n=this._parentTiles[t];if(n)if(o(n.coord.z)||N?this.removeTile(n.coord.id):n.coord.children().forEach(function(t){return e.removeTile(t.id)}),delete this._parentTiles[t],n.hasData()){var i=n.coord.id;this._parentCache.add(i,n)}else n.aborted=!0,this.abortTile(n),this.unloadTile(n)}},{key:"loadBatchTile",value:function(t,e,n){function i(e,i,r){var l=this;if(e)return(0,b.qos)("tile",{id:"v",status:1}),n(e);(0,b.qos)("tile",{id:"v",status:0,time:r}),t.setData(i),o(a.z)||N||a.children().forEach(function(e,n){t=new w.default(e,l.tileSize,l.maxZoom,l.transform,l.camera),l._items[e.id]=t,t.setData(i[n]),l._parentTiles[t.coord.parent().id]||l.removeTile(t.coord.id)}),n(null)}var r=t,a=r.coord,l=o(a.z)?a.url(this._data.vectorSrc):a.urlForBatchChildren(this._data.batchVectorSrc),s={url:l,uid:t.uid,type:this.type,source:this.getUniqueId(),coord:a,iconInfo:this.iconInfo,enc:this.enc,styleId:this.styleId,reason:e};t.workerID&&t.state!==S.TILE_STATE.expired?t.state===S.TILE_STATE.loading||this.dispatcher.send("reloadTile",s,i.bind(this),t.workerID):t.workerID=this.dispatcher.send(o(a.z)?"loadTile":"vector.loadBatchTile",s,i.bind(this))}},{key:"abortTile",value:function(t){this.dispatcher.send("abortTile",{uid:t.uid,type:this.type,source:this.getUniqueId(),tileId:t.coord.id},null,t.workerID)}},{key:"unloadTile",value:function(t){t.clear(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.getUniqueId(),tileId:t.coord.id},null,t.workerID)}},{key:"_tileLoaded",value:function(t,e){var n=this;e?(t.state=S.TILE_STATE.errored,404!==e.status&&this._fire("loaderror",{tile:t,error:e})):this._fire("data",{dataType:"source",tile:t}),(0,a.default)(this._items).every(function(e){return n._items&&n._items[e]&&(n._items[e].getData()||t.state===S.TILE_STATE.errored)})&&this._fire("tilesloaded",{dataType:"source",tiles:this._items})}}]),e}(P.default);e.default=O},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(238),r=i(o),a=n(27),l=i(a),s=n(237),u=i(s),c=n(0),f=i(c),d=n(1),h=i(d),v=n(578),p=n(652),m=i(p),_=n(569),g=i(_),y=n(7),x=i(y),b=n(137),S=n(395),w=function(){function t(e){(0,f.default)(this,t),this.actor=e,this.loading={},this.loaded={},self._preloadPromiseCache||(self._preloadPromiseCache={}),self._iconIndexCache||(self._iconIndexCache={}),self._styleCache||(self._styleCache={}),this.currentStyleId=null}return(0,h.default)(t,[{key:"_toTextureCoords",value:function(t,e,n){return x.default.forIn(t,function(i,o){t[i]={left:o[0]/e,right:(o[0]+o[2])/e,top:(n-o[1])/n,bottom:(n-o[1]-o[3])/n,width:o[2],height:o[3]}}),t}},{key:"_preload",value:function(){function t(t,n,i){return e.apply(this,arguments)}var e=(0,u.default)(r.default.mark(function t(e,n,i){var o;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.default.all([self._iconIndexCache[n]||(0,m.default)(n),self._styleCache[n]||(0,v.getStyleForWorker)(n)]);case 2:return o=t.sent,self._iconIndexCache[n]=o[0],self._styleCache[n]=o[1],t.abrupt("return",{iconCoords:this._toTextureCoords(o[0],i.w,i.h),style:o[1]});case 6:case"end":return t.stop()}},t,this)}));return t}()},{key:"deleteCache",value:function(t){null!==t&&(delete self._iconIndexCache[t],delete self._styleCache[t])}},{key:"reloadTile",value:function(t,e){var n=t.uid,i=t.source,o=this.loading[i],r=this.loaded[i];o[n]?this.abortTile(t):r[n]&&this.removeTile(t),this.loadBatchTile(t,e)}},{key:"loadBatchTile",value:function(t,e){function n(n,i,s){return n?(console.error(n),e(n)):i?this.loading[o][l]?(delete this.loading[o][l],u.vectorTile=i,u.parse(t,i,r,c,this.actor,function(t,n){e(t,n,s)},a),this.loaded[o]=this.loaded[o]||{},void(this.loaded[o][l]=u)):void e(null,null):e(null,null)}var i=this,o=t.source,r=t.iconInfo,a=t.enc,l=t.uid,s=t.styleId,u=void 0,c=void 0;this.currentStyleId!==s&&(null!==this.currentStyleId&&this.deleteCache(this.currentStyleId),this.currentStyleId=s);var f=s+"_"+r.w+"_"+r.h;"config"===s&&(delete self._preloadPromiseCache[f],this.deleteCache(s));var d=self._preloadPromiseCache[f];d||(d=this._preload(f,s,r),self._preloadPromiseCache[f]=d),d.then(function(e){var a=e.iconCoords,s=e.style;r.info=a,c=s,i.loading[o]||(i.loading[o]={}),i.loading[o][l]=new g.default(t),u=i.loading[o][l],u.abort=i.loadVectorData(t,n.bind(i))})}},{key:"loadTile",value:function(t,e){function n(n,i,s){return n?e(n):i?this.loading[o][l]?(delete this.loading[o][l],u.vectorTile=i,u.parse(t,i,r,c,this.actor,function(t,n){e(t,n,s)},a),this.loaded[o]=this.loaded[o]||{},void(this.loaded[o][l]=u)):void e(null,null):e(null,null)}var i=this,o=t.source,r=t.iconInfo,a=t.enc,l=t.uid,s=t.styleId,u=void 0,c=void 0;this.currentStyleId!==s&&(null!==this.currentStyleId&&this.deleteCache(this.currentStyleId),this.currentStyleId=s);var f=s+"_"+r.w+"_"+r.h;"config"===s&&(delete self._preloadPromiseCache[f],this.deleteCache(s));var d=self._preloadPromiseCache[f];d||(d=this._preload(f,s,r),self._preloadPromiseCache[f]=d),d.then(function(e){var a=e.iconCoords,s=e.style;r.info=a,c=s,i.loading[o]||(i.loading[o]={}),i.loading[o][l]=new S(t),u=i.loading[o][l],u.abort=i.loadVectorData(t,n.bind(i))})}},{key:"abortTile",value:function(t){var e=this.loading[t.source],n=t.uid;e&&e[n]&&e[n].abort&&(e[n].abort(),delete e[n])}},{key:"removeTile",value:function(t){var e=this.loaded[t.source],n=t.uid;e&&e[n]&&delete e[n]}},{key:"loadVectorData",value:function(t,e){var n=b.getJSON(t.id,t.url,function(t,n,i){e&&e(t,n,i)});return function(){e=null,n.abort()}}}]),t}();t.exports=w},function(t,e,n){"use strict";function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"DEFAULT",e=arguments[1];return l.STYLE_ID.hasOwnProperty(t)?r.default.resolve(l.STYLE_ID[t]):(0,a.checkKey)(e).then(function(e){var n=l.STYLE_ID.DEFAULT;if(e&&e.custom_map_style&&e.custom_map_style.style_list){var i=parseInt(String(t).replace("style",""));e.custom_map_style.style_list.some(function(t){return i>-1&&i===t.order&&(n=t.id,(0,s.cs)({styleId:n,subkey:e.subkey}),!0)})||console.error("个性化样式 "+t+" 并未找到，已自动启用默认样式！")}return n})}Object.defineProperty(e,"__esModule",{value:!0});var o=n(27),r=function(t){return t&&t.__esModule?t:{default:t}}(o),a=n(270),l=n(275),s=n(77);e.default=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){return new f.default(function(n){var i=t||0,o=p.default.QMAPI_poi_icon+i,r=-1,s="",c="";_.default.support()?_.default.get(o,function(t){var f=JSON.parse(t);r=t?f.version:r,s=e.replace("{id}",i).replace("{version}",r),h.default.getJSON(null,s,function(t,e,s){if(!t&&e&&e.data){if("{}"!==(0,u.default)(e.data))return l({styleId:i,version:r,time:s}),c=e.data,void _.default.set(o,(0,u.default)(e),function(){n("data:image/png;base64,"+c)});c=f.data}else a({styleId:i,version:r,err:t}),console.error(t,e),c=f.data;n("data:image/png;base64,"+c)})}):(s=e.replace("{id}",i).replace("{version}",r),h.default.getJSON(null,s,function(t,e,o){return!t&&e&&e.data?"{}"===(0,u.default)(e.data)?(a({styleId:i,version:r,err:null}),console.error(e),void n(null)):(l({styleId:i,version:r,time:o}),c=e.data,void n("data:image/png;base64,"+c)):(a({styleId:i,version:r,err:t}),console.error(t,e),void n(null))}))})}function r(t){var e=t.data,n=t.styleId,i=t.iconSrc;return new f.default(function(t){e&&"string"==typeof e?_.default.support()?_.default.set(y,{data:e},function(){t(e)}):(console.error("兼容性错误：当前浏览器不支持LocalStorage。"),t(null)):o(n,i).then(function(e){_.default.support()?_.default.set(y,{data:e},function(){t(e)}):(console.error("兼容性错误：当前浏览器不支持LocalStorage。"),t(null))})})}function a(t){var e=t.styleId,n=t.version,i=t.err;(0,g.qos)("icon",{styleId:e,version:n,error:i&&i.status||0})}function l(t){var e=t.styleId,n=t.version,i=t.time;(0,g.qos)("icon",{styleId:e,version:n,loadTime:i})}Object.defineProperty(e,"__esModule",{value:!0}),e.setPoiIcon=e.loadPoiIconFile=void 0;var s=n(78),u=i(s),c=n(27),f=i(c),d=n(137),h=i(d),v=n(111),p=i(v),m=n(136),_=i(m),g=n(77),y=p.default.QMAPI_poi_icon+"config";e.loadPoiIconFile=o,e.setPoiIcon=r},function(t,e,n){"use strict";function i(t){var e=["background_color","font_color","color_fill","color_side","color_border"];["regionStyles","lineStyles","pointStyles","labelStyles","arrowStyles"].forEach(function(n){var i=t[n];a(i,function(t,n){n.forEach(function(t){e.forEach(function(e){e in t&&(t[e]=r(t[e]))})})})})}var o=n(7),r=o.colorToRGBA,a=o.forIn;t.exports=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){var e={};return[v.BASE_LAYER_TYPE.region,v.BASE_LAYER_TYPE.line,v.BASE_LAYER_TYPE.label,v.BASE_LAYER_TYPE.point,v.BASE_LAYER_TYPE.arrow].forEach(function(n){e[n]={type:n,style:t[n+"Styles"]}}),e.point.relyStyle=e.label.style,e.point.relyStyleField="labelid",e}function r(t){var e,n=(e={},(0,f.default)(e,v.BASE_LAYER_TYPE.region,t.region.style),(0,f.default)(e,v.BASE_LAYER_TYPE.line,t.line.style),e),i={};return _.default.forIn(n,function(t,e){_.default.forIn(e,function(e,n){var o=n[0],r=o.stylename;i[e]=i[e]||{id:e,name:r,type:t,styles:{}};for(var a=i[e],l=0,s=n.length;l<s;l++)o=n[l],a.styles[o.minScaleVal+"-"+o.maxScaleVal]=o})}),i}function a(t){g(t);var e=o(t);return{style:e,layerMeta:r(e),styleTag:t.Tag}}function l(t){return new u.default(function(e){var n=null,i=null;if(y.support()){var o=h.default.QMAPI_style+t;y.get(o,function(o){o?(n=JSON.parse(o).data,i=a(n),i.styleId=t,e(i)):(0,p.loadStyleFileFromServer)({styleId:t,version:-1}).then(function(n){i=a(n.data),i.styleId=t,e(i)})})}else(0,p.loadStyleFileFromServer)({styleId:t,version:-1}).then(function(n){i=a(n.data),i.styleId=t,e(i)})})}Object.defineProperty(e,"__esModule",{value:!0});var s=n(27),u=i(s),c=n(130),f=i(c);e.getStyleForWorker=l;var d=n(111),h=i(d),v=n(43),p=n(309),m=n(7),_=i(m),g=n(577),y=n(136)},,function(t,e,n){"use strict";var i=n(276),o=function(t){return t&&t.__esModule?t:{default:t}}(i),r={spherical:{computeDistanceBetween:o.default}};t.exports=r},,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n=document.createElement(t);return n.style.cssText=e,n}Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),a=i(r),l=n(0),s=i(l),u=n(1),c=i(u),f=n(4),d=i(f),h=n(3),v=i(h),p=n(312),m=i(p),_=n(42),g=i(_),y=n(7),x=n(51),b=i(x),S=n(38),w=n(17),E=n(77),T=b.default.isString,I=b.default.isNumber,A=b.default.isObject,k=["position:absolute;","left:0;top:0;","padding:0px 0px 6px;"],P=["min-width:100px;","white-space:nowrap;","background-color:white;","text-align:center;","padding:25px 10px 12px;","border-radius:6px;","box-shadow:0 2px 4px 0 rgba(0,0,0,0.15);"],M=["width:10px;height:10px;","background-color:white;","transform:rotate(45deg);","position:absolute;","bottom:1px;","left:0;right:0;","margin:auto;","box-shadow:2px 2px 2px rgba(0,0,0,0.15);"],L=["width:15px;height:15px;","position:absolute;","right:5px;top:5px;","cursor:pointer;"],C={x:0,y:0},N=function(t){function e(t){return(0,s.default)(this,e),(0,d.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t||{}))}return(0,v.default)(e,t),(0,c.default)(e,[{key:"onInit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.content="",this.zIndex=0,this.offset=C,this._handlers=[],this._domResizeObserver=null,this.setContent(t.content).setZIndex(t.zIndex).setOffset(t.offset).setPosition(t.position),(0,E.statCn)("InfoWindow")}},{key:"onDestroy",value:function(){this._handlers.forEach(function(t){t&&t.remove()}),this._domResizeObserver&&this._domResizeObserver.disconnect()}},{key:"createDOM",value:function(){var t=this,e=o("div",P.join(""));e.innerHTML=this.content,window.ResizeObserver&&(this._domResizeObserver=new ResizeObserver(function(){t.updateDOM()}),this._domResizeObserver.observe(e));var n=o("div",M.join("")),i=o("div",L.join(""));i.innerHTML='<svg style="fill: #aaa;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">\n<path d="M579.888 512l190.064-190.064a48 48 0 0 0-67.888-67.872L512 444.112 321.936 254.064a48 48 0 1 0-67.872 67.872L444.112 512 254.064 702.064a48 48 0 1 0 67.872 67.872L512 579.888l190.064 190.064a48 48 0 0 0 67.872-67.888L579.888 512z" fill></path>\n</svg>',this._handlers.push((0,w.on)(i,"click,touchend",function(){t.emit("closeclick"),t.close()}));var r=o("div",k.join(""));return r.appendChild(e),r.appendChild(n),r.appendChild(i),r.style.zIndex=this.zIndex,this._handlers.push((0,w.on)(r,"click, touchstart, touchend",function(t){t&&t.stopPropagation&&t.stopPropagation()})),r}},{key:"updateDOM",value:function(){if(this.map){var t=this.map.projectToContainer(this.position),e=this.offset.x||0,n=this.offset.y||0,i=t.x-this.dom.clientWidth/2+e+"px",o=t.y-this.dom.clientHeight+n+"px";this.dom.style.transform="translate("+i+", "+o+")"}}},{key:"close",value:function(){return this.dom&&(this.dom.style.display="none"),this}},{key:"open",value:function(){return this.dom&&(this.dom.style.display="",this.updateDOM()),this}},{key:"setPosition",value:function(t){return t instanceof g.default?(this.position=t,this.updateDOM()):console.error("类型错误: InfoWindow.position参数类型错误，应为TMap.LatLng。"),this}},{key:"getPosition",value:function(){return this.position}},{key:"setContent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return T(t)?(this.content=t,this.dom&&(this.dom.firstElementChild.innerHTML=this.content,this.updateDOM()),this):(new S.BaseTypeError("InfoWindow.content","string",t).error(),this)}},{key:"setZIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return I(t)?(this.zIndex=t,this.dom&&(this.dom.style.zIndex=this.zIndex),this):(new S.BaseTypeError("InfoWindow.zIndex","number",t).error(),this)}},{key:"setOffset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return A(t)?(t=(0,y.extend)({},C,t),I(t.x)?I(t.y)?(this.offset=t,this.dom&&this.updateDOM(),this):(new S.BaseTypeError("InfoWindow.offset.y","number",t.y).error(),this):(new S.BaseTypeError("InfoWindow.offset.x","number",t.x).error(),this)):(new S.BaseTypeError("InfoWindow.offset","object",t).error(),this)}}]),e}(m.default);e.default=N},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(16),r=i(o),a=n(2),l=i(a),s=n(0),u=i(s),c=n(1),f=i(c),d=n(4),h=i(d),v=n(21),p=i(v),m=n(3),_=i(m),g=n(42),y=i(g),x=n(406),b=i(x),S=n(139),w=n(43),E=n(378),T=n(51),I=i(T),A=n(7),k=n(210),P=k.CircleStyle,M=I.default.isValidColor,L=I.default.isNumber,C=function(t){function e(t){return(0,u.default)(this,e),(0,h.default)(this,(e.__proto__||(0,l.default)(e)).call(this,t))}return(0,_.default)(e,t),(0,f.default)(e,[{key:"_setGeometryType",value:function(){this._geometryType=S.GEOMETRY_TYPES.CIRCLE,this._layerType=w.RENDER_LAYER_TYPE.circle,this._className="MultiCircle"}},{key:"_checkGeometries",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(t,e){t?t.styleId?t.center&&t.center instanceof y.default?(!t.radius||!L(t.radius)||t.radius<=0)&&console.error("MultiCircle.geometries: 希望传入CircleGeometry数组，实际第"+e+"元素的radius属性无效！"):console.error("MultiCircle.geometries: 希望传入CircleGeometry数组，实际第"+e+"元素的center属性无效！"):t.styleId="default":console.error("MultiCircle.geometries: 希望传入CircleGeometry数组，实际第"+e+"元素不存在！")})}},{key:"_getDefaultStyle",value:function(){return new P}},{key:"_checkStyles",value:function(t){(0,p.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"_checkStyles",this).call(this,t),(0,r.default)(t).forEach(function(e){var n=t[e];n&&n instanceof P?n instanceof P&&(M(n.color)?M(n.borderColor)||console.error("MultiCircle.styles: 样式id ",e," 对应的PolygonStyle.borderColor属性无效",n):console.error("MultiCircle.styles: 样式id ",e," 对应的PolygonStyle.color属性无效",n)):console.error("MultiCircle.styles: 样式id ",e,"希望传入CircleStyle实例，实际传入：",n)})}},{key:"_transferFromGeometry",value:function(t){return t.map(function(t){var e=t.center,n=t.radius,i={id:t.id||(0,A.uniqueId)(),styleId:t.styleId,paths:[],rank:t.rank};return e&&n?(i.paths=(0,E.getCirclePath)(e,n),i):i})}},{key:"_getAllPoints",value:function(){return this.getGeometries().map(function(t){return t.center})}},{key:"_getAllSegments",value:function(){return[]}}]),e}(b.default);t.exports=C},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(16),r=i(o),a=n(2),l=i(a),s=n(0),u=i(s),c=n(1),f=i(c),d=n(4),h=i(d),v=n(21),p=i(v),m=n(3),_=i(m),g=n(42),y=i(g),x=n(232),b=i(x),S=n(313),w=i(S),E=n(139),T=n(43),I=n(51),A=i(I),k=A.default.isNumber,P=A.default.isUndefined,M=function(t){function e(t){return(0,u.default)(this,e),(0,h.default)(this,(e.__proto__||(0,l.default)(e)).call(this,t))}return(0,_.default)(e,t),(0,f.default)(e,[{key:"_initialize",value:function(t){var e=t.enableCollision,n=void 0!==e&&e;this.enableCollision=n}},{key:"_createLayer",value:function(){(0,p.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"_createLayer",this).call(this),this.layer._enableCollision=!!this.enableCollision}},{key:"_setGeometryType",value:function(){this._geometryType=E.GEOMETRY_TYPES.LABEL,this._layerType=T.RENDER_LAYER_TYPE.label,this._className="MultiLabel"}},{key:"_checkGeometries",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(t,e){t?t.styleId?t.position&&t.position instanceof y.default?t.content?P(t.rank)||k(t.rank)||console.error("MultiLabel.geometries: 希望传入LabelGeometry数组，实际第"+e+"元素的rank属性无效!"):console.error("MultiLabel.geometries: 希望传入LabelGeometry数组，实际第"+e+"元素的content属性无效!"):console.error("MultiLabel.geometries: 希望传入LabelGeometry数组，实际第"+e+"元素的position属性无效！"):t.styleId="default":console.error("MultiLabel.geometries: 希望传入LabelGeometry数组，实际第"+e+"元素不存在！")})}},{key:"_getDefaultStyle",value:function(){return new w.default}},{key:"_checkStyles",value:function(t){(0,p.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"_checkStyles",this).call(this,t),(0,r.default)(t).forEach(function(e){var n=t[e];n&&n instanceof w.default||console.error("MultiLabel.styles: 样式id ",e,"希望传入LabelStyle实例，实际传入：",n)})}}]),e}(b.default);t.exports=M},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(16),r=i(o),a=n(14),l=i(a),s=n(2),u=i(s),c=n(0),f=i(c),d=n(1),h=i(d),v=n(4),p=i(v),m=n(21),_=i(m),g=n(3),y=i(g),x=n(158),b=i(x),S=n(377),w=n(319),E=i(w),T=n(7),I=n(61),A=i(I),k=n(42),P=i(k),M=n(232),L=i(M),C=n(139),N=n(43),O=n(405),R=function(t){return"number"==typeof t&&!(0,b.default)(t)},V=function(t){function e(t){(0,f.default)(this,e);var n=(0,p.default)(this,(e.__proto__||(0,u.default)(e)).call(this,t));return(0,l.default)(n,S.easableMixin),n._movingState=null,n._pausedState=null,n}return(0,y.default)(e,t),(0,h.default)(e,[{key:"_setGeometryType",value:function(){this._geometryType=C.GEOMETRY_TYPES.POINT,this._layerType=N.RENDER_LAYER_TYPE.marker,this._className="MultiMarker"}},{key:"_checkGeometries",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(t,e){t?t.styleId||(t.styleId="default"):console.error("MultiMarker.geometries: 希望传入PointGeometry数组，实际第"+e+"元素不存在！"),t.position&&t.position instanceof P.default||console.error("MultiMarker.geometries: 希望传入PointGeometry数组，实际第"+e+"元素的position属性无效！")})}},{key:"_getDefaultStyle",value:function(){return new O}},{key:"_checkStyles",value:function(t){(0,_.default)(e.prototype.__proto__||(0,u.default)(e.prototype),"_checkStyles",this).call(this,t),(0,r.default)(t).forEach(function(e){var n=t[e];n&&n instanceof O?n.width&&n.width>0&&n.width%1==0?n.height&&n.height>0&&n.height%1==0?n.src||console.error("MultiMarker.styles: 样式id ",e," 对应的MarkerStyle.src属性无效",n):console.error("MultiMarker.styles: 样式id ",e," 对应的MarkerStyle.height属性无效",n):console.error("MultiMarker.styles: 样式id ",e," 对应的MarkerStyle.width属性无效",n):console.error("MultiMarker.styles: 样式id ",e,"希望传入MarkerStyle实例，实际传入：",n)})}},{key:"moveAlong",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.autoRotation,o=void 0!==i&&i;if(!this.getMap())return this;this.stopMove();var a={},s=this.map.transform.getDistanceScales(),u=s.pixelsPerMeter,c=s.pixelsPerDegree,f=[c[0]/u[0],c[1]/u[1]];try{(0,r.default)(t).forEach(function(n){if(!(n in e._idSet))return void console.warn("MultiMarker中并不存在id为: "+n+"的点！");var i=t[n],o=i.path,r=i.duration,l=i.speed;if(e._checkMoveAlongParams(i,n)){var s=[],u=0,c=0;if(o.forEach(function(t,e,n){if(e!==n.length-1){var i=new A.default((n[e+1].lng-t.lng)*f[0],(n[e+1].lat-t.lat)*f[1]),o=i.mag();u+=o,s.push({angle:i.angle(),segDistance:o,start:t,end:n[e+1],radio:null,totalRadio:null})}}),0===u)return void console.error("moveAlong方法中id为"+n+"对应的path计算得到的总长度为0");var d=l/3.6,h=r||u/d*1e3;s.forEach(function(t){t.radio=t.segDistance/u,c+=t.radio,t.totalRadio=c,t.pendingTime=t.radio*h,t.totalPendingTime=t.totalRadio*h,t.totalDistance=u}),a[n]={segmentInfos:s,pendingTime:h,curSeg:0,geometry:e._rawGeometries[e._idSet[n]],param:i}}})}catch(t){console.error("moveAlong数据解析出错，请检查传入参数是否合法",t)}this._moveParamSet=t;var d=[],h=0;return(0,r.default)(a).forEach(function(e){var n=a[e].geometry;n.position.equals(t[e].path[0])||d.push((0,l.default)({},n,{position:t[e].path[0]})),h=h>a[e].pendingTime?h:a[e].pendingTime}),d.length>0&&this.updateGeometries(d),this._startMoveAnimation(a,{duration:h,startTime:0,autoRotation:o}),this}},{key:"_checkMoveAlongParams",value:function(t,e){var n=t.path,i=t.duration,o=t.speed,r=void 0!==i,a=void 0!==o;return Array.isArray(n)&&n.length>0?r||a?r&&(!R(i)||i<=0)?(console.error("moveAlong方法中id为"+e+"对应的duration: "+i+"不合法!"),!1):!(a&&(!R(o)||o<=0))||(console.error("moveAlong方法中id为"+e+"对应的speed: "+o+"不合法!"),!1):(console.error("moveAlong方法中id为"+e+"对应的duration和speed均未定义!"),!1):(console.error("moveAlong方法中id为"+e+"对应的path: "+n+"不合法!"),!1)}},{key:"_startMoveAnimation",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.duration,o=void 0===i?0:i,a=n.startTime,s=void 0===a?0:a,u=n.autoRotation,c=void 0!==u&&u,f=this._moveParamSet;this._ease(function(n){var i=[],a={},u=s+n*o;(0,r.default)(t).forEach(function(n){var o=t[n],r=o.segmentInfos[o.curSeg];if(r&&(u>r.totalPendingTime&&(o.curSeg+=1,r=o.segmentInfos[o.curSeg]),r)){var s=new P.default(0,0),d=(u+r.pendingTime-r.totalPendingTime)/r.pendingTime;s.lat=(0,E.default)(r.start.lat,r.end.lat,d),s.lng=(0,E.default)(r.start.lng,r.end.lng,d),o.geometry.position=s;var h=o.geometry.styleId&&0===e.styles[o.geometry.styleId].faceTo;c&&h&&(o.geometry.properties=(0,l.default)({},o.geometry.properties,{$angle:(0,T.radian_to_degree)(r.angle)-90}));var v=f[n].path.slice(0,o.curSeg+1);v.push(s),a[n]={passedLatLngs:v,angle:o.geometry.properties&&o.geometry.properties.$angle},i.push(o.geometry)}}),e._movingState={moveAlongProcessed:t,time:u,left:(1-n)*o,autoRotation:c},e.updateGeometries(i);var d=e.getMap();d&&d._changeFPS(),e.emit("moving",a)},function(){e._movingState=null,e._pausedState=null,e.emit("move_ended",f)},function(){e._movingState&&(e.emit("move_stopped",f),e._pausedState=null,e._movingState=null)},{easing:T.linearEase,animate:!0,duration:o})}},{key:"stopMove",value:function(){return this._abortFn&&(this._abortFn(),this._abortFn=null),this._finishFn=null,this}},{key:"pauseMove",value:function(){return this._movingState&&(this._pausedState=this._movingState,this._movingState=null,this.stopMove(),this.emit("move_paused")),this}},{key:"resumeMove",value:function(){if(this._pausedState){var t=this._pausedState,e=t.moveAlongProcessed,n=t.autoRotation,i=t.time,o=t.left;this._startMoveAnimation(e,{duration:o,autoRotation:n,startTime:i}),this._pausedState=null,this._movingState=null,this.emit("move_resumed")}return this}},{key:"_getAllPoints",value:function(){return this.getGeometries().map(function(t){return t.position})}}]),e}(L.default);t.exports=V},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(312),p=i(v),m=n(458),_=i(m),g=n(225),y=function(t){function e(){return(0,l.default)(this,e),(0,f.default)(this,(e.__proto__||(0,r.default)(e)).apply(this,arguments))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"onInit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.count=t.count,this.instance=t.instance,this.position=this.instance.center||this.instance.position,this.zoomOnClick=t.zoomOnClick,this._handlers=[],this.visible=!0}},{key:"createDOM",value:function(){var t=this,e=document.createElement("div");return this.instance&&this._updateContent(e),this.finger=new g.Finger(e,{preventDefaultMove:!0,preventDefaultEnd:!0}),this.finger.on("tap",function(){t.instance.geometries&&t.visible&&t.zoomOnClick&&t.map.fitBounds(t.instance.bounds),t.emit("overlay-click",t.instance)}),e}},{key:"updateContent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.count=t.count,this.instance=t.instance,this.position=this.instance.center||this.instance.position,this._updateContent(this.dom),this.updateDOM(),this.map!==t.map&&this.setMap(t.map),this}},{key:"_updateContent",value:function(t){if(1===this.count){t.textContent="",t.style.cssText=["position:absolute;","width: 32px;","height: 32px;"].join(" ");var e=document.createElement("img");e.height=32,e.src=_.default,e.style.cssText=["position: absolute;","bottom: 16px;"].join(" "),t.appendChild(e)}else t.style.cssText="\n\t\t\tposition: absolute;\n\t\t\twidth: 40px;\n\t\t\theight: 40px;\n\t\t\tborder-radius: 40px;\n\t\t\tbackground-color: green;\n\t\t\ttransform: translate3d(718.348px, 395.68px, 0px);\n\t\t\ttext-align: center;\n\t\t\tline-height: 40px;\n\t\t\tbox-shadow: 0 1px 1px 0 rgba(0,0,0,0.2);\n\t\t\tborder: 1px solid #3875FF;\n\t\t\tbackground-color: rgba(227,235,255,0.9);\n\t\t\tfont-size: 14px;\n\t\t\tcolor: #1D63FF;",t.textContent=this.count}},{key:"updateDOM",value:function(){if(this.map&&this.visible){var t=this.map.projectToContainer(this.position),e=t.getX()-20+"px",n=t.getY()-20+"px";this.dom.style.transform="translate3d("+e+", "+n+", 0px)"}}},{key:"setVisible",value:function(t){return this.visible=!!t,this.dom.style.display=this.visible?"":"none",this}},{key:"onDestroy",value:function(){this._handlers.forEach(function(t){return t.remove()}),this.finger&&this.finger.destroy(),this.removeAllListeners(),this.count=null,this.instance=null,this.position=null,this.dom=null,this.visible=null}}]),e}(p.default);e.default=y},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(21),h=i(d),v=n(3),p=i(v),m=n(20),_=i(m),g=n(379),y=i(g),x=n(404),b=i(x),S=n(553),w=i(S),E=n(17),T=i(E),I=n(7),A=i(I),k=n(42),P=i(k),M=n(604),L=i(M),C=n(38),N=n(77),O=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,l.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this));return n.id=t.id||A.default.uniqueId(),n._defaultMarkers=[],n.clusters=[],n._overlayList=[],n._eventHandlers=[],n._ready=!1,n._prevZoom=null,n.zIndex=t.zIndex||null,n.enableDefaultStyle=!1!==t.enableDefaultStyle,n.minimumClusterSize=t.minimumClusterSize||2,n.zoomOnClick=!!n.enableDefaultStyle&&!1!==t.zoomOnClick,n.gridSize=t.gridSize||60,n.averageCenter=!1!==t.averageCenter,n.maxZoom=A.default.clamp(t.maxZoom||_.default.maxZoom,_.default.minZoom,_.default.maxZoom),n._checkGeometries(t.geometries),n._rawGeometries=n._assignIdToGeometry(t.geometries),n._idSet=n._updateGeometryIdSet(n._rawGeometries),n.geometries=n._rawGeometries,t.map&&n.setMap(t.map),(0,N.statCn)("Map"),n}return(0,p.default)(e,t),(0,u.default)(e,[{key:"setMap",value:function(t){return t===this.map?this:null===t||t instanceof window.TMap.Map?(t?this.map?(this.setMap(null),this.setMap(t)):this.id&&t.getLayer(this.id)?console.error("Map中已存在id为"+this.id+"的图层，无法重复添加"):(this.map=t,this._bindEventHandler(),this._createLayer(),this._ready=!0,this._redraw()):(this._removeEventHander(),this._removeLayer(),this._overlayList.forEach(function(t){return t.setMap(null)}),this.map=null,this._ready=!1),this):(console.error("所传入参数并非TMap.Map的实例！"),this)}},{key:"setGeometries",value:function(t){return Array.isArray(t)?t===this._rawGeometries?this:((0,h.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"setGeometries",this).call(this,t,this.styles),this):(new C.BaseTypeError("geometries","Array",t).error(),this)}},{key:"updateGeometries",value:function(t,n){return t?((0,h.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"updateGeometries",this).call(this,t,n),this):this}},{key:"_bindEventHandler",value:function(){var t=this;this._eventHandlers.push(T.default.on(this.map,"zoom",function(){var e=A.default.round(t.map.getZoom(),1);t._prevZoom!==e&&(t._prevZoom=e,t._resetViewport())})),this._eventHandlers.push(T.default.on(this.map,"idle",function(){t._redraw()})),this._eventHandlers.push(T.default.on(this,"geometry_changed",function(){t.map&&(t.map&&t.map.getSource(t.id).setData(t.geometries),t._resetViewport(),t._redraw())}))}},{key:"_removeEventHander",value:function(){this._eventHandlers.forEach(function(t){return t.remove()})}},{key:"getMap",value:function(){return this.map}},{key:"_createLayer",value:function(){this.layer=new w.default({map:this.map,id:this.id,type:this._layerType,zIndex:this.zIndex,maxZoom:this.maxZoom,gridSize:this.gridSize,minimumClusterSize:this.minimumClusterSize,averageCenter:this.averageCenter,sourceData:this.geometries})}},{key:"_removeLayer",value:function(){this.layer.setMap(null)}},{key:"_resetViewport",value:function(){this.clusters=[],this._resetCluster=!0}},{key:"_redraw",value:function(){var t=this;if(this._ready&&this.map.getSource(this.id)){var e=this.map.transform.getDistanceScales(),n=this.map.getBounds();this.map.getSource(this.id).getCluster({pixelsPerDegree:e.pixelsPerDegree,resetCluster:this._resetCluster,mapBounds:{sw:n.getSouthWest(),ne:n.getNorthEast()},zoom:this.map.getZoom()},function(e){t.clusters=e.map(function(t){return y.default.normalizeClusterInfo(t)}),t.emit("cluster_changed"),t._repaint()}),this._resetCluster=!1}}},{key:"_repaint",value:function(){var t=this;if(this.enableDefaultStyle&&this.layer.visible){this._overlayList.forEach(function(t){return t.setVisible(!1)});var e=0,n=this._overlayList.length;this.clusters.forEach(function(i){var o={count:i.geometries.length,instance:i,map:t.map,zoomOnClick:t.zoomOnClick};t._constructOverlay(e,n,o),e+=1})}}},{key:"_constructOverlay",value:function(t,e,n){var i=this;if(t<e)this._overlayList[t].setVisible(!0),this._overlayList[t].updateContent(n);else{var o=new L.default(n);o.on("overlay-click",function(t){var e={};t.geometries?e.cluster=t:e.geometry=t,i.emit("click",e)}),this._overlayList.push(o)}}},{key:"_checkGeometries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.filter(function(t,n){return t?t.position&&t.position instanceof P.default?(t.styleId&&e[t.styleId]||(t.styleId="default"),!0):(console.error("MarkerCluster.geometries: 希望传入PointGeometry数组，实际第"+n+"元素的position属性无效！"),!1):(console.error("MarkerCluster.geometries: 希望传入PointGeometry数组，实际第"+n+"元素不存在！"),!1)})}},{key:"getClusters",value:function(){return this.clusters}},{key:"zoomInCluster",value:function(t){t.bounds?this.map.fitBounds(t.bounds):console.warn("聚合簇 "+t+" 缺少bounds信息")}},{key:"setVisible",value:function(t){this._overlayList.forEach(function(t){return t.setVisible(!1)}),this.layer.setVisible(t),this._repaint()}},{key:"getVisible",value:function(){return this.layer.visible}},{key:"destroy",value:function(){this.setMap(null),this._resetViewport(),this._overlayList.forEach(function(t){return t.destroy()}),this._defaultMarkers=null,this.clusters=null,this._overlayList=null,this._eventHandlers=null,this._ready=null,this._prevZoom=null,this.zIndex=null,this.enableDefaultStyle=null,this.minimumClusterSize=null,this.zoomOnClick=null,this.gridSize=null,this.averageCenter=null,this.maxZoom=null,this._rawGeometries=null,this._idSet=null,this.geometries=null}}]),e}(b.default);e.default=O},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(17),p=i(v),m=n(644),_=i(m),g=n(65),y=function(t){function e(t){(0,l.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this));return n.map=t,n.el=n.map.getContainer(),n.eventHandlers=[],n.pickQuery=new _.default(n.map),[{type:"mousedown",immediate:!0,delay:!1},{type:"mouseup",immediate:!0,delay:!1},{type:"touchstart",immediate:!0,delay:!1},{type:"touchend",immediate:!0,delay:!1},{type:"touchcancel",immediate:!1,delay:!1},{type:"click",immediate:!1,delay:!1},{type:"dblclick",immediate:!1,delay:!0}].forEach(function(t){n.eventHandlers.push(p.default.on(n.map,t.type,function(e){e.delay?setTimeout(function(){n.onHandleEvent(e,t)},50):n.onHandleEvent(e,t)}))}),n.eventHandlers.push(p.default.on(n.map,{mousemove:p.default.throttle(function(t){n.requestPick("mousemove",{event:t})},50),touchmove:p.default.throttle(function(t){n.requestPick("touchmove",{event:t})},50)})),n._pickRequestObject={},n._isPicking=!1,n.setMaxListeners(300),n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"onHandleEvent",value:function(t,e){this.requestPick(e.type,{event:t}),e.immediate&&this.runPick()}},{key:"requestPick",value:function(t,e){if(!this.map.moving||"dblclick"===t||"touchmove"===t||"touchend"===t){delete this._pickRequestObject.type,delete this._pickRequestObject.pos,delete this._pickRequestObject.radius,this._pickRequestObject.type=t;var n=e.event;if(n&&(n.point||n.points)){var i=n.points&&n.points[0]||n.point;this._pickRequestObject.pos=i,this._pickRequestObject.radius=1,this._pickRequestObject.mapEvent=n}}}},{key:"runPick",value:function(){var t=this;(!this._isPicking&&this._pickRequestObject.type&&!this.map.moving||"touchmove"===this._pickRequestObject.type)&&(this._isPicking=!0,this.pickQuery.pickObject({x:this._pickRequestObject.pos.x,y:this._pickRequestObject.pos.y,radius:this._pickRequestObject.radius,callback:function(e){e&&e.layerId&&e.objectIndex>-1&&t.emit("action",{eventType:t._pickRequestObject.type,layerId:e.layerId,objectIndex:e.objectIndex,mapEvent:t._pickRequestObject.mapEvent}),t.emit(t._pickRequestObject.type,t._pickRequestObject.mapEvent),t._clearRequest(),t._isPicking=!1}}))}},{key:"_clearRequest",value:function(){this._pickRequestObject={}}},{key:"destroy",value:function(){this._clearRequest(),this.pickQuery.destroy(),this.map=null,this.removeAllListeners()}}]),e}(g);e.default=y},function(t,e,n){"use strict";function i(){r.removeEventListener("DOMContentLoaded",i,!1),o.fireReady()}var o=[],r=document;o.isReady=!1,o._used=!1,o.ready=function(t){o.initReady(),o.isReady?t():o.push(t)},o.initReady=function(){if(!o._used){if(o._used=!0,"complete"===r.readyState||"interactive"===r.readyState)return o.fireReady();r.addEventListener("DOMContentLoaded",i,!1)}},o.fireReady=function(){if(!o.isReady){if(!r.body)return setTimeout(o.fireReady,16);if(o.isReady=!0,o.length)for(var t,e=0;t=o[e];e++)t()}},e.domReady=o.ready},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(0),r=i(o),a=n(1),l=i(a),s=n(314),u=function(){function t(e){(0,r.default)(this,t),this._map=e,this._onDblClick=this._onDblClick.bind(this)}return(0,l.default)(t,[{key:"isEnabled",value:function(){return!!this._enabled}},{key:"enable",value:function(){this.isEnabled()||(this._map._on("dblclick",this._onDblClick),this._enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this._map._off("dblclick",this._onDblClick),this._enabled=!1)}},{key:"_onDblClick",value:function(t){var e=t.point;(0,s.isReponsing)(this._map,e)&&this._map.zoomTo(Math.min(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),this._map.transform.maxZoom),{around:t.latLng},t)}}]),t}();t.exports=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(0),r=i(o),a=n(1),l=i(a),s=n(314),u=n(17),c=n(93),f=n(7),d=f.bezier(0,0,.3,1),h=function(){function t(e){(0,r.default)(this,t),this._map=e,this._el=e.getContainer(),this._moveStartEvent=null,f.bindAll(["_onDown","_onMove","_onUp","_onTouchEnd","_onMouseUp"],this)}return(0,l.default)(t,[{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active}},{key:"enable",value:function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._el.addEventListener("touchstart",this._onDown),this._enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._el.removeEventListener("touchstart",this._onDown),this._enabled=!1)}},{key:"_onDown",value:function(t){if(!this._ignoreEvent(t)&&!this.isActive()){this._moveStartEvent=t,t.touches&&((0,u.isMiniProgram)()&&"pc"!==(0,u.getMiniProgramEnv)()||!(0,u.isMiniProgram)())?(window.document.addEventListener("touchmove",this._onMove),window.document.addEventListener("touchend",this._onTouchEnd)):(window.document.addEventListener("mousemove",this._onMove),window.document.addEventListener("mouseup",this._onMouseUp)),window.addEventListener("blur",this._onMouseUp),this._active=!1;var e=c.mousePos(this._el,t);(0,s.isReponsing)(this._map,e)&&(this._pos=e),this._inertia=[[Date.now(),this._pos]]}}},{key:"_onMove",value:function(t){if(!this._ignoreEvent(t)){if(!this.isActive()){if(!this._isMoved(t))return;this._active=!0,this._map.moving=!0,this._fireEvent("dragstart",t),this._fireEvent("panstart",t),this._fireEvent("movestart",t)}var e=c.mousePos(this._el,t),n=this._map;(0,s.isReponsing)(n,e)&&(n.stopEase(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),e]),n.transform.setLocationAtPoint(n.unprojectFromContainer(this._pos),e),this._pos=e),this._fireEvent("drag",t),this._fireEvent("pan",t),this._fireEvent("move",t),t.touches||t.preventDefault()}}},{key:"_onUp",value:function(t){var e=this;if(this.isActive()){this._active=!1,this._fireEvent("dragend",t),this._fireEvent("panend",t),this._drainInertiaBuffer();var n=function(){e._map.moving=!1,e._fireEvent("moveend",t)},i=this._inertia;if(i.length<2)return void n();var o=i[i.length-1],r=i[0],a=o[1].sub(r[1]),l=(o[0]-r[0])/1e3;if(0===l||o[1].equals(r[1]))return void n();var u=c.mousePos(this._el,t);if((0,s.isReponsing)(this._map,u)){var f=a.mult(.3/l),h=f.mag();h>1400&&(h=1400,f._unit()._mult(h));var v=h/750,p=f.mult(-v/2);this._map.panBy(p,{duration:1e3*v,easing:d,noMoveStart:!0},{originalEvent:t})}}}},{key:"_onMouseUp",value:function(t){this._ignoreEvent(t)||(this._onUp(t),window.document.removeEventListener("mousemove",this._onMove),window.document.removeEventListener("mouseup",this._onMouseUp),window.removeEventListener("blur",this._onMouseUp))}},{key:"_onTouchEnd",value:function(t){this._ignoreEvent(t)||(this._onUp(t),window.document.removeEventListener("touchmove",this._onMove),window.document.removeEventListener("touchend",this._onTouchEnd))}},{key:"_fireEvent",value:function(t,e){return this._map._fire(t,{originalEvent:e})}},{key:"_ignoreEvent",value:function(t){var e=this._map;if(e.boxZoom&&e.boxZoom.isActive())return!0;if(e.dragRotate&&e.dragRotate.isActive())return!0;if(t.touches)return t.touches.length>1;if(t.ctrlKey)return!0;return"mousemove"===t.type?!1&t.buttons:t.button&&0!==t.button}},{key:"_drainInertiaBuffer",value:function(){for(var t=this._inertia,e=Date.now();t.length>0&&e-t[0][0]>160;)t.shift()}},{key:"_isMoved",value:function(t){var e=this._moveStartEvent;if(!e)return!0;var n=void 0,i=void 0;return t.touches?(n=e.touches[0],i=t.touches[0]):(n=e,i=t),Math.abs(i.clientX-n.clientX)>2||Math.abs(i.clientY-n.clientY)>2}}]),t}();t.exports=h},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(0),r=i(o),a=n(1),l=i(a),s=n(17),u=n(93),c=n(7),f=c.bezier(0,0,.25,1),d=function(){function t(e){(0,r.default)(this,t),this._map=e,this._el=e.getContainer(),this._pitchWithRotate=!0,this._moveStartEvent=null,c.bindAll(["_onDown","_onMove","_onUp"],this)}return(0,l.default)(t,[{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active}},{key:"enable",value:function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._enabled=!1)}},{key:"_onDown",value:function(t){this._ignoreEvent(t)||this.isActive()||(this._moveStartEvent=t,window.document.addEventListener("mousemove",this._onMove),window.document.addEventListener("mouseup",this._onUp),window.addEventListener("blur",this._onUp),this._active=!1,this._inertia=[[Date.now(),this._map.getHeading()]],this._pos=u.mousePos(this._el,t),this._startPos=this._pos,this._center=this._map.transform.centerPoint,t.preventDefault())}},{key:"_onMove",value:function(t){if(!this._ignoreEvent(t)){if(!this.isActive()){if(!this._isMoved(t))return;this._active=!0,this._map.moving=!0,this._fireEvent("dragstart",t),this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t)}var e=this._map;e.stopEase();var n=this._pos,i=u.mousePos(this._el,t),o=.8*(n.x-i.x),r=-.5*(n.y-i.y),a=e.getHeading()-o,l=e.getPitch()-r,s=this._inertia,c=s[s.length-1];this._drainInertiaBuffer(),s.push([Date.now(),e._normalizeHeading(a,c[1])]),e.transform.heading=a,this._pitchWithRotate&&(this._fireEvent("pitch",t),e.transform.pitch=l),this._fireEvent("drag",t),this._fireEvent("rotate",t),this._fireEvent("move",t),this._pos=i}}},{key:"_onUp",value:function(t){var e=this;if(!this._ignoreEvent(t)&&(window.document.removeEventListener("mousemove",this._onMove),window.document.removeEventListener("mouseup",this._onUp),window.removeEventListener("blur",this._onUp),this.isActive())){this._active=!1,this._fireEvent("dragend",t),this._fireEvent("rotateend",t),this._drainInertiaBuffer();var n=this._map,i=n.getHeading(),o=this._inertia,r=function(){Math.abs(i)<e._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:t}):(e._map.moving=!1,e._fireEvent("moveend",t)),e._pitchWithRotate&&e._fireEvent("pitchend",t)};if(o.length<2)return void r();var a=o[0],l=o[o.length-1],s=o[o.length-2],u=n._normalizeHeading(i,s[1]),c=l[1]-a[1],d=c<0?-1:1,h=(l[0]-a[0])/1e3;if(0===c||0===h)return void r();var v=Math.abs(c*(.25/h));v>180&&(v=180);var p=v/180;u+=d*v*(p/2),Math.abs(n._normalizeHeading(u,0))<this._bearingSnap&&(u=n._normalizeHeading(0,u)),n.headTo(u,{duration:1e3*p,easing:f,noMoveStart:!0},{originalEvent:t})}}},{key:"_fireEvent",value:function(t,e){return this._map._fire(t,{originalEvent:e})}},{key:"_ignoreEvent",value:function(t){var e=this._map;if(e.boxZoom&&e.boxZoom.isActive())return!0;if(e.dragPan&&e.dragPan.isActive())return!0;if(t.touches&&((0,s.isMiniProgram)()&&"pc"!==(0,s.getMiniProgramEnv)()||!(0,s.isMiniProgram)()))return t.touches.length>1;var n=t.ctrlKey?1:2,i=t.ctrlKey?0:2,o=t.button;return"undefined"!=typeof InstallTrigger&&2===t.button&&t.ctrlKey&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0&&(o=0),"mousemove"===t.type?t.buttons&0===n:!this.isActive()&&o!==i}},{key:"_drainInertiaBuffer",value:function(){for(var t=this._inertia,e=Date.now();t.length>0&&e-t[0][0]>160;)t.shift()}},{key:"_isMoved",value:function(t){var e=this._moveStartEvent;if(!e)return!0;var n=e,i=t;return Math.abs(i.clientX-n.clientX)>2||Math.abs(i.clientY-n.clientY)>2}}]),t}();t.exports=d},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(65),p=i(v),m=n(7),_=i(m),g=function(t){function e(t){(0,l.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this));return n.transform=t,n.bindIdleEvent(),n.start(),n.isJudging=!1,n.timer=null,n.duration=100,n.input=void 0,n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"start",value:function(){this.isJudging||(this.input=this.transform.getInput(),this.isJudging=!0,this.judge())}},{key:"stop",value:function(){this.isJudging=!1,this.timer&&window.clearTimeout(this.timer)}},{key:"judge",value:function(){this.timer=window.setTimeout(function(){var t=this.transform.getInput();this.inputEqual(t,this.input)?(this.stop(),this._fire("idle")):this.judge(),this.input=t}.bind(this),this.duration)}},{key:"bindIdleEvent",value:function(){this.transform._on("input_change",this.start.bind(this))}},{key:"inputEqual",value:function(t,e){return!(!t||!e)&&(_.default.forIn(t,function(n){return("center"!==n||t[n].lat===e[n].lat&&t[n].lng===e[n].lng)&&(t[n]===e[n]&&void 0)}),!0)}}]),e}(p.default);e.default=g},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(0),r=i(o),a=n(1),l=i(a),s=n(7),u=function(){function t(e){(0,r.default)(this,t),this._map=e,this._el=e.getContainer(),s.bindAll(["_onTouchStart","_onTouchMove","_onTouchEnd"],this),this.timer=null,this.duration=750,this.buffer=3,this.position=null,this.enabled=!1}return(0,l.default)(t,[{key:"enable",value:function(){this.enabled||(this._el.addEventListener("touchstart",this._onTouchStart),this._el.addEventListener("touchmove",this._onTouchMove),this._el.addEventListener("touchend",this._onTouchEnd),this.enabled=!0)}},{key:"disable",value:function(){this.enabled&&(this._el.removeEventListener("touchstart",this._onTouchStart),this._el.removeEventListener("touchmove",this._onTouchMove),this._el.removeEventListener("touchend",this._onTouchEnd),this.enabled=!1)}},{key:"startLongPress",value:function(){this.timer=window.setTimeout(function(){this._map._fire("longpress"),this.endLongPress()}.bind(this),this.duration)}},{key:"endLongPress",value:function(){window.clearTimeout(this.timer),this.position=null}},{key:"_onTouchStart",value:function(t){this.endLongPress(),1===t.touches.length&&(this.startLongPress(),this.position={x:t.touches[0].pageX,y:t.touches[0].pageY})}},{key:"_onTouchMove",value:function(t){if(this.position){var e=t.touches[0].pageX-this.position.x,n=t.touches[0].pageY-this.position.y;Math.sqrt(e*e+n*n)>this.buffer&&this.endLongPress()}}},{key:"_onTouchEnd",value:function(){this.endLongPress()}}]),t}();t.exports=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(0),r=i(o),a=n(1),l=i(a),s=n(314),u=n(20),c=i(u),f=n(93),d=n(7),h=n(17),v=window.navigator.userAgent.toLowerCase(),p=-1!==v.indexOf("firefox"),m=-1!==v.indexOf("safari")&&-1===v.indexOf("chrom"),_=function(){function t(e){(0,r.default)(this,t),this._map=e,this._el=e.getContainer(),d.bindAll(["_onWheel","_onTimeout"],this)}return(0,l.default)(t,[{key:"isEnabled",value:function(){return!!this._enabled}},{key:"enable",value:function(t){this.isEnabled()||(this._el.addEventListener("wheel",this._onWheel,!1),this._el.addEventListener("mousewheel",this._onWheel,!1),this._enabled=!0,this._aroundCenter=t&&"center"===t.around)}},{key:"disable",value:function(){this.isEnabled()&&(this._el.removeEventListener("wheel",this._onWheel),this._el.removeEventListener("mousewheel",this._onWheel),this._enabled=!1)}},{key:"_onWheel",value:function(t){var e=void 0;"wheel"===t.type?(e=t.deltaY,p&&t.deltaMode===window.WheelEvent.DOM_DELTA_PIXEL&&(e/=h.devicePixelRatio),t.deltaMode===window.WheelEvent.DOM_DELTA_LINE&&(e*=40)):"mousewheel"===t.type&&(e=-t.wheelDeltaY,m&&(e/=3));var n=h.now(),i=n-(this._time||0);this._pos=f.mousePos(this._el,t),this._time=n,0!==e&&e%4.000244140625==0?this._type="wheel":0!==e&&Math.abs(e)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=e,this._timeout=setTimeout(this._onTimeout.bind(this,t),40)):this._type||(this._type=Math.abs(i*e)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,e+=this._lastValue)),t.shiftKey&&e&&(e/=4),this._type&&this._zoom(-e,t),t.preventDefault()}},{key:"_onTimeout",value:function(t){this._type="wheel",this._zoom(-this._lastValue,t)}},{key:"_zoom",value:function(t,e){if(0!==t){var n=this._map,i=f.mousePos(this._el,e);if((0,s.isReponsing)(this._map,i)){var o=2/(1+Math.exp(-Math.abs(t/100)));t<0&&0!==o&&(o=1/o);var r=n.ease?n.ease.to:n.transform.scrollScale,a=d.clamp(n.transform.scaleZoom(r*o),c.default.minZoom,c.default.maxZoom);n.zoomTo(a,{duration:"wheel"===this._type?200:0,around:this._aroundCenter?n.getCenter():n.unprojectFromContainer(this._pos),delayEndEvents:100,smoothEasing:!0},{originalEvent:e})}}}}]),t}();t.exports=_},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(0),r=i(o),a=n(1),l=i(a),s=n(93),u=n(7),c=function(){function t(e){(0,r.default)(this,t),this._map=e,this._el=e.getContainer(),u.bindAll(["_onStart","_onMove","_onEnd"],this)}return(0,l.default)(t,[{key:"isEnabled",value:function(){return!!this._enabled}},{key:"enable",value:function(t){this.isEnabled()||(this._el.addEventListener("touchstart",this._onStart,!1),this._enabled=!0,this._aroundCenter=t&&"center"===t.around)}},{key:"disable",value:function(){this.isEnabled()&&(this._el.removeEventListener("touchstart",this._onStart),this._enabled=!1)}},{key:"isActive",value:function(){return!!this._active}},{key:"_onStart",value:function(t){if(!this._ignoreEvent(t)){var e=s.mousePos(this._el,t.touches[0]),n=s.mousePos(this._el,t.touches[1]);this._posP0=e,this._posP1=n,this._startPitch=this._map.transform.pitch,this._gestureIntent=void 0,this._inertia=[],this._active=!1,window.document.addEventListener("touchmove",this._onMove,!1),window.document.addEventListener("touchend",this._onEnd,!1)}}},{key:"_onMove",value:function(t){if(!this._ignoreEvent(t)){this.isActive()||(this._active=!0);var e=s.mousePos(this._el,t.touches[0]),n=s.mousePos(this._el,t.touches[1]),i=this._posP0.sub(e),o=this._posP1.sub(n),r=.5*(i.y+o.y),a=this._map;if(this._posP0=e,this._posP1=n,this._gestureIntent)a.transform.pitch=a.getPitch()-r,this._drainInertiaBuffer(),this._inertia.push([Date.now(),r]),this._fireEvent("pitch",t),this._fireEvent("move",t);else{Math.abs(Math.abs(i.x)-Math.abs(o.x))<2&&(this._gestureIntent="pitch",this._startPitch=a.transform.pitch)}t.preventDefault()}}},{key:"_onEnd",value:function(){this._active=!1,window.document.removeEventListener("touchmove",this._onMove),window.document.removeEventListener("touchend",this._onEnd),this._drainInertiaBuffer()}},{key:"_fireEvent",value:function(t,e){return this._map._fire(t,{originalEvent:e})}},{key:"_ignoreEvent",value:function(t){var e=this._map;return!(!e.dragPan||!e.dragPan.isActive())||(!(!e.touchZoomRotate||!e.touchZoomRotate.isActive())||(t.touches?t.touches.length<2:void 0))}},{key:"_drainInertiaBuffer",value:function(){for(var t=this._inertia,e=Date.now();t.length>2&&e-t[0][0]>160;)t.shift()}}]),t}();t.exports=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(0),r=i(o),a=n(1),l=i(a),s=n(93),u=n(7),c=u.bezier(0,0,.15,1),f=function(){function t(e){(0,r.default)(this,t),this._map=e,this._el=e.getContainer(),u.bindAll(["_onStart","_onMove","_onEnd"],this)}return(0,l.default)(t,[{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active}},{key:"enable",value:function(t){this.isEnabled()||(this._el.addEventListener("touchstart",this._onStart,!1),this._enabled=!0,this._aroundCenter=t&&"center"===t.around)}},{key:"disable",value:function(){this.isEnabled()&&(this._el.removeEventListener("touchstart",this._onStart),this._enabled=!1)}},{key:"disableRotation",value:function(){this._rotationDisabled=!0}},{key:"enableRotation",value:function(){this._rotationDisabled=!1}},{key:"_onStart",value:function(t){if(2===t.touches.length){var e=s.mousePos(this._el,t.touches[0]),n=s.mousePos(this._el,t.touches[1]);this._posP0=e,this._posP1=n,this._startVec=e.sub(n),this._startScale=this._map.transform.scrollScale,this._startHeading=this._map.transform.heading,this._gestureIntent=void 0,this._inertia=[],this._active=!1,window.document.addEventListener("touchmove",this._onMove,!1),window.document.addEventListener("touchend",this._onEnd,!1)}}},{key:"_onMove",value:function(t){if(2===t.touches.length){var e=s.mousePos(this._el,t.touches[0]),n=s.mousePos(this._el,t.touches[1]),i=e.add(n).div(2),o=e.sub(n),r=o.mag()/this._startVec.mag(),a=this._rotationDisabled?0:180*o.angleWith(this._startVec)/Math.PI,l=this._map;if(this._gestureIntent){var u={};"rotate"===this._gestureIntent&&(u.heading=this._startHeading+a),"zoom"===this._gestureIntent&&(u.zoom=l.transform.scaleZoom(this._startScale*r)),l.stopEase(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),r,i]),l.easeTo(u,{duration:0,around:l.unprojectFromContainer(i)},{originalEvent:t}),this._fireEvent("rotate",t),this._fireEvent("move",t)}else{var c=Math.abs(1-r)>.15;Math.abs(a)>8?this._gestureIntent="rotate":c&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._startVec=o,this._startScale=l.transform.scrollScale,this._startHeading=l.transform.heading,this.isActive()||(this._active=!0))}t.preventDefault()}}},{key:"_onEnd",value:function(t){window.document.removeEventListener("touchmove",this._onMove),window.document.removeEventListener("touchend",this._onEnd),this._drainInertiaBuffer(),this._active=!1;var e=this._inertia,n=this._map;if(e.length<2)return void n.snapToNorth({},{originalEvent:t});var i=e[e.length-1],o=e[0],r=n.transform.scaleZoom(this._startScale*i[1]),a=n.transform.scaleZoom(this._startScale*o[1]),l=r-a,s=(i[0]-o[0])/1e3,u=i[2];if(0===s||r===a)return void n.snapToNorth({},{originalEvent:t});var f=.15*l/s;Math.abs(f)>2.5&&(f=f>0?2.5:-2.5);var d=1e3*Math.abs(f/(12*.15));n.easeTo({},{duration:d,easing:c,around:this._aroundCenter?n.getCenter():n.unprojectFromContainer(u)},{originalEvent:t})}},{key:"_fireEvent",value:function(t,e){return this._map._fire(t,{originalEvent:e})}},{key:"_drainInertiaBuffer",value:function(){for(var t=this._inertia,e=Date.now();t.length>2&&e-t[0][0]>160;)t.shift()}},{key:"_ignoreEvent",value:function(t){var e=this._map;return!(!e.touchTilt||!e.touchTilt.isActive())||(t.touches?t.touches.length<2:void 0)}}]),t}();t.exports=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(1),l=i(a),s=n(17),u=i(s),c=n(617),f=i(c),d=n(409),h=function(){function t(){var e=this;(0,r.default)(this,t),this.fps=6,this.now=null,this.then=null,this.interval=1e3/this.fps,this.delta=null,this._frameDeadline=0,this._channel=new MessageChannel,this.scheduleTaskQueue=new d.ScheduleTaskQueue,this._channel.port1.onmessage=function(){if(e.scheduleTaskQueue)for(var t=e._frameDeadline-u.default.now(),n=e.scheduleTaskQueue.first;n&&(t>1||n.isTimeout());){var i=n;n=n.next,i&&i.runTask(),t=e._frameDeadline-u.default.now()}}}return(0,l.default)(t,[{key:"_initStats",value:function(){this.stats=new f.default,this.stats.domElement.style.position="absolute",this.stats.domElement.style.right="14px",this.stats.domElement.style.bottom="140px",this.stats.domElement.style.zIndex=1e6,document.body.appendChild(this.stats.domElement)}},{key:"updateFPS",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;this.fps=Math.max(0,Math.min(t,60)),this.interval=0===this.fps?1/0:1e3/this.fps}},{key:"setCallback",value:function(t){this.callback=t}},{key:"start",value:function(){this._animFrameId||this._destroyed||(this.then=u.default.now(),this.tick())}},{key:"tickOnce",value:function(){var t=this;this.isUpdating||(0,u.default)(function(e){t.callback&&t.callback(e)})}},{key:"tick",value:function(t){var e=this;this._animFrameId=u.default.frame(function(t){e.tick(t)}),this.now=u.default.now(),this.delta=this.now-this.then,this.delta>this.interval&&(this.stats&&this.stats.update(),this.then=this.now-this.delta%this.interval,this._frameDeadline=t+this.interval,this.callback&&this.callback(t),this._channel.port2.postMessage(null))}},{key:"stop",value:function(){u.default.cancelFrame(this._animFrameId),this._animFrameId=null}},{key:"destroy",value:function(){this.stop(),this.setCallback(null);for(var t=this.scheduleTaskQueue.first;t;){var e=t;t=t.next,e.remove()}this.scheduleTaskQueue=null,this._destroyed=!0}},{key:"isUpdating",get:function(){return!!this._animFrameId}}]),t}();e.default=h},function(t,e,n){"use strict";var i=function(){var t=0,e=0,n=Date.now(),i=n,o=0,r=1e3,a=0,l=0,s=1e3,u=0,c=0,f=0,d=document.createElement("div");d.id="stats",d.addEventListener("mousedown",function(t){t.preventDefault(),f+=1,x(f%2)},!1),d.style.cssText="width:80px;opacity:0.9;cursor:pointer";var h=document.createElement("div");h.id="fps",h.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",d.appendChild(h);var v=document.createElement("div");v.id="fpsText",v.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",v.innerHTML="FPS",h.appendChild(v);var p=document.createElement("div");for(p.id="fpsGraph",p.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",h.appendChild(p);74>p.children.length;){var m=document.createElement("span");m.style.cssText="width:1px;height:30px;float:left;background-color:#113",p.appendChild(m)}var _=document.createElement("div");_.id="ms",_.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",d.appendChild(_);var g=document.createElement("div");g.id="msText",g.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",g.innerHTML="MS",_.appendChild(g);var y=document.createElement("div");for(y.id="msGraph",y.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",_.appendChild(y);74>y.children.length;)m=document.createElement("span"),m.style.cssText="width:1px;height:30px;float:left;background-color:#131",y.appendChild(m);var x=function(t){switch(f=t){case 0:h.style.display="block",_.style.display="none";break;case 1:h.style.display="none",_.style.display="block"}};return{domElement:d,setMode:x,begin:function(){n=Date.now()},end:function(){var f=Date.now();o=f-n,r=Math.min(r,o),a=Math.max(a,o),g.textContent=o+" MS ("+r+"-"+a+")";var d=Math.min(30,30-o/200*30);return y.appendChild(y.firstChild).style.height=d+"px",c+=1,f>i+1e3&&(l=Math.round(1e3*c/(f-i)),s=Math.min(s,l),u=Math.max(u,l),e+=l,v.textContent=l+" FPS ("+s+"-"+u+") Avg: "+parseInt(e/t),d=Math.min(30,30-l/100*30),p.appendChild(p.firstChild).style.height=d+"px",i=f,c=0),t+=1,f},update:function(){n=this.end()}}};t.exports=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(){return"&random="+(+new Date).toString(36)}function r(t){if(self.window){(new Image).src=t+o()}}function a(t,e,n){var i=x[t];return i||(i=new b({id:t,path:e})),i.on("send",function(){i.receiveData(n())}),x[t]}Object.defineProperty(e,"__esModule",{value:!0});var l=n(2),s=i(l),u=n(0),c=i(u),f=n(1),d=i(f),h=n(4),v=i(h),p=n(3),m=i(p);e.sendOnce=r,e.sendPeriodically=a;var _=n(263),g=n(7),y=i(g),x={},b=function(t){function e(t){var n=t.id,i=t.path;(0,c.default)(this,e);var o=(0,v.default)(this,(e.__proto__||(0,s.default)(e)).call(this));return o.id=n,o.path=i,o.dataList=[],setInterval(function(){o.send()},5e3),window.addEventListener("beforeunload",function(){o.send()}),o}return(0,m.default)(e,t),(0,d.default)(e,[{key:"receiveData",value:function(t){var e=this;y.default.forIn(t,function(t,n){e.dataList.push(t+"="+n)})}},{key:"send",value:function(){if(this.emit("send"),this.dataList.length>0){var t=this.path+(-1===this.path.indexOf("?")?"?":"&")+this.dataList.join("&");this.dataList=[],r(t)}}}]),e}(_.EventEmitter)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(){return!!(r()&&a()&&l()&&s()&&u()&&c()&&f()&&d())}function r(){return"undefined"!=typeof window&&"undefined"!=typeof document}function a(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function l(){return Function.prototype&&Function.prototype.bind}function s(){return z.default&&B.default&&R.default&&N.default&&L.default&&P.default&&A.default&&T.default&&w.default&&b.default&&y.default&&_.default&&p.default}function u(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function c(){return"Worker"in window}function f(){return"Uint8ClampedArray"in window}function d(){var t=D.context||null;if(!t){t=h(),D.context=t;var e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e.UNMASKED_VENDOR_WEBGL),i=t.getParameter(e.UNMASKED_RENDERER_WEBGL);D.vendor=n,D.renderer=i,D.isIndependentDisplayCard=!/(\bHD\b)|(\bUHD\b)/.test(i)}return D}function h(){var t=document.createElement("canvas"),e=(0,B.default)(o.webGLContextAttributes);return t.getContext("webgl",e)||t.getContext("experimental-webgl",e)}Object.defineProperty(e,"__esModule",{value:!0});var v=n(672),p=i(v),m=n(321),_=i(m),g=n(673),y=i(g),x=n(235),b=i(x),S=n(95),w=i(S),E=n(280),T=i(E),I=n(669),A=i(I),k=n(670),P=i(k),M=n(671),L=i(M),C=n(668),N=i(C),O=n(2),R=i(O),V=n(94),B=i(V),F=n(16),z=i(F);e.isSupported=o,e.isWebGLSupportedCached=d;var D={};o.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(277),p=i(v),m=n(411),_=i(m),g=n(7),y=n(154),x=n(659),b=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,l.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this)),i=t.map,o=t.id,a=void 0===o?(0,g.uniqueId)():o,s=t.zIndex,u=void 0===s?0:s;return n.id=a,n.zIndex=(0,y.getRank)(u,"VISUAL_PLUGIN"),i&&i instanceof p.default&&n.addTo(i),n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"addTo",value:function(t){if(t!==this.map)return this.remove(),t.addVisualPlugin(this),this.map=t,this.gl=t.renderEngine.gl,this._onAddToMap({canvas:t.canvasContainer,camera:t.renderEngine.camera}),this}},{key:"remove",value:function(){return this.map&&(this.map.removeVisualPlugin(this.id),this._onRemoveFromMap(),this.map=null,this.gl=null),this}},{key:"redraw",value:function(){return this.map&&this.map._update(),this}},{key:"draw",value:function(){var t=this,e=this.gl;e&&(0,x.preserveParameters)(e,{DEPTH_TEST:!1,BLEND:!0,CULL_FACE:!1,BLEND_SRC_RGB:e.ONE,BLEND_DST_RGB:e.ONE_MINUS_SRC_ALPHA,BLEND_SRC_ALPHA:e.ONE,BLEND_DST_ALPHA:e.ONE_MINUS_SRC_ALPHA,VIEWPORT:[0,0,e.canvas.width,e.canvas.height]},function(){t._onDraw()})}},{key:"_onAddToMap",value:function(){}},{key:"_onRemoveFromMap",value:function(){}},{key:"_onDraw",value:function(){}}]),e}(_.default);e.default=b},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(154),p=n(51),m=i(p),_=n(38),g=n(411),y=n(7),x=y.uniqueId,b=function(t){function e(t){(0,l.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this));return t=t||{},n.id=x(),n._userZIndex=t.zIndex>=0?t.zIndex:0,n.zIndex=Math.min(Math.max(t.zIndex||0,0)+v.RANK_CONFIG.VISUAL_PLUGIN.min,v.RANK_CONFIG.VISUAL_PLUGIN.max),n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"addTo",value:function(t){return t.addVisualPlugin(this),this.map=t,this.gl=t.renderEngine.gl,this.transform=t.transform,this}},{key:"remove",value:function(){return this.map&&this.map.removeVisualPlugin(this.id),this.map=null,this.gl=null,this.transform=null,this}},{key:"redraw",value:function(){return this.map&&this.map._update(),this}},{key:"draw",value:function(){}},{key:"setZIndex",value:function(t){return m.default.isNumber(t)?t<0?(console.error("zIndex希望设置为非负数,实际值为: "+t),this):(this._userZIndex=t,void(this.zIndex=Math.min(Math.max(t||0,0)+v.RANK_CONFIG.VISUAL_PLUGIN.min,v.RANK_CONFIG.VISUAL_PLUGIN.max))):(new _.BaseTypeError("zIndex","Number",t).error(),this)}},{key:"getZIndex",value:function(){return this._userZIndex}}]),e}(g);t.exports=b},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(16),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(543),f=i(c),d=n(43),h=n(20),v=i(h),p=n(7),m=i(p),_=function(){function t(e){(0,l.default)(this,t),this.painter=e,this.renderLayers=null,this._destroyed=!1,this._needReplace=!0}return(0,u.default)(t,[{key:"updatePlace",value:function(){this._needReplace=!0}},{key:"resize",value:function(t,e){this._destroyed||(this.width=t,this.height=e,this.painter.resize(t,e))}},{key:"update",value:function(t,e){if(!this._destroyed){var n=t.getDrawLayers().filter(function(t){return!t.isHidden(e.zoom)}),i=t.getPlugins(),o=[],a={};n.forEach(function(n){var i=n.filter,l=n.sourceId,s=t.getSource(l);if(s){var u=s.getDrawItems();if(0!==(0,r.default)(u).length){var c={};c.tileSize=n.tileSize,c.type=n.type,c.rank=n.rank,c.id=n.id,c.opacity=n.opacity,"LABEL"===n.type&&(c._enableCollision=n._enableCollision);var f=[];m.default.forIn(u,function(t,o){var r=o.getQueryData(i),l=o.coord;if(r){var s={},u=void 0,c=void 0;if(l.isVirtualCoord())u=0,c=0;else{if((l.z-e.tileZoom>=4||e.tileZoom-l.z>=5)&&e.tileZoom<=v.default.maxDataZoom)return;var d=e.projectionTopLeft(l.z);u=l.x*n.tileSize-d.x,c=l.y*n.tileSize-d.y}if(s.offset={x:u,y:c},s.id=l.id,s.coordX=l.x,s.coordY=l.y,s.coordZ=l.z,s.features=s.id in r?r[s.id]:r,s.scale=l.isVirtualCoord()?1:e.calCoordsScale(l.z),!a[s.id]){var h={};h.offset=s.offset,h.scale=s.scale,h.tileSize=n.tileSize,a[s.id]=h}f.push(s)}}),c.tiles=f,o.push(c)}}}),i.forEach(function(t){o.push({type:d.RENDER_LAYER_TYPE.visualPlugin,visualPlugin:t,rank:t.zIndex})}),o.sort(function(t,e){return t.rank-e.rank}),this.renderLayers=o;var l=!1;return this.painter.preRender(e,a),(!this.gradualPlacement||this.gradualPlacement.isDone()&&!this.gradualPlacement.isFading()&&this._needReplace)&&(this.gradualPlacement=new f.default(this.painter.textCache,this.renderLayers),this._needReplace=!1),this.gradualPlacement.isDone()||(this.painter.painters.symbol&&this.painter.painters.symbol.preDraw({iconsLoader:t.iconsLoader}),this.gradualPlacement.placement.updateVersion(),this.gradualPlacement.continuePlacement(this.renderLayers,this.painter.tilesMatrix,this.painter.camera,e),this.gradualPlacement.isDone()?this.placement=this.gradualPlacement.batchUpdate(this.placement):(this.lastGradualPlacement=this.gradualPlacement,l=!0)),this.placement&&this.gradualPlacement&&this.gradualPlacement.placement!==this.placement&&this.placement.batchUpdateShow(),this.painter.render(this.renderLayers,e,this.placement,{fadeChange:this.placement.getFadeChange(),iconsLoader:t.iconsLoader}),l}}},{key:"resetGradualPlacement",value:function(){this.gradualPlacement&&(this.gradualPlacement.destroy(),this.gradualPlacement=null)}},{key:"render",value:function(t,e){if(!this._destroyed)return this.update(t,e)}},{key:"destroy",value:function(){this._destroyed||(this.gradualPlacement&&(this.gradualPlacement.destroy(),this.gradualPlacement=null),this.painter=null,this.renderLayers=null,this._destroyed=!0)}},{key:"getPoi",value:function(t){return this.placement?this.placement.getPoi(t):null}}]),t}();t.exports=_},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{centerDelta:{x:0,y:0},leftTop:r(t,[-1,e]),rightTop:r(t,[1,e]),leftBottom:r(t,[-1,-1]),rightBottom:r(t,[1,-1])}}function r(t,e){var n=t.clone();n.invert();var i=n.multiplyVector4({elements:[e[0],e[1],0,1]}),o=n.multiplyVector4({elements:[e[0],e[1],1,1]});i=i.elements.map(function(t,e,n){return t/n[3]}),o=o.elements.map(function(t,e,n){return t/n[3]});var r=(0-i[2])/(o[2]-i[2]);return{x:(0,y.default)(i[0],o[0],r),y:(0,y.default)(i[1],o[1],r)}}function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=JSON.parse((0,u.default)(t));return b.default.forIn(n,function(t,n){n.x*=e,n.y*=e}),n}function l(t,e){var n=t*Math.PI/180,i=e/2*Math.PI/180;return(Math.cos(n)*Math.tan(n+i)-Math.sin(n))/Math.tan(i)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(78),u=i(s),c=n(14),f=i(c),d=n(0),h=i(d),v=n(1),p=i(v),m=n(140),_=n(85),g=n(319),y=i(g),x=n(7),b=i(x),S=n(138),w=n(20),E=i(w),T=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.map,i=e.view,o=e.look,r=e.scale,a=e.offset;(0,h.default)(this,t),this.version=0,this.look=o,this.view=i,this.map=n,this.scale=r,this.lookPoint=new m.Vector3(o.slice(0,3)),this.lightPosition=new m.Vector3([0,0,0]);var l=i.right-i.left,s=i.top-i.bottom;this.resolution={width:l,height:s},this.pMatrix=new m.Matrix4,this.vMatrix=new m.Matrix4,this.vInverseMatrix=new m.Matrix4,this.rotateMatrix=new m.Matrix4,this.scaleMatrix=new m.Matrix4,this.matrixStore=new _.Store("matrixStore",1e4),this.fovy=30,this.distance=Math.floor(o[2]=i.top/Math.tan(this.fovy/2*Math.PI/180)),this.far=2*this.distance,this.near=1;var u=a.x,c=void 0===u?0:u,f=a.y,d=void 0===f?0:f;this.pMatrix.setPerspective(this.fovy,l/s,this.near,this.far,2*c/l,-2*d/s),this.offset={x:c,y:d},this.setLookAt(o),this.cache={},this.fogPitch=45}return(0,p.default)(t,[{key:"setView",value:function(t){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])this.updateVersion();else for(var e in t)if(t.hasOwnProperty(e)&&this.view[e]!==t[e]){this.updateVersion();break}this.view=t;var n=t.right-t.left,i=t.top-t.bottom,o=this.fovy,r=this.near,a=this.offset;this.distance=Math.floor(t.top/Math.tan(o/2*Math.PI/180)),this.far=2*this.distance,this.resolution.width=n,this.resolution.height=i,this.pMatrix.setPerspective(o,n/i,r,this.far,2*a.x/n,-2*a.y/i),this._setPVMatrix()}},{key:"setOffset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0};b.default.deepEqual(t,this.offset)||(this.offset=t,this.setView(this.view,!0))}},{key:"setLookAt",value:function(t){for(var e=0,n=t.length;e<n;e++)if(this.look[e]!==this.look[e]){this.updateVersion();break}this.look=t,this._setPVMatrix()}},{key:"setRotate",value:function(t,e){e%=360,t===this.pitch&&e===this.heading||this.updateVersion(),(t||0===t)&&(t=Math.min(Math.max(t,0),E.default.maxPitch)),this.heading=e,this.pitch=t,this._setPVMatrix()}},{key:"setScale",value:function(t){t!==this.scale&&(this.updateVersion(),this.scaleMatrix.setScale(t,t,t),this.scale=t,this._setPVMatrix())}},{key:"canvasCoordsToGLCoords",value:function(t,e){return(0,S.fromScreenToNdc)(t,e,this.resolution)}},{key:"glCoordsToCanvasCoords",value:function(t,e){return(0,S.fromNdcToScreen)(t,e,this.resolution)}},{key:"getScreenCoordsByCustomMatrix",value:function(t,e){var n=(0,S.getScreenCoordsByCustomMatrix)(t,e,this.resolution);return(0,f.default)({},n,{version:this.version})}},{key:"getScreenCoordsFromPixel",value:function(t){var e=new m.Vector4(t.x,t.y,0,1);return this.getScreenCoordsByCustomMatrix(this.pvMatrix,e)}},{key:"getPixelFromScreenCoords",value:function(t){return(0,S.getZPlaneCoordsByCustomMatrix)(this.pvMatrix,t,this.resolution)}},{key:"getBounds",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.cache.bounds&&this.cache.bounds.version===this.version)return a(this.cache.bounds.value,1/n);var i=Math.min(this.getFogEdge()[1],1),r=o(this.pvMatrix,i);return this.cache.bounds={version:this.version,value:r},a(r,1/n)}},{key:"getFogEdge",value:function(){var t=this.fogPitch;if(this.pitch<t-5)return[1,1/0,1,1];if(this.cache.fogEdge&&this.cache.fogEdge.version===this.version)return this.cache.fogEdge.value;var e=this.view.top/this.scale*l(t,this.fovy),n=e*Math.sin(this.heading*Math.PI/180),i=e*Math.cos(this.heading*Math.PI/180),o=this.pvMatrix.multiplyVector4({elements:[n,i,0,1]}).elements,r=o.map(function(t){return t/o[3]});return this.cache.fogEdge={version:this.version,value:r},r}},{key:"getLookPosition",value:function(){return this.vInverseMatrix.multiplyVector3(this.lookPoint)}},{key:"getLightPosition",value:function(t){return this.vInverseMatrix.multiplyVector3(t||this.lightPosition)}},{key:"_setPVMatrix",value:function(){var t=new m.Matrix4,e=new m.Matrix4;e.translate(0,0,-this.distance),e.rotate(-this.pitch,1,0,0),e.rotate(this.heading,0,0,1),e.scale(this.scale,this.scale,this.scale),e.translate(0,0,0),this.vMatrix=e,this.vInverseMatrix.set(e).invert(),t.multiply(this.pMatrix).multiply(e),this.pvMatrix=t}},{key:"updateVersion",value:function(){this.version+=1}},{key:"destroy",value:function(){this.version=0,this.look=null,this.view=null,this.map=null,this.scale=null,this.lookPoint=null,this.lightPosition=null,this.resolution=null,this.pMatrix=null,this.vMatrix=null,this.vInverseMatrix=null,this.rotateMatrix=null,this.scaleMatrix=null,this.matrixStore.clear(),this.matrixStore=null,this.fovy=null,this.distance=null,this.far=null,this.near=null,this.cache=null}}]),t}();e.default=T},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=t[0],n=[];return n=e?e.color:[0,0,0],{lighting_uAmbientColor:n}}function r(t){var e=[],n=[];return t.forEach(function(t){e.push.apply(e,(0,s.default)(t.direction)),n.push.apply(n,(0,s.default)(t.color))}),t.length||(e.push(0,0,0),n.push(0,0,0)),{lighting_uDirDirection:e,lighting_uDirColor:n,lighting_uDirCount:t.length}}function a(t,e){var n=[],i=[],o=[];return t.forEach(function(t){var r=e.latLngToCenterLocalPixel(t.position),a=1/(0,S.getSpatialResolution)(e.zoom),l=a*t.height;n.push(r.x,r.y,l),i.push.apply(i,(0,s.default)(t.attenuation)),o.push.apply(o,(0,s.default)(t.color))}),t.length||(n.push(0,0,0),i.push(0,0,0),o.push(0,0,0)),{lighting_uPointPosition:n,lighting_uPointAtt:i,lighting_uPointColor:o,lighting_uPointCount:t.length}}Object.defineProperty(e,"__esModule",{value:!0});var l=n(32),s=i(l),u=n(14),c=i(u),f=n(130),d=i(f),h=n(0),v=i(h),p=n(1),m=i(p),_=n(625),g=i(_),y=n(279),x=n(412),b=i(x),S=n(138),w=n(140),E=n(7),T=i(E),I=function(){function t(){var e;(0,v.default)(this,t),this.lights=(e={},(0,d.default)(e,y.LIGHT_TYPE.AMBIENT,[]),(0,d.default)(e,y.LIGHT_TYPE.DIRECTION,[]),(0,d.default)(e,y.LIGHT_TYPE.POINT,[]),e),this.setConfig(),this._uniforms={},this._cameraVer=null}return(0,m.default)(t,[{key:"setConfig",value:function(t){var e=this,n=(0,c.default)({},g.default,t),i=n.active,o=n.toneMapping,r=n.intensity,a=n.lightList,l=n.shadowOptions;return i?this.enable():this.disable(),this._toneMapping=o,this.setIntensity(r),this.clearLights(),a&&a.forEach(function(t){e.addLight(new b.default(t))}),this.setShadowOptions(l),this}},{key:"addLight",value:function(t){var e=t.type;return this.lights[e]&&this.lights[e].length<4?this.lights[e].push(t):console.warn(e+"类型光源暂不支持，或已达上限，不可添加。"),this}},{key:"removeLight",value:function(t){var e=this.lights[t.type],n=e.findIndex(function(e){return e.id===t.id});return n>=0&&e.splice(n,1),this}},{key:"clearLights",value:function(){var t=this;return T.default.forIn(this.lights,function(e){t.lights[e]=[]}),this}},{key:"getLights",value:function(){var t=[];return T.default.forIn(this.lights,function(e,n){t.push.apply(t,(0,s.default)(n))}),t}},{key:"setIntensity",value:function(t){return this.intensity=(0,c.default)({ambient:0,diffuse:0,specular:0},this.intensity,t),this}},{key:"getIntensity",value:function(){return this.intensity}},{key:"enable",value:function(){return this.active=!0,this}},{key:"disable",value:function(){return this.active=!1,this}},{key:"isActive",value:function(){return this.active}},{key:"setShadowOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.lightId,n=t.intensity,i=void 0===n?1:n,o=t.enabled,r=void 0!==o&&o;return this._shadowEnabled=r,this._shadowLightId=e,this._shadowIntensity=Math.max(0,Math.min(i,1)),this}},{key:"getShadowOptions",value:function(){return{enabled:this._shadowEnabled,lightId:this._shadowLightId,intensity:this._shadowIntensity}}},{key:"getShadowLight",value:function(){return this._shadowEnabled&&this.lights[y.LIGHT_TYPE.DIRECTION][this._getShadowLightIndex()]}},{key:"_getShadowLightIndex",value:function(){var t=this;return this.lights[y.LIGHT_TYPE.DIRECTION].findIndex(function(e){return e.id===t._shadowLightId})}},{key:"_updateViewPos",value:function(t){t?t.version!==this._cameraVer&&(this._uniforms.lighting_uViewPos=t.getLookPosition().elements,this._cameraVer=t.version):this._uniforms.lighting_uViewPos=[0,0,1e3]}},{key:"getLightPVMatrix",value:function(t){var e;if(!this.getShadowLight())return new w.Matrix4;var n=new w.Vector3(this.getShadowLight().direction),i=new w.Vector3(n.elements).scale(3e3,3e3,3e3),o=new w.Vector3(0,0,1);n.equals(o)&&(o=new w.Vector3(0,1,0));var r=(e=new w.Matrix4).setLookAt.apply(e,(0,s.default)(i.elements).concat([0,0,0],(0,s.default)(o.elements)));return(new w.Matrix4).setOrtho(t.left,t.right,t.bottom,t.top,1,6e3).scale(.75,.75,1).multiply(r)}},{key:"update",value:function(t){var e=t.camera,n=t.transform,i=t.view,l=this.isActive(),s=this.intensity,u=this._toneMapping;this._updateViewPos(e);var f=o(this.lights[y.LIGHT_TYPE.AMBIENT]),d=r(this.lights[y.LIGHT_TYPE.DIRECTION]),h=a(this.lights[y.LIGHT_TYPE.POINT],n);(0,c.default)(this._uniforms,{lighting_uBase:[l,s.ambient,s.diffuse,s.specular],lighting_uToneMapping:[u.enable,u.exposure],lighting_uShadow:[this._shadowEnabled&&this._shadowIntensity,this._getShadowLightIndex()],lighting_uShadowLightPVMatrix:this.getLightPVMatrix(i).elements},f,d,h)}},{key:"uniforms",get:function(){return this._uniforms}}]),t}();e.default=I},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(279);e.default={active:!0,toneMapping:{enable:!1,exposure:1},intensity:{ambient:1,diffuse:1,specular:1},lightList:[{type:i.LIGHT_TYPE.AMBIENT,color:"#FFF",intensity:.8},{id:"$main",type:i.LIGHT_TYPE.DIRECTION,color:"#FFF",intensity:.2,direction:[-1,2,-1.41]},{type:i.LIGHT_TYPE.DIRECTION,color:"#FFF",intensity:.2,direction:[1,-2,-1.41]}],shadowOptions:{enabled:!1}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(102),p=i(v),m=n(475),_=i(m),g=n(85),y=n(127),x=n(20),b=i(x),S=function(t){function e(t){(0,l.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return n.store=new g.Store("buffer",1024,128,y.deleteBuffersCallback),n.shaderSource=_.default,n.shaderParams={getAttribLocation:["a_Position","a_Color","a_Normal","a_LineInfo","a_LineDistance","a_SideInfo"],getUniformLocation:["u_matrix","u_modelMatrix","u_SizeScale"]},n.enableLight=!0,n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"draw",value:function(t,e,n,i){var o=this.gl,r=this.store,a=t.vertices,l=t.indeices,s="base_"+t.id,u=e.matrix,c=e.modelMatrix,f=void 0;r.exist(s)?(f=r.get(s),this.bindVertexBuffer(a,f.vertices),this.bindElementBuffer(l,f.indices)):f=r.set(s,{vertices:this.bindVertexBuffer(a),indices:this.bindElementBuffer(l),length:l.length}),o.uniformMatrix4fv(this.u_matrix,!1,u),o.uniformMatrix4fv(this.u_modelMatrix,!1,c);var d=~~(100*(i-~~i));o.uniform1f(this.u_SizeScale,1e3*d+Math.min(Math.floor(100*(n||1)),255));var h=b.default.batchRender?o.UNSIGNED_INT:o.UNSIGNED_SHORT;o.drawElements(o.TRIANGLES,f.length,h,0),this.unbindVertexBuffer(f.vertices,a.attributes)}}]),e}(p.default);e.default=S},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(102),p=i(v),m=n(477),_=i(m),g=n(85),y=n(127),x=function(t){function e(t){(0,l.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return n.store=new g.Store("buffer",1024,128,y.deleteBuffersCallback),n.shaderSource=_.default,n.shaderParams={getAttribLocation:["a_Position","a_Color","a_Info","a_Transform","a_Height"],getUniformLocation:["u_matrix","u_modelMatrix","u_use3D","u_maskSampler","u_maskScale"]},n.enableLight=!0,n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"draw",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.gl,o=this.store,r=t.vertices,a=t.indeices,l="build_"+t.id,s=e.matrix,u=e.modelMatrix,c=e.maskScale||1,f=void 0;o.exist(l)?(f=o.get(l),this.bindVertexBuffer(r,f.vertices),this.bindElementBuffer(a,f.indices)):f=o.set(l,{vertices:this.bindVertexBuffer(r),indices:this.bindElementBuffer(a),length:a.length}),i.uniformMatrix4fv(this.u_matrix,!1,s),i.uniformMatrix4fv(this.u_modelMatrix,!1,u),i.uniform1i(this.u_maskSampler,0),i.uniform1f(this.u_maskScale,c),i.uniform1f(this.u_use3D,n.use3D?1:0),i.drawElements(i.TRIANGLES,f.length,i.UNSIGNED_SHORT,0),this.unbindVertexBuffer(f.vertices,r.attributes)}}]),e}(p.default);e.default=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(14),r=i(o),a=n(2),l=i(a),s=n(0),u=i(s),c=n(1),f=i(c),d=n(4),h=i(d),v=n(21),p=i(v),m=n(3),_=i(m),g=n(315),y=i(g),x=n(485),b=i(x),S=n(112),w=i(S),E=n(7),T=i(E),I=n(534),A=i(I),k=n(892),P=new A.default,M=P.parse(k),L={minX:-17.631067276000977,maxX:15.692798614501953,minY:-3.118868112564087,maxY:3.4938244819641113,minZ:.05786377936601639,maxZ:20.096586227416992},C=function(t){function e(t){(0,u.default)(this,e);var n=(0,h.default)(this,(e.__proto__||(0,l.default)(e)).call(this,t));return n.shaderSource=b.default,n.shaderParams={getAttribLocation:["aPosition","aNormal","aColor","aInstanceCoord","aInstanceInfo"],getUniformLocation:n.commonUniformList.concat(["uEnableLighting","lighting_uCameraPosition","lighting_lightPositions","uBoxMin","uBoxMax"])},n.enableLight=!0,n.model=M,n}return(0,_.default)(e,t),(0,f.default)(e,[{key:"createModelBuffer",value:function(){var t=this.gl,e=this.model.attributes;this.modelBuffers={positions:{buffer:new w.default(t,{data:e.POSITION.value}),location:this.aPosition,size:e.POSITION.size,type:t.FLOAT},normals:{buffer:new w.default(t,{data:e.NORMAL.value}),location:this.aNormal,size:e.NORMAL.size,type:t.BYTE},colors:{buffer:new w.default(t,{data:e.COLOR_0.value}),location:this.aColor,size:e.COLOR_0.size,type:t.UNSIGNED_BYTE}}}},{key:"createBuffer",value:function(t){var e=this.gl,n={},i={instanceCoordsTypeArray:{location:this.aInstanceCoord,size:2,type:e.FLOAT},instanceInfosTypeArray:{location:this.aInstanceInfo,size:4,type:e.SHORT}};return T.default.forIn(i,function(i,o){n[i]=(0,r.default)({data:t[i],buffer:new w.default(e,{target:e.ARRAY_BUFFER,data:t[i],usage:e.DYNAMIC_DRAW})},o)}),n}},{key:"setBuffers",value:function(t){var n=this;this.modelBuffers||this.createModelBuffer();var i=this.modelBuffers;T.default.forIn(i,function(t,e){var n=e.buffer,i=e.location,o=e.size,r=e.type;n.bind(),"index"!==t&&n.pointToAttrib({location:i,size:o,type:r})});var o=(0,p.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"setBuffers",this).call(this,t);return T.default.forIn(o,function(t,e){var i=e.location;n.gl.vertexAttribDivisor(i,1)}),o}},{key:"setUniforms",value:function(t,n,i,o){(0,p.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"setUniforms",this).call(this,t,n,i,o);var r=this.gl;r.uniform3f(this.uBoxMin,L.minX,L.minY,L.minZ),r.uniform3f(this.uBoxMax,L.maxX,L.maxY,L.maxZ)}},{key:"draw",value:function(t,e,n,i){if(t&&n){var o=this.gl,r=this.model;o.useProgram(o.program),this.setUniforms(t,e,n,i);var a=this.setBuffers(t);o.drawArraysInstanced(r.mode,0,r.vertexCount,t.count),o.bindBuffer(o.ARRAY_BUFFER,null),T.default.forIn(a,function(t,e){var n=e.location;o.vertexAttribDivisor(n,0)})}}},{key:"destroy",value:function(){this.model=null,(0,p.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"destroy",this).call(this)}}]),e}(y.default);e.default=C},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(21),h=i(d),v=n(3),p=i(v),m=n(315),_=i(m),g=n(483),y=i(g),x=n(112),b=i(x),S=function(t){function e(t){(0,l.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return n.shaderSource=y.default,n.shaderParams={getAttribLocation:["aPosition"],getUniformLocation:n.commonUniformList.concat(["uColor"])},n}return(0,p.default)(e,t),(0,u.default)(e,[{key:"createBuffer",value:function(t){var e=this.gl,n=t.position,i=t.index;return{position:{location:this.aPosition,size:3,type:e.FLOAT,data:n,buffer:new b.default(e,{data:n,usage:e.DYNAMIC_DRAW})},index:{data:i,buffer:new b.default(e,{target:e.ELEMENT_ARRAY_BUFFER,data:i}),type:2===i.BYTES_PER_ELEMENT?e.UNSIGNED_SHORT:e.UNSIGNED_INT,length:i.byteLength/i.BYTES_PER_ELEMENT}}}},{key:"setUniforms",value:function(t,n,i,o){(0,h.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"setUniforms",this).call(this,t,n,i,o);var a=this.gl,l=o.color||[1,1,1,1];a.uniform4f(this.uColor,l[0],l[1],l[2],l[3])}}]),e}(_.default);e.default=S},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(416),p=i(v),m=n(492),_=i(m),g=n(104),y=n(138),x=function(t){function e(t){(0,l.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return n.shaderParams.getUniformLocation=n.shaderParams.getUniformLocation.concat(["uCenter","uZoom","uPixelsPerMeter","uResolution","uProject_uCommonUnitsPerWorldUnit","uProject_uCommonUnitsPerWorldUnit2","uRelativeCenter"]),n.shaderSource=_.default,n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"draw",value:function(t,e,n,i){var o=this.gl;o.useProgram(o.program),this.setCommonUniforms(t,i),this.setUniforms(n,t,e,i),this.drawTileInstance(n.id,n,i.updateSubData)}},{key:"setUniforms",value:function(t,e,n,i){var o=this.gl,r=e.center,a=e.zoom,l=1/(0,y.getSpatialResolution)(a),s=i.distanceScales||e.getDistanceScales(),u=(0,g.splitLatLngNumber)(r.lat),c=(0,g.splitLatLngNumber)(r.lng),f={latPart:(0,g.splitLatLngNumber)(t.center.lat),lngPart:(0,g.splitLatLngNumber)(t.center.lng)};o.uniformMatrix4fv(this.u_matrix,!1,n.elements),o.uniform4f(this.uCenter,c.high,u.high,c.low,u.low),o.uniform1f(this.uZoom,a),o.uniform3f(this.uPixelsPerMeter,l,l,l),o.uniform3f(this.uProject_uCommonUnitsPerWorldUnit,s.pixelsPerDegree[0],s.pixelsPerDegree[1],s.pixelsPerDegree[2]),o.uniform3f(this.uProject_uCommonUnitsPerWorldUnit2,s.pixelsPerDegree2[0],s.pixelsPerDegree2[1],s.pixelsPerDegree2[2]),o.uniform2f(this.uResolution,e.width,e.height),o.uniform4f(this.uRelativeCenter,f.lngPart.high,f.latPart.high,f.lngPart.low,f.latPart.low),o.uniform2f(this.u_InstanceTileTextureOffset,0,0)}}]),e}(p.default);e.default=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(14),r=i(o),a=n(2),l=i(a),s=n(0),u=i(s),c=n(1),f=i(c),d=n(4),h=i(d),v=n(3),p=i(v),m=n(315),_=i(m),g=n(484),y=i(g),x=n(112),b=i(x),S=n(7),w=i(S),E=function(t){function e(t){(0,u.default)(this,e);var n=(0,h.default)(this,(e.__proto__||(0,l.default)(e)).call(this,t));return n.shaderSource=y.default,n.shaderParams={getAttribLocation:["aPosition","aColor","aNormal"],getUniformLocation:n.commonUniformList},n.enableLight=!0,n}return(0,p.default)(e,t),(0,f.default)(e,[{key:"createBuffer",value:function(t){var e=this.gl,n=t.index,i={},o={position:{location:this.aPosition,size:3,type:e.FLOAT},color:{location:this.aColor,size:3,type:e.UNSIGNED_BYTE},normal:{location:this.aNormal,size:3,type:e.FLOAT},index:{type:2===n.BYTES_PER_ELEMENT?e.UNSIGNED_SHORT:e.UNSIGNED_INT,length:n.byteLength/n.BYTES_PER_ELEMENT}};return w.default.forIn(o,function(n,o){i[n]=(0,r.default)({data:t[n],buffer:new b.default(e,{target:"index"===n?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,data:t[n],usage:e.DYNAMIC_DRAW})},o)}),i}}]),e}(_.default);e.default=E},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(14),r=i(o),a=n(2),l=i(a),s=n(0),u=i(s),c=n(1),f=i(c),d=n(4),h=i(d),v=n(21),p=i(v),m=n(3),_=i(m),g=n(415),y=i(g),x=n(488),b=i(x),S=n(17),w=i(S),E=1/16/w.default.devicePixelRatio,T=function(t){function e(t){(0,u.default)(this,e),t.attribList=["instanceColors","instanceShow"],t.uniformList=["u_gamma","u_buffer"];var n=(0,h.default)(this,(e.__proto__||(0,l.default)(e)).call(this,t));return n.shaderSource=b.default,n.symbolManager=t.glyphManager,n}return(0,_.default)(e,t),(0,f.default)(e,[{key:"_onDraw",value:function(){var t=this.gl;t.uniform1f(this.u_sizeMinPixels,10),t.uniform1f(this.u_gamma,E),t.uniform1f(this.u_buffer,.71)}},{key:"_onDrawInstanceTile",value:function(){this.gl.vertexAttribDivisor(this.instanceColors,0),this.gl.vertexAttribDivisor(this.instanceShow,0)}},{key:"getInstanceConfig",value:function(){var t=this.gl;return(0,r.default)((0,p.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"getInstanceConfig",this).call(this),{instanceColorList:{location:this.instanceColors,size:4,type:t.UNSIGNED_BYTE},instanceShowList:{location:this.instanceShow,size:1,type:t.UNSIGNED_BYTE}})}}]),e}(y.default);e.default=T},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(4),u=i(s),c=n(3),f=i(c),d=n(415),h=i(d),v=n(489),p=i(v),m=function(t){function e(t){(0,l.default)(this,e);var n=(0,u.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return n.shaderSource=p.default,n.symbolManager=t.markerManager,n}return(0,f.default)(e,t),e}(h.default);e.default=m},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(14),r=i(o),a=n(32),l=i(a),s=n(2),u=i(s),c=n(0),f=i(c),d=n(1),h=i(d),v=n(4),p=i(v),m=n(3),_=i(m),g=n(102),y=i(g),x=n(487),b=i(x),S=n(85),w=n(104),E=n(112),T=i(E),I=n(127),A=n(7),k=i(A),P=function(t){function e(t){(0,f.default)(this,e);var n=(0,p.default)(this,(e.__proto__||(0,u.default)(e)).call(this,t));return n.store=new S.Store("buffer",128,16,I.deleteInstanceCacllback),n.shaderSource=b.default,n.shaderParams={getAttribLocation:["positions","positions64xyLow"],getUniformLocation:["uMatrix","uCenter","uZoom","uPixelsPerMeter","uResolution","uProject_uCommonUnitsPerWorldUnit","uProject_uCommonUnitsPerWorldUnit2","uColor"]},n}return(0,_.default)(e,t),(0,h.default)(e,[{key:"draw",value:function(t,e,n,i){var o=this.gl;if(e){var r=t.center,a=t.zoom,s=t.getDistanceRatio(),u=i.distanceScales,c=i.color,f=(0,w.splitLatLngNumber)(r.lat),d=(0,w.splitLatLngNumber)(r.lng),h=[d.high,f.high,d.low,f.low];o.useProgram(o.program),o.uniformMatrix4fv(this.uMatrix,!1,e.elements),o.uniform4f.apply(o,[this.uCenter].concat(h)),o.uniform1f(this.uZoom,a),o.uniform3f(this.uPixelsPerMeter,s,s,s),o.uniform3f.apply(o,[this.uProject_uCommonUnitsPerWorldUnit].concat((0,l.default)(u.pixelsPerDegree))),o.uniform3f.apply(o,[this.uProject_uCommonUnitsPerWorldUnit2].concat((0,l.default)(u.pixelsPerDegree2))),o.uniform2f(this.uResolution,t.width,t.height),o.uniform4f(this.uColor,c[0],c[1],c[2],c[3]),this.drawTile(n.uid,n)}}},{key:"drawTile",value:function(t,e){var n=this.gl,i=this.store,o=!1;if(i){i.exist(t)?this._hasChangedBuffer(t,e)&&(o=!0):i.set(t,this.createBuffer(t,e));var r=i.get(t);k.default.forIn(r,function(t,i){var r=i.buffer,a=i.location,l=i.size,s=i.type;r.bind(),o&&(r.bufferData(e[t],{usage:n.DYNAMIC_DRAW}),i.data=e[t]),"indices"!==t&&r.pointToAttrib({location:a,size:l,type:s})}),n.drawElements(n.TRIANGLES,r.indices.data.length,n.UNSIGNED_INT,0),n.bindBuffer(n.ARRAY_BUFFER,null),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}}},{key:"_hasChangedBuffer",value:function(t,e){var n=this.store.get(t);for(var i in n)if(n.hasOwnProperty(i)&&e[i]&&n[i].data!==e[i])return!0;return!1}},{key:"createBuffer",value:function(t,e){var n=this.gl;if(e){var i={},o={positions:{location:this.positions,size:3,type:n.FLOAT},positions64xyLow:{location:this.positions64xyLow,size:2,type:n.FLOAT},indices:{}};return k.default.forIn(o,function(t,o){i[t]=(0,r.default)({data:e[t],buffer:new T.default(n,{target:"indices"===t?n.ELEMENT_ARRAY_BUFFER:n.ARRAY_BUFFER,data:e[t],usage:n.DYNAMIC_DRAW})},o)}),i}}}]),e}(y.default);e.default=P},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(17),p=i(v),m=n(657),_=n(414),g=i(_),y=n(480),x=i(y),b=12,S=15,w=39,E=function(t){function e(t){(0,l.default)(this,e),t.uniformList=["uResolution","uSampler","uEnabled"];var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t)),i=(0,m.getGraphicHardwareInfo)(n.gl),o=p.default.devicePixelRatio>=2?S:i?/(\bHD\b)|(\bUHD\b)/.test(i.renderer)?b:w:b;return n.shaderSource=(0,x.default)(o),n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"setUniforms",value:function(t){var e=t.resolution,n=t.texture,i=t.enabled,o=this.gl;o.uniform2f(this.uResolution,e[0],e[1]),o.uniform1f(this.uEnabled,i),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,n),o.uniform1i(this.uSampler,0)}}]),e}(g.default);e.default=E},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(32),r=i(o),a=n(2),l=i(a),s=n(0),u=i(s),c=n(1),f=i(c),d=n(4),h=i(d),v=n(21),p=i(v),m=n(3),_=i(m),g=n(414),y=i(g),x=n(479),b=i(x),S=function(t){function e(t){(0,u.default)(this,e),t.uniformList=["uRange","uFogEdge","uSampler","uDepthSampler","uSkySampler","uSkyInfo","uViewInfo","uSkyBrightness","uFogColor","uSkyColor"];var n=(0,h.default)(this,(e.__proto__||(0,l.default)(e)).call(this,t));return n.shaderSource=b.default,n.brightness=1,n.colors={},n}return(0,_.default)(e,t),(0,f.default)(e,[{key:"preDraw",value:function(){(0,p.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"preDraw",this).call(this)}},{key:"setFogColor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[.93,.93,.93,1];this.colors.fog=t}},{key:"setSkyColor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[.8,.8784,1,1];this.colors.sky=t}},{key:"setBrightness",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.brightness=t}},{key:"setUniforms",value:function(t){var e=t.rangeList,n=t.fogEdge,i=t.texture,o=t.depth,a=t.skyTex,l=t.skyInfo,s=t.viewInfo,u=this.gl;u.uniform4fv(this.uFogColor,this.colors.fog),u.uniform4fv(this.uSkyColor,this.colors.sky),u.uniform2f(this.uRange,e[0],e[1]),u.uniform3f(this.uFogEdge,n[0],n[1],n[2]),u.uniform4f.apply(u,[this.uSkyInfo].concat((0,r.default)(l))),u.uniform4f.apply(u,[this.uViewInfo].concat((0,r.default)(s))),u.uniform1f(this.uSkyBrightness,this.brightness),u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,i),u.uniform1i(this.uSampler,0),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,o),u.uniform1i(this.uDepthSampler,1),a?(a.bind(u,{textureIndex:2}),u.uniform1i(this.uSkySampler,2)):(u.activeTexture(u.TEXTURE2),u.bindTexture(u.TEXTURE_2D,null))}}]),e}(y.default);e.default=S},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(14),r=i(o),a=n(2),l=i(a),s=n(0),u=i(s),c=n(1),f=i(c),d=n(4),h=i(d),v=n(3),p=i(v),m=n(102),_=i(m),g=n(375),y=i(g),x=n(85),b=n(104),S=n(112),w=i(S),E=n(127),T=n(7),I=i(T),A=function(t){function e(t){(0,u.default)(this,e);var n=(0,h.default)(this,(e.__proto__||(0,l.default)(e)).call(this,t));return n.store=new x.Store("buffer",128,16,E.deleteInstanceCacllback),n.shaderSource=y.default,n.shaderParams={getAttribLocation:["vertexPositions","vertexValid","positions","positions64xyLow","nextPositions","nextPositions64xyLow","elevations","fillColors","lineColors","pickingColors"],getUniformLocation:["uMatrix","uCenter","uZoom","uPixelsPerMeter","uResolution","uProject_uCommonUnitsPerWorldUnit","uProject_uCommonUnitsPerWorldUnit2","picking_usePickingColor","u_isSideVertex","u_extruded","u_isWireframe","u_elevationScale","u_opacity"]},n.enableLight=!0,n}return(0,p.default)(e,t),(0,f.default)(e,[{key:"draw",value:function(t,e,n,i){var o=this.gl;if(e){var r=t.center,a=t.zoom,l=t.getDistanceRatio(),s=i.distanceScales,u=(0,b.splitLatLngNumber)(r.lat),c=(0,b.splitLatLngNumber)(r.lng);o.useProgram(o.program),o.uniformMatrix4fv(this.uMatrix,!1,e.elements),o.uniform4f(this.uCenter,c.high,u.high,c.low,u.low),o.uniform1f(this.uZoom,a),o.uniform3f(this.uPixelsPerMeter,l,l,l),o.uniform3f(this.uProject_uCommonUnitsPerWorldUnit,s.pixelsPerDegree[0],s.pixelsPerDegree[1],s.pixelsPerDegree[2]),o.uniform3f(this.uProject_uCommonUnitsPerWorldUnit2,s.pixelsPerDegree2[0],s.pixelsPerDegree2[1],s.pixelsPerDegree2[2]),o.uniform2f(this.uResolution,t.width,t.height),o.uniform1f(this.picking_usePickingColor,i.usePicking?1:0),o.uniform1f(this.u_isSideVertex,0),o.uniform1f(this.u_extruded,1),o.uniform1f(this.u_isWireframe,!1),o.uniform1f(this.u_elevationScale,1),o.uniform1f(this.u_opacity,1),this.drawTile(n.uid,n)}}},{key:"drawTile",value:function(t,e){var n=this.gl,i=this.store,o=!1;if(i){i.exist(t)?this._hasChangedBuffer(t,e)&&(o=!0):i.set(t,this.createBuffer(t,e));var r=i.get(t);n.disableVertexAttribArray(this.vertexPositions),n.disableVertexAttribArray(this.nextPositions),n.disableVertexAttribArray(this.nextPositions64xyLow),I.default.forIn(r,function(t,i){var r=i.buffer,a=i.location,l=i.size,s=i.type;r.bind(),o&&(r.bufferData(e[t],{usage:n.DYNAMIC_DRAW}),i.data=e[t]),"indices"!==t&&r.pointToAttrib({location:a,size:l,type:s})}),n.drawElements(n.TRIANGLES,r.indices.data.length,n.UNSIGNED_INT,0),n.bindBuffer(n.ARRAY_BUFFER,null),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}}},{key:"_hasChangedBuffer",value:function(t,e){var n=this.store.get(t);for(var i in n)if(n.hasOwnProperty(i)&&e[i]&&n[i].data!==e[i])return!0;return!1}},{key:"createBuffer",value:function(t,e){var n=this.gl;if(e){var i={},o={elevations:{location:this.elevations,size:1,type:n.FLOAT},fillColors:{location:this.fillColors,size:4,type:n.UNSIGNED_BYTE},lineColors:{location:this.lineColors,size:4,type:n.UNSIGNED_BYTE},pickingColors:{location:this.pickingColors,size:3,type:n.UNSIGNED_BYTE},positions:{location:this.positions,size:3,type:n.FLOAT},positions64xyLow:{location:this.positions64xyLow,size:2,type:n.FLOAT},vertexValid:{location:this.vertexValid,size:1,type:n.UNSIGNED_BYTE},indices:{}};return I.default.forIn(o,function(t,o){i[t]=(0,r.default)({data:e[t],buffer:new w.default(n,{target:"indices"===t?n.ELEMENT_ARRAY_BUFFER:n.ARRAY_BUFFER,data:e[t],usage:n.DYNAMIC_DRAW})},o)}),i}}}]),e}(_.default);e.default=A},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(21),h=i(d),v=n(3),p=i(v),m=n(14),_=i(m),g=n(102),y=i(g),x=n(375),b=i(x),S=n(85),w=n(104),E=n(112),T=i(E),I=n(127),A=n(7),k=i(A),P=(0,_.default)({},b.default,{name:"polygon_side"}),M=function(t){function e(t){(0,l.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return n.store=new S.Store("buffer",128,16,I.deleteInstanceCacllback),n.shaderSource=P,n.shaderParams={getAttribLocation:["vertexPositions","vertexValid","positions","positions64xyLow","nextPositions","nextPositions64xyLow","elevations","fillColors","lineColors","pickingColors"],getUniformLocation:["uMatrix","uCenter","uZoom","uPixelsPerMeter","uResolution","uProject_uCommonUnitsPerWorldUnit","uProject_uCommonUnitsPerWorldUnit2","picking_usePickingColor","u_isSideVertex","u_extruded","u_isWireframe","u_elevationScale","u_opacity"]},n.enableLight=!0,n._vertPositions=new Float32Array([1,1,0,1,0,0,1,0]),n}return(0,p.default)(e,t),(0,u.default)(e,[{key:"draw",value:function(t,e,n,i){var o=this.gl;if(e){var r=t.center,a=t.zoom,l=t.getDistanceRatio(),s=i.distanceScales,u=(0,w.splitLatLngNumber)(r.lat),c=(0,w.splitLatLngNumber)(r.lng);o.useProgram(o.program),o.uniformMatrix4fv(this.uMatrix,!1,e.elements),o.uniform4f(this.uCenter,c.high,u.high,c.low,u.low),o.uniform1f(this.uZoom,a),o.uniform3f(this.uPixelsPerMeter,l,l,l),o.uniform3f(this.uProject_uCommonUnitsPerWorldUnit,s.pixelsPerDegree[0],s.pixelsPerDegree[1],s.pixelsPerDegree[2]),o.uniform3f(this.uProject_uCommonUnitsPerWorldUnit2,s.pixelsPerDegree2[0],s.pixelsPerDegree2[1],s.pixelsPerDegree2[2]),o.uniform2f(this.uResolution,t.width,t.height),o.uniform1f(this.picking_usePickingColor,i.usePicking?1:0),o.uniform1f(this.u_isSideVertex,1),o.uniform1f(this.u_extruded,1),o.uniform1f(this.u_isWireframe,i.drawBorder?1:0),o.uniform1f(this.u_elevationScale,1),o.uniform1f(this.u_opacity,1),this.drawTile(n.uid,n,i.drawBorder)}}},{key:"drawTile",value:function(t,e,n){var i=this.gl,o=this.store,r=!1;if(o){o.exist(t)?this._hasChangedBuffer(t,e)&&(r=!0):o.set(t,this.createBuffer(t,e));var a=o.get(t);a.vertexPositions.bind(),a.vertexPositions.pointToAttrib({location:this.vertexPositions,size:2,type:i.FLOAT}),k.default.forIn(a,function(t,n){if("vertexPositions"!==t){var o=n.buffer,a=n.location,l=n.size,s=n.type;o.bind(),r&&(o.bufferData(e[t],{usage:i.DYNAMIC_DRAW}),n.data=e[t]),"indices"!==t&&(o.pointToAttrib({location:a,size:l,type:s}),i.vertexAttribDivisor(a,1))}}),i.drawArraysInstanced(n?i.LINE_STRIP:i.TRIANGLE_FAN,0,4,e.elevations.length),i.bindBuffer(i.ARRAY_BUFFER,null),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null),i.vertexAttribDivisor(this.positions,0),i.vertexAttribDivisor(this.positions64xyLow,0),i.vertexAttribDivisor(this.elevations,0),i.vertexAttribDivisor(this.fillColors,0),i.vertexAttribDivisor(this.lineColors,0),i.vertexAttribDivisor(this.nextPositions,0),i.vertexAttribDivisor(this.nextPositions64xyLow,0),i.vertexAttribDivisor(this.pickingColors,0),i.vertexAttribDivisor(this.vertexValid,0)}}},{key:"_hasChangedBuffer",value:function(t,e){var n=this.store.get(t);for(var i in n)if(n.hasOwnProperty(i)&&e[i]&&"indices"!==i&&n[i].data!==e[i])return!0;return!1}},{key:"createBuffer",value:function(t,e){var n=this.gl;if(e){var i={},o={elevations:{location:this.elevations,size:1,type:n.FLOAT},fillColors:{location:this.fillColors,size:4,type:n.UNSIGNED_BYTE},lineColors:{location:this.lineColors,size:4,type:n.UNSIGNED_BYTE},pickingColors:{location:this.pickingColors,size:3,type:n.UNSIGNED_BYTE},positions:{location:this.positions,size:3,type:n.FLOAT},positions64xyLow:{location:this.positions64xyLow,size:2,type:n.FLOAT},vertexValid:{location:this.vertexValid,size:1,type:n.UNSIGNED_BYTE},nextPositions:{location:this.nextPositions,size:3,type:n.FLOAT},nextPositions64xyLow:{location:this.nextPositions64xyLow,size:2,type:n.FLOAT},indices:{}};return this._vertPositions&&(i.vertexPositions=new T.default(n,{data:this._vertPositions})),k.default.forIn(o,function(t,o){i[t]=(0,_.default)({data:e[t],buffer:new T.default(n,{target:"indices"===t?n.ELEMENT_ARRAY_BUFFER:n.ARRAY_BUFFER,data:e[t],usage:n.DYNAMIC_DRAW})},o)}),i}}},{key:"destroy",value:function(){this._vertPositions=null,(0,h.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}}]),e}(y.default);e.default=M},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(14),r=i(o),a=n(2),l=i(a),s=n(0),u=i(s),c=n(1),f=i(c),d=n(4),h=i(d),v=n(21),p=i(v),m=n(3),_=i(m),g=n(102),y=i(g),x=n(486),b=i(x),S=n(85),w=n(104),E=n(112),T=i(E),I=n(127),A=n(103),k=i(A),P=n(914),M=i(P),L=n(7),C=i(L),N=n(276),O=i(N),R=n(42),V=i(R),B=!1,F=new Image;F.onload=function(){B=!0},F.src=M.default;var z=function(t){function e(t){(0,u.default)(this,e);var n=(0,h.default)(this,(e.__proto__||(0,l.default)(e)).call(this,t));return n.store=new S.Store("buffer",128,16,I.deleteInstanceCacllback),n.shaderSource=b.default,n.shaderParams={getAttribLocation:["positions","instanceStartPositions","instanceEndPositions","instanceLeftDeltas","instanceRightDeltas","instanceStartEndPositions64xyLow","instanceWidths","instanceColors","instanceLineInfo","instanceArrowInfo","instanceArrowStartPositions","instancePickingColors"],getUniformLocation:["uMatrix","uCenter","uZoom","uPixelsPerMeter","uResolution","uProject_uCommonUnitsPerWorldUnit","uProject_uCommonUnitsPerWorldUnit2","picking_usePickingColor","u_isBorder","u_widthScale","u_widthMinPixels","u_widthMaxPixels","u_miterLimit","u_lineJoin","u_opacity","u_arrowSampler"]},n.modelPositions=new Int16Array([0,1,0,-1,1,1,1,-1]),n.modelIndicies=new Uint8Array([0,1,2,1,3,2]),n}return(0,_.default)(e,t),(0,f.default)(e,[{key:"loadTexture",value:function(){B?(this._arrowTex||(this._arrowTex=new k.default(this.gl,{tex:F}),this._arrowTex.upload({flipY:!0})),this._arrowTex.bind()):(this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,null))}},{key:"afterDraw",value:function(){this._arrowTex&&this._arrowTex.unbind()}},{key:"draw",value:function(t,e,n,i){var o=this.gl;if(e){var r=t.center,a=t.zoom,l=t.getDistanceRatio(),s=i.distanceScales,u=(0,w.splitLatLngNumber)(r.lat),c=(0,w.splitLatLngNumber)(r.lng);o.useProgram(o.program),o.uniformMatrix4fv(this.uMatrix,!1,e.elements),o.uniform4f(this.uCenter,c.high,u.high,c.low,u.low),o.uniform1f(this.uZoom,a),o.uniform3f(this.uPixelsPerMeter,l,l,l),o.uniform3f(this.uProject_uCommonUnitsPerWorldUnit,s.pixelsPerDegree[0],s.pixelsPerDegree[1],s.pixelsPerDegree[2]),o.uniform3f(this.uProject_uCommonUnitsPerWorldUnit2,s.pixelsPerDegree2[0],s.pixelsPerDegree2[1],s.pixelsPerDegree2[2]),o.uniform2f(this.uResolution,t.width,t.height),o.uniform1f(this.picking_usePickingColor,i.usePicking?1:0),o.uniform1f(this.u_isBorder,i.drawBorder?1:0),o.uniform1f(this.u_widthScale,1/l),o.uniform1f(this.u_widthMinPixels,0),o.uniform1f(this.u_widthMaxPixels,1e3),o.uniform1f(this.u_miterLimit,150),o.uniform1f(this.u_lineJoin,1),o.uniform1f(this.u_opacity,1),o.uniform1i(this.u_arrowSampler,0);var f=this._calcArrowStratPosition(n,t);n.instanceArrowStartPositionList=f,this.drawTileInstance(n.uid,n,i.drawBorder)}}},{key:"_calcArrowStratPosition",value:function(t,e){var n=t.count,i=t.instanceArrowInfoList;if(0===i[1])return new Float32Array(n);for(var o=t.instanceStartPositionList,r=t.instanceEndPositionList,a=t.instanceStartEndPostions64xyLowList,l=e.getDistanceRatio(),s=i[1],u=s+i[2],c=0,f=new Float32Array(n),d=0;d<n;d++){var h=new V.default(o[3*d+1]+a[4*d+1],o[3*d]+a[4*d]),v=new V.default(r[3*d+1]+a[4*d+3],r[3*d]+a[4*d+2]),p=(0,O.default)(h,v),m=p*l;if(c<s)f[d]=0,c=m%u;else{var _=u-c;m<h?(f[d]=-1,c+=m):(f[d]=_,c=(m-_)%u)}}return f}},{key:"drawTileInstance",value:function(t,e,n){var i=this.gl,o=this.store,r=!1;if(o){o.exist(t)?this._hasChangedBuffer(t,e)&&(r=!0):o.set(t,this.createBuffer(t,e));var a=o.get(t);a.positions.bind(),a.positions.pointToAttrib({location:this.positions,size:2,type:i.SHORT}),a.indices.bind(),C.default.forIn(a.instanceBuffers,function(t,o){if(n){if("instanceColorList"===t||"instanceWidthList"===t)return}else if("instanceBorderColorList"===t||"instanceBorderWidthList"===t)return;var a=o.buffer,l=o.location,s=o.size,u=o.type;a.bind(),r&&(a.bufferData(e[t],{usage:i.DYNAMIC_DRAW}),o.data=e[t]),a.pointToAttrib({location:l,size:s,type:u}),i.vertexAttribDivisor(l,1)}),i.drawElementsInstanced(i.TRIANGLES,this.modelIndicies.length,i.UNSIGNED_BYTE,0,e.count),i.bindBuffer(i.ARRAY_BUFFER,null),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null),i.vertexAttribDivisor(this.instanceStartPositions,0),i.vertexAttribDivisor(this.instanceEndPositions,0),i.vertexAttribDivisor(this.instanceLeftDeltas,0),i.vertexAttribDivisor(this.instanceRightDeltas,0),i.vertexAttribDivisor(this.instanceStartEndPositions64xyLow,0),i.vertexAttribDivisor(this.instancePickingColors,0),i.vertexAttribDivisor(this.instanceColors,0),i.vertexAttribDivisor(this.instanceWidths,0),i.vertexAttribDivisor(this.instanceLineInfo,0),i.vertexAttribDivisor(this.instanceArrowInfo,0),i.vertexAttribDivisor(this.instanceArrowStartPositions,0)}}},{key:"_hasChangedBuffer",value:function(t,e){var n=this.store.get(t),i=n.instanceBuffers;for(var o in i)if(i.hasOwnProperty(o)&&e[o]&&i[o].data!==e[o])return!0;return!1}},{key:"createBuffer",value:function(t,e){var n=this.gl,i={positions:null,indices:null,instanceBuffers:{}};if(this.modelPositions&&(i.positions=new T.default(n,{data:this.modelPositions})),this.modelIndicies&&(i.indices=new T.default(n,{target:n.ELEMENT_ARRAY_BUFFER,data:this.modelIndicies})),e){var o={instanceStartPositionList:{location:this.instanceStartPositions,size:3,type:n.FLOAT},instanceEndPositionList:{location:this.instanceEndPositions,size:3,type:n.FLOAT},instanceLeftDeltaList:{location:this.instanceLeftDeltas,size:3,type:n.FLOAT},instanceRightDeltaList:{location:this.instanceRightDeltas,size:3,type:n.FLOAT},instanceStartEndPostions64xyLowList:{location:this.instanceStartEndPositions64xyLow,size:4,type:n.FLOAT},instanceColorList:{location:this.instanceColors,size:4,type:n.UNSIGNED_BYTE},instanceBorderColorList:{location:this.instanceColors,size:4,type:n.UNSIGNED_BYTE},instanceWidthList:{location:this.instanceWidths,size:1,type:n.FLOAT},instanceBorderWidthList:{location:this.instanceWidths,size:1,type:n.FLOAT},instanceLineInfoList:{location:this.instanceLineInfo,size:3,type:n.UNSIGNED_BYTE},instanceArrowInfoList:{location:this.instanceArrowInfo,size:4,type:n.UNSIGNED_BYTE},instancePickingColorList:{location:this.instancePickingColors,size:3,type:n.UNSIGNED_BYTE},instanceArrowStartPositionList:{location:this.instanceArrowStartPositions,size:1,type:n.FLOAT}};C.default.forIn(o,function(t,o){e[t]&&(i.instanceBuffers[t]=(0,r.default)({data:e[t],buffer:new T.default(n,{data:e[t],usage:n.DYNAMIC_DRAW})},o))})}return i}},{key:"destroy",value:function(){this.modelIndicies=null,this.modelPositions=null,this._arrowTex&&(this._arrowTex.delete(),this._arrowTex=null),(0,p.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"destroy",this).call(this)}}]),e}(y.default);e.default=z},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(102),p=i(v),m=n(476),_=i(m),g=n(85),y=n(127),x=function(t){function e(t){(0,l.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return n.store=new g.Store("buffer",1024,128,y.deleteBuffersCallback),n.shaderSource=_.default,n.shaderParams={getAttribLocation:["a_Position","a_Info"],getUniformLocation:["u_matrix","u_modelMatrix","u_lightPVMatrix","u_maskSampler","u_maskScale"]},n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"draw",value:function(t,e){var n=this.gl,i=this.store,o=t.vertices,r=t.indeices,a="build_"+t.id,l=e.matrix,s=e.modelMatrix,u=e.lightPVMatrix,c=e.maskScale||1,f=void 0;i.exist(a)?(f=i.get(a),this.bindVertexBuffer(o,f.vertices),this.bindElementBuffer(r,f.indices)):f=i.set(a,{vertices:this.bindVertexBuffer(o),indices:this.bindElementBuffer(r),length:r.length}),n.uniformMatrix4fv(this.u_matrix,!1,l),n.uniformMatrix4fv(this.u_modelMatrix,!1,s),n.uniformMatrix4fv(this.u_lightPVMatrix,!1,u),n.uniform1i(this.u_maskSampler,0),n.uniform1f(this.u_maskScale,c),n.drawElements(n.TRIANGLES,f.length,n.UNSIGNED_SHORT,0)}}]),e}(p.default);e.default=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return t.some(function(t){return(0,ot.isOverlayLayer)(t.type)})}function r(t){return o(t)||t.some(function(t){return(0,ot.isTextureLayer)(t)||(0,ot.isIndoorLayer)(t)||t.type===ot.RENDER_LAYER_TYPE.mask})}Object.defineProperty(e,"__esModule",{value:!0});var a=n(16),l=i(a),s=n(18),u=i(s),c=n(0),f=i(c),d=n(1),h=i(d),v=n(658),p=n(626),m=i(p),_=n(637),g=i(_),y=n(638),x=i(y),b=n(639),S=i(b),w=n(416),E=i(w),T=n(632),I=i(T),A=n(633),k=i(A),P=n(627),M=i(P),L=n(413),C=i(L),N=n(629),O=i(N),R=n(631),V=i(R),B=n(630),F=i(B),z=n(628),D=i(z),U=n(640),Y=i(U),j=n(634),G=i(j),W=n(17),Z=i(W),X=n(623),H=i(X),Q=n(651),q=i(Q),J=n(647),K=i(J),$=n(646),tt=i($),et=n(648),nt=i(et),it=n(396),ot=n(43),rt=n(419),at=i(rt),lt=n(420),st=i(lt),ut=n(645),ct=n(642),ft=i(ct),dt=n(154),ht=n(275),vt=n(643),pt=i(vt),mt=n(103),_t=i(mt),gt=n(140),yt=n(656),xt=i(yt),bt=n(624),St=i(bt),wt=n(7),Et=function(){function t(e,n){(0,f.default)(this,t),n=n||{};var i=n.renderOptions||{},o=i.preserveDrawingBuffer,r=void 0!==o&&o,a=i.disableAntialias,l=void 0!==a&&a,s=i.disableShadow,u=void 0!==s&&s,c=i.skyOptions,d=void 0===c?{}:c,h=i.fogOptions,v=void 0===h?{}:h;e.style.zIndex=2,this._destroyed=!1,this.styleId=ht.STYLE_ID[n.mapStyleId],this.isDefaultStyle=(0,ht.isDefaultStyle)(n.mapStyleId),this.canvas=e,this.sharpness=Z.default.devicePixelRatio,this.maskScale=.5,this.map=n.map;var p=this.createContext(e,{preserveDrawingBuffer:r});this.textCache=this.isDefaultStyle?new q.default(this.gl):null,this.imageCaches={},this.glyphManager=new tt.default(this.gl),this.markerManager=new nt.default(this.gl),this.lightManager=new St.default,this.painters={base:new m.default({gl:p}),polygon:new g.default({gl:p}),side:new x.default({gl:p}),polyline:new S.default({gl:p}),building:new M.default({gl:p}),buildingShadow:new Y.default({gl:p}),marker:new k.default({gl:p,markerManager:this.markerManager}),symbol:new E.default({gl:p,textCache:this.textCache,glyphManager:this.glyphManager,markerManager:this.markerManager}),image:new C.default({gl:p}),label:new I.default({gl:this.gl,glyphManager:this.glyphManager}),mask:new G.default({gl:p}),indoorMask:new O.default({gl:p}),indoorRegion:new V.default({gl:p}),indoorPoi:new F.default({gl:p,glyphManager:this.glyphManager,markerManager:this.markerManager}),indoorEscalator:new D.default({gl:p})},this.disableAntialias=Z.default.isLowMobileDevice()||l,this.disableShadow=Z.default.isLowMobileDevice()||u,this.createFrameBuffer({skyOptions:d,fogOptions:v}),this.resize(e.clientWidth,e.clientHeight),this.camera=new H.default({map:this.map,view:this.view,look:[0,0,0,0,0,0,0,1,0],scale:n.scale,offset:n.offset}),this.camera.setRotate(n.pitch||0,n.heading||0),this.camera.fogPitch=v.pitch||45,this._updateBgColor()}return(0,h.default)(t,[{key:"setDepth",value:function(t,e){this.gl.depthRange(t,e)}},{key:"createContext",value:function(t,e){var n={alpha:!0,antialias:!1,depth:!0,failIfMajorPerformanceCaveat:!1,powerPreference:(0,W.isPC)()?"high-performance":"default",preserveDrawingBuffer:e.preserveDrawingBuffer||!1,stencil:!1},i=t.getContext("webgl2",n);return i?i.isWebGL2=!0:(i=t.getContext("webgl",n),i.isWebGL2=!1),i.id=wt.uniqueId(),i.clearColor.apply(i,wt.rgbaToGLColor((0,it.getBgColor)(this.styleId))),i.enable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),this.gl=i,this.getExtensions(),i}},{key:"getExtensions",value:function(){var t=this.gl,e=new ut.Extensions(t);t.isWebGL2?(e.set("WEBGL_depth_texture",!0),e.set("OES_element_index_uint",!0)):(e.get("WEBGL_depth_texture","depth textures not supported"),e.get("OES_element_index_uint","element_index_uint not supported"),e.extendWebGL1()),e.get("WEBGL_debug_renderer_info","WEBGL_debug_renderer_info not supported"),t.extensions_TMAP=e}},{key:"createFrameBuffer",value:function(t){var e=this.gl,n={};n.mask=new at.default(e);var i=this.gl.extensions_TMAP.get("WEBGL_depth_texture");n.fxaa=new at.default(e,{attachments:{depth:i?new _t.default(e,{tex:null,internalformat:"DEPTH_COMPONENT24",format:"DEPTH_COMPONENT",type:"UNSIGNED_INT"}):new st.default(this.gl)}}),this.fxaaPass=new ft.default(e),n.fog=new at.default(e),this.fogPass=new pt.default(e,{skyOptions:t.skyOptions,fogColor:t.fogOptions.color,fogRange:t.fogOptions.range}),this.disableShadow||(n.shadow=new at.default(e,{attachments:{depth:i?new _t.default(e,{tex:null,internalformat:"DEPTH_COMPONENT24",format:"DEPTH_COMPONENT",type:"UNSIGNED_INT"}):new st.default(this.gl)}})),this.frameBuffer=n}},{key:"onMapStyleUpdate",value:function(t){if("config"!==t&&this.styleId===t)return void this._updateBgColor();this.isDefaultStyle!==(0,ht.isDefaultStyle)(t)?(this.isDefaultStyle=(0,ht.isDefaultStyle)(t),this.textCache=this.isDefaultStyle?new q.default(this.gl):null,this.painters.symbol.destroy(),this.painters.symbol=null,this.painters.symbol=new E.default({gl:this.gl,textCache:this.textCache,glyphManager:this.glyphManager,markerManager:this.markerManager})):this.painters.symbol.clear(),this.painters.base.clearStore(),this.painters.building.clearStore(),this.styleId=t,this._updateBgColor()}},{key:"getDrawContainer",value:function(){return this.canvas}},{key:"resize",value:function(t,e){var n=this;this.view={left:-t/2,right:t/2,bottom:-e/2,top:e/2,near:-1,far:1e3},this.canvas.width=t*this.sharpness,this.canvas.height=e*this.sharpness,this.gl.viewport(0,0,t*this.sharpness,e*this.sharpness),this.camera&&this.camera.setView(this.view),wt.forIn(this.frameBuffer,function(t,e){e&&e.resize(n.canvas.width,n.canvas.height)})}},{key:"setTilesMatrix",value:function(t){var e=this,n={},i={},o=this.view;wt.forIn(t,function(t,r){var a=(0,v.getModelMatrix)({view:o,offset:r.offset,scale:r.scale});n[t]=e.camera.pvMatrix.clone().multiply(a),i[t]=a}),this.tilesMatrix=n,this.tilesModelMatrix=i}},{key:"catcheTextTexture",value:function(t,e){if(this.painters.symbol&&(this.painters.symbol.preDraw({iconsLoader:e}),t&&0!==t.length)){var n=this.textCache;n.loadTexture();for(var i,o=0;i=t[o];o++)i.features&&""!==i.features&&n.add(i.id,i.features)}}},{key:"clear",value:function(){var t=this.gl;t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT)}},{key:"preRender",value:function(t,e){t=t||this.transform;var n=t&&t.heading||0,i=t&&t.pitch||0;this.camera.setRotate(i,n),this.setTilesMatrix(e)}},{key:"drawMask",value:function(t){var e=this,n=this.maskScale,i=t.filter(function(t){return t.type===ot.RENDER_LAYER_TYPE.indoorRegion}),o=t.filter(function(t){return t.type===ot.RENDER_LAYER_TYPE.mask});this.frameBuffer.mask.bind();var r=this.gl;if(r.clearColor(0,0,0,1),this.clear(),i.length||o.length){var a=this.transform,l=(new gt.Matrix4).scale(n,n,n).multiply(this.camera.pvMatrix);this.painters.indoorMask.preDraw(),i.forEach(function(t){var n=t.tiles&&t.tiles[0];if(n){var i=n.features,o=i.center,r=i.bounds,s=i.floorIndex,u={uid:t.id+"_"+s+"_bounds",center:o,position:r[0].top.position,index:r[0].top.index};e.painters.indoorMask.draw(u,a,l,{color:[1,1,1,1]})}}),this.painters.mask.preDraw(),o.forEach(function(t){var n=t.tiles&&t.tiles[0];n&&e.painters.mask.draw(a,l,n.features,{color:[1,1,1,1],distanceScales:e.distanceScales})})}r.clearColor.apply(r,wt.rgbaToGLColor(this.background)),this.frameBuffer.mask.unbind()}},{key:"drawShadow",value:function(t){var e=this,n=t.filter(function(t){return t.type===ot.RENDER_LAYER_TYPE.building3d});if(n.length){this.frameBuffer.shadow.bind();var i=this.gl;this.clear(),i.enable(i.DEPTH_TEST),i.enable(i.CULL_FACE),i.colorMask(!1,!1,!1,!1);var o=this.lightManager.getLightPVMatrix(this.view);n.forEach(function(t){e.drawBuildingShadows(t,o)}),i.disable(i.DEPTH_TEST),i.disable(i.CULL_FACE),i.colorMask(!0,!0,!0,!0),this.frameBuffer.shadow.unbind()}}},{key:"render",value:function(t,e,n,i){if(!this._destroyed){e=e||this.transform,this.transform=e,t=t||this.data,this.data=t,this.distanceScales=r(t)?e.getDistanceScales():null,this.lightManager.update({transform:e,camera:this.camera,view:this.view}),this.textCache&&this.textCache.updateRenderTiles(this.tilesMatrix),this.drawMask(t),!this.disableShadow&&this.lightManager.getShadowLight()&&this.drawShadow(t);var o=!(i.disableAntialias||this.disableAntialias),a=this.camera.getFogEdge(),l=this.gl.extensions_TMAP.get("WEBGL_depth_texture")&&a[1]<1/0,s=[],u=[];if(t.forEach(function(t){t.rank>=dt.RANK_CONFIG.POI.min?u.push(t):s.push(t)}),this.frameBuffer.fxaa.bind(),this.clear(),this.draw(s,n,i),this.fxaaPass.setProps({enabled:o}),this.fxaaPass.render({inputBuffer:this.frameBuffer.fxaa,outputBuffer:null}),l){var c=this.camera.pvMatrix.multiplyVector4({elements:[0,0,0,1]}).elements;this.fogPass.setProps({fogEdge:a,depthAtCenter:(c[2]/c[3]+1)/2,depthTexture:this.frameBuffer.fxaa.depth.texture,heading:e.heading}),this.frameBuffer.fog.copy(null),this.fogPass.render({inputBuffer:this.frameBuffer.fog,outputBuffer:null,preserve:!0})}this.draw(u,n,i)}}},{key:"draw",value:function(t,e,n){var i=this,o=n.fadeChange,r=n.iconsLoader;t.forEach(function(n){switch(n.type){case ot.RENDER_LAYER_TYPE.text:i.textCache&&i.catcheTextTexture(n.tiles,r);var a=t.filter(function(t){return t.type===ot.BASE_LAYER_TYPE.point})[0],l=t.filter(function(t){return t.type===ot.BASE_LAYER_TYPE.label})[0];i.drawBaseText(e,o,r,{showPoint:!!a,showLabel:!!l});break;case ot.RENDER_LAYER_TYPE.base:i.drawBase(n);break;case ot.RENDER_LAYER_TYPE.building3d:i.drawBuildings(n,!0);break;case ot.RENDER_LAYER_TYPE.building2d:i.drawBuildings(n,!1);break;case ot.RENDER_LAYER_TYPE.circle:case ot.RENDER_LAYER_TYPE.rectangle:case ot.RENDER_LAYER_TYPE.polygon:i.drawPolygons(n,{distanceScales:i.distanceScales,usePicking:!1});break;case ot.RENDER_LAYER_TYPE.polyline:i.drawPolylines(n,{distanceScales:i.distanceScales,usePicking:!1});break;case ot.RENDER_LAYER_TYPE.label:i.drawLabels(n,{distanceScales:i.distanceScales,usePicking:!1});break;case ot.RENDER_LAYER_TYPE.marker:i.drawMarkers(n,{distanceScales:i.distanceScales,usePicking:!1});break;case ot.RENDER_LAYER_TYPE.visualPlugin:n.visualPlugin.draw(i.camera);break;case ot.RENDER_LAYER_TYPE.imageTile:i.drawImageTile(n);break;case ot.RENDER_LAYER_TYPE.canvasGround:case ot.RENDER_LAYER_TYPE.imageGround:i.drawGroundLayer(n);break;case ot.RENDER_LAYER_TYPE.indoorRegion:i.drawIndoorRegions(n);break;case ot.RENDER_LAYER_TYPE.indoorPoi:i.drawIndoorPois(n,{fadeChange:o});break;case ot.RENDER_LAYER_TYPE.indoorEscalator:i.drawIndoorEscalators(n)}})}},{key:"hasPickableLayer",value:function(){return o(this.data)}},{key:"renderForPicking",value:function(t){var e=this;if(this.data){var n=this.data.filter(function(t){return(0,ot.isOverlayLayer)(t.type)});return n.length>0&&this.distanceScales?(n.forEach(function(n,i){switch(n.type){case ot.RENDER_LAYER_TYPE.rectangle:case ot.RENDER_LAYER_TYPE.circle:case ot.RENDER_LAYER_TYPE.polygon:t&&t(i),e.drawPolygons(n,{distanceScales:e.distanceScales,usePicking:!0,picking_zindex:i});break;case ot.RENDER_LAYER_TYPE.polyline:t&&t(i),e.drawPolylines(n,{distanceScales:e.distanceScales,usePicking:!0,picking_zindex:i});break;case ot.RENDER_LAYER_TYPE.label:t&&t(i),e.drawLabels(n,{distanceScales:e.distanceScales,usePicking:!0});break;case ot.RENDER_LAYER_TYPE.marker:t&&t(i),e.drawMarkers(n,{distanceScales:e.distanceScales,usePicking:!0})}}),n):null}}},{key:"getBounds",value:function(t,e,n){return this.camera.getBounds(t,e,n)}},{key:"drawBaseText",value:function(t,e,n,i){var o=this.painters,r=this.maskScale,a=this.gl;o.symbol&&(o.symbol.preDraw({iconsLoader:n,maskTexture:this.frameBuffer.mask.color}),i.showLabel&&t.calculateAlsoShowedLabel(this.tilesMatrix,this.camera,this.transform),o.symbol.draw(this.transform,this.tilesMatrix,t,{showPoint:i.showPoint,showLabel:i.showLabel,asBackground:!1,updateSubData:!0,fadeChange:e,iconsLoader:n,maskScale:r}),o.symbol.afterDraw(),this.frameBuffer.mask.color.unbind(a,{textureIndex:3}))}},{key:"drawBuildings",value:function(t,e){var n=this,i=t;if(i&&0!==i.tiles.length){var o=this.gl;this._withBlendEliminationDraw(o,function(){var t=n.painters.building,r=i.tiles;t.preDraw({lightUniforms:n.lightManager.uniforms,shadowTexture:n.frameBuffer.shadow&&n.frameBuffer.shadow.depth}),n.frameBuffer.mask.color.bind(o);var a=!0,l=!1,s=void 0;try{for(var c,f=(0,u.default)(r);!(a=(c=f.next()).done);a=!0){var d=c.value,h=d.features;if(h){var v={matrix:n.tilesMatrix[d.id].elements,modelMatrix:n.tilesModelMatrix[d.id].elements,maskScale:n.maskScale};t.draw(h,v,{scale:d.scale,use3D:e})}}}catch(t){l=!0,s=t}finally{try{!a&&f.return&&f.return()}finally{if(l)throw s}}n.frameBuffer.mask.color.unbind(),t.afterDraw()},{useCullFace:!0})}}},{key:"drawBuildingShadows",value:function(t,e){if(t&&0!==t.tiles.length){var n=this.painters.buildingShadow;n.preDraw(),this.frameBuffer.mask.color.bind(this.gl);var i=!0,o=!1,r=void 0;try{for(var a,l=(0,u.default)(t.tiles);!(i=(a=l.next()).done);i=!0){var s=a.value,c=s.features;if(c){var f={matrix:this.tilesMatrix[s.id].elements,modelMatrix:this.tilesModelMatrix[s.id].elements,lightPVMatrix:e.elements,maskScale:this.maskScale};n.draw(c,f,{scale:s.scale})}}}catch(t){o=!0,r=t}finally{try{!i&&l.return&&l.return()}finally{if(o)throw r}}this.frameBuffer.mask.color.unbind()}}},{key:"drawBase",value:function(t){if(t&&0!==t.tiles.length){var e=this.painters.base,n=t.tiles;e.preDraw({lightUniforms:this.lightManager.uniforms,shadowTexture:this.frameBuffer.shadow&&this.frameBuffer.shadow.depth});var i=!0,o=!1,r=void 0;try{for(var a,l=(0,u.default)(n);!(i=(a=l.next()).done);i=!0){var s=a.value,c=s.features;if(c){var f={matrix:this.tilesMatrix[s.id].elements,modelMatrix:this.tilesModelMatrix[s.id].elements};e.draw(c,f,s.scale,this.transform._zoom)}}}catch(t){o=!0,r=t}finally{try{!i&&l.return&&l.return()}finally{if(o)throw r}}e.afterDraw()}}},{key:"drawPolygons",value:function(t,e){var n=this.gl,i=t.tiles&&t.tiles[0];if(i&&i.features){var o=this.camera.getLookPosition().elements,r=this.camera.getLightPosition().elements,a=this.camera.pvMatrix;e.usePicking||n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE),n.enable(n.CULL_FACE),n.enable(n.DEPTH_TEST),n.colorMask(!1,!1,!1,!1),this._reallyDrawPolygon(a,i,o,r,e),n.disable(n.DEPTH_TEST),n.colorMask(!0,!0,!0,!0),this._reallyDrawPolygon(a,i,o,r,e),n.disable(n.CULL_FACE),e.usePicking||n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA)}}},{key:"_reallyDrawPolygon",value:function(t,e,n,i,o){this.painters.side.preDraw({lightUniforms:this.lightManager.uniforms}),this.painters.side.draw(this.transform,t,e.features,{drawBorder:!0,distanceScales:o.distanceScales,usePicking:o.usePicking,picking_zindex:o.picking_zindex,cameraPosition:n,lightPosition:i}),this.painters.side.draw(this.transform,t,e.features,{drawBorder:!1,distanceScales:o.distanceScales,usePicking:o.usePicking,picking_zindex:o.picking_zindex,cameraPosition:n,lightPosition:i}),this.painters.polygon.preDraw({lightUniforms:this.lightManager.uniforms}),this.painters.polygon.draw(this.transform,t,e.features,{distanceScales:o.distanceScales,usePicking:o.usePicking,picking_zindex:o.picking_zindex,cameraPosition:n,lightPosition:i})}},{key:"drawPolylines",value:function(t,e){var n=this.gl;this.painters.polyline.preDraw();var i=t.tiles&&t.tiles[0];if(i&&i.features){var o=this.camera.pvMatrix;e.usePicking||n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA),this.painters.polyline.draw(this.transform,o,i.features,{drawBorder:!0,distanceScales:e.distanceScales,usePicking:e.usePicking,picking_zindex:e.picking_zindex}),this.painters.polyline.draw(this.transform,o,i.features,{drawBorder:!1,distanceScales:e.distanceScales,usePicking:e.usePicking,picking_zindex:e.picking_zindex}),e.usePicking||n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA)}}},{key:"drawImageTile",value:function(t){var e=this.tilesMatrix,n=this.painters,i=this.imageCaches,o=this.gl;i[t.id]||(i[t.id]=new K.default(o,{itemWidth:t.tileSize}));var r=i[t.id];t.tiles.forEach(function(t){r.addImage(t.id,t.features)}),r.loadTexture();var a=n.image;a.preDraw(),t.tiles.forEach(function(n){a.draw({matrix:e[n.id],size:{width:t.tileSize,height:t.tileSize},texInfo:r.getTexCoord(n.id),opacity:t.opacity})}),a.afterDraw()}},{key:"drawGroundLayer",value:function(t){var e=this,n=this.painters,i=this.gl,o=n.image;o.preDraw(),t.tiles.forEach(function(n){n.features.texture.bind(i);var r=n.features.bounds,a=e.transform.latLngToCenterLocalPixelByDistanceScales(r.getNorthEast(),{distanceScales:e.distanceScales,center:r.getSouthWest()});a.x=Math.abs(a.x),a.y=Math.abs(a.y);var l=e.transform.latLngToCenterLocalPixelByDistanceScales(n.features.center,{distanceScales:e.distanceScales,center:e.map.getCenter()});o.draw({matrix:e.camera.pvMatrix.clone().translate(l.x-a.x/2,l.y+a.y/2,0),size:{width:a.x,height:a.y},texInfo:n.features.texInfo,opacity:t.opacity}),n.features.texture.unbind(i)}),o.afterDraw()}},{key:"drawLabels",value:function(t,e){var n=this.gl;this.painters.label.preDraw();var i=t.tiles&&t.tiles[0];if(i&&i.features){e.usePicking||n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);var o=this.camera.pvMatrix;t._enableCollision&&this._needLabelCalcCollision&&(i.features.instanceShowList=(0,xt.default)(i.features.labelInfoList,this.transform,this.camera),this._needLabelCalcCollision=!1),this.painters.label.draw(this.transform,o,i.features,{distanceScales:e.distanceScales,usePicking:e.usePicking,picking_zindex:e.picking_zindex}),e.usePicking||n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA)}}},{key:"updateLabel",value:function(){this._needLabelCalcCollision=!0}},{key:"drawMarkers",value:function(t,e){var n=t.tiles&&t.tiles[0];if(n&&n.features&&n.features.count>0){this.painters.marker.preDraw();var i=this.camera.pvMatrix;this.painters.marker.draw(this.transform,i,n.features,{distanceScales:e.distanceScales,usePicking:e.usePicking,picking_zindex:e.picking_zindex})}}},{key:"drawIndoorRegions",value:function(t){var e=this,n=this.gl,i=t.tiles&&t.tiles[0];if(i){var o=i.features,r=o.center,a=o.regions,l=o.floorIndex,s=a[0],u=this.camera.pvMatrix;n.enable(n.DEPTH_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),this.painters.indoorRegion.preDraw({lightUniforms:this.lightManager.uniforms});["sides","top"].forEach(function(n){var i={uid:t.id+"_"+l+"_region_"+n,center:r,position:s[n].position,color:s[n].color,normal:s[n].normal,index:s[n].index},o={distanceScales:e.distanceScales};e.painters.indoorRegion.draw(i,e.transform,u,o)}),n.disable(n.DEPTH_TEST),n.disable(n.CULL_FACE)}}},{key:"drawIndoorEscalators",value:function(t){var e=this.gl,n=t.tiles&&t.tiles[0];if(n){var i=n.features,o=i.escalators[0];if(o){o.uid=t.id,o.center=i.center;var r=this.camera.pvMatrix;e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),this.painters.indoorEscalator.preDraw({lightUniforms:this.lightManager.uniforms});var a={distanceScales:this.distanceScales};this.painters.indoorEscalator.draw(o,this.transform,r,a),e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE)}}}},{key:"drawIndoorPois",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.tiles&&t.tiles[0];if(n){var i=n.features,o=Math.round(this.transform.zoom);if(i.pois[o]&&i.pois[o][0]){var r=i.pois[o][0].instance;if(r.id=n.id+"_"+o,r.center=i.center,!r.count)return;this.painters.indoorPoi.preDraw(),this.painters.indoorPoi.draw(this.transform,this.camera.pvMatrix,r,{showPoint:!0,showLabel:!0,distanceScales:this.distanceScales,iconsLoader:{},fadeChange:e.fadeChange,updateSubData:!0})}}}},{key:"_withBlendEliminationDraw",value:function(t,e,n){t.enable(t.DEPTH_TEST),n.useCullFace&&t.enable(t.CULL_FACE),t.colorMask(!1,!1,!1,!1),e&&e(),t.depthFunc(t.LEQUAL),t.colorMask(!0,!0,!0,!0),e&&e(),t.disable(t.DEPTH_TEST),n.useCullFace&&t.disable(t.CULL_FACE)}},{key:"_updateBgColor",value:function(t){if(!this._destroyed){var e=(0,it.getBgColor)(this.styleId);(e!==this.background||t)&&(this.background=e,this.gl.clearColor.apply(this.gl,wt.rgbaToGLColor(e)),this.fogPass.setFogColor(wt.rgbaToGLColor(e)))}}},{key:"getImageCache",value:function(t){return this.imageCaches[t]}},{key:"destroy",value:function(){var t=this;if(!this._destroyed){this.camera.destroy(),this.camera=null,this.styleId=null,this.isDefaultStyle=null,this.canvas=null,this.sharpness=null,this.maskScale=null,this.distanceScales=null,this.map=null,this.textCache&&this.textCache.destroy(),this.textCache=null,wt.forIn(this.imageCaches,function(t,e){e.destroy()}),this.imageCaches=null,this.glyphManager.destroy(),this.glyphManager=null,this.markerManager.destroy(),this.markerManager=null,this.fxaaPass&&(this.fxaaPass.destroy(),this.fxaaPass=null),this.fogPass&&(this.fogPass.destroy(),this.fogPass=null),(0,l.default)(this.frameBuffer).keys(function(e){t.frameBuffer[e].delete()}),this.frameBuffer=null,(0,l.default)(this.painters).forEach(function(e){t.painters[e].destroy()}),this.painters=null;var e=this.gl.extensions_TMAP.get("WEBGL_lose_context");e&&e.loseContext(),this.gl.extensions_TMAP.destroy(),delete this.gl.extensions_TMAP,this.gl=null,this._destroyed=!0}}}]),t}();e.default=Et},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(14),r=i(o),a=n(2),l=i(a),s=n(0),u=i(s),c=n(1),f=i(c),d=n(4),h=i(d),v=n(3),p=i(v),m=n(418),_=i(m),g=n(635),y=i(g),x=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,u.default)(this,e),void 0===n.enabled&&(n.enabled=!0);var i=(0,h.default)(this,(e.__proto__||(0,l.default)(e)).call(this,t,(0,r.default)({id:"fxaa-pass"},n)));return i._painter=new y.default({gl:t}),i}return(0,p.default)(e,t),(0,f.default)(e,[{key:"_renderPass",value:function(t){var e=t.inputBuffer;this._painter.preDraw(),this._painter.draw({resolution:[e.width,e.height],enabled:this.props.enabled,texture:e.texture})}}]),e}(_.default);e.default=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(32),r=i(o),a=n(2),l=i(a),s=n(0),u=i(s),c=n(1),f=i(c),d=n(4),h=i(d),v=n(3),p=i(v),m=n(418),_=i(m),g=n(636),y=i(g),x=n(103),b=i(x),S=n(111),w=n(233),E=i(w),T=30*Math.PI/180,I=0,A=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.fogColor,o=n.skyOptions,r=n.id,a=void 0===r?"fog-pass":r,s=n.fogRange,c=void 0===s?[200,400]:s,f=n.heading,d=void 0===f?0:f;(0,u.default)(this,e);var v=(0,h.default)(this,(e.__proto__||(0,l.default)(e)).call(this,t,{id:a,fogRange:c,heading:d}));return v._painter=new y.default({gl:t}),v._setSkyOptions(o),i?(v.setFogColor(new E.default(i).toArray()),v._disableColorSetting=!0):v.setFogColor(),v}return(0,p.default)(e,t),(0,f.default)(e,[{key:"setFogColor",value:function(t){this._disableColorSetting||this._painter.setFogColor(t)}},{key:"_setSkyOptions",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width,i=e.height,o=e.src,r=e.color,a=e.horizontal,l=void 0===a?S.IMAGE_DISPLAY.SCALE:a,s=e.vertical,u=void 0===s?S.IMAGE_DISPLAY.ORIGIN:s,c=e.brightness,f=void 0===c?1:c,d=e.animated,h=void 0!==d&&d;if(this.skyTex=void 0,o){var v=new Image;v.onload=function(){t.skyTex=new b.default(t.gl,{tex:v,width:n,height:i}),t.skyTex.upload({flipY:!0})},v.src=o}this._painter.setSkyColor(r?new E.default(r).toArray():void 0),this.skyDisplay=[l,u],this.skyAnimated=h,this._painter.setBrightness(f)}},{key:"_renderPass",value:function(t){var e=t.inputBuffer,n=this.props.fogRange.map(function(t){return 2*t/e.height}),i=this.skyTex,o=[0,0,0,0];i&&(o=[i.width/e.width,i.height/e.height].concat((0,r.default)(this.skyDisplay))),this._painter.preDraw(),this._painter.draw({rangeList:n,fogEdge:[this.props.fogEdge[1],(this.props.fogEdge[2]+1)/2,this.props.depthAtCenter],texture:e.texture,depth:this.props.depthTexture,skyTex:i,skyInfo:o,viewInfo:[this.props.heading*Math.PI/180,Math.atan(e.width/e.height*Math.tan(T/2)),this.skyAnimated,I+=3e-4]})}},{key:"_onDestroy",value:function(){this.skyTex&&this.skyTex.delete()}}]),e}(_.default);e.default=A},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=t.deviceX,n=t.deviceY,i=t.deviceRadius,o=t.deviceWidth,r=t.deviceHeight;if(!(e>=0&&n>=0&&e<o&&n<r))return null;var a=Math.max(0,e-i),l=Math.max(0,n-i);return{x:a,y:l,width:Math.min(o,e+i)-a+1,height:Math.min(r,n+i)-l+1,centerX:e,centerY:n}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),a=i(r),l=n(1),s=i(l),u=n(234),c=n(17),f=i(c),d=n(419),h=i(d),v=function(t){return t.useDevicePixels&&"undefined"!=typeof window?f.default.devicePixelRatio:1},p=function(){function t(e){var n=this;(0,a.default)(this,t),this.map=e,this.render=e.renderEngine,this._eventHandlers=[],this._fbo=this.createFBO(),this._eventHandlers.push(f.default.on(this.map,"resize",function(){n.updateFBO()}))}return(0,s.default)(t,[{key:"createFBO",value:function(){var t=this.render.gl,e=this.render.canvas.width,n=this.render.canvas.height,i=new h.default(t,{width:e,height:n});return i.unbind(),i}},{key:"updateFBO",value:function(){var t=this.render.canvas.width,e=this.render.canvas.height;this._fbo.resize(t,e)}},{key:"_getPickingFBO",value:function(){return(this._fbo||this.createFBO()).buffer}},{key:"pickObject",value:function(t){var e=t.x,n=t.y,i=t.mode,o=t.radius,r=t.callback,a=this._pickObject({x:e,y:n,radius:o,mode:i,pickingFBO:this._getPickingFBO(),lastPickedInfo:this._lastPickedInfo,useDevicePixels:!0});r&&r(a)}},{key:"_pickObject",value:function(t){var e=t.x,n=t.y,i=t.radius,r=t.mode,a=t.pickingFBO,l=t.useDevicePixels,s=t.viewport,c=v({useDevicePixels:l}),f=Math.round(e*c),d=Math.round(this.render.canvas.height-n*c),h=Math.round(i*c),p=o({deviceX:f,deviceY:d,deviceRadius:h,deviceWidth:this.render.canvas.width,deviceHeight:this.render.canvas.height}),m=p&&this._getPickedColorFromPickingFBO({viewport:s,useDevicePixels:l,pickingFBO:a,deviceRect:p,mode:r});return{objectIndex:m&&(0,u.decodePickingColor)(m.pickedColor),layerId:m&&m.layerId}}},{key:"_getPickedColorFromPickingFBO",value:function(t){var e=t.deviceRect,n=this.render.gl;this._fbo.bind(),n.enable(n.SCISSOR_TEST),n.scissor(e.x,e.y,e.width,e.height),n.clearColor(0,0,0,.001),n.enable(n.BLEND),n.blendFuncSeparate(n.ONE,n.ZERO,n.CONSTANT_ALPHA,n.ZERO),n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD),n.blendColor(0,0,0,0),n.depthRange(0,1),n.colorMask(!0,!0,!0,!0);var i=null,o=new Uint8Array(4);return this.render.hasPickableLayer()&&(i=this.render.renderForPicking(function(t){n.blendColor(0,0,0,(t+1)/255)}),n.readPixels(e.x,e.y,1,1,n.RGBA,n.UNSIGNED_BYTE,o)),this._fbo.unbind(),n.disable(n.SCISSOR_TEST),n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),this.render._updateBgColor(!0),{layerId:i&&i[o[3]-1]&&i[o[3]-1].id,pickedColor:o}}},{key:"destroy",value:function(){this._eventHandlers.forEach(function(t){t&&t.remove&&t.remove()}),this._fbo&&this._fbo.delete(),this.render=null,this.map=null}}]),t}();e.default=p},function(t,e,n){"use strict";function i(t,e){var n=t.getExtension(e);if(!n)return null;var i=e.split("_")[0],o="_"+i;for(var r in n){var a=n[r],l="function"==typeof a,s=l?i:o,u=r;r.endsWith(s)&&(u=r.substring(0,r.length-s.length)),void 0!==t[u]?l||t[u]===a||console.warn("conflict:",u,t[u],a,r):t[u]=l?function(t){return function(){return t.apply(n,arguments)}}(a):a}return n}Object.defineProperty(e,"__esModule",{value:!0});e.Extensions=function(t){var e={};return{get:function(n,i){if(void 0!==e[n])return e[n];var o=void 0;switch(n){case"WEBGL_depth_texture":o=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":o=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":o=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":o=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:o=t.getExtension(n)}return!o&&i&&console.error(i),e[n]=o,o},set:function(t,n){e[t]=n},extendWebGL1:function(){t.DEPTH_COMPONENT24=t.DEPTH_COMPONENT,i(t,"OES_vertex_array_object"),i(t,"ANGLE_instanced_arrays"),i(t,"WEBGL_depth_texture")},destroy:function(){e=null}}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=t.glyphList,n=t.getGlyphWidth,i=t.fontSize,o=t.glyphHeight,r=t.buffer,l=t.maxCanvasWidth,s=t.mapping,u=void 0===s?{}:s,c=t.xOffset,f=void 0===c?0:c,d=t.yOffset,v=void 0===d?0:d,p=0,m=f;(0,a.default)(e).forEach(function(t,e){if(!u[t]){var a=n(t,e);m+a+2*r>l&&(m=0,p+=1),u[t]={x:m,y:v+p*(o+2*r),fontSize:i,width:a+2*r,height:o+2*r,mask:!0},m+=a+2*r}});var _=o+2*r;return{mapping:u,xOffset:m,yOffset:v+p*_,canvasHeight:(0,h.getPowerOf2)(v+(p+1)*_)}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(86),a=i(r),l=n(0),s=i(l),u=n(1),c=i(u);e.buildMapping=o;var f=n(655),d=i(f),h=n(316),v=n(103),p=i(v),m=n(17),_='"SF Pro SC","SF Pro Display","SF Pro Icons","PingFang SC","Helvetica Neue","Helvetica","Arial", "Microsoft YaHei",sans-serif',g="normal",y=24,x=2,b=.25,S=8,w=1024*((0,m.isPC)()?4:2),E=function(){function t(e){(0,s.default)(this,t),this.setting={fontFamily:_,fontWeight:g,fontSize:y,useSdf:!0,buffer:x,cutoff:b,radius:S},this.gl=e,this._debounceTimeId=null,this.debug=!1}return(0,c.default)(t,[{key:"updateTextStyle",value:function(t,e,n,i){t.font=i+" "+n+"px "+e,t.fillStyle="#000",t.textBaseline="baseline",t.textAlign="left"}},{key:"generateAtlas",value:function(t){var e=this,n=this.setting,i=n.fontFamily,r=n.fontWeight,a=n.fontSize,l=n.buffer,s=n.useSdf,u=n.radius,c=n.cutoff;this.canvas||(this.canvas=document.createElement("canvas"),this.canvas.width=w,this.canvas.height=w/4,this.glyphTexture=new p.default(this.gl,{tex:this.canvas}),this.debug&&(this.canvas.style.position="fixed",this.canvas.style.top=0,this.canvas.style.left=0,document.body.appendChild(this.canvas))),this.lastAtlas||(this.lastAtlas={mapping:{},xOffset:0,yOffset:0});var f=this.canvas.getContext("2d");this.updateTextStyle(f,i,a,r);var h=t.filter(function(t){return!e.lastAtlas.mapping[t]}),v=o({glyphList:t,getGlyphWidth:function(t){return f.measureText(t).width},fontSize:a,glyphHeight:1*a,buffer:l,maxCanvasWidth:w,mapping:this.lastAtlas.mapping,xOffset:this.lastAtlas.xOffset,yOffset:this.lastAtlas.yOffset});if(this.canvas.height<v.canvasHeight){var m=f.getImageData(0,0,this.canvas.width,this.canvas.height);this.canvas.height=v.canvasHeight,f.putImageData(m,0,0)}if(this.updateTextStyle(f,i,a,r),h.length>0){if(s){var _=new d.default(a,l,u,c,i,r),g=f.createImageData(_.size,_.size);h.forEach(function(t){e.makeRGBAImageData(_.draw(t),g),f.putImageData(g,v.mapping[t].x,v.mapping[t].y)})}else h.forEach(function(t){f.fillText(t,v.mapping[t].x,v.mapping[t].y+.9*a)});this.canvasUpdated=!0}this.lastAtlas=v;var y={};return t.forEach(function(t){y[t]=v.mapping[t]}),{xOffset:v.xOffset,yOffset:v.yOffset,mapping:y,data:this.canvas,width:this.canvas.width,height:this.canvas.height}}},{key:"uploadToGPU",value:function(t){if(t.force||this.canvasUpdated){var e=this.canvas,n=e.width,i=e.height,o=this.canvas.getContext("2d").getImageData(0,0,n,i);this.glyphTexture.update(o,t)}else this.glyphTexture.upload(t);this.canvasUpdated=!1}},{key:"makeRGBAImageData",value:function(t,e){for(var n=0;n<t.length;n++)e.data[4*n+0]=t[n],e.data[4*n+1]=t[n],e.data[4*n+2]=t[n],e.data[4*n+3]=t[n]}},{key:"destroy",value:function(){this.glyphTexture&&this.glyphTexture.destroy(),this.canvas&&(this.canvas.width=1,this.canvas.height=1,this.canvas=null),this.setting=null,this.gl=null}}]),t}();e.default=E},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(1),l=i(a),s=n(17),u=i(s),c=n(103),f=i(c),d=n(7),h=i(d),v=u.default.isPC()?8192:4096,p=function(){function t(e,n){(0,r.default)(this,t),this.gl=e,this.width=n.width||v,this.height=n.height||v/2,this.itemWidth=n.itemWidth||512,this.next={x:0,y:0},this.images={},this.debug=n.debug||!1,this.debug&&(this.canvas=this.createCanvas(this.width,this.height),this.debugShow())}return(0,l.default)(t,[{key:"getTexCoord",value:function(t){var e=this.images[t];if(e){var n=this.width,i=this.height;return{s:(e.x+.5)/n,t:(e.y+.5)/i,w:(e.w-1)/n,h:(e.h-1)/i}}return null}},{key:"addImage",value:function(t,e){return t in this.images||this.updateSubImg(t,e),this.images[t]}},{key:"removeImage",value:function(t){delete this.images[t]}},{key:"updateSubImg",value:function(t,e){var n=this.images,i=this.next,o=this.itemWidth,r=this.width,a=this.height,l=this.gl;if(this.loadTexture(),!(t in n)){var s=e.height,u=e.width,c=i.x,f=i.y;f+s>a&&(c+=o,f=0),c>=r&&(c=0),this.removeOldImages(c,f,s),n[t]={x:c,y:f,h:s,w:u},l.texSubImage2D(l.TEXTURE_2D,0,c,f,l.RGBA,l.UNSIGNED_BYTE,e),i.x=c,i.y=f+s,this.debug&&this.canvas.ctx.drawImage(e,c,f)}}},{key:"loadTexture",value:function(){var t=this.gl;if(this.texture)this.texture.bind();else{var e=new f.default(t);e.resize(this.width,this.height,{flipY:!0}),this.texture=e}}},{key:"removeOldImages",value:function(t,e,n){var i=this.images,o=[];h.default.forIn(i,function(i,r){r.x!==t||r.y>=e+n||r.y+r.h<=e||o.push(i)}),o.forEach(function(t){delete i[t]}),o=void 0}},{key:"clear",value:function(){this.images={},this.next={x:0,y:0}}},{key:"createCanvas",value:function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n.ctx=n.getContext("2d"),this.debug&&document.body.appendChild(n),n}},{key:"debugShow",value:function(){this.debug&&(this.canvas.style.position="absolute",this.canvas.style.zIndex="10000",this.canvas.style.border="1px solid red",this.canvas.style.width="1200px",this.canvas.style.height="1200px",this.canvas.style.left="0",this.canvas.style.top="0",this.canvas.style.pointerEvents="none",this.canvas.id="ImageCache",document.body.appendChild(this.canvas))}},{key:"destroy",value:function(){this.texture&&(this.texture.destroy(),this.texture=null),this.width=null,this.height=null,this.itemWidth=null,this.next=null,this.images=null,this.debug=null,this.canvas=null,this.gl=null}}]),t}();e.default=p},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=t.markers,n=t.getMarkerWidth,i=t.rowHeight,o=t.buffer,a=t.maxCanvasWidth,l=t.mapping,s=void 0===l?{}:l,c=t.xOffset,d=void 0===c?0:c,v=t.yOffset,p=void 0===v?0:v,m=t.lastRowHeight,_=void 0===m?0:m,g=t.lastXSpareSet,y=void 0===g?{}:g,b=t.lastYSpare,S=void 0===b?0:b,w=0,E=d,T=i+2*o,I=p+w*T,A=!1,k=(0,h.default)({},y);(0,f.default)(e).forEach(function(t,e){if(!s[t.src]){var l=n(t,e);if(E+l+2*o>a){w++,I=p+w*T;var u=r(k,I);E=I>p+S||u<0?0:a-u}I>p+S&&(A=!0,k={}),s[t.src]={x:E+o,y:I+o,width:l,height:Math.min(t.height,i),mask:!0},E+=l+2*o}});var P=a-E,M=S+p-I,L=I+i;if(i>_)k=(0,u.default)({},L,P);else{for(var C in k)k.hasOwnProperty(C)&&C<=L&&delete k[C];k[L]=P}return{mapping:s,xOffset:E,yOffset:I,spareRowHeight:A?i:Math.max(i,_),xSpareSet:k,ySpare:i>_?I+i-p:M>0?M:i,canvasHeight:(0,x.getPowerOf2)(p+(w+1)*T)}}function r(t,e){for(var n=(0,l.default)(t).map(function(t){return Number(t)}).sort(function(t,e){return t-e}),i=0;i<n.length;i++)if(e<=n[i])return t[n[i]];return-1}Object.defineProperty(e,"__esModule",{value:!0});var a=n(16),l=i(a),s=n(130),u=i(s),c=n(86),f=i(c),d=n(212),h=i(d),v=n(27),p=i(v),m=n(0),_=i(m),g=n(1),y=i(g);e.buildAtlas=o;var x=n(316),b=n(103),S=i(b),w=n(17),E=1024*((0,w.isPC)()?2:1),T=function(){function t(e){var n=this;(0,_.default)(this,t),this._reUpdateCanvas=(0,w.debounce)(function(){n.canvasUpdated=!0},5e3),this.queuePromise=null,this.gl=e,this.debug=!1,this._destroyed=!1}return(0,y.default)(t,[{key:"generateAtlas",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.canvas||(this.canvas=document.createElement("canvas"),this.canvas.width=E,this.canvas.height=E/2,this.markerTexture=new S.default(this.gl,{tex:this.canvas}),this.debug&&(this.canvas.style.position="fixed",this.canvas.style.top=0,this.canvas.style.left=0,document.body.appendChild(this.canvas))),this.lastAtlas||(this.lastAtlas={mapping:{},xOffset:0,yOffset:0});var i=this.canvas.getContext("2d"),r=null,a=t.filter(function(t){return!e.lastAtlas.mapping[t]}).map(function(t){if(n.tileId){if(!r){var e=[];"string"==typeof n.tileImage64?e.push(n.tileImage64):e=n.tileImage64,r=p.default.all(e.map(function(t,e){return new p.default(function(i,o){if(t){var r=new Image;r.onload=function(){i(r)},r.onerror=function(){console.error("Image加载失败: "+n.tileId+"-"+e),i(null)},r.src="data:image/png;base64,"+t}else i(null)})}))}return r.then(function(e){var i=n.billboardData.filter(function(e){return e.text===t})[0],o=i&&i.bounds,r=i&&i.cidx;return e[r]?{tileImage:e[r],isSimulate:!0,src:t,width:o[2],height:o[3],bounds:o}:null})}return new p.default(function(e,n){var i=new Image;/^data:/.test(t)||(i.crossOrigin="anonymous"),i.onload=function(){e(i)},i.onerror=function(){console.error("Image加载失败: "+t),e(null)},i.src=t})}),l=p.default.all(a);return this.queuePromise=(null===this.queuePromise?l:this.queuePromise.then(function(){return l},function(t){return console.error(t),l})).then(function(r){if(!e._destroyed){r=r.filter(function(t){return!!t});var a=o({markers:r,getMarkerWidth:function(t){return t.height>128?128*t.width/t.height:t.width},rowHeight:n.tileId?30:Math.min(128,r.reduce(function(t,e){return Math.max(t,e.height)},0)),buffer:4,maxCanvasWidth:E,mapping:e.lastAtlas.mapping,xOffset:e.lastAtlas.xOffset,yOffset:e.lastAtlas.yOffset,lastRowHeight:e.lastAtlas.spareRowHeight,lastXSpareSet:e.lastAtlas.xSpareSet,lastYSpare:e.lastAtlas.ySpare});if(e.canvas.height<a.canvasHeight){var l=i.getImageData(0,0,e.canvas.width,e.canvas.height);e.canvas.height=a.canvasHeight,i.putImageData(l,0,0)}r.forEach(function(t){var e=a.mapping[t.src];if(!e.isFilled){if(t.isSimulate){var n=t.bounds;i.drawImage(t.tileImage,n[0],n[1],n[2],n[3],e.x,e.y,e.width,e.height)}else i.drawImage(t,e.x,e.y,e.width,e.height);e.isFilled=!0}}),e.lastAtlas=a,e.canvasUpdated=e.canvasUpdated||r.length>0;var s={};return t.forEach(function(t){s[t]=a.mapping[t]}),e.canvasUpdated&&e._reUpdateCanvas(),s}}),this.queuePromise}},{key:"uploadToGPU",value:function(t){t.force||this.canvasUpdated?this.markerTexture.update(this.canvas,t):this.markerTexture.upload(t),this.canvasUpdated=!1}},{key:"makeRGBAImageData",value:function(t,e){for(var n=0;n<t.length;n++)e.data[4*n+0]=t[n],e.data[4*n+1]=t[n],e.data[4*n+2]=t[n],e.data[4*n+3]=t[n]}},{key:"destroy",value:function(){this._destroyed||(this.markerTexture&&(this.markerTexture.destroy(),this.markerTexture=null),this.canvas&&(this.canvas.width=1,this.canvas.height=1,this.canvas=null),this.queuePromise=null,this.gl=null,this._destroyed=!0)}}]),t}();e.default=T},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(211),p=i(v),m=n(650),_=i(m),g=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,l.default)(this,e),(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,n))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_onCreate",value:function(){return this.gl.createProgram()}},{key:"_onDelete",value:function(t){t||(this._vShader.delete(),this._fShader.delete()),this.gl.deleteProgram(this._object)}},{key:"_initialize",value:function(t){var e=t.vShader,n=t.fShader;this.attachShader(e,n)}},{key:"attachShader",value:function(t,e){var n=this.gl;"string"==typeof t&&(t=new _.default(n,{type:n.VERTEX_SHADER,source:t})),"string"==typeof e&&(e=new _.default(n,{type:n.FRAGMENT_SHADER,source:e})),n.attachShader(this._object,t.shader),n.attachShader(this._object,e.shader),this._vShader=t,this._fShader=e,n.linkProgram(this._object),this.check()}},{key:"enable",value:function(){this.gl.useProgram(this._object),this.gl.program=this._object}},{key:"check",value:function(){var t=this.gl;this.getParameter(t.LINK_STATUS)||(console.error(t.getProgramInfoLog(this._object)),console.log(this._source))}},{key:"getParameter",value:function(t){return this.gl.getProgramParameter(this._object,t)}},{key:"program",get:function(){return this._object}}]),e}(p.default);e.default=g},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(4),f=i(c),d=n(3),h=i(d),v=n(211),p=i(v),m=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,l.default)(this,e),(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,n))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_onCreate",value:function(t){var e=t.type;return this.gl.createShader(e)}},{key:"_onDelete",value:function(){this.gl.deleteShader(this._object)}},{key:"_initialize",value:function(t){var e=t.source;e&&this.setSource(e)}},{key:"setSource",value:function(t){this._source=t,this.gl.shaderSource(this._object,t),this.compile(),this.check()}},{key:"compile",value:function(){this.gl.compileShader(this._object)}},{key:"check",value:function(){var t=this.gl;this.getParameter(t.COMPILE_STATUS)||(console.error(t.getShaderInfoLog(this._object)),console.log(this._source))}},{key:"getParameter",value:function(t){return this.gl.getShaderParameter(this._object,t)}},{key:"shader",get:function(){return this._object}}]),e}(p.default);e.default=m},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(1),l=i(a),s=n(17),u=i(s),c=n(103),f=i(c),d=n(7),h=i(d),v=u.default.isPC()?8192:4096,p=function(){function t(e){(0,r.default)(this,t),this.gl=e,this.width=v,this.height=this.width,this.itemWidth=512,this.scale=2,this.next={x:0,y:0},this.tiles={},this.tilePositions={},this._renderTiles=null,this.debug=0,this.debug&&(this.canvas=this.createCanvas(this.width,this.height),this.debugShow())}return(0,l.default)(t,[{key:"updateRenderTiles",value:function(t){this._renderTiles=t}},{key:"getTexCoord",value:function(t,e){var n=this.tiles[t];if(!n)return null;var i=this.scale;return{x:(n.x+e[0])/this.width,y:(this.height-(n.y+e[1]))/this.height,w:e[2]/this.width,h:e[3]/this.height,fontSize:{w:e[2]/i,h:e[3]/i}}}},{key:"addImage",value:function(t,e,n){if(t in this.tiles||!e)return void(n&&n());this.updateTextSubImg(e,t),n&&n()}},{key:"add",value:function(t,e,n){var i=this.tiles;if(t in i)return void(n&&n());this.createItem(e,function(e){this.updateTextSubImg(e,t),n&&n()}.bind(this))}},{key:"updateTextSubImg",value:function(t,e){this.loadTexture();var n=this.tiles;if(!(e in n)){var i=this.tilePositions,o=this.next,r=t.height,a=o.x,l=o.y;l+r>this.height&&(a+=this.itemWidth,l=0),a>=this.width&&(a=0),this.removeOldTiles(a,l,r);var s=a+"-"+l;n[e]={x:a,y:l,height:r},i[s]=e;var u=this.gl;u.texSubImage2D(u.TEXTURE_2D,0,a,this.height-l-r,u.RGBA,u.UNSIGNED_BYTE,t),o.x=a,o.y=l+r,this.debug&&this.canvas.ctx.drawImage(t,a,l)}}},{key:"loadTexture",value:function(){var t=this.gl;if(this.texture)this.texture.bind();else{var e=new f.default(t);e.resize(this.width,this.height,{flipY:!0,premultiply:!0}),this.texture=e}}},{key:"removeOldTiles",value:function(t,e,n){var i=this.tiles,o=this.tilePositions,r=[];h.default.forIn(i,function(i,a){if(!(a.x!==t||a.y>=e+n||a.y+a.height<=e)){var l=a.x+"-"+a.y;delete o[l],r.push(i)}});for(var a=0,l=r.length;a<l;a++)delete i[r[a]];r=void 0}},{key:"createItem",value:function(t,e){var n=new Image;n.onload=function(){"function"==typeof e&&e(n,n.width,n.height)}.bind(this),n.src=t}},{key:"createCanvas",value:function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n.ctx=n.getContext("2d"),this.debug&&document.body.appendChild(n),n}},{key:"debugShow",value:function(){this.debug&&(document.getElementById("TextCache")||(console.info(232),this.canvas.style.position="absolute",this.canvas.style.zIndex="10000",this.canvas.style.border="1px solid red",this.canvas.style.width="8192px",this.canvas.style.height="8192px",this.canvas.style.left="0",this.canvas.style.top="0",this.canvas.style.pointerEvents="none",this.canvas.id="TextCache",document.body.appendChild(this.canvas)))}},{key:"destroy",value:function(){this.texture&&(this.texture.destroy(),this.texture=null),this.width=null,this.height=null,this.itemWidth=null,this.scale=null,this.next=null,this.tiles=null,this.tilePositions=null,this._renderTiles=null,this.debug=0,this.canvas=null,this.gl=null}}]),t}();e.default=p},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return new a.default(function(e){if(s.default.support()){var n=c.default.QMAPI_poi_icon_json+t;s.default.get(n,function(n){if(n){var i=JSON.parse(n).data;e(i)}else(0,v.default)(t,d.default.iconIndexSrc).then(function(t){e(t)},function(t){console.error(t),e(null)})})}else(0,v.default)(t,d.default.iconIndexSrc).then(function(t){e(t)},function(t){console.error(t),e(null)})})}Object.defineProperty(e,"__esModule",{value:!0});var r=n(27),a=i(r),l=n(136),s=i(l),u=n(111),c=i(u),f=n(20),d=i(f),h=n(398),v=i(h);e.default=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(27),r=i(o),a=n(0),l=i(a),s=n(1),u=i(s),c=n(654),f=i(c),d=function(){function t(){(0,l.default)(this,t),this.img=null,this.w=0,this.h=0,this.scale=2}return(0,u.default)(t,[{key:"load",value:function(t){var e=this;return new r.default(function(n){function i(t){t.img&&(t.ready=!0,n())}(0,f.default)(t,function(t){e.w=t.originalWidth,e.h=t.originalHeight,e.img=t.tex,i(e,e.w,e.h)})})}}]),t}();e.default=d},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if("function"==typeof e){if(t in r.textures)return void e(r.textures[t]);var n=new Image;/^data:/.test(t)||(n.crossOrigin="anonymous"),n.onload=function(){if(r.textures[t])return void e(r.textures[t]);var i=u.default.extendCanvasToPow2(n,1);r.textures[t]=new l.default(null,{tex:i,originalWidth:n.width,originalHeight:n.height,width:i.width,height:i.height}),e(r.textures[t])}.bind(this),n.src=t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(85),a=n(103),l=i(a),s=n(316),u=i(s);e.default=o},function(t,e,n){"use strict";function i(t,e,n,i,o,r){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=i||.25,this.fontFamily=o||"sans-serif",this.fontWeight=r||"normal",this.radius=n||8,this.size=this.fontSize+2*this.buffer;var a=this.size;this.canvas=document.createElement("canvas"),this.canvas.width=a,this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function o(t,e,n,i,o,a,l){for(var s=0;s<e;s++){for(var u=0;u<n;u++)i[u]=t[u*e+s];r(i,o,a,l,n);for(var c=0;c<n;c++)t[c*e+s]=o[c]}for(var f=0;f<n;f++){for(var d=0;d<e;d++)i[d]=t[f*e+d];r(i,o,a,l,e);for(var h=0;h<e;h++)t[f*e+h]=Math.sqrt(o[h])}}function r(t,e,n,i,o){n[0]=0,i[0]=-a,i[1]=+a;for(var r=1,l=0;r<o;r++){for(var s=(t[r]+r*r-(t[n[l]]+n[l]*n[l]))/(2*r-2*n[l]);s<=i[l];)l-=1,s=(t[r]+r*r-(t[n[l]]+n[l]*n[l]))/(2*r-2*n[l]);l+=1,n[l]=r,i[l]=s,i[l+1]=+a}for(var u=0,c=0;u<o;u++){for(;i[c+1]<u;)c+=1;e[u]=(u-n[c])*(u-n[c])+t[n[c]]}}t.exports=i,t.exports.default=i;var a=1e20;i.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),i=0;i<this.size*this.size;i++){var r=e.data[4*i+3]/255;this.gridOuter[i]=1===r?0:0===r?a:Math.pow(Math.max(0,.5-r),2),this.gridInner[i]=1===r?a:0===r?0:Math.pow(Math.max(0,r-.5),2)}o(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),o(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z);for(var l=0;l<this.size*this.size;l++){var s=this.gridOuter[l]-this.gridInner[l];n[l]=Math.max(0,Math.min(255,Math.round(255-255*(s/this.radius+this.cutoff))))}return n}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){var i=r(t,e,n),o=l(i),a=[];return o.forEach(function(t){a=t.isShow?a.concat(Array(Number(t.lettersCount)).fill(1)):a.concat(Array(Number(t.lettersCount)).fill(0))}),new Uint8ClampedArray(a)}function r(t,e,n){var i=[],o=!0,r=!1,l=void 0;try{for(var s,u=(0,m.default)(t);!(o=(s=u.next()).done);o=!0){var c=s.value,f=c.geometry.position,d=e.latLngToCenterLocalPixel(f),h=new _.Vector4(d.x,d.y,0,1),v=n.pvMatrix.multiplyVector4(h),p=v.elements[0]/v.elements[3],g=v.elements[1]/v.elements[3],y=(1+p)/2*e.width,x=(1-g)/2*e.height,b=c.style.size/c.fontSize*c.widthSum*e.scale,S=c.style.size*e.scale,w=b/2,E=S/2,T={x:y,y:x},I=c.style,A=I.alignment,k=I.verticalAlignment,P=I.angle;i[c.geometryIndex]={leftTop:a({x:y-w+A*w,y:x-E+k*E},T,c.style),rightTop:a({x:y+w+A*w,y:x-E+k*E},T,c.style),rightBottom:a({x:y+w+A*w,y:x+E+k*E},T,c.style),leftBottom:a({x:y-w+A*w,y:x+E+k*E},T,c.style),width:b,height:S,angle:P,lettersCount:c.lettersCount,rank:void 0===c.geometry.rank?-1/0:c.geometry.rank,geometryIndex:c.geometryIndex}}}catch(t){r=!0,l=t}finally{try{!o&&u.return&&u.return()}finally{if(r)throw l}}return i}function a(t,e,n){var i=t.x-e.x,o=t.y-e.y,r=new _.Vector4(i,o,0,1),a=(new _.Matrix4).setRotate(-n.angle,0,0,1),l=a.multiplyVector4(r);return{x:l.elements[0]+e.x+n.offset.x,y:l.elements[1]+e.y+n.offset.y}}function l(t){var e=t.map(function(t){return{isShow:!0,lettersCount:t.lettersCount}}),n=!0,i=!1,o=void 0;try{for(var r,a=(0,m.default)(t.entries());!(n=(r=a.next()).done);n=!0){var l=(0,v.default)(r.value,2),u=l[0],c=l[1],f=t.slice(u+1);if(e[c.geometryIndex].isShow){var d=!0,h=!1,p=void 0;try{for(var _,g=(0,m.default)(f);!(d=(_=g.next()).done);d=!0){var y=_.value;if(e[y.geometryIndex].isShow){var x=s(c,y),b=!0;x&&(b=c.rank===y.rank?y.geometryIndex>c.geometryIndex:y.rank>c.rank,b?e[c.geometryIndex].isShow=!1:e[y.geometryIndex].isShow=!1)}}}catch(t){h=!0,p=t}finally{try{!d&&g.return&&g.return()}finally{if(h)throw p}}}}}catch(t){i=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return e}function s(t,e){var n=new g(t),i=new g(e);return n.isCollision(i)}Object.defineProperty(e,"__esModule",{value:!0});var u=n(0),c=i(u),f=n(1),d=i(f),h=n(47),v=i(h),p=n(18),m=i(p),_=n(140),g=function(){function t(e){(0,c.default)(this,t),this.centerPoint=[(e.leftTop.x+e.rightBottom.x)/2,(e.leftTop.y+e.rightBottom.y)/2],this.halfHeight=e.height/2,this.halfWidth=e.width/2,this.setRotation(e.angle)}return(0,d.default)(t,[{key:"getProjectionRadius",value:function(t){var e=this.dot(t,this.axisX),n=this.dot(t,this.axisY);return this.halfWidth*e+this.halfHeight*n}},{key:"dot",value:function(t,e){return Math.abs(t[0]*e[0]+t[1]*e[1])}},{key:"setRotation",value:function(t){var e=t/180*Math.PI;return this.axisX=[Math.cos(e),-Math.sin(e)],this.axisY=[Math.sin(e),Math.cos(e)],this}},{key:"isCollision",value:function(t){for(var e=[this.centerPoint[0]-t.centerPoint[0],this.centerPoint[1]-t.centerPoint[1]],n=[this.axisX,this.axisY,t.axisX,t.axisY],i=0,o=n.length;i<o;i++)if(this.getProjectionRadius(n[i])+t.getProjectionRadius(n[i])<=this.dot(e,n[i]))return!1;return!0}}]),t}();e.default=o},function(t,e,n){"use strict";function i(t){var e=t.extensions_TMAP.get("WEBGL_debug_renderer_info");return e?{vendor:t.getParameter(e.UNMASKED_VENDOR_WEBGL),renderer:t.getParameter(e.UNMASKED_RENDERER_WEBGL)}:null}Object.defineProperty(e,"__esModule",{value:!0}),e.getGraphicHardwareInfo=i},function(t,e,n){"use strict";function i(t,e,n,i){i=i||1;var o=new r.Matrix4,a=new r.Matrix4;return a.scale(i,i,i),o=o.multiply(e),o=o.multiply(a),o=o.multiply(function(t,e){var n=new r.Matrix4,i=t.x+e.left,o=e.top-t.y;return n.setTranslate(i,o,0),n}(n,t))}function o(t){var e=t.view,n=t.offset,i=t.scale,o=void 0===i?1:i,a=new r.Matrix4;return a.scale(o,o,o).translate(n.x+e.left,e.top-n.y,0),a}Object.defineProperty(e,"__esModule",{value:!0}),e.mixMatrix=i,e.getModelMatrix=o;var r=n(140)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){var i=r(t,["COLOR_CLEAR_VALUE","UNPACK_FLIP_Y_WEBGL","UNPACK_PREMULTIPLY_ALPHA_WEBGL"]);(0,v.default)(i,e),n(),a(t,i)}function r(t,e){var n={};return e.forEach(function(e){var i=m[e];n[e]=i?i(t,t[e]):t.getParameter(t[e])}),n}function a(t,e){t.blendFuncSeparate(e.BLEND_SRC_RGB,e.BLEND_DST_RGB,e.BLEND_SRC_ALPHA,e.BLEND_DST_ALPHA),(0,c.default)(e).forEach(function(e){var n=(0,s.default)(e,2),i=n[0],o=n[1],r=y[i];r&&r(t,o,t[i])})}Object.defineProperty(e,"__esModule",{value:!0});var l=n(47),s=i(l),u=n(129),c=i(u),f=n(32),d=i(f),h=n(14),v=i(h);e.preserveParameters=o;var p=function(t,e){return t.isEnabled(e)},m={BLEND:p,CULL_FACE:p,DEPTH_TEST:p,DITHER:p,POLYGON_OFFSET_FILL:p,SAMPLE_ALPHA_TO_COVERAGE:p,SAMPLE_COVERAGE:p,SCISSOR_TEST:p,STENCIL_TEST:p,RASTERIZER_DISCARD:p},_=function(t,e,n){return e?t.enable(n):t.disable(n)},g=function(t,e,n){return t.pixelStorei(n,e)},y={BLEND:_,CULL_FACE:_,DEPTH_TEST:_,COLOR_CLEAR_VALUE:function(t,e){return t.clearColor.apply(t,(0,d.default)(e))},VIEWPORT:function(t,e){return t.viewport.apply(t,(0,d.default)(e))},UNPACK_FLIP_Y_WEBGL:g,UNPACK_PREMULTIPLY_ALPHA_WEBGL:g}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){if(t.getLng()<e.getLng()){n.getLng()>=0?t.lng=180:e.lng=-179.9999}}var r=n(2),a=i(r),l=n(0),s=i(l),u=n(1),c=i(u),f=n(4),d=i(f),h=n(3),v=i(h),p=n(20),m=i(p),_=n(223),g=i(_),y=n(228),x=i(y),b=n(42),S=n(61),w=n(7),E=n(84),T=n(317),I=n(65),A=m.default.tileSize,k=Math.PI,P=k/180,M=g.default[1],L=function(t){function e(t,n){(0,s.default)(this,e);var i=(0,d.default)(this,(e.__proto__||(0,a.default)(e)).call(this));return i._minZoom=t.minZoom||m.default.mainZoom,i._maxZoom=t.maxZoom||m.default.maxZoom,i._fov=t.fov||.6435011087932844,i.width=t.width||0,i.height=t.height||0,i.zoom=t.zoom||10,i.tileZoom=Math.floor(i._zoom),i._center=t.center||new b(39.908782,116.3974),i.heading=t.heading||0,i._pitch=t.pitch||0,i._scale=t.scale||1,i._boundary=t.boundary||null,i.projection=new T,i.renderEngine=n,i}return(0,v.default)(e,t),(0,c.default)(e,[{key:"_isCameraReady",value:function(){var t=this.renderEngine&&this.renderEngine.camera&&this.renderEngine.camera.resolution;return t&&null!==t.width&&null!==t.height}},{key:"resize",value:function(t,e){this.width=t,this.height=e,this._isCameraReady()&&this._fire("bounds_changed",{bounds:this.getBounds()},!0),this._fire("input_change"),this._constrain()}},{key:"_constrain",value:function(){if(this._boundary&&!this._boundary.isEmpty()){if(this._unmodify)return void(this._unmodify=!1);var t=this.width,e=this.height,n=this.center,i=t/this._scale,o=e/this._scale,r=this.latLngToCoord(this._boundary.getSouthWest()),a=this.latLngToCoord(this._boundary.getNorthEast()),l=this.latLngToCoord(n),s=[r.x,a.x],u=[a.y,r.y];if(Math.round(s[0])!==Math.round(s[1])&&Math.round(u[0])!==Math.round(u[1])){var c=void 0,f=void 0,d=s&&s[1]-s[0]<i?i/(s[1]-s[0]):0,h=u&&u[1]-u[0]<o?o/(u[1]-u[0]):0,v=Math.max(d,h);if(v){c=d?(s[0]+s[1])/2:l.x,f=h?(u[0]+u[1])/2:l.y;var p=this.coordToLatLng({x:c,y:f});this._unmodify=!0,this.zoom+=this.scaleZoom(v),this.center=p}else l.x-i/2<s[0]&&(c=s[0]+i/2),l.x+i/2>s[1]&&(c=s[1]-i/2),l.y-o/2<u[0]&&(f=u[0]+o/2),l.y+o/2>u[1]&&(f=u[1]-o/2),void 0===c&&void 0===f||(this._unmodify=!0,this.center=this.coordToLatLng({x:void 0!==c?c:l.x,y:void 0!==f?f:l.y}))}}}},{key:"zoomScale",value:function(t){return Math.pow(2,t)}},{key:"scaleZoom",value:function(t){return Math.log(t)/Math.LN2}},{key:"calCoordsScale",value:function(t){return this.scrollScale/this.zoomScale(t)}},{key:"latLngToCoord",value:function(t,e){return this.projection.latLngToCoord(t,e||this.zoom)}},{key:"coordToLatLng",value:function(t,e){return this.projection.coordToLatLng(t,e||this.zoom)}},{key:"latLngToCenterLocalPixel",value:function(t){var e=this.latLngToCoord(this.center,this.zoom),n=this.latLngToCoord(t,this.zoom);return new S(n.x-e.x,e.y-n.y)}},{key:"centerLocalPixelToLatLng",value:function(t){var e=this.latLngToCoord(this.center,this.zoom),n=new S(e.x+t.x,e.y-t.y);return this.coordToLatLng(n,this.zoom)}},{key:"latLngToCenterLocalPixelByDistanceScales",value:function(t,e){var n=e.distanceScales||this.getDistanceScales(),i=e.center||this.center,o=e.offsetMercator,r=new b(t.lat-i.lat,t.lng-i.lng),a=w.clamp(r.lat,-1,1),l=[n.pixelsPerDegree[0],n.pixelsPerDegree[1]+n.pixelsPerDegree2[1]*a],s=new S(r.lng*l[0],r.lat*l[1]);return o&&(s.x+=o.x*e.pixelsPerMeter,s.y+=o.y*e.pixelsPerMeter),s}},{key:"projectionTopLeft",value:function(t){var e=this.latLngToCoord(this.center,t);return new S(e.x-this.width/2,e.y-this.height/2)}},{key:"screenToLatLng",value:function(t){var e=this.renderEngine.camera.getPixelFromScreenCoords(t);return this.centerLocalPixelToLatLng(e)}},{key:"latLngToScreen",value:function(t){var e=this.latLngToCenterLocalPixel(t);return this.renderEngine.camera.getScreenCoordsFromPixel(e)}},{key:"latLngToTileCoord",value:function(t,e){return this.latLngToCoord(t,e||this.zoom).div(A)}},{key:"tileCoordToLatLng",value:function(t,e){return this.coordToLatLng(t.mult(A),e||this.zoom)}},{key:"setLocationAtPoint",value:function(t,e){var n=this.latLngToTileCoord(t),i=this.latLngToTileCoord(this.center),o=this.screenToLatLng(e),r=this.latLngToTileCoord(o),a=r.sub(i),l=n.sub(a);this.center=this.tileCoordToLatLng(l)}},{key:"getBounds",value:function(){var t=new E,e=Math.min(this.renderEngine.camera.getFogEdge()[1],1),n=(1-e)/2*this.height,i=this.screenToLatLng(new S(0,n)),r=this.screenToLatLng(new S(this.width,n)),a=this.screenToLatLng(new S(0,this.height)),l=this.screenToLatLng(new S(this.width,this.height));return o(r,i,this.center),o(l,a,this.center),t.extend(i).extend(r).extend(a).extend(l),t}},{key:"coveringTiles",value:function(t){var e=t.minZoom,n=t.maxZoom,i=t.zoom,o=void 0===i?this.zoom:i;return o=Math.max(Math.min(o,n),e),this.coveringTilesAsZoom(t,o,1)}},{key:"coveringTilesAsZoom",value:function(t,e,n){n=n||1;var i=[];if(!this.width||!this.height)return i;var o=t.round?Math.round(e):Math.floor(e),r=this.calCoordsScale(o);if(t.pixelGeo){var a=new x.default(o,0,0,0,A);return i.push(a),i}var l=this.renderEngine.getBounds(this.pitch,this.heading,r);w.forIn(l,function(t,e){e.x*=n,e.y*=n});var s=this.latLngToCoord(this.center,o),u=[{column:~~(s.x+l.leftTop.x)/A,row:~~(s.y-l.leftTop.y)/A},{column:~~(s.x+l.rightTop.x)/A,row:~~(s.y-l.rightTop.y)/A},{column:~~(s.x+l.rightBottom.x)/A,row:~~(s.y-l.rightBottom.y)/A},{column:~~(s.x+l.leftBottom.x)/A,row:~~(s.y-l.leftBottom.y)/A}],c=x.default.cover(o,u);return this._sortTiles(c,A)}},{key:"_sortTiles",value:function(t,e){for(var n=0,i=t.length;n<i;n++){var o=t[n],r=this.projectionTopLeft(o.z),a=o.x*e-r.x+e/2,l=o.y*e-r.y+e/2,s=Math.pow(a-this.centerPoint.x,2)+Math.pow(l-this.centerPoint.y,2);o.ds=Math.sqrt(s)}return w.bubbleSort(t,"ds"),t}},{key:"getDistanceRatio",value:function(t){var e=256*this.zoomScale(t||this.zoom),n=this.center;return e/(M*Math.abs(Math.cos(n.lat*P)))}},{key:"getDistanceScales",value:function(t){var e=this.center,n=e.lat,i=this.zoomScale(t||this.zoom),o={},r=A*i,a=Math.cos(n*P),l=r/360,s=l/a,u=r/M/a;o.pixelsPerMeter=[u,u,u],o.metersPerPixel=[1/u,1/u,1/u],o.pixelsPerDegree=[l,s,u],o.degreesPerPixel=[1/l,1/s,1/u];var c=P*Math.tan(n*P)/a,f=l*c/2,d=r/M*c,h=d/s*u;return o.pixelsPerDegree2=[0,f,d],o.pixelsPerMeter2=[h,0,h],o}},{key:"getInput",value:function(){return{height:this.height,width:this.width,center:this._center,zoom:this._zoom,heading:this._heading,pitch:this._pitch}}},{key:"size",get:function(){return new S(this.width,this.height)}},{key:"minZoom",get:function(){return this._minZoom},set:function(t){t=Math.max(t,m.default.minZoom),this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(t){t=Math.min(t,m.default.maxZoom),this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}},{key:"zoom",get:function(){return this._zoom},set:function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._fire("zoom_changed",{zoom:this._zoom},!0),this._isCameraReady()&&this._fire("bounds_changed",{bounds:this.getBounds()},!0),this.renderEngine&&this._zoom!==e&&this.renderEngine.camera.updateVersion(),this._zoom=e,this._scrollScale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._fire("input_change"),this._constrain())}},{key:"scrollScale",get:function(){return this._scrollScale}},{key:"center",get:function(){return this._center},set:function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._fire("center_changed",{center:this._center},!0),this._isCameraReady()&&this._fire("bounds_changed",{bounds:this.getBounds()},!0),this.renderEngine&&this._center&&t&&(this._center.lat!==t.lat||this._center.lng!==t.lng)&&this.renderEngine.camera.updateVersion(),this._center=t,this._fire("input_change"),this._constrain())}},{key:"centerPoint",get:function(){return new S(this.width/2,this.height/2)}},{key:"heading",get:function(){return this._heading/Math.PI*180},set:function(t){if(!isNaN(t)){var e=w.wrap(t,0,360)*Math.PI/180;this._heading!==e&&(this._heading=e,this._isCameraReady()&&this._fire("bounds_changed",{bounds:this.getBounds()},!0),this._fire("input_change"))}}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(t){if(!isNaN(t)){var e=w.clamp(t,0,m.default.maxPitch)/180*Math.PI;this._pitch!==e&&(this._pitch=e,this._isCameraReady()&&this._fire("bounds_changed",{bounds:this.getBounds()},!0),this._fire("input_change"))}}},{key:"fov",get:function(){return this._fov/Math.PI*180},set:function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._fov=t/180*Math.PI)}},{key:"scale",get:function(){return this._scale},set:function(t){this._scale!==t&&(this._scale=t,this.renderEngine.camera.setScale(t),this._fire("scale_changed",{scale:this._scale},!0),this._isCameraReady()&&this._fire("bounds_changed",{bounds:this.getBounds()},!0),this._fire("input_change"),this._constrain())}},{key:"boundary",get:function(){return this._boundary||null},set:function(t){t instanceof E&&(this._boundary=t,this._constrain())}}]),e}(I);t.exports=L},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.HEX_REG=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,e.RGB_REG=/^rgb\((\d+,?\s*){3}\)$/,e.RGBA_REG=/^rgba\((\d+,?\s*){3},\s*[0-9.]+\)$/},function(t,e,n){"use strict";var i=n(47),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.create=function(){var t=new Float32Array(3);return t[0]=0,t[1]=0,t[2]=0,t},e.clone=function(t){var e=new Float32Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.fromValues=function(t,e,n){var i=new Float32Array(3);return i[0]=t,i[1]=e,i[2]=n,i},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.set=function(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},e.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},e.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t},e.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t},e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},e.scaleAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t},e.distance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],o=e[2]-t[2];return Math.sqrt(n*n+i*i+o*o)},e.squaredDistance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],o=e[2]-t[2];return n*n+i*i+o*o},e.length=function(t){var e=(0,o.default)(t,3),n=e[0],i=e[1],r=e[2];return Math.sqrt(n*n+i*i+r*r)},e.squaredLength=function(t){var e=(0,o.default)(t,3),n=e[0],i=e[1],r=e[2];return n*n+i*i+r*r},e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},e.normalize=function(t,e){var n=(0,o.default)(e,3),i=n[0],r=n[1],a=n[2],l=i*i+r*r+a*a;return l>0&&(l=1/Math.sqrt(l),t[0]=e[0]*l,t[1]=e[1]*l,t[2]=e[2]*l),t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},e.cross=function(t,e,n){var i=(0,o.default)(e,3),r=i[0],a=i[1],l=i[2],s=(0,o.default)(n,3),u=s[0],c=s[1],f=s[2];return t[0]=a*f-l*c,t[1]=l*u-r*f,t[2]=r*c-a*u,t},e.lerp=function(t,e,n,i){var r=(0,o.default)(e,3),a=r[0],l=r[1],s=r[2];return t[0]=a+i*(n[0]-a),t[1]=l+i*(n[1]-l),t[2]=s+i*(n[2]-s),t},e.hermite=function(t,e,n,i,o,r){var a=r*r,l=a*(2*r-3)+1,s=a*(r-2)+r,u=a*(r-1),c=a*(3-2*r);return t[0]=e[0]*l+n[0]*s+i[0]*u+o[0]*c,t[1]=e[1]*l+n[1]*s+i[1]*u+o[1]*c,t[2]=e[2]*l+n[2]*s+i[2]*u+o[2]*c,t},e.bezier=function(t,e,n,i,o,r){var a=1-r,l=a*a,s=r*r,u=l*a,c=3*r*l,f=3*s*a,d=s*r;return t[0]=e[0]*u+n[0]*c+i[0]*f+o[0]*d,t[1]=e[1]*u+n[1]*c+i[1]*f+o[1]*d,t[2]=e[2]*u+n[2]*c+i[2]*f+o[2]*d,t},e.random=function(t,e){e=e||1;var n=2*Math.random()*Math.PI,i=2*Math.random()-1,o=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=i*e,t},e.transformMat4=function(t,e,n){var i=(0,o.default)(e,3),r=i[0],a=i[1],l=i[2],s=n[3]*r+n[7]*a+n[11]*l+n[15]||1;return t[0]=(n[0]*r+n[4]*a+n[8]*l+n[12])/s,t[1]=(n[1]*r+n[5]*a+n[9]*l+n[13])/s,t[2]=(n[2]*r+n[6]*a+n[10]*l+n[14])/s,t},e.transformMat3=function(t,e,n){var i=(0,o.default)(e,3),r=i[0],a=i[1],l=i[2];return t[0]=r*n[0]+a*n[3]+l*n[6],t[1]=r*n[1]+a*n[4]+l*n[7],t[2]=r*n[2]+a*n[5]+l*n[8],t},e.transformQuat=function(t,e,n){var i=(0,o.default)(e,3),r=i[0],a=i[1],l=i[2],s=(0,o.default)(n,4),u=s[0],c=s[1],f=s[2],d=s[3],h=d*r+c*l-f*a,v=d*a+f*r-u*l,p=d*l+u*a-c*r,m=-u*r-c*a-f*l;return t[0]=h*d+m*-u+v*-f-p*-c,t[1]=v*d+m*-c+p*-u-h*-f,t[2]=p*d+m*-f+h*-c-v*-u,t},e.rotateX=function(t,e,n,i){var o=[],r=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],r[0]=o[0],r[1]=o[1]*Math.cos(i)-o[2]*Math.sin(i),r[2]=o[1]*Math.sin(i)+o[2]*Math.cos(i),t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t},e.rotateY=function(t,e,n,i){var o=[],r=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],r[0]=o[2]*Math.sin(i)+o[0]*Math.cos(i),r[1]=o[1],r[2]=o[2]*Math.cos(i)-o[0]*Math.sin(i),t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t},e.rotateZ=function(t,e,n,i){var o=[],r=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],r[0]=o[0]*Math.cos(i)-o[1]*Math.sin(i),r[1]=o[0]*Math.sin(i)+o[1]*Math.cos(i),r[2]=o[2],t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t},e.forEach=function(t,e,n,i,o,r){var a=void 0,l=void 0;for(e||(e=3),n||(n=0),l=i?Math.min(i*e+n,t.length):t.length,a=n;a<l;a+=e)vec[0]=t[a],vec[1]=t[a+1],vec[2]=t[a+2],o(vec,vec,r),t[a]=vec[0],t[a+1]=vec[1],t[a+2]=vec[2];return t},e.angle=function(t,e){var n=fromValues(t[0],t[1],t[2]),i=fromValues(e[0],e[1],e[2]);normalize(n,n),normalize(i,i);var o=dot(n,i);return o>1?0:o<-1?Math.PI:Math.acos(o)},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.equals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}},function(t,e,n){"use strict";function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new l.default(function(n,i){var o=window.URL.createObjectURL(t),r=new Image(e.width,e.height);r.src=o,r.onload=function(){n(r)},r.onerror=function(){i(new Error("blob to image failed"))}})}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.width||t.width,i=e.height||t.height,o=document.createElement("canvas");return o.width=n,o.height=i,o.getContext("2d").drawImage(t,0,0,n,i),o}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new l.default(function(n,i){var o=new Image(e.width,e.height);o.src=t.toDataURL("image/png"),o.onload=function(){n(o)},o.onerror=function(){i()}})}Object.defineProperty(e,"__esModule",{value:!0});var a=n(27),l=function(t){return t&&t.__esModule?t:{default:t}}(a);e.blobToImage=i,e.imageToCanvas=o,e.canvasToImage=r},function(t,e,n){t.exports={default:n(687),__esModule:!0}},,,,function(t,e,n){t.exports={default:n(692),__esModule:!0}},function(t,e,n){t.exports={default:n(693),__esModule:!0}},function(t,e,n){t.exports={default:n(694),__esModule:!0}},function(t,e,n){t.exports={default:n(695),__esModule:!0}},function(t,e,n){t.exports={default:n(696),__esModule:!0}},function(t,e,n){t.exports={default:n(697),__esModule:!0}},,function(t,e,n){n(845),n(784),n(786),n(785),n(788),n(790),n(795),n(789),n(787),n(797),n(796),n(792),n(793),n(791),n(783),n(794),n(798),n(799),n(750),n(752),n(751),n(801),n(800),n(771),n(781),n(782),n(772),n(773),n(774),n(775),n(776),n(777),n(778),n(779),n(780),n(754),n(755),n(756),n(757),n(758),n(759),n(760),n(761),n(762),n(763),n(764),n(765),n(766),n(767),n(768),n(769),n(770),n(832),n(837),n(844),n(835),n(827),n(828),n(833),n(838),n(840),n(823),n(824),n(825),n(826),n(829),n(830),n(831),n(834),n(836),n(839),n(841),n(842),n(843),n(745),n(747),n(746),n(749),n(748),n(734),n(732),n(738),n(735),n(741),n(743),n(731),n(737),n(728),n(742),n(726),n(740),n(739),n(733),n(736),n(725),n(727),n(730),n(729),n(744),n(365),n(816),n(451),n(821),n(452),n(817),n(818),n(819),n(820),n(450),n(753),n(822),n(857),n(858),n(846),n(847),n(852),n(855),n(856),n(850),n(853),n(851),n(854),n(848),n(849),n(802),n(803),n(804),n(805),n(806),n(809),n(807),n(808),n(810),n(811),n(812),n(813),n(815),n(814),t.exports=n(52)},function(t,e,n){n(859),t.exports=n(52).Array.flatMap},function(t,e,n){n(860),t.exports=n(52).Array.includes},function(t,e,n){n(861),t.exports=n(52).Object.entries},function(t,e,n){n(862),t.exports=n(52).Object.getOwnPropertyDescriptors},function(t,e,n){n(863),t.exports=n(52).Object.values},function(t,e,n){"use strict";n(450),n(864),t.exports=n(52).Promise.finally},function(t,e,n){n(865),t.exports=n(52).String.padEnd},function(t,e,n){n(866),t.exports=n(52).String.padStart},function(t,e,n){n(868),t.exports=n(52).String.trimRight},function(t,e,n){n(867),t.exports=n(52).String.trimLeft},function(t,e,n){n(869),t.exports=n(363).f("asyncIterator")},function(t,e,n){n(702),t.exports=n(5).Math.fround},,,function(t,e,n){n(705),t.exports=n(5).Number.isFinite},,function(t,e,n){n(707);var i=n(5).Object;t.exports=function(t){return i.getOwnPropertyNames(t)}},function(t,e,n){n(708),t.exports=n(5).Object.isExtensible},function(t,e,n){n(709),t.exports=n(5).Object.isFrozen},function(t,e,n){n(710),t.exports=n(5).Object.isSealed},function(t,e,n){n(711),t.exports=n(5).Object.preventExtensions},function(t,e,n){n(712),t.exports=n(5).Object.seal},,,,function(t,e,n){var i=n(331),o=Math.pow,r=o(2,-52),a=o(2,-23),l=o(2,127)*(2-a),s=o(2,-126),u=function(t){return t+1/r-1/r};t.exports=Math.fround||function(t){var e,n,o=Math.abs(t),c=i(t);return o<s?c*u(o/s/a)*s*a:(e=(1+a/r)*o,n=e-(e-o),n>l||n!=n?c*(1/0):c*n)}},function(t,e,n){var i=n(8);i(i.S,"Math",{fround:n(701)})},,,function(t,e,n){var i=n(8),o=n(10).isFinite;i(i.S,"Number",{isFinite:function(t){return"number"==typeof t&&o(t)}})},,function(t,e,n){n(49)("getOwnPropertyNames",function(){return n(142).f})},function(t,e,n){var i=n(11);n(49)("isExtensible",function(t){return function(e){return!!i(e)&&(!t||t(e))}})},function(t,e,n){var i=n(11);n(49)("isFrozen",function(t){return function(e){return!i(e)||!!t&&t(e)}})},function(t,e,n){var i=n(11);n(49)("isSealed",function(t){return function(e){return!i(e)||!!t&&t(e)}})},function(t,e,n){var i=n(11),o=n(54).onFreeze;n(49)("preventExtensions",function(t){return function(e){return t&&i(e)?t(o(e)):e}})},function(t,e,n){var i=n(11),o=n(54).onFreeze;n(49)("seal",function(t){return function(e){return t&&i(e)?t(o(e)):e}})},,,,function(t,e,n){var i=n(31),o=n(286),r=n(40)("species");t.exports=function(t){var e;return o(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!o(e.prototype)||(e=void 0),i(e)&&null===(e=e[r])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){"use strict";var i=n(29),o=Date.prototype.getTime,r=Date.prototype.toISOString,a=function(t){return t>9?t:"0"+t};t.exports=i(function(){return"0385-07-25T07:06:39.999Z"!=r.call(new Date(-5e13-1))})||!i(function(){r.call(new Date(NaN))})?function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),i=e<0?"-":e>9999?"+":"";return i+("00000"+Math.abs(e)).slice(i?-6:-4)+"-"+a(t.getUTCMonth()+1)+"-"+a(t.getUTCDate())+"T"+a(t.getUTCHours())+":"+a(t.getUTCMinutes())+":"+a(t.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:r},function(t,e,n){"use strict";var i=n(28),o=n(151);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return o(i(this),"number"!=t)}},function(t,e,n){var i=n(203),o=n(288),r=n(260);t.exports=function(t){var e=i(t),n=o.f;if(n)for(var a,l=n(t),s=r.f,u=0;l.length>u;)s.call(t,a=l[u++])&&e.push(a);return e}},function(t,e,n){"use strict";function i(t,e,n,u,c,f,d,h){for(var v,p,m=c,_=0,g=!!d&&l(d,h,3);_<u;){if(_ in n){if(v=g?g(n[_],_,e):n[_],p=!1,r(v)&&(p=v[s],p=void 0!==p?!!p:o(v)),p&&f>0)m=i(t,e,v,a(v.length),m,f-1)-1;else{if(m>=9007199254740991)throw TypeError();t[m]=v}m++}_++}return m}var o=n(286),r=n(31),a=n(46),l=n(122),s=n(40)("isConcatSpreadable");t.exports=i},function(t,e,n){t.exports=n(290)("native-function-to-string",Function.toString)},function(t,e,n){var i=n(353),o=Math.pow,r=o(2,-52),a=o(2,-23),l=o(2,127)*(2-a),s=o(2,-126),u=function(t){return t+1/r-1/r};t.exports=Math.fround||function(t){var e,n,o=Math.abs(t),c=i(t);return o<s?c*u(o/s/a)*s*a:(e=(1+a/r)*o,n=e-(e-o),n>l||n!=n?c*(1/0):c*n)}},function(t,e,n){var i=n(30),o=n(361).set,r=i.MutationObserver||i.WebKitMutationObserver,a=i.process,l=i.Promise,s="process"==n(133)(a);t.exports=function(){var t,e,n,u=function(){var i,o;for(s&&(i=a.domain)&&i.exit();t;){o=t.fn,t=t.next;try{o()}catch(i){throw t?n():e=void 0,i}}e=void 0,i&&i.enter()};if(s)n=function(){a.nextTick(u)};else if(!r||i.navigator&&i.navigator.standalone)if(l&&l.resolve){var c=l.resolve(void 0);n=function(){c.then(u)}}else n=function(){o.call(i,u)};else{var f=!0,d=document.createTextNode("");new r(u).observe(d,{characterData:!0}),n=function(){d.data=f=!f}}return function(i){var o={fn:i,next:void 0};e&&(e.next=o),t||(t=o,n()),e=o}}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var i=n(6);i(i.P,"Array",{copyWithin:n(423)}),n(198)("copyWithin")},function(t,e,n){"use strict";var i=n(6),o=n(121)(4);i(i.P+i.F*!n(110)([].every,!0),"Array",{every:function(t){return o(this,t,arguments[1])}})},function(t,e,n){var i=n(6);i(i.P,"Array",{fill:n(342)}),n(198)("fill")},function(t,e,n){"use strict";var i=n(6),o=n(121)(2);i(i.P+i.F*!n(110)([].filter,!0),"Array",{filter:function(t){return o(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(6),o=n(121)(6),r="findIndex",a=!0;r in[]&&Array(1)[r](function(){a=!1}),i(i.P+i.F*a,"Array",{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n(198)(r)},function(t,e,n){"use strict";var i=n(6),o=n(121)(5),r=!0;"find"in[]&&Array(1).find(function(){r=!1}),i(i.P+i.F*r,"Array",{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n(198)("find")},function(t,e,n){"use strict";var i=n(6),o=n(121)(0),r=n(110)([].forEach,!0);i(i.P+i.F*!r,"Array",{forEach:function(t){return o(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(122),o=n(6),r=n(76),a=n(432),l=n(349),s=n(46),u=n(343),c=n(364);o(o.S+o.F*!n(287)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,o,f,d=r(t),h="function"==typeof this?this:Array,v=arguments.length,p=v>1?arguments[1]:void 0,m=void 0!==p,_=0,g=c(d);if(m&&(p=i(p,v>2?arguments[2]:void 0,2)),void 0==g||h==Array&&l(g))for(e=s(d.length),n=new h(e);e>_;_++)u(n,_,m?p(d[_],_):d[_]);else for(f=g.call(d),n=new h;!(o=f.next()).done;_++)u(n,_,m?a(f,p,[o.value,_],!0):o.value);return n.length=_,n}})},function(t,e,n){"use strict";var i=n(6),o=n(281)(!1),r=[].indexOf,a=!!r&&1/[1].indexOf(1,-0)<0;i(i.P+i.F*(a||!n(110)(r)),"Array",{indexOf:function(t){return a?r.apply(this,arguments)||0:o(this,t,arguments[1])}})},function(t,e,n){var i=n(6);i(i.S,"Array",{isArray:n(286)})},function(t,e,n){"use strict";var i=n(6),o=n(101),r=[].join;i(i.P+i.F*(n(259)!=Object||!n(110)(r)),"Array",{join:function(t){return r.call(o(this),void 0===t?",":t)}})},function(t,e,n){"use strict";var i=n(6),o=n(101),r=n(125),a=n(46),l=[].lastIndexOf,s=!!l&&1/[1].lastIndexOf(1,-0)<0;i(i.P+i.F*(s||!n(110)(l)),"Array",{lastIndexOf:function(t){if(s)return l.apply(this,arguments)||0;var e=o(this),n=a(e.length),i=n-1;for(arguments.length>1&&(i=Math.min(i,r(arguments[1]))),i<0&&(i=n+i);i>=0;i--)if(i in e&&e[i]===t)return i||0;return-1}})},function(t,e,n){"use strict";var i=n(6),o=n(121)(1);i(i.P+i.F*!n(110)([].map,!0),"Array",{map:function(t){return o(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(6),o=n(343);i(i.S+i.F*n(29)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)o(n,t,arguments[t++]);return n.length=e,n}})},function(t,e,n){"use strict";var i=n(6),o=n(424);i(i.P+i.F*!n(110)([].reduceRight,!0),"Array",{reduceRight:function(t){return o(this,t,arguments.length,arguments[1],!0)}})},function(t,e,n){"use strict";var i=n(6),o=n(424);i(i.P+i.F*!n(110)([].reduce,!0),"Array",{reduce:function(t){return o(this,t,arguments.length,arguments[1],!1)}})},function(t,e,n){"use strict";var i=n(6),o=n(347),r=n(133),a=n(205),l=n(46),s=[].slice;i(i.P+i.F*n(29)(function(){o&&s.call(o)}),"Array",{slice:function(t,e){var n=l(this.length),i=r(this);if(e=void 0===e?n:e,"Array"==i)return s.call(this,t,e);for(var o=a(t,n),u=a(e,n),c=l(u-o),f=new Array(c),d=0;d<c;d++)f[d]="String"==i?this.charAt(o+d):this[o+d];return f}})},function(t,e,n){"use strict";var i=n(6),o=n(121)(3);i(i.P+i.F*!n(110)([].some,!0),"Array",{some:function(t){return o(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(6),o=n(120),r=n(76),a=n(29),l=[].sort,s=[1,2,3];i(i.P+i.F*(a(function(){s.sort(void 0)})||!a(function(){s.sort(null)})||!n(110)(l)),"Array",{sort:function(t){return void 0===t?l.call(r(this)):l.call(r(this),o(t))}})},function(t,e,n){n(217)("Array")},function(t,e,n){var i=n(6);i(i.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,n){var i=n(6),o=n(717);i(i.P+i.F*(Date.prototype.toISOString!==o),"Date",{toISOString:o})},function(t,e,n){"use strict";var i=n(6),o=n(76),r=n(151);i(i.P+i.F*n(29)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=o(this),n=r(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},function(t,e,n){var i=n(40)("toPrimitive"),o=Date.prototype;i in o||n(100)(o,i,n(718))},function(t,e,n){var i=Date.prototype,o=i.toString,r=i.getTime;new Date(NaN)+""!="Invalid Date"&&n(90)(i,"toString",function(){var t=r.call(this);return t===t?o.call(this):"Invalid Date"})},function(t,e,n){var i=n(6);i(i.P,"Function",{bind:n(426)})},function(t,e,n){"use strict";var i=n(31),o=n(202),r=n(40)("hasInstance"),a=Function.prototype;r in a||n(57).f(a,r,{value:function(t){if("function"!=typeof this||!i(t))return!1;if(!i(this.prototype))return t instanceof this;for(;t=o(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,n){var i=n(57).f,o=Function.prototype,r=/^\s*function ([^ (]*)/;"name"in o||n(56)&&i(o,"name",{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(t){return""}}})},function(t,e,n){"use strict";var i=n(427),o=n(207);t.exports=n(282)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=i.getEntry(o(this,"Map"),t);return e&&e.v},set:function(t,e){return i.def(o(this,"Map"),0===t?0:t,e)}},i,!0)},function(t,e,n){var i=n(6),o=n(435),r=Math.sqrt,a=Math.acosh;i(i.S+i.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:o(t-1+r(t-1)*r(t+1))}})},function(t,e,n){function i(t){return isFinite(t=+t)&&0!=t?t<0?-i(-t):Math.log(t+Math.sqrt(t*t+1)):t}var o=n(6),r=Math.asinh;o(o.S+o.F*!(r&&1/r(0)>0),"Math",{asinh:i})},function(t,e,n){var i=n(6),o=Math.atanh;i(i.S+i.F*!(o&&1/o(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,n){var i=n(6),o=n(353);i(i.S,"Math",{cbrt:function(t){return o(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e,n){var i=n(6);i(i.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,n){var i=n(6),o=Math.exp;i(i.S,"Math",{cosh:function(t){return(o(t=+t)+o(-t))/2}})},function(t,e,n){var i=n(6),o=n(352);i(i.S+i.F*(o!=Math.expm1),"Math",{expm1:o})},function(t,e,n){var i=n(6);i(i.S,"Math",{fround:n(722)})},function(t,e,n){var i=n(6),o=Math.abs;i(i.S,"Math",{hypot:function(t,e){for(var n,i,r=0,a=0,l=arguments.length,s=0;a<l;)n=o(arguments[a++]),s<n?(i=s/n,r=r*i*i+1,s=n):n>0?(i=n/s,r+=i*i):r+=n;return s===1/0?1/0:s*Math.sqrt(r)}})},function(t,e,n){var i=n(6),o=Math.imul;i(i.S+i.F*n(29)(function(){return-5!=o(4294967295,5)||2!=o.length}),"Math",{imul:function(t,e){var n=+t,i=+e,o=65535&n,r=65535&i;return 0|o*r+((65535&n>>>16)*r+o*(65535&i>>>16)<<16>>>0)}})},function(t,e,n){var i=n(6);i(i.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,n){var i=n(6);i(i.S,"Math",{log1p:n(435)})},function(t,e,n){var i=n(6);i(i.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){var i=n(6);i(i.S,"Math",{sign:n(353)})},function(t,e,n){var i=n(6),o=n(352),r=Math.exp;i(i.S+i.F*n(29)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(o(t)-o(-t))/2:(r(t-1)-r(-t-1))*(Math.E/2)}})},function(t,e,n){var i=n(6),o=n(352),r=Math.exp;i(i.S,"Math",{tanh:function(t){var e=o(t=+t),n=o(-t);return e==1/0?1:n==1/0?-1:(e-n)/(r(t)+r(-t))}})},function(t,e,n){var i=n(6);i(i.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,n){"use strict";var i=n(30),o=n(99),r=n(133),a=n(348),l=n(151),s=n(29),u=n(201).f,c=n(123).f,f=n(57).f,d=n(219).trim,h=i.Number,v=h,p=h.prototype,m="Number"==r(n(200)(p)),_="trim"in String.prototype,g=function(t){var e=l(t,!1);if("string"==typeof e&&e.length>2){e=_?e.trim():d(e,3);var n,i,o,r=e.charCodeAt(0);if(43===r||45===r){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===r){switch(e.charCodeAt(1)){case 66:case 98:i=2,o=49;break;case 79:case 111:i=8,o=55;break;default:return+e}for(var a,s=e.slice(2),u=0,c=s.length;u<c;u++)if((a=s.charCodeAt(u))<48||a>o)return NaN;return parseInt(s,i)}}return+e};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof h&&(m?s(function(){p.valueOf.call(n)}):"Number"!=r(n))?a(new v(g(e)),n,h):g(e)};for(var y,x=n(56)?u(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),b=0;x.length>b;b++)o(v,y=x[b])&&!o(h,y)&&f(h,y,c(v,y));h.prototype=p,p.constructor=h,n(90)(i,"Number",h)}},function(t,e,n){var i=n(6);i(i.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){var i=n(6),o=n(30).isFinite;i(i.S,"Number",{isFinite:function(t){return"number"==typeof t&&o(t)}})},function(t,e,n){var i=n(6);i(i.S,"Number",{isInteger:n(431)})},function(t,e,n){var i=n(6);i(i.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var i=n(6),o=n(431),r=Math.abs;i(i.S,"Number",{isSafeInteger:function(t){return o(t)&&r(t)<=9007199254740991}})},function(t,e,n){var i=n(6);i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){var i=n(6);i(i.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var i=n(6),o=n(443);i(i.S+i.F*(Number.parseFloat!=o),"Number",{parseFloat:o})},function(t,e,n){var i=n(6),o=n(444);i(i.S+i.F*(Number.parseInt!=o),"Number",{parseInt:o})},function(t,e,n){"use strict";var i=n(6),o=n(125),r=n(422),a=n(359),l=1..toFixed,s=Math.floor,u=[0,0,0,0,0,0],c="Number.toFixed: incorrect invocation!",f=function(t,e){for(var n=-1,i=e;++n<6;)i+=t*u[n],u[n]=i%1e7,i=s(i/1e7)},d=function(t){for(var e=6,n=0;--e>=0;)n+=u[e],u[e]=s(n/t),n=n%t*1e7},h=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==u[t]){var n=String(u[t]);e=""===e?n:e+a.call("0",7-n.length)+n}return e},v=function(t,e,n){return 0===e?n:e%2==1?v(t,e-1,n*t):v(t*t,e/2,n)},p=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e};i(i.P+i.F*(!!l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(29)(function(){l.call({})})),"Number",{toFixed:function(t){var e,n,i,l,s=r(this,c),u=o(t),m="",_="0";if(u<0||u>20)throw RangeError(c);if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(s<0&&(m="-",s=-s),s>1e-21)if(e=p(s*v(2,69,1))-69,n=e<0?s*v(2,-e,1):s/v(2,e,1),n*=4503599627370496,(e=52-e)>0){for(f(0,n),i=u;i>=7;)f(1e7,0),i-=7;for(f(v(10,i,1),0),i=e-1;i>=23;)d(1<<23),i-=23;d(1<<i),f(1,1),d(2),_=h()}else f(0,n),f(1<<-e,0),_=h()+a.call("0",u);return u>0?(l=_.length,_=m+(l<=u?"0."+a.call("0",u-l)+_:_.slice(0,l-u)+"."+_.slice(l-u))):_=m+_,_}})},function(t,e,n){"use strict";var i=n(6),o=n(29),r=n(422),a=1..toPrecision;i(i.P+i.F*(o(function(){return"1"!==a.call(1,void 0)})||!o(function(){a.call({})})),"Number",{toPrecision:function(t){var e=r(this,"Number#toPrecision: incorrect invocation!");return void 0===t?a.call(e):a.call(e,t)}})},function(t,e,n){var i=n(6);i(i.S+i.F,"Object",{assign:n(437)})},function(t,e,n){var i=n(6);i(i.S,"Object",{create:n(200)})},function(t,e,n){var i=n(6);i(i.S+i.F*!n(56),"Object",{defineProperties:n(438)})},function(t,e,n){var i=n(6);i(i.S+i.F*!n(56),"Object",{defineProperty:n(57).f})},function(t,e,n){var i=n(31),o=n(150).onFreeze;n(124)("freeze",function(t){return function(e){return t&&i(e)?t(o(e)):e}})},function(t,e,n){var i=n(101),o=n(123).f;n(124)("getOwnPropertyDescriptor",function(){return function(t,e){return o(i(t),e)}})},function(t,e,n){n(124)("getOwnPropertyNames",function(){return n(439).f})},function(t,e,n){var i=n(76),o=n(202);n(124)("getPrototypeOf",function(){return function(t){return o(i(t))}})},function(t,e,n){var i=n(31);n(124)("isExtensible",function(t){return function(e){return!!i(e)&&(!t||t(e))}})},function(t,e,n){var i=n(31);n(124)("isFrozen",function(t){return function(e){return!i(e)||!!t&&t(e)}})},function(t,e,n){var i=n(31);n(124)("isSealed",function(t){return function(e){return!i(e)||!!t&&t(e)}})},function(t,e,n){var i=n(6);i(i.S,"Object",{is:n(446)})},function(t,e,n){var i=n(76),o=n(203);n(124)("keys",function(){return function(t){return o(i(t))}})},function(t,e,n){var i=n(31),o=n(150).onFreeze;n(124)("preventExtensions",function(t){return function(e){return t&&i(e)?t(o(e)):e}})},function(t,e,n){var i=n(31),o=n(150).onFreeze;n(124)("seal",function(t){return function(e){return t&&i(e)?t(o(e)):e}})},function(t,e,n){var i=n(6);i(i.S,"Object",{setPrototypeOf:n(355).set})},function(t,e,n){"use strict";var i=n(258),o={};o[n(40)("toStringTag")]="z",o+""!="[object z]"&&n(90)(Object.prototype,"toString",function(){return"[object "+i(this)+"]"},!0)},function(t,e,n){var i=n(6),o=n(443);i(i.G+i.F*(parseFloat!=o),{parseFloat:o})},function(t,e,n){var i=n(6),o=n(444);i(i.G+i.F*(parseInt!=o),{parseInt:o})},function(t,e,n){var i=n(6),o=n(120),r=n(28),a=(n(30).Reflect||{}).apply,l=Function.apply;i(i.S+i.F*!n(29)(function(){a(function(){})}),"Reflect",{apply:function(t,e,n){var i=o(t),s=r(n);return a?a(i,e,s):l.call(i,e,s)}})},function(t,e,n){var i=n(6),o=n(200),r=n(120),a=n(28),l=n(31),s=n(29),u=n(426),c=(n(30).Reflect||{}).construct,f=s(function(){function t(){}return!(c(function(){},[],t)instanceof t)}),d=!s(function(){c(function(){})});i(i.S+i.F*(f||d),"Reflect",{construct:function(t,e){r(t),a(e);var n=arguments.length<3?t:r(arguments[2]);if(d&&!f)return c(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var i=[null];return i.push.apply(i,e),new(u.apply(t,i))}var s=n.prototype,h=o(l(s)?s:Object.prototype),v=Function.apply.call(t,h,e);return l(v)?v:h}})},function(t,e,n){var i=n(57),o=n(6),r=n(28),a=n(151);o(o.S+o.F*n(29)(function(){Reflect.defineProperty(i.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){r(t),e=a(e,!0),r(n);try{return i.f(t,e,n),!0}catch(t){return!1}}})},function(t,e,n){var i=n(6),o=n(123).f,r=n(28);i(i.S,"Reflect",{deleteProperty:function(t,e){var n=o(r(t),e);return!(n&&!n.configurable)&&delete t[e]}})},function(t,e,n){"use strict";var i=n(6),o=n(28),r=function(t){this._t=o(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(433)(r,"Object",function(){var t,e=this,n=e._k;do{if(e._i>=n.length)return{value:void 0,done:!0}}while(!((t=n[e._i++])in e._t));return{value:t,done:!1}}),i(i.S,"Reflect",{enumerate:function(t){return new r(t)}})},function(t,e,n){var i=n(123),o=n(6),r=n(28);o(o.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return i.f(r(t),e)}})},function(t,e,n){var i=n(6),o=n(202),r=n(28);i(i.S,"Reflect",{getPrototypeOf:function(t){return o(r(t))}})},function(t,e,n){function i(t,e){var n,l,c=arguments.length<3?t:arguments[2];return u(t)===c?t[e]:(n=o.f(t,e))?a(n,"value")?n.value:void 0!==n.get?n.get.call(c):void 0:s(l=r(t))?i(l,e,c):void 0}var o=n(123),r=n(202),a=n(99),l=n(6),s=n(31),u=n(28);l(l.S,"Reflect",{get:i})},function(t,e,n){var i=n(6);i(i.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,n){var i=n(6),o=n(28),r=Object.isExtensible;i(i.S,"Reflect",{isExtensible:function(t){return o(t),!r||r(t)}})},function(t,e,n){var i=n(6);i(i.S,"Reflect",{ownKeys:n(442)})},function(t,e,n){var i=n(6),o=n(28),r=Object.preventExtensions;i(i.S,"Reflect",{preventExtensions:function(t){o(t);try{return r&&r(t),!0}catch(t){return!1}}})},function(t,e,n){var i=n(6),o=n(355);o&&i(i.S,"Reflect",{setPrototypeOf:function(t,e){o.check(t,e);try{return o.set(t,e),!0}catch(t){return!1}}})},function(t,e,n){function i(t,e,n){var s,d,h=arguments.length<4?t:arguments[3],v=r.f(c(t),e);if(!v){if(f(d=a(t)))return i(d,e,n,h);v=u(0)}if(l(v,"value")){if(!1===v.writable||!f(h))return!1;if(s=r.f(h,e)){if(s.get||s.set||!1===s.writable)return!1;s.value=n,o.f(h,e,s)}else o.f(h,e,u(0,n));return!0}return void 0!==v.set&&(v.set.call(h,n),!0)}var o=n(57),r=n(123),a=n(202),l=n(99),s=n(6),u=n(204),c=n(28),f=n(31);s(s.S,"Reflect",{set:i})},function(t,e,n){var i=n(30),o=n(348),r=n(57).f,a=n(201).f,l=n(350),s=n(284),u=i.RegExp,c=u,f=u.prototype,d=/a/g,h=/a/g,v=new u(d)!==d;if(n(56)&&(!v||n(29)(function(){return h[n(40)("match")]=!1,u(d)!=d||u(h)==h||"/a/i"!=u(d,"i")}))){u=function(t,e){var n=this instanceof u,i=l(t),r=void 0===e;return!n&&i&&t.constructor===u&&r?t:o(v?new c(i&&!r?t.source:t,e):c((i=t instanceof u)?t.source:t,i&&r?s.call(t):e),n?this:f,u)};for(var p=a(c),m=0;p.length>m;)!function(t){t in u||r(u,t,{configurable:!0,get:function(){return c[t]},set:function(e){c[t]=e}})}(p[m++]);f.constructor=u,u.prototype=f,n(90)(i,"RegExp",u)}n(217)("RegExp")},function(t,e,n){"use strict";var i=n(28),o=n(46),r=n(341),a=n(289);n(283)("match",1,function(t,e,n,l){return[function(n){var i=t(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,i):new RegExp(n)[e](String(i))},function(t){var e=l(n,t,this);if(e.done)return e.value;var s=i(t),u=String(this);if(!s.global)return a(s,u);var c=s.unicode;s.lastIndex=0;for(var f,d=[],h=0;null!==(f=a(s,u));){var v=String(f[0]);d[h]=v,""===v&&(s.lastIndex=r(u,o(s.lastIndex),c)),h++}return 0===h?null:d}]})},function(t,e,n){"use strict";var i=n(28),o=n(76),r=n(46),a=n(125),l=n(341),s=n(289),u=Math.max,c=Math.min,f=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g,v=function(t){return void 0===t?t:String(t)};n(283)("replace",2,function(t,e,n,p){function m(t,e,i,r,a,l){var s=i+t.length,u=r.length,c=h;return void 0!==a&&(a=o(a),c=d),n.call(l,c,function(n,o){var l;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,i);case"'":return e.slice(s);case"<":l=a[o.slice(1,-1)];break;default:var c=+o;if(0===c)return n;if(c>u){var d=f(c/10);return 0===d?n:d<=u?void 0===r[d-1]?o.charAt(1):r[d-1]+o.charAt(1):n}l=r[c-1]}return void 0===l?"":l})}return[function(i,o){var r=t(this),a=void 0==i?void 0:i[e];return void 0!==a?a.call(i,r,o):n.call(String(r),i,o)},function(t,e){var o=p(n,t,this,e);if(o.done)return o.value;var f=i(t),d=String(this),h="function"==typeof e;h||(e=String(e));var _=f.global;if(_){var g=f.unicode;f.lastIndex=0}for(var y=[];;){var x=s(f,d);if(null===x)break;if(y.push(x),!_)break;""===String(x[0])&&(f.lastIndex=l(d,r(f.lastIndex),g))}for(var b="",S=0,w=0;w<y.length;w++){x=y[w];for(var E=String(x[0]),T=u(c(a(x.index),d.length),0),I=[],A=1;A<x.length;A++)I.push(v(x[A]));var k=x.groups;if(h){var P=[E].concat(I,T,d);void 0!==k&&P.push(k);var M=String(e.apply(void 0,P))}else M=m(E,d,T,I,k,e);T>=S&&(b+=d.slice(S,T)+M,S=T+E.length)}return b+d.slice(S)}]})},function(t,e,n){"use strict";var i=n(28),o=n(446),r=n(289);n(283)("search",1,function(t,e,n,a){return[function(n){var i=t(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,i):new RegExp(n)[e](String(i))},function(t){var e=a(n,t,this);if(e.done)return e.value;var l=i(t),s=String(this),u=l.lastIndex;o(u,0)||(l.lastIndex=0);var c=r(l,s);return o(l.lastIndex,u)||(l.lastIndex=u),null===c?-1:c.index}]})},function(t,e,n){"use strict";var i=n(350),o=n(28),r=n(261),a=n(341),l=n(46),s=n(289),u=n(354),c=n(29),f=Math.min,d=[].push,h="length",v=!c(function(){RegExp(4294967295,"y")});n(283)("split",2,function(t,e,n,c){var p;return p="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[h]||2!="ab".split(/(?:ab)*/)[h]||4!=".".split(/(.?)(.?)/)[h]||".".split(/()()/)[h]>1||"".split(/.?/)[h]?function(t,e){var o=String(this);if(void 0===t&&0===e)return[];if(!i(t))return n.call(o,t,e);for(var r,a,l,s=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,v=void 0===e?4294967295:e>>>0,p=new RegExp(t.source,c+"g");(r=u.call(p,o))&&!((a=p.lastIndex)>f&&(s.push(o.slice(f,r.index)),r[h]>1&&r.index<o[h]&&d.apply(s,r.slice(1)),l=r[0][h],f=a,s[h]>=v));)p.lastIndex===r.index&&p.lastIndex++;return f===o[h]?!l&&p.test("")||s.push(""):s.push(o.slice(f)),s[h]>v?s.slice(0,v):s}:"0".split(void 0,0)[h]?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,i){var o=t(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,o,i):p.call(String(o),n,i)},function(t,e){var i=c(p,t,this,e,p!==n);if(i.done)return i.value;var u=o(t),d=String(this),h=r(u,RegExp),m=u.unicode,_=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(v?"y":"g"),g=new h(v?u:"^(?:"+u.source+")",_),y=void 0===e?4294967295:e>>>0;if(0===y)return[];if(0===d.length)return null===s(g,d)?[d]:[];for(var x=0,b=0,S=[];b<d.length;){g.lastIndex=v?b:0;var w,E=s(g,v?d:d.slice(b));if(null===E||(w=f(l(g.lastIndex+(v?0:b)),d.length))===x)b=a(d,b,m);else{if(S.push(d.slice(x,b)),S.length===y)return S;for(var T=1;T<=E.length-1;T++)if(S.push(E[T]),S.length===y)return S;b=x=w}}return S.push(d.slice(x)),S}]})},function(t,e,n){"use strict";n(452);var i=n(28),o=n(284),r=n(56),a=/./.toString,l=function(t){n(90)(RegExp.prototype,"toString",t,!0)};n(29)(function(){return"/a/b"!=a.call({source:"a",flags:"b"})})?l(function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!r&&t instanceof RegExp?o.call(t):void 0)}):"toString"!=a.name&&l(function(){return a.call(this)})},function(t,e,n){"use strict";var i=n(427),o=n(207);t.exports=n(282)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(o(this,"Set"),t=0===t?0:t,t)}},i)},function(t,e,n){"use strict";n(91)("anchor",function(t){return function(e){return t(this,"a","name",e)}})},function(t,e,n){"use strict";n(91)("big",function(t){return function(){return t(this,"big","","")}})},function(t,e,n){"use strict";n(91)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,e,n){"use strict";n(91)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,e,n){"use strict";var i=n(6),o=n(357)(!1);i(i.P,"String",{codePointAt:function(t){return o(this,t)}})},function(t,e,n){"use strict";var i=n(6),o=n(46),r=n(358),a="".endsWith;i(i.P+i.F*n(346)("endsWith"),"String",{endsWith:function(t){var e=r(this,t,"endsWith"),n=arguments.length>1?arguments[1]:void 0,i=o(e.length),l=void 0===n?i:Math.min(o(n),i),s=String(t);return a?a.call(e,s,l):e.slice(l-s.length,l)===s}})},function(t,e,n){"use strict";n(91)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,e,n){"use strict";n(91)("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},function(t,e,n){"use strict";n(91)("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},function(t,e,n){var i=n(6),o=n(205),r=String.fromCharCode,a=String.fromCodePoint;i(i.S+i.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(t){for(var e,n=[],i=arguments.length,a=0;i>a;){if(e=+arguments[a++],o(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?r(e):r(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}})},function(t,e,n){"use strict";var i=n(6),o=n(358);i(i.P+i.F*n(346)("includes"),"String",{includes:function(t){return!!~o(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";n(91)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,e,n){"use strict";var i=n(357)(!0);n(351)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){"use strict";n(91)("link",function(t){return function(e){return t(this,"a","href",e)}})},function(t,e,n){var i=n(6),o=n(101),r=n(46);i(i.S,"String",{raw:function(t){for(var e=o(t.raw),n=r(e.length),i=arguments.length,a=[],l=0;n>l;)a.push(String(e[l++])),l<i&&a.push(String(arguments[l]));return a.join("")}})},function(t,e,n){var i=n(6);i(i.P,"String",{repeat:n(359)})},function(t,e,n){"use strict";n(91)("small",function(t){return function(){return t(this,"small","","")}})},function(t,e,n){"use strict";var i=n(6),o=n(46),r=n(358),a="".startsWith;i(i.P+i.F*n(346)("startsWith"),"String",{startsWith:function(t){var e=r(this,t,"startsWith"),n=o(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),i=String(t);return a?a.call(e,i,n):e.slice(n,n+i.length)===i}})},function(t,e,n){"use strict";n(91)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,e,n){"use strict";n(91)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,e,n){"use strict";n(91)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,e,n){"use strict";n(219)("trim",function(t){return function(){return t(this,3)}})},function(t,e,n){"use strict";var i=n(30),o=n(99),r=n(56),a=n(6),l=n(90),s=n(150).KEY,u=n(29),c=n(290),f=n(218),d=n(206),h=n(40),v=n(363),p=n(449),m=n(719),_=n(286),g=n(28),y=n(31),x=n(76),b=n(101),S=n(151),w=n(204),E=n(200),T=n(439),I=n(123),A=n(288),k=n(57),P=n(203),M=I.f,L=k.f,C=T.f,N=i.Symbol,O=i.JSON,R=O&&O.stringify,V=h("_hidden"),B=h("toPrimitive"),F={}.propertyIsEnumerable,z=c("symbol-registry"),D=c("symbols"),U=c("op-symbols"),Y=Object.prototype,j="function"==typeof N&&!!A.f,G=i.QObject,W=!G||!G.prototype||!G.prototype.findChild,Z=r&&u(function(){return 7!=E(L({},"a",{get:function(){return L(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=M(Y,e);i&&delete Y[e],L(t,e,n),i&&t!==Y&&L(Y,e,i)}:L,X=function(t){var e=D[t]=E(N.prototype);return e._k=t,e},H=j&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Q=function(t,e,n){return t===Y&&Q(U,e,n),g(t),e=S(e,!0),g(n),o(D,e)?(n.enumerable?(o(t,V)&&t[V][e]&&(t[V][e]=!1),n=E(n,{enumerable:w(0,!1)})):(o(t,V)||L(t,V,w(1,{})),t[V][e]=!0),Z(t,e,n)):L(t,e,n)},q=function(t,e){g(t);for(var n,i=m(e=b(e)),o=0,r=i.length;r>o;)Q(t,n=i[o++],e[n]);return t},J=function(t,e){return void 0===e?E(t):q(E(t),e)},K=function(t){var e=F.call(this,t=S(t,!0));return!(this===Y&&o(D,t)&&!o(U,t))&&(!(e||!o(this,t)||!o(D,t)||o(this,V)&&this[V][t])||e)},$=function(t,e){if(t=b(t),e=S(e,!0),t!==Y||!o(D,e)||o(U,e)){var n=M(t,e);return!n||!o(D,e)||o(t,V)&&t[V][e]||(n.enumerable=!0),n}},tt=function(t){for(var e,n=C(b(t)),i=[],r=0;n.length>r;)o(D,e=n[r++])||e==V||e==s||i.push(e);return i},et=function(t){for(var e,n=t===Y,i=C(n?U:b(t)),r=[],a=0;i.length>a;)!o(D,e=i[a++])||n&&!o(Y,e)||r.push(D[e]);return r};j||(N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===Y&&e.call(U,n),o(this,V)&&o(this[V],t)&&(this[V][t]=!1),Z(this,t,w(1,n))};return r&&W&&Z(Y,t,{configurable:!0,set:e}),X(t)},l(N.prototype,"toString",function(){return this._k}),I.f=$,k.f=Q,n(201).f=T.f=tt,n(260).f=K,A.f=et,r&&!n(199)&&l(Y,"propertyIsEnumerable",K,!0),v.f=function(t){return X(h(t))}),a(a.G+a.W+a.F*!j,{Symbol:N});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),it=0;nt.length>it;)h(nt[it++]);for(var ot=P(h.store),rt=0;ot.length>rt;)p(ot[rt++]);a(a.S+a.F*!j,"Symbol",{for:function(t){return o(z,t+="")?z[t]:z[t]=N(t)},keyFor:function(t){if(!H(t))throw TypeError(t+" is not a symbol!");for(var e in z)if(z[e]===t)return e},useSetter:function(){W=!0},useSimple:function(){W=!1}}),a(a.S+a.F*!j,"Object",{create:J,defineProperty:Q,defineProperties:q,getOwnPropertyDescriptor:$,getOwnPropertyNames:tt,getOwnPropertySymbols:et});var at=u(function(){A.f(1)});a(a.S+a.F*at,"Object",{getOwnPropertySymbols:function(t){return A.f(x(t))}}),O&&a(a.S+a.F*(!j||u(function(){var t=N();return"[null]"!=R([t])||"{}"!=R({a:t})||"{}"!=R(Object(t))})),"JSON",{stringify:function(t){for(var e,n,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(n=e=i[1],(y(e)||void 0!==t)&&!H(t))return _(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!H(e))return e}),i[1]=e,R.apply(O,i)}}),N.prototype[B]||n(100)(N.prototype,B,N.prototype.valueOf),f(N,"Symbol"),f(Math,"Math",!0),f(i.JSON,"JSON",!0)},function(t,e,n){"use strict";var i=n(6),o=n(291),r=n(362),a=n(28),l=n(205),s=n(46),u=n(31),c=n(30).ArrayBuffer,f=n(261),d=r.ArrayBuffer,h=r.DataView,v=o.ABV&&c.isView,p=d.prototype.slice,m=o.VIEW;i(i.G+i.W+i.F*(c!==d),{ArrayBuffer:d}),i(i.S+i.F*!o.CONSTR,"ArrayBuffer",{isView:function(t){return v&&v(t)||u(t)&&m in t}}),i(i.P+i.U+i.F*n(29)(function(){return!new d(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(t,e){if(void 0!==p&&void 0===e)return p.call(a(this),t);for(var n=a(this).byteLength,i=l(t,n),o=l(void 0===e?n:e,n),r=new(f(this,d))(s(o-i)),u=new h(this),c=new h(r),v=0;i<o;)c.setUint8(v++,u.getUint8(i++));return r}}),n(217)("ArrayBuffer")},function(t,e,n){var i=n(6);i(i.G+i.W+i.F*!n(291).ABV,{DataView:n(362).DataView})},function(t,e,n){n(135)("Float32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(135)("Float64",8,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(135)("Int16",2,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(135)("Int32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(135)("Int8",1,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(135)("Uint16",2,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(135)("Uint32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(135)("Uint8",1,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(135)("Uint8",1,function(t){return function(e,n,i){return t(this,e,n,i)}},!0)},function(t,e,n){"use strict";var i,o=n(30),r=n(121)(0),a=n(90),l=n(150),s=n(437),u=n(428),c=n(31),f=n(207),d=n(207),h=!o.ActiveXObject&&"ActiveXObject"in o,v=l.getWeak,p=Object.isExtensible,m=u.ufstore,_=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},g={get:function(t){if(c(t)){var e=v(t);return!0===e?m(f(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return u.def(f(this,"WeakMap"),t,e)}},y=t.exports=n(282)("WeakMap",_,g,u,!0,!0);d&&h&&(i=u.getConstructor(_,"WeakMap"),s(i.prototype,g),l.NEED=!0,r(["delete","has","get","set"],function(t){var e=y.prototype,n=e[t];a(e,t,function(e,o){if(c(e)&&!p(e)){this._f||(this._f=new i);var r=this._f[t](e,o);return"set"==t?this:r}return n.call(this,e,o)})}))},function(t,e,n){"use strict";var i=n(428),o=n(207);n(282)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(o(this,"WeakSet"),t,!0)}},i,!1,!0)},function(t,e,n){"use strict";var i=n(6),o=n(720),r=n(76),a=n(46),l=n(120),s=n(425);i(i.P,"Array",{flatMap:function(t){var e,n,i=r(this);return l(t),e=a(i.length),n=s(i,0),o(n,i,i,e,0,1,t,arguments[1]),n}}),n(198)("flatMap")},function(t,e,n){"use strict";var i=n(6),o=n(281)(!0);i(i.P,"Array",{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n(198)("includes")},function(t,e,n){var i=n(6),o=n(441)(!0);i(i.S,"Object",{entries:function(t){return o(t)}})},function(t,e,n){var i=n(6),o=n(442),r=n(101),a=n(123),l=n(343);i(i.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,i=r(t),s=a.f,u=o(i),c={},f=0;u.length>f;)void 0!==(n=s(i,e=u[f++]))&&l(c,e,n);return c}})},function(t,e,n){var i=n(6),o=n(441)(!1);i(i.S,"Object",{values:function(t){return o(t)}})},function(t,e,n){"use strict";var i=n(6),o=n(52),r=n(30),a=n(261),l=n(445);i(i.P+i.R,"Promise",{finally:function(t){var e=a(this,o.Promise||r.Promise),n="function"==typeof t;return this.then(n?function(n){return l(e,t()).then(function(){return n})}:t,n?function(n){return l(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var i=n(6),o=n(447),r=n(292),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r);i(i.P+i.F*a,"String",{padEnd:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,n){"use strict";var i=n(6),o=n(447),r=n(292),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r);i(i.P+i.F*a,"String",{padStart:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,n){"use strict";n(219)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,e,n){"use strict";n(219)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,e,n){n(449)("asyncIterator")},function(t,e,n){for(var i=n(365),o=n(203),r=n(90),a=n(30),l=n(100),s=n(215),u=n(40),c=u("iterator"),f=u("toStringTag"),d=s.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},v=o(h),p=0;p<v.length;p++){var m,_=v[p],g=h[_],y=a[_],x=y&&y.prototype;if(x&&(x[c]||l(x,c,d),x[f]||l(x,f,_),s[_]=d,g))for(m in i)x[m]||r(x,m,i[m],!0)}},function(t,e,n){var i=n(6),o=n(361);i(i.G+i.B,{setImmediate:o.set,clearImmediate:o.clear})},function(t,e,n){var i=n(30),o=n(6),r=n(292),a=[].slice,l=/MSIE .\./.test(r),s=function(t){return function(e,n){var i=arguments.length>2,o=!!i&&a.call(arguments,2);return t(i?function(){("function"==typeof e?e:Function(e)).apply(this,o)}:e,n)}};o(o.G+o.B+o.F*l,{setTimeout:s(i.setTimeout),setInterval:s(i.setInterval)})},function(t,e,n){n(872),n(871),n(870),t.exports=n(52)},function(t,e,n){e=t.exports=n(262)(),e.push([t.i,'.floor-control{font-size:15px;color:#646464;height:180px;width:38px;background:#fff;position:relative;bottom:83px!important;margin-left:31px;margin-right:30px;border-radius:40px;webkit-user-select:none;ms-user-select:none;moz-user-select:none;apple-user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10}.floor-control:after{position:absolute;top:0;left:0;width:200%;height:200%;transform:scale(.5);transform-origin:left top;border-radius:40px;z-index:1000000;box-shadow:0 0 1px 1px rgba(0,0,0,.12)}.floor-control ul{-webkit-padding-start:0;padding-inline-start:0;-webkit-padding-end:0;padding-inline-end:0;-webkit-margin-before:0;margin-block-start:0;-webkit-margin-after:0;margin-block-end:0}.floor-control .arr-top{width:38px;position:absolute;z-index:100;top:-2px}.floor-control .arr-bottom{width:38px;position:absolute;z-index:100;bottom:-2px}.floor-control .floor-control-wrapper{overflow:hidden;height:160px;width:100%;position:absolute;top:10px}.floor-control .floor-control-wrapper .floor-control-list{font-size:12px;list-style-type:none;margin:0}.floor-control .floor-control-wrapper .floor-control-list .floor-control-item{position:relative;display:block;text-align:center;text-decoration:none;width:38px;height:40px;line-height:40px;transition:color .3s ease-in}.floor-control .floor-control-wrapper .floor-control-list .floor-control-item:after{content:"";position:absolute;width:26px;height:26px;border-radius:30px;z-index:-10;pointer-events:none;left:0;right:0;top:0;bottom:0;margin:auto;opacity:0;transition:opacity .2s ease-out;background-color:#4875fd}.floor-control .floor-control-wrapper .floor-control-list .selected-item{color:#fff!important;opacity:1!important}.floor-control .floor-control-wrapper .floor-control-list .selected-item:after{opacity:1}.floor-control .floor-control-wrapper.freezing .floor-control-list .floor-control-item{color:#4d4d4d;opacity:.4}.floor-control-moveup{bottom:83px!important}',""])},function(t,e,n){e=t.exports=n(262)(),e.push([t.i,".rotate-circle{position:relative;width:60px;height:60px;padding:20px 20px 7px;box-sizing:content-box}.rotate-circle .rotate-panel{position:relative;left:0;top:-60px;font-size:16px;line-height:normal;font-family:auto}.rotate-circle .rotate-left{top:15px;left:-6px;transform:rotate(-45deg)}.rotate-circle .rotate-left,.rotate-circle .rotate-top{position:absolute;width:30px;height:30px;border-radius:30px 0 0 0;background:#fff}.rotate-circle .rotate-top{left:15px;top:-6px;transform:rotate(45deg)}.rotate-circle .rotate-right{left:36px;top:15px;border-radius:0 30px 0 0}.rotate-circle .rotate-bottom,.rotate-circle .rotate-right{position:absolute;width:30px;height:30px;background:#fff;transform:rotate(45deg)}.rotate-circle .rotate-bottom{left:15px;top:36px;border-radius:0 0 30px 0}.rotate-circle .compass-circle{width:28px;height:28px;background:#fff;border:1px solid rgba(0,20,51,.1);border-radius:50%;position:relative;left:15px;top:-15px;z-index:100}.rotate-circle .compass-img{height:28px;left:30%;position:relative;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.rotate-circle .compass-circle-background{width:28px;height:28px;background:#e7eaef;border:1px solid rgba(0,20,51,.1);border-radius:50%;position:relative;left:15px;top:15px;z-index:50}.rotate-circle .rotate-left-img{transform:scaleY(-1) rotate(-45deg)}.rotate-circle .rotate-left-img,.rotate-circle .rotate-right-img{width:6px;height:17px;position:relative;left:12px;top:5px;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;vertical-align:baseline}.rotate-circle .rotate-right-img{transform:rotate(135deg)}.rotate-circle .rotate-top-img{transform:rotate(-45deg);left:10px;top:-1px}.rotate-circle .rotate-bottom-img,.rotate-circle .rotate-top-img{width:8px;height:4px;position:relative;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;vertical-align:baseline}.rotate-circle .rotate-bottom-img{transform:rotate(135deg);left:13px;top:2px}.rotate-circle .unclickable-rotate-bottom .rotate-bottom-img,.rotate-circle .unclickable-rotate-left .rotate-left-img,.rotate-circle .unclickable-rotate-right .rotate-right-img,.rotate-circle .unclickable-rotate-top .rotate-top-img{opacity:.3}.rotate-circle .clickable-rotate-bottom:hover,.rotate-circle .clickable-rotate-left:hover,.rotate-circle .clickable-rotate-right:hover,.rotate-circle .clickable-rotate-top:hover{background:#f2f4f8}.rotate-circle .clickable-rotate-bottom:active,.rotate-circle .clickable-rotate-left:active,.rotate-circle .clickable-rotate-right:active,.rotate-circle .clickable-rotate-top:active{background:#e7eaef}",""])},function(t,e,n){e=t.exports=n(262)(),e.push([t.i,'.tmap-zoom-control{margin:10px 30px 20px;width:40px;background-color:#fff;box-shadow:0 2px 4px 0 rgba(0,0,0,.2);border-radius:3px}.tmap-zoom-control .tmap-zoom-in{position:relative;height:40px}.tmap-zoom-control .tmap-zoom-in:before{width:16px;height:2px}.tmap-zoom-control .tmap-zoom-in:after,.tmap-zoom-control .tmap-zoom-in:before{content:"";background:#333;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto}.tmap-zoom-control .tmap-zoom-in:after{width:2px;height:16px}.tmap-zoom-control .tmap-zoom-spliter{height:1px;width:26px;background-color:#d9d9d9;margin:auto}.tmap-zoom-control .tmap-zoom-out{position:relative;height:40px}.tmap-zoom-control .tmap-zoom-out:after{content:"";position:absolute;top:0;bottom:0;left:0;right:0;margin:auto;width:16px;height:2px;background:#333}',""])},,function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){(function(e){var n,n;/*!
    localForage -- Offline Storage, Improved
    Version 1.7.3
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
!function(e){t.exports=e()}(function(){return function t(e,i,o){function r(l,s){if(!i[l]){if(!e[l]){var u="function"==typeof n&&n;if(!s&&u)return n(l,!0);if(a)return a(l,!0);var c=new Error("Cannot find module '"+l+"'");throw c.code="MODULE_NOT_FOUND",c}var f=i[l]={exports:{}};e[l][0].call(f.exports,function(t){var n=e[l][1][t];return r(n||t)},f,f.exports,t,e,i,o)}return i[l].exports}for(var a="function"==typeof n&&n,l=0;l<o.length;l++)r(o[l]);return r}({1:[function(t,n,i){(function(t){"use strict";function e(){c=!0;for(var t,e,n=f.length;n;){for(e=f,f=[],t=-1;++t<n;)e[t]();n=f.length}c=!1}function i(t){1!==f.push(t)||c||o()}var o,r=t.MutationObserver||t.WebKitMutationObserver;if(r){var a=0,l=new r(e),s=t.document.createTextNode("");l.observe(s,{characterData:!0}),o=function(){s.data=a=++a%2}}else if(t.setImmediate||void 0===t.MessageChannel)o="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var n=t.document.createElement("script");n.onreadystatechange=function(){e(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},t.document.documentElement.appendChild(n)}:function(){setTimeout(e,0)};else{var u=new t.MessageChannel;u.port1.onmessage=e,o=function(){u.port2.postMessage(0)}}var c,f=[];n.exports=i}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){"use strict";function i(){}function o(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,t!==i&&s(this,t)}function r(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function a(t,e,n){v(function(){var i;try{i=e(n)}catch(e){return p.reject(t,e)}i===t?p.reject(t,new TypeError("Cannot resolve promise with itself")):p.resolve(t,i)})}function l(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function s(t,e){function n(e){r||(r=!0,p.reject(t,e))}function i(e){r||(r=!0,p.resolve(t,e))}function o(){e(i,n)}var r=!1,a=u(o);"error"===a.status&&n(a.value)}function u(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}function c(t){return t instanceof this?t:p.resolve(new this(i),t)}function f(t){var e=new this(i);return p.reject(e,t)}function d(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,o=!1;if(!n)return this.resolve([]);for(var r=new Array(n),a=0,l=-1,s=new this(i);++l<n;)!function(t,i){function l(t){r[i]=t,++a!==n||o||(o=!0,p.resolve(s,r))}e.resolve(t).then(l,function(t){o||(o=!0,p.reject(s,t))})}(t[l],l);return s}function h(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,o=!1;if(!n)return this.resolve([]);for(var r=-1,a=new this(i);++r<n;)!function(t){e.resolve(t).then(function(t){o||(o=!0,p.resolve(a,t))},function(t){o||(o=!0,p.reject(a,t))})}(t[r]);return a}var v=t(1),p={},m=["REJECTED"],_=["FULFILLED"],g=["PENDING"];e.exports=o,o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){if("function"!=typeof t&&this.state===_||"function"!=typeof e&&this.state===m)return this;var n=new this.constructor(i);if(this.state!==g){a(n,this.state===_?t:e,this.outcome)}else this.queue.push(new r(n,t,e));return n},r.prototype.callFulfilled=function(t){p.resolve(this.promise,t)},r.prototype.otherCallFulfilled=function(t){a(this.promise,this.onFulfilled,t)},r.prototype.callRejected=function(t){p.reject(this.promise,t)},r.prototype.otherCallRejected=function(t){a(this.promise,this.onRejected,t)},p.resolve=function(t,e){var n=u(l,e);if("error"===n.status)return p.reject(t,n.value);var i=n.value;if(i)s(t,i);else{t.state=_,t.outcome=e;for(var o=-1,r=t.queue.length;++o<r;)t.queue[o].callFulfilled(e)}return t},p.reject=function(t,e){t.state=m,t.outcome=e;for(var n=-1,i=t.queue.length;++n<i;)t.queue[n].callRejected(e);return t},o.resolve=c,o.reject=f,o.all=d,o.race=h},{1:1}],3:[function(t,n,i){(function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(r){if("TypeError"!==r.name)throw r;for(var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,i=new n,o=0;o<t.length;o+=1)i.append(t[o]);return i.getBlob(e.type)}}function r(t,e){e&&t.then(function(t){e(null,t)},function(t){e(t)})}function a(t,e,n){"function"==typeof e&&t.then(e),"function"==typeof n&&t.catch(n)}function l(t){return"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function s(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}function u(t){for(var e=t.length,n=new ArrayBuffer(e),i=new Uint8Array(n),o=0;o<e;o++)i[o]=t.charCodeAt(o);return n}function c(t){return new _t(function(e){var n=t.transaction(gt,wt),i=o([""]);n.objectStore(gt).put(i,"key"),n.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},n.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||parseInt(t[1],10)>=43)}}).catch(function(){return!1})}function f(t){return"boolean"==typeof yt?_t.resolve(yt):c(t).then(function(t){return yt=t})}function d(t){var e=xt[t.name],n={};n.promise=new _t(function(t,e){n.resolve=t,n.reject=e}),e.deferredOperations.push(n),e.dbReady?e.dbReady=e.dbReady.then(function(){return n.promise}):e.dbReady=n.promise}function h(t){var e=xt[t.name],n=e.deferredOperations.pop();if(n)return n.resolve(),n.promise}function v(t,e){var n=xt[t.name],i=n.deferredOperations.pop();if(i)return i.reject(e),i.promise}function p(t,e){return new _t(function(n,i){if(xt[t.name]=xt[t.name]||T(),t.db){if(!e)return n(t.db);d(t),t.db.close()}var o=[t.name];e&&o.push(t.version);var r=mt.open.apply(mt,o);e&&(r.onupgradeneeded=function(e){var n=r.result;try{n.createObjectStore(t.storeName),e.oldVersion<=1&&n.createObjectStore(gt)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),r.onerror=function(t){t.preventDefault(),i(r.error)},r.onsuccess=function(){n(r.result),h(t)}})}function m(t){return p(t,!1)}function _(t){return p(t,!0)}function g(t,e){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),i=t.version<t.db.version,o=t.version>t.db.version;if(i&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),o||n){if(n){var r=t.db.version+1;r>t.version&&(t.version=r)}return!0}return!1}function y(t){return new _t(function(e,n){var i=new FileReader;i.onerror=n,i.onloadend=function(n){var i=btoa(n.target.result||"");e({__local_forage_encoded_blob:!0,data:i,type:t.type})},i.readAsBinaryString(t)})}function x(t){return o([u(atob(t.data))],{type:t.type})}function b(t){return t&&t.__local_forage_encoded_blob}function S(t){var e=this,n=e._initReady().then(function(){var t=xt[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady});return a(n,t,t),n}function w(t){d(t);for(var e=xt[t.name],n=e.forages,i=0;i<n.length;i++){var o=n[i];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return t.db=null,m(t).then(function(e){return t.db=e,g(t)?_(t):e}).then(function(i){t.db=e.db=i;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=i}).catch(function(e){throw v(t,e),e})}function E(t,e,n,i){void 0===i&&(i=1);try{var o=t.db.transaction(t.storeName,e);n(null,o)}catch(o){if(i>0&&(!t.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return _t.resolve().then(function(){if(!t.db||"NotFoundError"===o.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),_(t)}).then(function(){return w(t).then(function(){E(t,e,n,i-1)})}).catch(n);n(o)}}function T(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function I(t){function e(){return _t.resolve()}var n=this,i={db:null};if(t)for(var o in t)i[o]=t[o];var r=xt[i.name];r||(r=T(),xt[i.name]=r),r.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=S);for(var a=[],l=0;l<r.forages.length;l++){var s=r.forages[l];s!==n&&a.push(s._initReady().catch(e))}var u=r.forages.slice(0);return _t.all(a).then(function(){return i.db=r.db,m(i)}).then(function(t){return i.db=t,g(i,n._defaultConfig.version)?_(i):t}).then(function(t){i.db=r.db=t,n._dbInfo=i;for(var e=0;e<u.length;e++){var o=u[e];o!==n&&(o._dbInfo.db=i.db,o._dbInfo.version=i.version)}})}function A(t,e){var n=this;t=l(t);var i=new _t(function(e,i){n.ready().then(function(){E(n._dbInfo,St,function(o,r){if(o)return i(o);try{var a=r.objectStore(n._dbInfo.storeName),l=a.get(t);l.onsuccess=function(){var t=l.result;void 0===t&&(t=null),b(t)&&(t=x(t)),e(t)},l.onerror=function(){i(l.error)}}catch(t){i(t)}})}).catch(i)});return r(i,e),i}function k(t,e){var n=this,i=new _t(function(e,i){n.ready().then(function(){E(n._dbInfo,St,function(o,r){if(o)return i(o);try{var a=r.objectStore(n._dbInfo.storeName),l=a.openCursor(),s=1;l.onsuccess=function(){var n=l.result;if(n){var i=n.value;b(i)&&(i=x(i));var o=t(i,n.key,s++);void 0!==o?e(o):n.continue()}else e()},l.onerror=function(){i(l.error)}}catch(t){i(t)}})}).catch(i)});return r(i,e),i}function P(t,e,n){var i=this;t=l(t);var o=new _t(function(n,o){var r;i.ready().then(function(){return r=i._dbInfo,"[object Blob]"===bt.call(e)?f(r.db).then(function(t){return t?e:y(e)}):e}).then(function(e){E(i._dbInfo,wt,function(r,a){if(r)return o(r);try{var l=a.objectStore(i._dbInfo.storeName);null===e&&(e=void 0);var s=l.put(e,t);a.oncomplete=function(){void 0===e&&(e=null),n(e)},a.onabort=a.onerror=function(){var t=s.error?s.error:s.transaction.error;o(t)}}catch(t){o(t)}})}).catch(o)});return r(o,n),o}function M(t,e){var n=this;t=l(t);var i=new _t(function(e,i){n.ready().then(function(){E(n._dbInfo,wt,function(o,r){if(o)return i(o);try{var a=r.objectStore(n._dbInfo.storeName),l=a.delete(t);r.oncomplete=function(){e()},r.onerror=function(){i(l.error)},r.onabort=function(){var t=l.error?l.error:l.transaction.error;i(t)}}catch(t){i(t)}})}).catch(i)});return r(i,e),i}function L(t){var e=this,n=new _t(function(t,n){e.ready().then(function(){E(e._dbInfo,wt,function(i,o){if(i)return n(i);try{var r=o.objectStore(e._dbInfo.storeName),a=r.clear();o.oncomplete=function(){t()},o.onabort=o.onerror=function(){var t=a.error?a.error:a.transaction.error;n(t)}}catch(t){n(t)}})}).catch(n)});return r(n,t),n}function C(t){var e=this,n=new _t(function(t,n){e.ready().then(function(){E(e._dbInfo,St,function(i,o){if(i)return n(i);try{var r=o.objectStore(e._dbInfo.storeName),a=r.count();a.onsuccess=function(){t(a.result)},a.onerror=function(){n(a.error)}}catch(t){n(t)}})}).catch(n)});return r(n,t),n}function N(t,e){var n=this,i=new _t(function(e,i){if(t<0)return void e(null);n.ready().then(function(){E(n._dbInfo,St,function(o,r){if(o)return i(o);try{var a=r.objectStore(n._dbInfo.storeName),l=!1,s=a.openCursor();s.onsuccess=function(){var n=s.result;if(!n)return void e(null);0===t?e(n.key):l?e(n.key):(l=!0,n.advance(t))},s.onerror=function(){i(s.error)}}catch(t){i(t)}})}).catch(i)});return r(i,e),i}function O(t){var e=this,n=new _t(function(t,n){e.ready().then(function(){E(e._dbInfo,St,function(i,o){if(i)return n(i);try{var r=o.objectStore(e._dbInfo.storeName),a=r.openCursor(),l=[];a.onsuccess=function(){var e=a.result;if(!e)return void t(l);l.push(e.key),e.continue()},a.onerror=function(){n(a.error)}}catch(t){n(t)}})}).catch(n)});return r(n,t),n}function R(t,e){e=s.apply(this,arguments);var n=this.config();t="function"!=typeof t&&t||{},t.name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var i,o=this;if(t.name){var a=t.name===n.name&&o._dbInfo.db,l=a?_t.resolve(o._dbInfo.db):m(t).then(function(e){var n=xt[t.name],i=n.forages;n.db=e;for(var o=0;o<i.length;o++)i[o]._dbInfo.db=e;return e});i=t.storeName?l.then(function(e){if(e.objectStoreNames.contains(t.storeName)){var n=e.version+1;d(t);var i=xt[t.name],o=i.forages;e.close();for(var r=0;r<o.length;r++){var a=o[r];a._dbInfo.db=null,a._dbInfo.version=n}return new _t(function(e,i){var o=mt.open(t.name,n);o.onerror=function(t){o.result.close(),i(t)},o.onupgradeneeded=function(){o.result.deleteObjectStore(t.storeName)},o.onsuccess=function(){var t=o.result;t.close(),e(t)}}).then(function(t){i.db=t;for(var e=0;e<o.length;e++){var n=o[e];n._dbInfo.db=t,h(n._dbInfo)}}).catch(function(e){throw(v(t,e)||_t.resolve()).catch(function(){}),e})}}):l.then(function(e){d(t);var n=xt[t.name],i=n.forages;e.close();for(var o=0;o<i.length;o++){i[o]._dbInfo.db=null}return new _t(function(e,n){var i=mt.deleteDatabase(t.name);i.onerror=i.onblocked=function(t){var e=i.result;e&&e.close(),n(t)},i.onsuccess=function(){var t=i.result;t&&t.close(),e(t)}}).then(function(t){n.db=t;for(var e=0;e<i.length;e++)h(i[e]._dbInfo)}).catch(function(e){throw(v(t,e)||_t.resolve()).catch(function(){}),e})})}else i=_t.reject("Invalid arguments");return r(i,e),i}function V(t){var e,n,i,o,r,a=.75*t.length,l=t.length,s=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var u=new ArrayBuffer(a),c=new Uint8Array(u);for(e=0;e<l;e+=4)n=Tt.indexOf(t[e]),i=Tt.indexOf(t[e+1]),o=Tt.indexOf(t[e+2]),r=Tt.indexOf(t[e+3]),c[s++]=n<<2|i>>4,c[s++]=(15&i)<<4|o>>2,c[s++]=(3&o)<<6|63&r;return u}function B(t){var e,n=new Uint8Array(t),i="";for(e=0;e<n.length;e+=3)i+=Tt[n[e]>>2],i+=Tt[(3&n[e])<<4|n[e+1]>>4],i+=Tt[(15&n[e+1])<<2|n[e+2]>>6],i+=Tt[63&n[e+2]];return n.length%3==2?i=i.substring(0,i.length-1)+"=":n.length%3==1&&(i=i.substring(0,i.length-2)+"=="),i}function F(t,e){var n="";if(t&&(n=Yt.call(t)),t&&("[object ArrayBuffer]"===n||t.buffer&&"[object ArrayBuffer]"===Yt.call(t.buffer))){var i,o=kt;t instanceof ArrayBuffer?(i=t,o+=Mt):(i=t.buffer,"[object Int8Array]"===n?o+=Ct:"[object Uint8Array]"===n?o+=Nt:"[object Uint8ClampedArray]"===n?o+=Ot:"[object Int16Array]"===n?o+=Rt:"[object Uint16Array]"===n?o+=Bt:"[object Int32Array]"===n?o+=Vt:"[object Uint32Array]"===n?o+=Ft:"[object Float32Array]"===n?o+=zt:"[object Float64Array]"===n?o+=Dt:e(new Error("Failed to get type for BinaryArray"))),e(o+B(i))}else if("[object Blob]"===n){var r=new FileReader;r.onload=function(){var n=It+t.type+"~"+B(this.result);e(kt+Lt+n)},r.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(n){console.error("Couldn't convert value into a JSON string: ",t),e(null,n)}}function z(t){if(t.substring(0,Pt)!==kt)return JSON.parse(t);var e,n=t.substring(Ut),i=t.substring(Pt,Ut);if(i===Lt&&At.test(n)){var r=n.match(At);e=r[1],n=n.substring(r[0].length)}var a=V(n);switch(i){case Mt:return a;case Lt:return o([a],{type:e});case Ct:return new Int8Array(a);case Nt:return new Uint8Array(a);case Ot:return new Uint8ClampedArray(a);case Rt:return new Int16Array(a);case Bt:return new Uint16Array(a);case Vt:return new Int32Array(a);case Ft:return new Uint32Array(a);case zt:return new Float32Array(a);case Dt:return new Float64Array(a);default:throw new Error("Unkown type: "+i)}}function D(t,e,n,i){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,i)}function U(t){var e=this,n={db:null};if(t)for(var i in t)n[i]="string"!=typeof t[i]?t[i].toString():t[i];var o=new _t(function(t,i){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(t){return i(t)}n.db.transaction(function(o){D(o,n,function(){e._dbInfo=n,t()},function(t,e){i(e)})},i)});return n.serializer=jt,o}function Y(t,e,n,i,o,r){t.executeSql(n,i,o,function(t,a){a.code===a.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[e.storeName],function(t,l){l.rows.length?r(t,a):D(t,e,function(){t.executeSql(n,i,o,r)},r)},r):r(t,a)},r)}function j(t,e){var n=this;t=l(t);var i=new _t(function(e,i){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){Y(n,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[t],function(t,n){var i=n.rows.length?n.rows.item(0).value:null;i&&(i=o.serializer.deserialize(i)),e(i)},function(t,e){i(e)})})}).catch(i)});return r(i,e),i}function G(t,e){var n=this,i=new _t(function(e,i){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){Y(n,o,"SELECT * FROM "+o.storeName,[],function(n,i){for(var r=i.rows,a=r.length,l=0;l<a;l++){var s=r.item(l),u=s.value;if(u&&(u=o.serializer.deserialize(u)),void 0!==(u=t(u,s.key,l+1)))return void e(u)}e()},function(t,e){i(e)})})}).catch(i)});return r(i,e),i}function W(t,e,n,i){var o=this;t=l(t);var a=new _t(function(r,a){o.ready().then(function(){void 0===e&&(e=null);var l=e,s=o._dbInfo;s.serializer.serialize(e,function(e,u){u?a(u):s.db.transaction(function(n){Y(n,s,"INSERT OR REPLACE INTO "+s.storeName+" (key, value) VALUES (?, ?)",[t,e],function(){r(l)},function(t,e){a(e)})},function(e){if(e.code===e.QUOTA_ERR){if(i>0)return void r(W.apply(o,[t,l,n,i-1]));a(e)}})})}).catch(a)});return r(a,n),a}function Z(t,e,n){return W.apply(this,[t,e,n,1])}function X(t,e){var n=this;t=l(t);var i=new _t(function(e,i){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){Y(n,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[t],function(){e()},function(t,e){i(e)})})}).catch(i)});return r(i,e),i}function H(t){var e=this,n=new _t(function(t,n){e.ready().then(function(){var i=e._dbInfo;i.db.transaction(function(e){Y(e,i,"DELETE FROM "+i.storeName,[],function(){t()},function(t,e){n(e)})})}).catch(n)});return r(n,t),n}function Q(t){var e=this,n=new _t(function(t,n){e.ready().then(function(){var i=e._dbInfo;i.db.transaction(function(e){Y(e,i,"SELECT COUNT(key) as c FROM "+i.storeName,[],function(e,n){var i=n.rows.item(0).c;t(i)},function(t,e){n(e)})})}).catch(n)});return r(n,t),n}function q(t,e){var n=this,i=new _t(function(e,i){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){Y(n,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[t+1],function(t,n){var i=n.rows.length?n.rows.item(0).key:null;e(i)},function(t,e){i(e)})})}).catch(i)});return r(i,e),i}function J(t){var e=this,n=new _t(function(t,n){e.ready().then(function(){var i=e._dbInfo;i.db.transaction(function(e){Y(e,i,"SELECT key FROM "+i.storeName,[],function(e,n){for(var i=[],o=0;o<n.rows.length;o++)i.push(n.rows.item(o).key);t(i)},function(t,e){n(e)})})}).catch(n)});return r(n,t),n}function K(t){return new _t(function(e,n){t.transaction(function(i){i.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(n,i){for(var o=[],r=0;r<i.rows.length;r++)o.push(i.rows.item(r).name);e({db:t,storeNames:o})},function(t,e){n(e)})},function(t){n(t)})})}function $(t,e){e=s.apply(this,arguments);var n=this.config();t="function"!=typeof t&&t||{},t.name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var i,o=this;return i=t.name?new _t(function(e){var i;i=t.name===n.name?o._dbInfo.db:openDatabase(t.name,"","",0),e(t.storeName?{db:i,storeNames:[t.storeName]}:K(i))}).then(function(t){return new _t(function(e,n){t.db.transaction(function(i){for(var o=[],r=0,a=t.storeNames.length;r<a;r++)o.push(function(t){return new _t(function(e,n){i.executeSql("DROP TABLE IF EXISTS "+t,[],function(){e()},function(t,e){n(e)})})}(t.storeNames[r]));_t.all(o).then(function(){e()}).catch(function(t){n(t)})},function(t){n(t)})})}):_t.reject("Invalid arguments"),r(i,e),i}function tt(t,e){var n=t.name+"/";return t.storeName!==e.storeName&&(n+=t.storeName+"/"),n}function et(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(t){return!0}}function nt(){return!et()||localStorage.length>0}function it(t){var e=this,n={};if(t)for(var i in t)n[i]=t[i];return n.keyPrefix=tt(t,e._defaultConfig),nt()?(e._dbInfo=n,n.serializer=jt,_t.resolve()):_t.reject()}function ot(t){var e=this,n=e.ready().then(function(){for(var t=e._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var i=localStorage.key(n);0===i.indexOf(t)&&localStorage.removeItem(i)}});return r(n,t),n}function rt(t,e){var n=this;t=l(t);var i=n.ready().then(function(){var e=n._dbInfo,i=localStorage.getItem(e.keyPrefix+t);return i&&(i=e.serializer.deserialize(i)),i});return r(i,e),i}function at(t,e){var n=this,i=n.ready().then(function(){for(var e=n._dbInfo,i=e.keyPrefix,o=i.length,r=localStorage.length,a=1,l=0;l<r;l++){var s=localStorage.key(l);if(0===s.indexOf(i)){var u=localStorage.getItem(s);if(u&&(u=e.serializer.deserialize(u)),void 0!==(u=t(u,s.substring(o),a++)))return u}}});return r(i,e),i}function lt(t,e){var n=this,i=n.ready().then(function(){var e,i=n._dbInfo;try{e=localStorage.key(t)}catch(t){e=null}return e&&(e=e.substring(i.keyPrefix.length)),e});return r(i,e),i}function st(t){var e=this,n=e.ready().then(function(){for(var t=e._dbInfo,n=localStorage.length,i=[],o=0;o<n;o++){var r=localStorage.key(o);0===r.indexOf(t.keyPrefix)&&i.push(r.substring(t.keyPrefix.length))}return i});return r(n,t),n}function ut(t){var e=this,n=e.keys().then(function(t){return t.length});return r(n,t),n}function ct(t,e){var n=this;t=l(t);var i=n.ready().then(function(){var e=n._dbInfo;localStorage.removeItem(e.keyPrefix+t)});return r(i,e),i}function ft(t,e,n){var i=this;t=l(t);var o=i.ready().then(function(){void 0===e&&(e=null);var n=e;return new _t(function(o,r){var a=i._dbInfo;a.serializer.serialize(e,function(e,i){if(i)r(i);else try{localStorage.setItem(a.keyPrefix+t,e),o(n)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||r(t),r(t)}})})});return r(o,n),o}function dt(t,e){if(e=s.apply(this,arguments),t="function"!=typeof t&&t||{},!t.name){var n=this.config();t.name=t.name||n.name,t.storeName=t.storeName||n.storeName}var i,o=this;return i=t.name?new _t(function(e){e(t.storeName?tt(t,o._defaultConfig):t.name+"/")}).then(function(t){for(var e=localStorage.length-1;e>=0;e--){var n=localStorage.key(e);0===n.indexOf(t)&&localStorage.removeItem(n)}}):_t.reject("Invalid arguments"),r(i,e),i}function ht(t,e){t[e]=function(){var n=arguments;return t.ready().then(function(){return t[e].apply(t,n)})}}function vt(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var n in e)e.hasOwnProperty(n)&&(Ht(e[n])?arguments[0][n]=e[n].slice():arguments[0][n]=e[n])}return arguments[0]}var pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mt=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){return}}();"undefined"==typeof Promise&&t(3);var _t=Promise,gt="local-forage-detect-blob-support",yt=void 0,xt={},bt=Object.prototype.toString,St="readonly",wt="readwrite",Et={_driver:"asyncStorage",_initStorage:I,_support:function(){try{if(!mt)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}(),iterate:k,getItem:A,setItem:P,removeItem:M,clear:L,length:C,key:N,keys:O,dropInstance:R},Tt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",It="~~local_forage_type~",At=/^~~local_forage_type~([^~]+)~/,kt="__lfsc__:",Pt=kt.length,Mt="arbf",Lt="blob",Ct="si08",Nt="ui08",Ot="uic8",Rt="si16",Vt="si32",Bt="ur16",Ft="ui32",zt="fl32",Dt="fl64",Ut=Pt+Mt.length,Yt=Object.prototype.toString,jt={serialize:F,deserialize:z,stringToBuffer:V,bufferToString:B},Gt={_driver:"webSQLStorage",_initStorage:U,_support:function(){return"function"==typeof openDatabase}(),iterate:G,getItem:j,setItem:Z,removeItem:X,clear:H,length:Q,key:q,keys:J,dropInstance:$},Wt={_driver:"localStorageWrapper",_initStorage:it,_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}(),iterate:at,getItem:rt,setItem:ft,removeItem:ct,clear:ot,length:ut,key:lt,keys:st,dropInstance:dt},Zt=function(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)},Xt=function(t,e){for(var n=t.length,i=0;i<n;){if(Zt(t[i],e))return!0;i++}return!1},Ht=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},Qt={},qt={},Jt={INDEXEDDB:Et,WEBSQL:Gt,LOCALSTORAGE:Wt},Kt=[Jt.INDEXEDDB._driver,Jt.WEBSQL._driver,Jt.LOCALSTORAGE._driver],$t=["dropInstance"],te=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat($t),ee={description:"",driver:Kt.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},ne=function(){function t(e){i(this,t);for(var n in Jt)if(Jt.hasOwnProperty(n)){var o=Jt[n],r=o._driver;this[n]=r,Qt[r]||this.defineDriver(o)}this._defaultConfig=vt({},ee),this._config=vt({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return t.prototype.config=function(t){if("object"===(void 0===t?"undefined":pt(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t&&t.driver)||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,n){var i=new _t(function(e,n){try{var i=t._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver)return void n(o);for(var a=te.concat("_initStorage"),l=0,s=a.length;l<s;l++){var u=a[l];if((!Xt($t,u)||t[u])&&"function"!=typeof t[u])return void n(o)}!function(){for(var e=0,n=$t.length;e<n;e++){var i=$t[e];t[i]||(t[i]=function(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver"),n=_t.reject(e);return r(n,arguments[arguments.length-1]),n}}(i))}}();var c=function(n){Qt[i]&&console.info("Redefining LocalForage driver: "+i),Qt[i]=t,qt[i]=n,e()};"_support"in t?t._support&&"function"==typeof t._support?t._support().then(c,n):c(!!t._support):c(!0)}catch(t){n(t)}});return a(i,e,n),i},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,n){var i=Qt[t]?_t.resolve(Qt[t]):_t.reject(new Error("Driver not found."));return a(i,e,n),i},t.prototype.getSerializer=function(t){var e=_t.resolve(jt);return a(e,t),e},t.prototype.ready=function(t){var e=this,n=e._driverSet.then(function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready});return a(n,t,t),n},t.prototype.setDriver=function(t,e,n){function i(){l._config.driver=l.driver()}function o(t){return l._extend(t),i(),l._ready=l._initStorage(l._config),l._ready}function r(t){return function(){function e(){for(;n<t.length;){var r=t[n];return n++,l._dbInfo=null,l._ready=null,l.getDriver(r).then(o).catch(e)}i();var a=new Error("No available storage method found.");return l._driverSet=_t.reject(a),l._driverSet}var n=0;return e()}}var l=this;Ht(t)||(t=[t]);var s=this._getSupportedDrivers(t),u=null!==this._driverSet?this._driverSet.catch(function(){return _t.resolve()}):_t.resolve();return this._driverSet=u.then(function(){var t=s[0];return l._dbInfo=null,l._ready=null,l.getDriver(t).then(function(t){l._driver=t._driver,i(),l._wrapLibraryMethodsWithReady(),l._initDriver=r(s)})}).catch(function(){i();var t=new Error("No available storage method found.");return l._driverSet=_t.reject(t),l._driverSet}),a(this._driverSet,e,n),this._driverSet},t.prototype.supports=function(t){return!!qt[t]},t.prototype._extend=function(t){vt(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],n=0,i=t.length;n<i;n++){var o=t[n];this.supports(o)&&e.push(o)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=te.length;t<e;t++)ht(this,te[t])},t.prototype.createInstance=function(e){return new t(e)},t}(),ie=new ne;e.exports=ie},{3:3}]},{},[4])(4)})}).call(e,n(459))},function(t,e,n){"use strict";(function(e){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function i(t,e){if(t===e)return 0;for(var n=t.length,i=e.length,o=0,r=Math.min(n,i);o<r;++o)if(t[o]!==e[o]){n=t[o],i=e[o];break}return n<i?-1:i<n?1:0}function o(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}function r(t){return Object.prototype.toString.call(t)}function a(t){return!o(t)&&("function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}function l(t){if(S.isFunction(t)){if(T)return t.name;var e=t.toString(),n=e.match(A);return n&&n[1]}}function s(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function u(t){if(T||!S.isFunction(t))return S.inspect(t);var e=l(t);return"[Function"+(e?": "+e:"")+"]"}function c(t){return s(u(t.actual),128)+" "+t.operator+" "+s(u(t.expected),128)}function f(t,e,n,i,o){throw new I.AssertionError({message:n,actual:t,expected:e,operator:i,stackStartFunction:o})}function d(t,e){t||f(t,!0,e,"==",I.ok)}function h(t,e,n,l){if(t===e)return!0;if(o(t)&&o(e))return 0===i(t,e);if(S.isDate(t)&&S.isDate(e))return t.getTime()===e.getTime();if(S.isRegExp(t)&&S.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(a(t)&&a(e)&&r(t)===r(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===i(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(o(t)!==o(e))return!1;l=l||{actual:[],expected:[]};var s=l.actual.indexOf(t);return-1!==s&&s===l.expected.indexOf(e)||(l.actual.push(t),l.expected.push(e),p(t,e,n,l))}return n?t===e:t==e}function v(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function p(t,e,n,i){if(null===t||void 0===t||null===e||void 0===e)return!1;if(S.isPrimitive(t)||S.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var o=v(t),r=v(e);if(o&&!r||!o&&r)return!1;if(o)return t=E.call(t),e=E.call(e),h(t,e,n);var a,l,s=k(t),u=k(e);if(s.length!==u.length)return!1;for(s.sort(),u.sort(),l=s.length-1;l>=0;l--)if(s[l]!==u[l])return!1;for(l=s.length-1;l>=0;l--)if(a=s[l],!h(t[a],e[a],n,i))return!1;return!0}function m(t,e,n){h(t,e,!0)&&f(t,e,n,"notDeepStrictEqual",m)}function _(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function g(t){var e;try{t()}catch(t){e=t}return e}function y(t,e,n,i){var o;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(i=n,n=null),o=g(e),i=(n&&n.name?" ("+n.name+").":".")+(i?" "+i:"."),t&&!o&&f(o,n,"Missing expected exception"+i);var r="string"==typeof i,a=!t&&S.isError(o),l=!t&&o&&!n;if((a&&r&&_(o,n)||l)&&f(o,n,"Got unwanted exception"+i),t&&o&&n&&!_(o,n)||!t&&o)throw o}function x(t,e){t||f(t,!0,e,"==",x)}var b=n(881),S=n(916),w=Object.prototype.hasOwnProperty,E=Array.prototype.slice,T=function(){return"foo"===function(){}.name}(),I=t.exports=d,A=/\s*function\s+([^\(\s]*)\s*/;I.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=c(this),this.generatedMessage=!0);var e=t.stackStartFunction||f;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var i=n.stack,o=l(e),r=i.indexOf("\n"+o);if(r>=0){var a=i.indexOf("\n",r+1);i=i.substring(a+1)}this.stack=i}}},S.inherits(I.AssertionError,Error),I.fail=f,I.ok=d,I.equal=function(t,e,n){t!=e&&f(t,e,n,"==",I.equal)},I.notEqual=function(t,e,n){t==e&&f(t,e,n,"!=",I.notEqual)},I.deepEqual=function(t,e,n){h(t,e,!1)||f(t,e,n,"deepEqual",I.deepEqual)},I.deepStrictEqual=function(t,e,n){h(t,e,!0)||f(t,e,n,"deepStrictEqual",I.deepStrictEqual)},I.notDeepEqual=function(t,e,n){h(t,e,!1)&&f(t,e,n,"notDeepEqual",I.notDeepEqual)},I.notDeepStrictEqual=m,I.strictEqual=function(t,e,n){t!==e&&f(t,e,n,"===",I.strictEqual)},I.notStrictEqual=function(t,e,n){t===e&&f(t,e,n,"!==",I.notStrictEqual)},I.throws=function(t,e,n){y(!0,t,e,n)},I.doesNotThrow=function(t,e,n){y(!1,t,e,n)},I.ifError=function(t){if(t)throw t},I.strict=b(x,I,{equal:I.strictEqual,deepEqual:I.deepStrictEqual,notEqual:I.notStrictEqual,notDeepEqual:I.notDeepStrictEqual}),I.strict.strict=I.strict;var k=Object.keys||function(t){var e=[];for(var n in t)w.call(t,n)&&e.push(n);return e}}).call(e,n(459))},function(t,e,n){"use strict";function i(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,l,s=i(t),u=1;u<arguments.length;u++){n=Object(arguments[u]);for(var c in n)r.call(n,c)&&(s[c]=n[c]);if(o){l=o(n);for(var f=0;f<l.length;f++)a.call(n,l[f])&&(s[l[f]]=n[l[f]])}}return s}},function(t,e,n){"use strict";var i=n(152).assign,o=n(883),r=n(884),a=n(455),l={};i(l,o,r,a),t.exports=l},function(t,e,n){"use strict";function i(t){if(!(this instanceof i))return new i(t);this.options=s.assign({level:v,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var n=l.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==h)throw new Error(c[n]);if(e.header&&l.deflateSetHeader(this.strm,e.header),e.dictionary){var o;if(o="string"==typeof e.dictionary?u.string2buf(e.dictionary):"[object ArrayBuffer]"===d.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(n=l.deflateSetDictionary(this.strm,o))!==h)throw new Error(c[n]);this._dict_set=!0}}function o(t,e){var n=new i(e);if(n.push(t,!0),n.err)throw n.msg||c[n.err];return n.result}function r(t,e){return e=e||{},e.raw=!0,o(t,e)}function a(t,e){return e=e||{},e.gzip=!0,o(t,e)}var l=n(885),s=n(152),u=n(453),c=n(368),f=n(457),d=Object.prototype.toString,h=0,v=-1,p=0,m=8;i.prototype.push=function(t,e){var n,i,o=this.strm,r=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:!0===e?4:0,"string"==typeof t?o.input=u.string2buf(t):"[object ArrayBuffer]"===d.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new s.Buf8(r),o.next_out=0,o.avail_out=r),1!==(n=l.deflate(o,i))&&n!==h)return this.onEnd(n),this.ended=!0,!1;0!==o.avail_out&&(0!==o.avail_in||4!==i&&2!==i)||("string"===this.options.to?this.onData(u.buf2binstring(s.shrinkBuf(o.output,o.next_out))):this.onData(s.shrinkBuf(o.output,o.next_out)))}while((o.avail_in>0||0===o.avail_out)&&1!==n);return 4===i?(n=l.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===h):2!==i||(this.onEnd(h),o.avail_out=0,!0)},i.prototype.onData=function(t){this.chunks.push(t)},i.prototype.onEnd=function(t){t===h&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=i,e.deflate=o,e.deflateRaw=r,e.gzip=a},function(t,e,n){"use strict";function i(t){if(!(this instanceof i))return new i(t);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var n=a.inflateInit2(this.strm,e.windowBits);if(n!==u.Z_OK)throw new Error(c[n]);if(this.header=new d,a.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=s.string2buf(e.dictionary):"[object ArrayBuffer]"===h.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=a.inflateSetDictionary(this.strm,e.dictionary))!==u.Z_OK))throw new Error(c[n])}function o(t,e){var n=new i(e);if(n.push(t,!0),n.err)throw n.msg||c[n.err];return n.result}function r(t,e){return e=e||{},e.raw=!0,o(t,e)}var a=n(888),l=n(152),s=n(453),u=n(455),c=n(368),f=n(457),d=n(886),h=Object.prototype.toString;i.prototype.push=function(t,e){var n,i,o,r,c,f=this.strm,d=this.options.chunkSize,v=this.options.dictionary,p=!1;if(this.ended)return!1;i=e===~~e?e:!0===e?u.Z_FINISH:u.Z_NO_FLUSH,"string"==typeof t?f.input=s.binstring2buf(t):"[object ArrayBuffer]"===h.call(t)?f.input=new Uint8Array(t):f.input=t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new l.Buf8(d),f.next_out=0,f.avail_out=d),n=a.inflate(f,u.Z_NO_FLUSH),n===u.Z_NEED_DICT&&v&&(n=a.inflateSetDictionary(this.strm,v)),n===u.Z_BUF_ERROR&&!0===p&&(n=u.Z_OK,p=!1),n!==u.Z_STREAM_END&&n!==u.Z_OK)return this.onEnd(n),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&n!==u.Z_STREAM_END&&(0!==f.avail_in||i!==u.Z_FINISH&&i!==u.Z_SYNC_FLUSH)||("string"===this.options.to?(o=s.utf8border(f.output,f.next_out),r=f.next_out-o,c=s.buf2string(f.output,o),f.next_out=r,f.avail_out=d-r,r&&l.arraySet(f.output,f.output,o,r,0),this.onData(c)):this.onData(l.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(p=!0)}while((f.avail_in>0||0===f.avail_out)&&n!==u.Z_STREAM_END);return n===u.Z_STREAM_END&&(i=u.Z_FINISH),i===u.Z_FINISH?(n=a.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===u.Z_OK):i!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),f.avail_out=0,!0)},i.prototype.onData=function(t){this.chunks.push(t)},i.prototype.onEnd=function(t){t===u.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=i,e.inflate=o,e.inflateRaw=r,e.ungzip=o},function(t,e,n){"use strict";function i(t,e){return t.msg=O[e],e}function o(t){return(t<<1)-(t>4?9:0)}function r(t){for(var e=t.length;--e>=0;)t[e]=0}function a(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(M.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function l(t,e){L._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,a(t.strm)}function s(t,e){t.pending_buf[t.pending++]=e}function u(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function c(t,e,n,i){var o=t.avail_in;return o>i&&(o=i),0===o?0:(t.avail_in-=o,M.arraySet(e,t.input,t.next_in,o,n),1===t.state.wrap?t.adler=C(t.adler,e,o,n):2===t.state.wrap&&(t.adler=N(t.adler,e,o,n)),t.next_in+=o,t.total_in+=o,o)}function f(t,e){var n,i,o=t.max_chain_length,r=t.strstart,a=t.prev_length,l=t.nice_match,s=t.strstart>t.w_size-ut?t.strstart-(t.w_size-ut):0,u=t.window,c=t.w_mask,f=t.prev,d=t.strstart+st,h=u[r+a-1],v=u[r+a];t.prev_length>=t.good_match&&(o>>=2),l>t.lookahead&&(l=t.lookahead);do{if(n=e,u[n+a]===v&&u[n+a-1]===h&&u[n]===u[r]&&u[++n]===u[r+1]){r+=2,n++;do{}while(u[++r]===u[++n]&&u[++r]===u[++n]&&u[++r]===u[++n]&&u[++r]===u[++n]&&u[++r]===u[++n]&&u[++r]===u[++n]&&u[++r]===u[++n]&&u[++r]===u[++n]&&r<d);if(i=st-(d-r),r=d-st,i>a){if(t.match_start=e,a=i,i>=l)break;h=u[r+a-1],v=u[r+a]}}}while((e=f[e&c])>s&&0!=--o);return a<=t.lookahead?a:t.lookahead}function d(t){var e,n,i,o,r,a=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=a+(a-ut)){M.arraySet(t.window,t.window,a,a,0),t.match_start-=a,t.strstart-=a,t.block_start-=a,n=t.hash_size,e=n;do{i=t.head[--e],t.head[e]=i>=a?i-a:0}while(--n);n=a,e=n;do{i=t.prev[--e],t.prev[e]=i>=a?i-a:0}while(--n);o+=a}if(0===t.strm.avail_in)break;if(n=c(t.strm,t.window,t.strstart+t.lookahead,o),t.lookahead+=n,t.lookahead+t.insert>=lt)for(r=t.strstart-t.insert,t.ins_h=t.window[r],t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+lt-1])&t.hash_mask,t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++,t.insert--,!(t.lookahead+t.insert<lt)););}while(t.lookahead<ut&&0!==t.strm.avail_in)}function h(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(d(t),0===t.lookahead&&e===R)return gt;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+n;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,l(t,!1),0===t.strm.avail_out))return gt;if(t.strstart-t.block_start>=t.w_size-ut&&(l(t,!1),0===t.strm.avail_out))return gt}return t.insert=0,e===F?(l(t,!0),0===t.strm.avail_out?xt:bt):(t.strstart>t.block_start&&(l(t,!1),t.strm.avail_out),gt)}function v(t,e){for(var n,i;;){if(t.lookahead<ut){if(d(t),t.lookahead<ut&&e===R)return gt;if(0===t.lookahead)break}if(n=0,t.lookahead>=lt&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+lt-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-ut&&(t.match_length=f(t,n)),t.match_length>=lt)if(i=L._tr_tally(t,t.strstart-t.match_start,t.match_length-lt),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=lt){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+lt-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=L._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(l(t,!1),0===t.strm.avail_out))return gt}return t.insert=t.strstart<lt-1?t.strstart:lt-1,e===F?(l(t,!0),0===t.strm.avail_out?xt:bt):t.last_lit&&(l(t,!1),0===t.strm.avail_out)?gt:yt}function p(t,e){for(var n,i,o;;){if(t.lookahead<ut){if(d(t),t.lookahead<ut&&e===R)return gt;if(0===t.lookahead)break}if(n=0,t.lookahead>=lt&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+lt-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=lt-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-ut&&(t.match_length=f(t,n),t.match_length<=5&&(t.strategy===Z||t.match_length===lt&&t.strstart-t.match_start>4096)&&(t.match_length=lt-1)),t.prev_length>=lt&&t.match_length<=t.prev_length){o=t.strstart+t.lookahead-lt,i=L._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-lt),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=o&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+lt-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=lt-1,t.strstart++,i&&(l(t,!1),0===t.strm.avail_out))return gt}else if(t.match_available){if(i=L._tr_tally(t,0,t.window[t.strstart-1]),i&&l(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return gt}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=L._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<lt-1?t.strstart:lt-1,e===F?(l(t,!0),0===t.strm.avail_out?xt:bt):t.last_lit&&(l(t,!1),0===t.strm.avail_out)?gt:yt}function m(t,e){for(var n,i,o,r,a=t.window;;){if(t.lookahead<=st){if(d(t),t.lookahead<=st&&e===R)return gt;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=lt&&t.strstart>0&&(o=t.strstart-1,(i=a[o])===a[++o]&&i===a[++o]&&i===a[++o])){r=t.strstart+st;do{}while(i===a[++o]&&i===a[++o]&&i===a[++o]&&i===a[++o]&&i===a[++o]&&i===a[++o]&&i===a[++o]&&i===a[++o]&&o<r);t.match_length=st-(r-o),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=lt?(n=L._tr_tally(t,1,t.match_length-lt),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=L._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(l(t,!1),0===t.strm.avail_out))return gt}return t.insert=0,e===F?(l(t,!0),0===t.strm.avail_out?xt:bt):t.last_lit&&(l(t,!1),0===t.strm.avail_out)?gt:yt}function _(t,e){for(var n;;){if(0===t.lookahead&&(d(t),0===t.lookahead)){if(e===R)return gt;break}if(t.match_length=0,n=L._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(l(t,!1),0===t.strm.avail_out))return gt}return t.insert=0,e===F?(l(t,!0),0===t.strm.avail_out?xt:bt):t.last_lit&&(l(t,!1),0===t.strm.avail_out)?gt:yt}function g(t,e,n,i,o){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=o}function y(t){t.window_size=2*t.w_size,r(t.head),t.max_lazy_match=P[t.level].max_lazy,t.good_match=P[t.level].good_length,t.nice_match=P[t.level].nice_length,t.max_chain_length=P[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=lt-1,t.match_available=0,t.ins_h=0}function x(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=K,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new M.Buf16(2*rt),this.dyn_dtree=new M.Buf16(2*(2*it+1)),this.bl_tree=new M.Buf16(2*(2*ot+1)),r(this.dyn_ltree),r(this.dyn_dtree),r(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new M.Buf16(at+1),this.heap=new M.Buf16(2*nt+1),r(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new M.Buf16(2*nt+1),r(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function b(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=J,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?ft:mt,t.adler=2===e.wrap?0:1,e.last_flush=R,L._tr_init(e),D):i(t,Y)}function S(t){var e=b(t);return e===D&&y(t.state),e}function w(t,e){return t&&t.state?2!==t.state.wrap?Y:(t.state.gzhead=e,D):Y}function E(t,e,n,o,r,a){if(!t)return Y;var l=1;if(e===W&&(e=6),o<0?(l=0,o=-o):o>15&&(l=2,o-=16),r<1||r>$||n!==K||o<8||o>15||e<0||e>9||a<0||a>Q)return i(t,Y);8===o&&(o=9);var s=new x;return t.state=s,s.strm=t,s.wrap=l,s.gzhead=null,s.w_bits=o,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=r+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+lt-1)/lt),s.window=new M.Buf8(2*s.w_size),s.head=new M.Buf16(s.hash_size),s.prev=new M.Buf16(s.w_size),s.lit_bufsize=1<<r+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new M.Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=e,s.strategy=a,s.method=n,S(t)}function T(t,e){return E(t,e,K,tt,et,q)}function I(t,e){var n,l,c,f;if(!t||!t.state||e>z||e<0)return t?i(t,Y):Y;if(l=t.state,!t.output||!t.input&&0!==t.avail_in||l.status===_t&&e!==F)return i(t,0===t.avail_out?G:Y);if(l.strm=t,n=l.last_flush,l.last_flush=e,l.status===ft)if(2===l.wrap)t.adler=0,s(l,31),s(l,139),s(l,8),l.gzhead?(s(l,(l.gzhead.text?1:0)+(l.gzhead.hcrc?2:0)+(l.gzhead.extra?4:0)+(l.gzhead.name?8:0)+(l.gzhead.comment?16:0)),s(l,255&l.gzhead.time),s(l,l.gzhead.time>>8&255),s(l,l.gzhead.time>>16&255),s(l,l.gzhead.time>>24&255),s(l,9===l.level?2:l.strategy>=X||l.level<2?4:0),s(l,255&l.gzhead.os),l.gzhead.extra&&l.gzhead.extra.length&&(s(l,255&l.gzhead.extra.length),s(l,l.gzhead.extra.length>>8&255)),l.gzhead.hcrc&&(t.adler=N(t.adler,l.pending_buf,l.pending,0)),l.gzindex=0,l.status=dt):(s(l,0),s(l,0),s(l,0),s(l,0),s(l,0),s(l,9===l.level?2:l.strategy>=X||l.level<2?4:0),s(l,St),l.status=mt);else{var d=K+(l.w_bits-8<<4)<<8,h=-1;h=l.strategy>=X||l.level<2?0:l.level<6?1:6===l.level?2:3,d|=h<<6,0!==l.strstart&&(d|=ct),d+=31-d%31,l.status=mt,u(l,d),0!==l.strstart&&(u(l,t.adler>>>16),u(l,65535&t.adler)),t.adler=1}if(l.status===dt)if(l.gzhead.extra){for(c=l.pending;l.gzindex<(65535&l.gzhead.extra.length)&&(l.pending!==l.pending_buf_size||(l.gzhead.hcrc&&l.pending>c&&(t.adler=N(t.adler,l.pending_buf,l.pending-c,c)),a(t),c=l.pending,l.pending!==l.pending_buf_size));)s(l,255&l.gzhead.extra[l.gzindex]),l.gzindex++;l.gzhead.hcrc&&l.pending>c&&(t.adler=N(t.adler,l.pending_buf,l.pending-c,c)),l.gzindex===l.gzhead.extra.length&&(l.gzindex=0,l.status=ht)}else l.status=ht;if(l.status===ht)if(l.gzhead.name){c=l.pending;do{if(l.pending===l.pending_buf_size&&(l.gzhead.hcrc&&l.pending>c&&(t.adler=N(t.adler,l.pending_buf,l.pending-c,c)),a(t),c=l.pending,l.pending===l.pending_buf_size)){f=1;break}f=l.gzindex<l.gzhead.name.length?255&l.gzhead.name.charCodeAt(l.gzindex++):0,s(l,f)}while(0!==f);l.gzhead.hcrc&&l.pending>c&&(t.adler=N(t.adler,l.pending_buf,l.pending-c,c)),0===f&&(l.gzindex=0,l.status=vt)}else l.status=vt;if(l.status===vt)if(l.gzhead.comment){c=l.pending;do{if(l.pending===l.pending_buf_size&&(l.gzhead.hcrc&&l.pending>c&&(t.adler=N(t.adler,l.pending_buf,l.pending-c,c)),a(t),c=l.pending,l.pending===l.pending_buf_size)){f=1;break}f=l.gzindex<l.gzhead.comment.length?255&l.gzhead.comment.charCodeAt(l.gzindex++):0,s(l,f)}while(0!==f);l.gzhead.hcrc&&l.pending>c&&(t.adler=N(t.adler,l.pending_buf,l.pending-c,c)),0===f&&(l.status=pt)}else l.status=pt;if(l.status===pt&&(l.gzhead.hcrc?(l.pending+2>l.pending_buf_size&&a(t),l.pending+2<=l.pending_buf_size&&(s(l,255&t.adler),s(l,t.adler>>8&255),t.adler=0,l.status=mt)):l.status=mt),0!==l.pending){if(a(t),0===t.avail_out)return l.last_flush=-1,D}else if(0===t.avail_in&&o(e)<=o(n)&&e!==F)return i(t,G);if(l.status===_t&&0!==t.avail_in)return i(t,G);if(0!==t.avail_in||0!==l.lookahead||e!==R&&l.status!==_t){var v=l.strategy===X?_(l,e):l.strategy===H?m(l,e):P[l.level].func(l,e);if(v!==xt&&v!==bt||(l.status=_t),v===gt||v===xt)return 0===t.avail_out&&(l.last_flush=-1),D;if(v===yt&&(e===V?L._tr_align(l):e!==z&&(L._tr_stored_block(l,0,0,!1),e===B&&(r(l.head),0===l.lookahead&&(l.strstart=0,l.block_start=0,l.insert=0))),a(t),0===t.avail_out))return l.last_flush=-1,D}return e!==F?D:l.wrap<=0?U:(2===l.wrap?(s(l,255&t.adler),s(l,t.adler>>8&255),s(l,t.adler>>16&255),s(l,t.adler>>24&255),s(l,255&t.total_in),s(l,t.total_in>>8&255),s(l,t.total_in>>16&255),s(l,t.total_in>>24&255)):(u(l,t.adler>>>16),u(l,65535&t.adler)),a(t),l.wrap>0&&(l.wrap=-l.wrap),0!==l.pending?D:U)}function A(t){var e;return t&&t.state?(e=t.state.status)!==ft&&e!==dt&&e!==ht&&e!==vt&&e!==pt&&e!==mt&&e!==_t?i(t,Y):(t.state=null,e===mt?i(t,j):D):Y}function k(t,e){var n,i,o,a,l,s,u,c,f=e.length;if(!t||!t.state)return Y;if(n=t.state,2===(a=n.wrap)||1===a&&n.status!==ft||n.lookahead)return Y;for(1===a&&(t.adler=C(t.adler,e,f,0)),n.wrap=0,f>=n.w_size&&(0===a&&(r(n.head),n.strstart=0,n.block_start=0,n.insert=0),c=new M.Buf8(n.w_size),M.arraySet(c,e,f-n.w_size,n.w_size,0),e=c,f=n.w_size),l=t.avail_in,s=t.next_in,u=t.input,t.avail_in=f,t.next_in=0,t.input=e,d(n);n.lookahead>=lt;){i=n.strstart,o=n.lookahead-(lt-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+lt-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++}while(--o);n.strstart=i,n.lookahead=lt-1,d(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=lt-1,n.match_available=0,t.next_in=s,t.input=u,t.avail_in=l,n.wrap=a,D}var P,M=n(152),L=n(890),C=n(454),N=n(456),O=n(368),R=0,V=1,B=3,F=4,z=5,D=0,U=1,Y=-2,j=-3,G=-5,W=-1,Z=1,X=2,H=3,Q=4,q=0,J=2,K=8,$=9,tt=15,et=8,nt=286,it=30,ot=19,rt=2*nt+1,at=15,lt=3,st=258,ut=st+lt+1,ct=32,ft=42,dt=69,ht=73,vt=91,pt=103,mt=113,_t=666,gt=1,yt=2,xt=3,bt=4,St=3;P=[new g(0,0,0,0,h),new g(4,4,8,4,v),new g(4,5,16,8,v),new g(4,6,32,32,v),new g(4,4,16,16,p),new g(8,16,32,32,p),new g(8,16,128,128,p),new g(8,32,128,256,p),new g(32,128,258,1024,p),new g(32,258,258,4096,p)],e.deflateInit=T,e.deflateInit2=E,e.deflateReset=S,e.deflateResetKeep=b,e.deflateSetHeader=w,e.deflate=I,e.deflateEnd=A,e.deflateSetDictionary=k,e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,n){"use strict";function i(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}t.exports=i},function(t,e,n){"use strict";t.exports=function(t,e){var n,i,o,r,a,l,s,u,c,f,d,h,v,p,m,_,g,y,x,b,S,w,E,T,I;n=t.state,i=t.next_in,T=t.input,o=i+(t.avail_in-5),r=t.next_out,I=t.output,a=r-(e-t.avail_out),l=r+(t.avail_out-257),s=n.dmax,u=n.wsize,c=n.whave,f=n.wnext,d=n.window,h=n.hold,v=n.bits,p=n.lencode,m=n.distcode,_=(1<<n.lenbits)-1,g=(1<<n.distbits)-1;t:do{v<15&&(h+=T[i++]<<v,v+=8,h+=T[i++]<<v,v+=8),y=p[h&_];e:for(;;){if(x=y>>>24,h>>>=x,v-=x,0===(x=y>>>16&255))I[r++]=65535&y;else{if(!(16&x)){if(0==(64&x)){y=p[(65535&y)+(h&(1<<x)-1)];continue e}if(32&x){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}b=65535&y,x&=15,x&&(v<x&&(h+=T[i++]<<v,v+=8),b+=h&(1<<x)-1,h>>>=x,v-=x),v<15&&(h+=T[i++]<<v,v+=8,h+=T[i++]<<v,v+=8),y=m[h&g];n:for(;;){if(x=y>>>24,h>>>=x,v-=x,!(16&(x=y>>>16&255))){if(0==(64&x)){y=m[(65535&y)+(h&(1<<x)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(S=65535&y,x&=15,v<x&&(h+=T[i++]<<v,(v+=8)<x&&(h+=T[i++]<<v,v+=8)),(S+=h&(1<<x)-1)>s){t.msg="invalid distance too far back",n.mode=30;break t}if(h>>>=x,v-=x,x=r-a,S>x){if((x=S-x)>c&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(w=0,E=d,0===f){if(w+=u-x,x<b){b-=x;do{I[r++]=d[w++]}while(--x);w=r-S,E=I}}else if(f<x){if(w+=u+f-x,(x-=f)<b){b-=x;do{I[r++]=d[w++]}while(--x);if(w=0,f<b){x=f,b-=x;do{I[r++]=d[w++]}while(--x);w=r-S,E=I}}}else if(w+=f-x,x<b){b-=x;do{I[r++]=d[w++]}while(--x);w=r-S,E=I}for(;b>2;)I[r++]=E[w++],I[r++]=E[w++],I[r++]=E[w++],b-=3;b&&(I[r++]=E[w++],b>1&&(I[r++]=E[w++]))}else{w=r-S;do{I[r++]=I[w++],I[r++]=I[w++],I[r++]=I[w++],b-=3}while(b>2);b&&(I[r++]=I[w++],b>1&&(I[r++]=I[w++]))}break}}break}}while(i<o&&r<l);b=v>>3,i-=b,v-=b<<3,h&=(1<<v)-1,t.next_in=i,t.next_out=r,t.avail_in=i<o?o-i+5:5-(i-o),t.avail_out=r<l?l-r+257:257-(r-l),n.hold=h,n.bits=v}},function(t,e,n){"use strict";function i(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function o(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new g.Buf16(320),this.work=new g.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function r(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=B,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new g.Buf32(pt),e.distcode=e.distdyn=new g.Buf32(mt),e.sane=1,e.back=-1,P):C}function a(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,r(t)):C}function l(t,e){var n,i;return t&&t.state?(i=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?C:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,a(t))):C}function s(t,e){var n,i;return t?(i=new o,t.state=i,i.window=null,n=l(t,e),n!==P&&(t.state=null),n):C}function u(t){return s(t,_t)}function c(t){if(gt){var e;for(m=new g.Buf32(512),_=new g.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(S(E,t.lens,0,288,m,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;S(T,t.lens,0,32,_,0,t.work,{bits:5}),gt=!1}t.lencode=m,t.lenbits=9,t.distcode=_,t.distbits=5}function f(t,e,n,i){var o,r=t.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new g.Buf8(r.wsize)),i>=r.wsize?(g.arraySet(r.window,e,n-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):(o=r.wsize-r.wnext,o>i&&(o=i),g.arraySet(r.window,e,n-i,o,r.wnext),i-=o,i?(g.arraySet(r.window,e,n-i,i,0),r.wnext=i,r.whave=r.wsize):(r.wnext+=o,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=o))),0}function d(t,e){var n,o,r,a,l,s,u,d,h,v,p,m,_,pt,mt,_t,gt,yt,xt,bt,St,wt,Et,Tt,It=0,At=new g.Buf8(4),kt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return C;n=t.state,n.mode===H&&(n.mode=Q),l=t.next_out,r=t.output,u=t.avail_out,a=t.next_in,o=t.input,s=t.avail_in,d=n.hold,h=n.bits,v=s,p=u,wt=P;t:for(;;)switch(n.mode){case B:if(0===n.wrap){n.mode=Q;break}for(;h<16;){if(0===s)break t;s--,d+=o[a++]<<h,h+=8}if(2&n.wrap&&35615===d){n.check=0,At[0]=255&d,At[1]=d>>>8&255,n.check=x(n.check,At,2,0),d=0,h=0,n.mode=F;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&d)<<8)+(d>>8))%31){t.msg="incorrect header check",n.mode=dt;break}if((15&d)!==V){t.msg="unknown compression method",n.mode=dt;break}if(d>>>=4,h-=4,St=8+(15&d),0===n.wbits)n.wbits=St;else if(St>n.wbits){t.msg="invalid window size",n.mode=dt;break}n.dmax=1<<St,t.adler=n.check=1,n.mode=512&d?Z:H,d=0,h=0;break;case F:for(;h<16;){if(0===s)break t;s--,d+=o[a++]<<h,h+=8}if(n.flags=d,(255&n.flags)!==V){t.msg="unknown compression method",n.mode=dt;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=dt;break}n.head&&(n.head.text=d>>8&1),512&n.flags&&(At[0]=255&d,At[1]=d>>>8&255,n.check=x(n.check,At,2,0)),d=0,h=0,n.mode=z;case z:for(;h<32;){if(0===s)break t;s--,d+=o[a++]<<h,h+=8}n.head&&(n.head.time=d),512&n.flags&&(At[0]=255&d,At[1]=d>>>8&255,At[2]=d>>>16&255,At[3]=d>>>24&255,n.check=x(n.check,At,4,0)),d=0,h=0,n.mode=D;case D:for(;h<16;){if(0===s)break t;s--,d+=o[a++]<<h,h+=8}n.head&&(n.head.xflags=255&d,n.head.os=d>>8),512&n.flags&&(At[0]=255&d,At[1]=d>>>8&255,n.check=x(n.check,At,2,0)),d=0,h=0,n.mode=U;case U:if(1024&n.flags){for(;h<16;){if(0===s)break t;s--,d+=o[a++]<<h,h+=8}n.length=d,n.head&&(n.head.extra_len=d),512&n.flags&&(At[0]=255&d,At[1]=d>>>8&255,n.check=x(n.check,At,2,0)),d=0,h=0}else n.head&&(n.head.extra=null);n.mode=Y;case Y:if(1024&n.flags&&(m=n.length,m>s&&(m=s),m&&(n.head&&(St=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),g.arraySet(n.head.extra,o,a,m,St)),512&n.flags&&(n.check=x(n.check,o,m,a)),s-=m,a+=m,n.length-=m),n.length))break t;n.length=0,n.mode=j;case j:if(2048&n.flags){if(0===s)break t;m=0;do{St=o[a+m++],n.head&&St&&n.length<65536&&(n.head.name+=String.fromCharCode(St))}while(St&&m<s);if(512&n.flags&&(n.check=x(n.check,o,m,a)),s-=m,a+=m,St)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=G;case G:if(4096&n.flags){if(0===s)break t;m=0;do{St=o[a+m++],n.head&&St&&n.length<65536&&(n.head.comment+=String.fromCharCode(St))}while(St&&m<s);if(512&n.flags&&(n.check=x(n.check,o,m,a)),s-=m,a+=m,St)break t}else n.head&&(n.head.comment=null);n.mode=W;case W:if(512&n.flags){for(;h<16;){if(0===s)break t;s--,d+=o[a++]<<h,h+=8}if(d!==(65535&n.check)){t.msg="header crc mismatch",n.mode=dt;break}d=0,h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=H;break;case Z:for(;h<32;){if(0===s)break t;s--,d+=o[a++]<<h,h+=8}t.adler=n.check=i(d),d=0,h=0,n.mode=X;case X:if(0===n.havedict)return t.next_out=l,t.avail_out=u,t.next_in=a,t.avail_in=s,n.hold=d,n.bits=h,L;t.adler=n.check=1,n.mode=H;case H:if(e===A||e===k)break t;case Q:if(n.last){d>>>=7&h,h-=7&h,n.mode=ut;break}for(;h<3;){if(0===s)break t;s--,d+=o[a++]<<h,h+=8}switch(n.last=1&d,d>>>=1,h-=1,3&d){case 0:n.mode=q;break;case 1:if(c(n),n.mode=nt,e===k){d>>>=2,h-=2;break t}break;case 2:n.mode=$;break;case 3:t.msg="invalid block type",n.mode=dt}d>>>=2,h-=2;break;case q:for(d>>>=7&h,h-=7&h;h<32;){if(0===s)break t;s--,d+=o[a++]<<h,h+=8}if((65535&d)!=(d>>>16^65535)){t.msg="invalid stored block lengths",n.mode=dt;break}if(n.length=65535&d,d=0,h=0,n.mode=J,e===k)break t;case J:n.mode=K;case K:if(m=n.length){if(m>s&&(m=s),m>u&&(m=u),0===m)break t;g.arraySet(r,o,a,m,l),s-=m,a+=m,u-=m,l+=m,n.length-=m;break}n.mode=H;break;case $:for(;h<14;){if(0===s)break t;s--,d+=o[a++]<<h,h+=8}if(n.nlen=257+(31&d),d>>>=5,h-=5,n.ndist=1+(31&d),d>>>=5,h-=5,n.ncode=4+(15&d),d>>>=4,h-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=dt;break}n.have=0,n.mode=tt;case tt:for(;n.have<n.ncode;){for(;h<3;){if(0===s)break t;s--,d+=o[a++]<<h,h+=8}n.lens[kt[n.have++]]=7&d,d>>>=3,h-=3}for(;n.have<19;)n.lens[kt[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Et={bits:n.lenbits},wt=S(w,n.lens,0,19,n.lencode,0,n.work,Et),n.lenbits=Et.bits,wt){t.msg="invalid code lengths set",n.mode=dt;break}n.have=0,n.mode=et;case et:for(;n.have<n.nlen+n.ndist;){for(;It=n.lencode[d&(1<<n.lenbits)-1],mt=It>>>24,_t=It>>>16&255,gt=65535&It,!(mt<=h);){if(0===s)break t;s--,d+=o[a++]<<h,h+=8}if(gt<16)d>>>=mt,h-=mt,n.lens[n.have++]=gt;else{if(16===gt){for(Tt=mt+2;h<Tt;){if(0===s)break t;s--,d+=o[a++]<<h,h+=8}if(d>>>=mt,h-=mt,0===n.have){t.msg="invalid bit length repeat",n.mode=dt;break}St=n.lens[n.have-1],m=3+(3&d),d>>>=2,h-=2}else if(17===gt){for(Tt=mt+3;h<Tt;){if(0===s)break t;s--,d+=o[a++]<<h,h+=8}d>>>=mt,h-=mt,St=0,m=3+(7&d),d>>>=3,h-=3}else{for(Tt=mt+7;h<Tt;){if(0===s)break t;s--,d+=o[a++]<<h,h+=8}d>>>=mt,h-=mt,St=0,m=11+(127&d),d>>>=7,h-=7}if(n.have+m>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=dt;break}for(;m--;)n.lens[n.have++]=St}}if(n.mode===dt)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=dt;break}if(n.lenbits=9,Et={bits:n.lenbits},wt=S(E,n.lens,0,n.nlen,n.lencode,0,n.work,Et),n.lenbits=Et.bits,wt){t.msg="invalid literal/lengths set",n.mode=dt;break}if(n.distbits=6,n.distcode=n.distdyn,Et={bits:n.distbits},wt=S(T,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Et),n.distbits=Et.bits,wt){t.msg="invalid distances set",n.mode=dt;break}if(n.mode=nt,e===k)break t;case nt:n.mode=it;case it:if(s>=6&&u>=258){t.next_out=l,t.avail_out=u,t.next_in=a,t.avail_in=s,n.hold=d,n.bits=h,b(t,p),l=t.next_out,r=t.output,u=t.avail_out,a=t.next_in,o=t.input,s=t.avail_in,d=n.hold,h=n.bits,n.mode===H&&(n.back=-1);break}for(n.back=0;It=n.lencode[d&(1<<n.lenbits)-1],mt=It>>>24,_t=It>>>16&255,gt=65535&It,!(mt<=h);){if(0===s)break t;s--,d+=o[a++]<<h,h+=8}if(_t&&0==(240&_t)){for(yt=mt,xt=_t,bt=gt;It=n.lencode[bt+((d&(1<<yt+xt)-1)>>yt)],mt=It>>>24,_t=It>>>16&255,gt=65535&It,!(yt+mt<=h);){if(0===s)break t;s--,d+=o[a++]<<h,h+=8}d>>>=yt,h-=yt,n.back+=yt}if(d>>>=mt,h-=mt,n.back+=mt,n.length=gt,0===_t){n.mode=st;break}if(32&_t){n.back=-1,n.mode=H;break}if(64&_t){t.msg="invalid literal/length code",n.mode=dt;break}n.extra=15&_t,n.mode=ot;case ot:if(n.extra){for(Tt=n.extra;h<Tt;){if(0===s)break t;s--,d+=o[a++]<<h,h+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,h-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=rt;case rt:for(;It=n.distcode[d&(1<<n.distbits)-1],mt=It>>>24,_t=It>>>16&255,gt=65535&It,!(mt<=h);){if(0===s)break t;s--,d+=o[a++]<<h,h+=8}if(0==(240&_t)){for(yt=mt,xt=_t,bt=gt;It=n.distcode[bt+((d&(1<<yt+xt)-1)>>yt)],mt=It>>>24,_t=It>>>16&255,gt=65535&It,!(yt+mt<=h);){if(0===s)break t;s--,d+=o[a++]<<h,h+=8}d>>>=yt,h-=yt,n.back+=yt}if(d>>>=mt,h-=mt,n.back+=mt,64&_t){t.msg="invalid distance code",n.mode=dt;break}n.offset=gt,n.extra=15&_t,n.mode=at;case at:if(n.extra){for(Tt=n.extra;h<Tt;){if(0===s)break t;s--,d+=o[a++]<<h,h+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,h-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=dt;break}n.mode=lt;case lt:if(0===u)break t;if(m=p-u,n.offset>m){if((m=n.offset-m)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=dt;break}m>n.wnext?(m-=n.wnext,_=n.wsize-m):_=n.wnext-m,m>n.length&&(m=n.length),pt=n.window}else pt=r,_=l-n.offset,m=n.length;m>u&&(m=u),u-=m,n.length-=m;do{r[l++]=pt[_++]}while(--m);0===n.length&&(n.mode=it);break;case st:if(0===u)break t;r[l++]=n.length,u--,n.mode=it;break;case ut:if(n.wrap){for(;h<32;){if(0===s)break t;s--,d|=o[a++]<<h,h+=8}if(p-=u,t.total_out+=p,n.total+=p,p&&(t.adler=n.check=n.flags?x(n.check,r,p,l-p):y(n.check,r,p,l-p)),p=u,(n.flags?d:i(d))!==n.check){t.msg="incorrect data check",n.mode=dt;break}d=0,h=0}n.mode=ct;case ct:if(n.wrap&&n.flags){for(;h<32;){if(0===s)break t;s--,d+=o[a++]<<h,h+=8}if(d!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=dt;break}d=0,h=0}n.mode=ft;case ft:wt=M;break t;case dt:wt=N;break t;case ht:return O;case vt:default:return C}return t.next_out=l,t.avail_out=u,t.next_in=a,t.avail_in=s,n.hold=d,n.bits=h,(n.wsize||p!==t.avail_out&&n.mode<dt&&(n.mode<ut||e!==I))&&f(t,t.output,t.next_out,p-t.avail_out)?(n.mode=ht,O):(v-=t.avail_in,p-=t.avail_out,t.total_in+=v,t.total_out+=p,n.total+=p,n.wrap&&p&&(t.adler=n.check=n.flags?x(n.check,r,p,t.next_out-p):y(n.check,r,p,t.next_out-p)),t.data_type=n.bits+(n.last?64:0)+(n.mode===H?128:0)+(n.mode===nt||n.mode===J?256:0),(0===v&&0===p||e===I)&&wt===P&&(wt=R),wt)}function h(t){if(!t||!t.state)return C;var e=t.state;return e.window&&(e.window=null),t.state=null,P}function v(t,e){var n;return t&&t.state?(n=t.state,0==(2&n.wrap)?C:(n.head=e,e.done=!1,P)):C}function p(t,e){var n,i,o=e.length;return t&&t.state?(n=t.state,0!==n.wrap&&n.mode!==X?C:n.mode===X&&(i=1,(i=y(i,e,o,0))!==n.check)?N:f(t,e,o,o)?(n.mode=ht,O):(n.havedict=1,P)):C}var m,_,g=n(152),y=n(454),x=n(456),b=n(887),S=n(889),w=0,E=1,T=2,I=4,A=5,k=6,P=0,M=1,L=2,C=-2,N=-3,O=-4,R=-5,V=8,B=1,F=2,z=3,D=4,U=5,Y=6,j=7,G=8,W=9,Z=10,X=11,H=12,Q=13,q=14,J=15,K=16,$=17,tt=18,et=19,nt=20,it=21,ot=22,rt=23,at=24,lt=25,st=26,ut=27,ct=28,ft=29,dt=30,ht=31,vt=32,pt=852,mt=592,_t=15,gt=!0;e.inflateReset=a,e.inflateReset2=l,e.inflateResetKeep=r,e.inflateInit=u,e.inflateInit2=s,e.inflate=d,e.inflateEnd=h,e.inflateGetHeader=v,e.inflateSetDictionary=p,e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,n){"use strict";var i=n(152),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,n,s,u,c,f,d){var h,v,p,m,_,g,y,x,b,S=d.bits,w=0,E=0,T=0,I=0,A=0,k=0,P=0,M=0,L=0,C=0,N=null,O=0,R=new i.Buf16(16),V=new i.Buf16(16),B=null,F=0;for(w=0;w<=15;w++)R[w]=0;for(E=0;E<s;E++)R[e[n+E]]++;for(A=S,I=15;I>=1&&0===R[I];I--);if(A>I&&(A=I),0===I)return u[c++]=20971520,u[c++]=20971520,d.bits=1,0;for(T=1;T<I&&0===R[T];T++);for(A<T&&(A=T),M=1,w=1;w<=15;w++)if(M<<=1,(M-=R[w])<0)return-1;if(M>0&&(0===t||1!==I))return-1;for(V[1]=0,w=1;w<15;w++)V[w+1]=V[w]+R[w];for(E=0;E<s;E++)0!==e[n+E]&&(f[V[e[n+E]]++]=E);if(0===t?(N=B=f,g=19):1===t?(N=o,O-=257,B=r,F-=257,g=256):(N=a,B=l,g=-1),C=0,E=0,w=T,_=c,k=A,P=0,p=-1,L=1<<A,m=L-1,1===t&&L>852||2===t&&L>592)return 1;for(;;){y=w-P,f[E]<g?(x=0,b=f[E]):f[E]>g?(x=B[F+f[E]],b=N[O+f[E]]):(x=96,b=0),h=1<<w-P,v=1<<k,T=v;do{v-=h,u[_+(C>>P)+v]=y<<24|x<<16|b|0}while(0!==v);for(h=1<<w-1;C&h;)h>>=1;if(0!==h?(C&=h-1,C+=h):C=0,E++,0==--R[w]){if(w===I)break;w=e[n+f[E]]}if(w>A&&(C&m)!==p){for(0===P&&(P=A),_+=T,k=w-P,M=1<<k;k+P<I&&!((M-=R[k+P])<=0);)k++,M<<=1;if(L+=1<<k,1===t&&L>852||2===t&&L>592)return 1;p=C&m,u[p]=A<<24|k<<16|_-c|0}}return 0!==C&&(u[_+C]=w-P<<24|64<<16|0),d.bits=A,0}},function(t,e,n){"use strict";function i(t){for(var e=t.length;--e>=0;)t[e]=0}function o(t,e,n,i,o){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=o,this.has_stree=t&&t.length}function r(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function a(t){return t<256?rt[t]:rt[256+(t>>>7)]}function l(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function s(t,e,n){t.bi_valid>X-n?(t.bi_buf|=e<<t.bi_valid&65535,l(t,t.bi_buf),t.bi_buf=e>>X-t.bi_valid,t.bi_valid+=n-X):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function u(t,e,n){s(t,n[2*e],n[2*e+1])}function c(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function f(t){16===t.bi_valid?(l(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function d(t,e){var n,i,o,r,a,l,s=e.dyn_tree,u=e.max_code,c=e.stat_desc.static_tree,f=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,h=e.stat_desc.extra_base,v=e.stat_desc.max_length,p=0;for(r=0;r<=Z;r++)t.bl_count[r]=0;for(s[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<W;n++)i=t.heap[n],r=s[2*s[2*i+1]+1]+1,r>v&&(r=v,p++),s[2*i+1]=r,i>u||(t.bl_count[r]++,a=0,i>=h&&(a=d[i-h]),l=s[2*i],t.opt_len+=l*(r+a),f&&(t.static_len+=l*(c[2*i+1]+a)));if(0!==p){do{for(r=v-1;0===t.bl_count[r];)r--;t.bl_count[r]--,t.bl_count[r+1]+=2,t.bl_count[v]--,p-=2}while(p>0);for(r=v;0!==r;r--)for(i=t.bl_count[r];0!==i;)(o=t.heap[--n])>u||(s[2*o+1]!==r&&(t.opt_len+=(r-s[2*o+1])*s[2*o],s[2*o+1]=r),i--)}}function h(t,e,n){var i,o,r=new Array(Z+1),a=0;for(i=1;i<=Z;i++)r[i]=a=a+n[i-1]<<1;for(o=0;o<=e;o++){var l=t[2*o+1];0!==l&&(t[2*o]=c(r[l]++,l))}}function v(){var t,e,n,i,r,a=new Array(Z+1);for(n=0,i=0;i<D-1;i++)for(lt[i]=n,t=0;t<1<<$[i];t++)at[n++]=i;for(at[n-1]=i,r=0,i=0;i<16;i++)for(st[i]=r,t=0;t<1<<tt[i];t++)rt[r++]=i;for(r>>=7;i<j;i++)for(st[i]=r<<7,t=0;t<1<<tt[i]-7;t++)rt[256+r++]=i;for(e=0;e<=Z;e++)a[e]=0;for(t=0;t<=143;)it[2*t+1]=8,t++,a[8]++;for(;t<=255;)it[2*t+1]=9,t++,a[9]++;for(;t<=279;)it[2*t+1]=7,t++,a[7]++;for(;t<=287;)it[2*t+1]=8,t++,a[8]++;for(h(it,Y+1,a),t=0;t<j;t++)ot[2*t+1]=5,ot[2*t]=c(t,5);ut=new o(it,$,U+1,Y,Z),ct=new o(ot,tt,0,j,Z),ft=new o(new Array(0),et,0,G,H)}function p(t){var e;for(e=0;e<Y;e++)t.dyn_ltree[2*e]=0;for(e=0;e<j;e++)t.dyn_dtree[2*e]=0;for(e=0;e<G;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*Q]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function m(t){t.bi_valid>8?l(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function _(t,e,n,i){m(t),i&&(l(t,n),l(t,~n)),C.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}function g(t,e,n,i){var o=2*e,r=2*n;return t[o]<t[r]||t[o]===t[r]&&i[e]<=i[n]}function y(t,e,n){for(var i=t.heap[n],o=n<<1;o<=t.heap_len&&(o<t.heap_len&&g(e,t.heap[o+1],t.heap[o],t.depth)&&o++,!g(e,i,t.heap[o],t.depth));)t.heap[n]=t.heap[o],n=o,o<<=1;t.heap[n]=i}function x(t,e,n){var i,o,r,l,c=0;if(0!==t.last_lit)do{i=t.pending_buf[t.d_buf+2*c]<<8|t.pending_buf[t.d_buf+2*c+1],o=t.pending_buf[t.l_buf+c],c++,0===i?u(t,o,e):(r=at[o],u(t,r+U+1,e),l=$[r],0!==l&&(o-=lt[r],s(t,o,l)),i--,r=a(i),u(t,r,n),0!==(l=tt[r])&&(i-=st[r],s(t,i,l)))}while(c<t.last_lit);u(t,Q,e)}function b(t,e){var n,i,o,r=e.dyn_tree,a=e.stat_desc.static_tree,l=e.stat_desc.has_stree,s=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=W,n=0;n<s;n++)0!==r[2*n]?(t.heap[++t.heap_len]=u=n,t.depth[n]=0):r[2*n+1]=0;for(;t.heap_len<2;)o=t.heap[++t.heap_len]=u<2?++u:0,r[2*o]=1,t.depth[o]=0,t.opt_len--,l&&(t.static_len-=a[2*o+1]);for(e.max_code=u,n=t.heap_len>>1;n>=1;n--)y(t,r,n);o=s;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],y(t,r,1),i=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=i,r[2*o]=r[2*n]+r[2*i],t.depth[o]=(t.depth[n]>=t.depth[i]?t.depth[n]:t.depth[i])+1,r[2*n+1]=r[2*i+1]=o,t.heap[1]=o++,y(t,r,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],d(t,e),h(r,u,t.bl_count)}function S(t,e,n){var i,o,r=-1,a=e[1],l=0,s=7,u=4;for(0===a&&(s=138,u=3),e[2*(n+1)+1]=65535,i=0;i<=n;i++)o=a,a=e[2*(i+1)+1],++l<s&&o===a||(l<u?t.bl_tree[2*o]+=l:0!==o?(o!==r&&t.bl_tree[2*o]++,t.bl_tree[2*q]++):l<=10?t.bl_tree[2*J]++:t.bl_tree[2*K]++,l=0,r=o,0===a?(s=138,u=3):o===a?(s=6,u=3):(s=7,u=4))}function w(t,e,n){var i,o,r=-1,a=e[1],l=0,c=7,f=4;for(0===a&&(c=138,f=3),i=0;i<=n;i++)if(o=a,a=e[2*(i+1)+1],!(++l<c&&o===a)){if(l<f)do{u(t,o,t.bl_tree)}while(0!=--l);else 0!==o?(o!==r&&(u(t,o,t.bl_tree),l--),u(t,q,t.bl_tree),s(t,l-3,2)):l<=10?(u(t,J,t.bl_tree),s(t,l-3,3)):(u(t,K,t.bl_tree),s(t,l-11,7));l=0,r=o,0===a?(c=138,f=3):o===a?(c=6,f=3):(c=7,f=4)}}function E(t){var e;for(S(t,t.dyn_ltree,t.l_desc.max_code),S(t,t.dyn_dtree,t.d_desc.max_code),b(t,t.bl_desc),e=G-1;e>=3&&0===t.bl_tree[2*nt[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}function T(t,e,n,i){var o;for(s(t,e-257,5),s(t,n-1,5),s(t,i-4,4),o=0;o<i;o++)s(t,t.bl_tree[2*nt[o]+1],3);w(t,t.dyn_ltree,e-1),w(t,t.dyn_dtree,n-1)}function I(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return O;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return R;for(e=32;e<U;e++)if(0!==t.dyn_ltree[2*e])return R;return O}function A(t){dt||(v(),dt=!0),t.l_desc=new r(t.dyn_ltree,ut),t.d_desc=new r(t.dyn_dtree,ct),t.bl_desc=new r(t.bl_tree,ft),t.bi_buf=0,t.bi_valid=0,p(t)}function k(t,e,n,i){s(t,(B<<1)+(i?1:0),3),_(t,e,n,!0)}function P(t){s(t,F<<1,3),u(t,Q,it),f(t)}function M(t,e,n,i){var o,r,a=0;t.level>0?(t.strm.data_type===V&&(t.strm.data_type=I(t)),b(t,t.l_desc),b(t,t.d_desc),a=E(t),o=t.opt_len+3+7>>>3,(r=t.static_len+3+7>>>3)<=o&&(o=r)):o=r=n+5,n+4<=o&&-1!==e?k(t,e,n,i):t.strategy===N||r===o?(s(t,(F<<1)+(i?1:0),3),x(t,it,ot)):(s(t,(z<<1)+(i?1:0),3),T(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),x(t,t.dyn_ltree,t.dyn_dtree)),p(t),i&&m(t)}function L(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(at[n]+U+1)]++,t.dyn_dtree[2*a(e)]++),t.last_lit===t.lit_bufsize-1}var C=n(152),N=4,O=0,R=1,V=2,B=0,F=1,z=2,D=29,U=256,Y=U+1+D,j=30,G=19,W=2*Y+1,Z=15,X=16,H=7,Q=256,q=16,J=17,K=18,$=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],tt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],et=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],nt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],it=new Array(2*(Y+2));i(it);var ot=new Array(2*j);i(ot);var rt=new Array(512);i(rt);var at=new Array(256);i(at);var lt=new Array(D);i(lt);var st=new Array(j);i(st);var ut,ct,ft,dt=!1;e._tr_init=A,e._tr_stored_block=k,e._tr_flush_block=M,e._tr_tally=L,e._tr_align=P},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function r(t){if(f===clearTimeout)return clearTimeout(t);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function a(){p&&h&&(p=!1,h.length?v=h.concat(v):m=-1,v.length&&l())}function l(){if(!p){var t=o(a);p=!0;for(var e=v.length;e;){for(h=v,v=[];++m<e;)h&&h[m].run();m=-1,e=v.length}h=null,p=!1,r(t)}}function s(t,e){this.fun=t,this.array=e}function u(){}var c,f,d=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(t){f=i}}();var h,v=[],p=!1,m=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];v.push(new s(t,e)),1!==v.length||p||o(l)},s.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=u,d.addListener=u,d.once=u,d.off=u,d.removeListener=u,d.removeAllListeners=u,d.emit=u,d.prependListener=u,d.prependOnceListener=u,d.listeners=function(t){return[]},d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(t,e){t.exports="# WaveFront *.obj file (generated by CINEMA 4D)\n\nmtllib ./escalator.mtl\n\nv -10.38787460327148 3.49382448196411 0.05786377936602\nv -10.38787460327148 2.83549332618713 0.05786377936602\nv 8.37319946289062 3.49382448196411 15.20390701293945\nv 8.37319946289062 2.83549332618713 15.20390701293945\nv -15.11080265045166 2.83549332618713 4.95054340362549\nv -15.11080265045166 3.49382448196411 4.95054340362549\nv -17.63106727600098 3.49382448196411 2.51569700241089\nv -17.63106727600098 2.83549332618713 2.51569700241089\nv -15.63636589050293 2.83549332618713 4.89701271057129\nv -16.17062377929688 2.83549332618713 4.72479200363159\nv -16.67029190063477 2.83549332618713 4.42842483520508\nv -17.09063148498535 2.83549332618713 4.02233219146729\nv -17.39739608764648 2.83549332618713 3.53959894180298\nv -17.57565879821777 2.83549332618713 3.02344822883606\nv -15.63636589050293 3.49382448196411 4.89701271057129\nv -16.17062377929688 3.49382448196411 4.72479200363159\nv -16.67029190063477 3.49382448196411 4.42842483520508\nv -17.09063148498535 3.49382448196411 4.02233219146729\nv -17.39739608764648 3.49382448196411 3.53959894180298\nv -17.57565879821777 3.49382448196411 3.02344822883606\nv -15.11080265045166 3.49382448196411 0.05786377936602\nv -15.11080265045166 2.83549332618713 0.05786377936602\nv -17.63106727600098 3.49382448196411 2.49271011352539\nv -17.63106727600098 2.83549332618713 2.49271011352539\nv -15.63636589050293 3.49382448196411 0.11139420419931\nv -16.17062377929688 3.49382448196411 0.28361487388611\nv -16.67029190063477 3.49382448196411 0.57998245954514\nv -17.09063148498535 3.49382448196411 0.9860748052597\nv -17.39739608764648 3.49382448196411 1.4688081741333\nv -17.57565879821777 3.49382448196411 1.98495888710022\nv -15.63636589050293 2.83549332618713 0.11139420419931\nv -16.17062377929688 2.83549332618713 0.28361487388611\nv -16.67029190063477 2.83549332618713 0.57998245954514\nv -17.09063148498535 2.83549332618713 0.9860748052597\nv -17.39739608764648 2.83549332618713 1.4688081741333\nv -17.57565879821777 2.83549332618713 1.98495888710022\nv 13.17253494262695 3.49382448196411 20.09658622741699\nv 13.17253494262695 2.83549332618713 20.09658622741699\nv 15.69279861450195 2.83549332618713 17.66173934936523\nv 15.69279861450195 3.49382448196411 17.66173934936523\nv 13.69809818267822 3.49382448196411 20.04305648803711\nv 14.23235607147217 3.49382448196411 19.87083435058594\nv 14.73202419281006 3.49382448196411 19.5744686126709\nv 15.15236282348633 3.49382448196411 19.16837501525879\nv 15.45912742614746 3.49382448196411 18.68564224243164\nv 15.63739013671875 3.49382448196411 18.16949081420898\nv 13.69809818267822 2.83549332618713 20.04305648803711\nv 14.23235607147217 2.83549332618713 19.87083435058594\nv 14.73202419281006 2.83549332618713 19.5744686126709\nv 15.15236282348633 2.83549332618713 19.16837501525879\nv 15.45912742614746 2.83549332618713 18.68564224243164\nv 15.63739013671875 2.83549332618713 18.16949081420898\nv 13.17253494262695 2.83549332618713 15.20390701293945\nv 13.17253494262695 3.49382448196411 15.20390701293945\nv 15.69279861450195 2.83549332618713 17.63875389099121\nv 15.69279861450195 3.49382448196411 17.63875389099121\nv 13.69809818267822 2.83549332618713 15.25743770599365\nv 14.23235607147217 2.83549332618713 15.42965793609619\nv 14.73202419281006 2.83549332618713 15.72602558135986\nv 15.15236282348633 2.83549332618713 16.13211822509766\nv 15.45912742614746 2.83549332618713 16.6148509979248\nv 15.63739013671875 2.83549332618713 17.13100242614746\nv 13.69809818267822 3.49382448196411 15.25743770599365\nv 14.23235607147217 3.49382448196411 15.42965793609619\nv 14.73202419281006 3.49382448196411 15.72602558135986\nv 15.15236282348633 3.49382448196411 16.13211822509766\nv 15.45912742614746 3.49382448196411 16.6148509979248\nv 15.63739013671875 3.49382448196411 17.13100242614746\nv -10.38787460327148 2.83549332618713 4.22026777267456\nv -9.80783653259277 2.83549332618713 5.41881465911865\nv -9.80783653259277 3.49382448196411 5.41881465911865\nv -11.14376926422119 2.83549332618713 4.95054340362549\nv -11.14376926422119 3.49382448196411 4.95054340362549\nv -10.38787460327148 3.49382448196411 4.22026777267456\nv -10.93948745727539 2.83549332618713 4.96024227142334\nv -10.7346715927124 2.83549332618713 4.98972845077515\nv -10.53240394592285 2.83549332618713 5.03915452957153\nv -10.33578205108643 2.83549332618713 5.10807466506958\nv -10.14776611328125 2.83549332618713 5.19545078277588\nv -9.97102928161621 2.83549332618713 5.29970645904541\nv -9.97102928161621 3.49382448196411 5.29970645904541\nv -10.14776611328125 3.49382448196411 5.19545078277588\nv -10.33578205108643 3.49382448196411 5.10807466506958\nv -10.53240394592285 3.49382448196411 5.03915452957153\nv -10.7346715927124 3.49382448196411 4.98972845077515\nv -10.93948745727539 3.49382448196411 4.96024227142334\nv 8.37319946289062 2.83549332618713 19.37121200561523\nv 7.79705476760864 2.83549332618713 19.6314582824707\nv 7.79705476760864 3.49382448196411 19.6314582824707\nv 9.12402153015137 3.49382448196411 20.09658622741699\nv 9.12402153015137 2.83549332618713 20.09658622741699\nv 8.37319946289062 3.49382448196411 19.37121200561523\nv 7.95915222167969 2.83549332618713 19.7497673034668\nv 8.13470268249512 2.83549332618713 19.85332298278809\nv 8.32145690917969 2.83549332618713 19.94011306762695\nv 8.51675891876221 2.83549332618713 20.00856971740723\nv 8.71766948699951 2.83549332618713 20.05766487121582\nv 8.92111110687256 2.83549332618713 20.08695220947266\nv 8.92111110687256 3.49382448196411 20.08695220947266\nv 8.71766948699951 3.49382448196411 20.05766487121582\nv 8.51675891876221 3.49382448196411 20.00856971740723\nv 8.32145690917969 3.49382448196411 19.94011306762695\nv 8.13470268249512 3.49382448196411 19.85332298278809\nv 7.95915222167969 3.49382448196411 19.7497673034668\n# 104 vertices\n\nvn 0 0 1\nvn 0 0 0\nvn 1 0 0\nvn 0 0 -1\nvn -1 0 0\nvn 0 1 0\nvn 0.33310228586197 -0.94289070367813 0\nvn 0 -1 0\nvn -0.62815809249878 0.77808576822281 0\nvn -0.1013290733099 0.99485296010971 0\nvn -0.20520241558552 0.97871953248978 0\nvn -0.41104024648666 0.91161721944809 0\nvn -0.6065838932991 0.7950194478035 0\nvn -0.77482038736343 0.63218140602112 0\nvn -0.90074276924133 0.43435296416283 0\nvn -0.97576230764389 0.21883322298527 0\nvn -0.99409872293472 0.10847935080528 0\nvn -0.10132952034473 -0.99485290050507 0\nvn -0.20520263910294 -0.97871953248978 0\nvn -0.41104024648666 -0.91161721944809 0\nvn -0.6065838932991 -0.7950194478035 0\nvn -0.77482026815414 -0.63218152523041 0\nvn -0.90074276924133 -0.43435296416283 0\nvn -0.97576230764389 -0.21883311867714 0\nvn -0.99409866333008 -0.10847944766283 0\nvn 0.10132952034473 0.99485290050507 0\nvn 0.20520223677158 0.97871959209442 0\nvn 0.41103982925415 0.91161739826202 0\nvn 0.60658365488052 0.79501962661743 0\nvn 0.77482026815414 0.63218152523041 0\nvn 0.90074348449707 0.43435138463974 0\nvn 0.97576242685318 0.21883250772953 0\nvn 0.99409848451614 0.10848119109869 0\nvn 0.10132862627506 -0.99485301971436 0\nvn 0.20520259439945 -0.97871953248978 0\nvn 0.41104060411453 -0.91161704063416 0\nvn 0.60658323764801 -0.7950199842453 0\nvn 0.77481991052628 -0.63218206167221 0\nvn 0.90074348449707 -0.43435138463974 0\nvn 0.97576242685318 -0.21883250772953 0\nvn 0.99409848451614 -0.10848119109869 0\nvn -0.58953845500946 0.80774033069611 0\nvn -0.54946291446686 0.83551812171936 0\nvn -0.46531841158867 0.88514333963394 0\nvn -0.37656545639038 0.92638999223709 0\nvn -0.28441932797432 0.95870000123978 0\nvn -0.19015780091286 0.98175352811813 0\nvn -0.09506894648075 0.99547070264816 0\nvn -0.04742458090186 0.99887484312058 0\nvn -0.04742596670985 0.99887478351593 0\nvn -0.09506894648075 0.99547070264816 0\nvn -0.19015677273273 0.98175370693207 0\nvn -0.28441941738129 0.95869994163513 0\nvn -0.37656646966934 0.92638963460922 0\nvn -0.46531823277473 0.88514345884323 0\nvn -0.54946219921112 0.83551859855652 0\n# 56 normals\n\nvt 1 0 0\nvt 0.81572288274765 0 0\nvt 1 1 0\nvt 0 0.49765086174011 0\nvt 0 0.50234913825989 0\nvt 1 0.50234913825989 0\nvt 1 0.49765086174011 0\nvt 0 1 0\nvt 0.8346254825592 1 0\nvt 0.9365501999855 1 0\nvt 0.9365501999855 0 0\nvt 0.8346254825592 0 0\nvt 0.81572288274765 1 0\nvt 0.13769590854645 0 0\nvt 0.05349377542734 0 0\nvt 0.05349377542734 1 0\nvt 0.13769590854645 1 0\nvt 0.15374012291431 0 0\nvt 0.15374012291431 1 0\nvt 0.7953936457634 0 0\nvt 0.17420670390129 0 0\nvt 0.17420670390129 1 0\nvt 0.7953936457634 1 0\nvt 0.18427714705467 0 0\nvt 0.18427714705467 1 0\nvt 0 0 0\nvt -0.02524117194116 0 0\nvt -0.02524117194116 1 0\nvt -0.10397612303495 0 0\nvt -0.10397612303495 1 0\nvt -0.18271106481552 0 0\nvt -0.18271106481552 1 0\nvt -0.26144602894783 0 0\nvt -0.26144602894783 1 0\nvt -0.34018096327782 0 0\nvt -0.34018096327782 1 0\nvt -0.41891592741013 0 0\nvt -0.41891592741013 1 0\nvt -0.49765086174011 0 0\nvt -0.49765086174011 1 0\nvt 0.84625989198685 0 0\nvt 1.01670742034912 1 0\nvt 1.01670742034912 0 0\nvt 1.09686470031738 1 0\nvt 1.09686470031738 0 0\nvt 1.17702186107636 1 0\nvt 1.17702186107636 0 0\nvt 1.25717914104462 1 0\nvt 1.25717914104462 0 0\nvt 1.33733642101288 1 0\nvt 1.33733642101288 0 0\nvt 1.41749358177185 1 0\nvt 1.41749358177185 0 0\nvt 1.49765086174011 1 0\nvt 1.49765086174011 0 0\nvt 0.16899088025093 0 0\nvt 0.16899088025093 1 0\nvt 0.15374012291431 0.850741147995 0\nvt 0.30622574687004 0.35800528526306 0\nvt 0.45763164758682 0.31676697731018 0\nvt 0.60481113195419 0.25926399230957 0\nvt 0.74554884433746 0.18636214733124 0\nvt 0.87784332036972 0.09937715530396 0\nvt 0.15291278064251 0.38260698318481 0\nvt 0.84625989198685 0.850741147995 0\nvt 0.16377504169941 0 0\nvt 0.16377504169941 1 0\nvt 0.15855921804905 0 0\nvt 0.15855921804905 1 0\nvt 0.15334339439869 0 0\nvt 0.15334339439869 1 0\nvt 0.14812757074833 0 0\nvt 0.14812757074833 1 0\nvt 0.14291173219681 0 0\nvt 0.14291173219681 1 0\nvt 0.82902091741562 0 0\nvt 0.82902091741562 1 0\nvt 0.81572288274765 0.85174286365509 0\nvt 0.69377422332764 0.05365812778473 0\nvt 0.84708720445633 0.01328134536743 0\nvt 0.12215665727854 0.47812533378601 0\nvt 0.25445115566254 0.33536338806152 0\nvt 0.39518883824348 0.21571493148804 0\nvt 0.54236835241318 0.12133967876434 0\nvt 0.18427714705467 0.85174286365509 0\nvt 0.82341641187668 0 0\nvt 0.82341641187668 1 0\nvt 0.81781184673309 0 0\nvt 0.81781184673309 1 0\nvt 0.81220728158951 0 0\nvt 0.81220728158951 1 0\nvt 0.80660271644592 0 0\nvt 0.80660271644592 1 0\nvt 0.80099821090698 0 0\nvt 0.80099821090698 1 0\n# 95 texture coordinates\n\no 1\nusemtl escalator3\nf 4/2/2 53/2/1 57/8/1 58/26/1 59/3/1 60/1/1 61/26/1 62/1/1 55/3/1 39/26/1 52/3/1 51/1/1 50/3/1 49/3/1 48/2/1 47/1/1 38/8/1 91/2/1 87/8/1\nf 56/7/3 40/6/3 39/5/3 55/4/3\nf 3/24/2 92/3/4 90/3/4 37/8/4 41/1/4 42/3/4 43/26/4 44/3/4 45/1/4 46/8/4 40/3/4 56/1/4 68/3/4 67/3/4 66/3/4 65/3/4 64/1/4 63/1/4 54/8/4\nf 24/7/5 8/6/5 7/5/5 23/4/5\nf 91/12/6 38/11/6 37/10/6 90/9/6\nf 3/2/7 54/11/8 53/10/8 4/13/7\nf 73/17/6 6/16/6 5/15/6 72/14/6\nf 1/41/2 21/8/4 25/26/4 26/1/4 27/3/4 28/3/4 29/1/4 30/3/4 23/3/4 7/1/4 20/3/4 19/8/4 18/26/4 17/1/4 16/3/4 15/3/4 6/3/4 73/1/4 74/3/4\nf 2/19/7 22/16/8 21/15/8 1/18/7\nf 69/1/2 72/1/1 5/8/1 9/3/1 10/26/1 11/1/1 12/3/1 13/1/1 14/3/1 8/3/1 24/1/1 36/8/1 35/3/1 34/3/1 33/26/1 32/3/1 31/26/1 22/1/1 2/18/1\nf 89/23/9 71/22/9 70/21/9 88/20/9\nf 3/24/2 1/41/4 74/3/4 71/8/4 89/3/4 92/24/4\nf 4/13/7 2/19/7 1/18/7 3/2/7\nf 87/1/2 88/3/1 70/1/1 69/3/1 2/18/1 4/2/1\nf 6/16/10 15/28/11 9/27/11 5/15/10\nf 15/28/11 16/30/12 10/29/12 9/27/11\nf 16/30/12 17/32/13 11/31/13 10/29/12\nf 17/32/13 18/34/14 12/33/14 11/31/13\nf 18/34/14 19/36/15 13/35/15 12/33/14\nf 19/36/15 20/38/16 14/37/16 13/35/15\nf 20/38/16 7/40/17 8/39/17 14/37/16\nf 22/16/18 31/28/19 25/27/19 21/15/18\nf 31/28/19 32/30/20 26/29/20 25/27/19\nf 32/30/20 33/32/21 27/31/21 26/29/20\nf 33/32/21 34/34/22 28/33/22 27/31/21\nf 34/34/22 35/36/23 29/35/23 28/33/22\nf 35/36/23 36/38/24 30/37/24 29/35/23\nf 36/38/24 24/40/25 23/39/25 30/37/24\nf 38/11/26 47/43/27 41/42/27 37/10/26\nf 47/43/27 48/45/28 42/44/28 41/42/27\nf 48/45/28 49/47/29 43/46/29 42/44/28\nf 49/47/29 50/49/30 44/48/30 43/46/29\nf 50/49/30 51/51/31 45/50/31 44/48/30\nf 51/51/31 52/53/32 46/52/32 45/50/31\nf 52/53/32 39/55/33 40/54/33 46/52/32\nf 54/11/34 63/43/35 57/42/35 53/10/34\nf 63/43/35 64/45/36 58/44/36 57/42/35\nf 64/45/36 65/47/37 59/46/37 58/44/36\nf 65/47/37 66/49/38 60/48/38 59/46/37\nf 66/49/38 67/51/39 61/50/39 60/48/38\nf 67/51/39 68/53/40 62/52/40 61/50/39\nf 68/53/40 56/55/41 55/54/41 62/52/40\nf 71/22/42 81/57/43 80/56/43 70/21/42\nf 80/63/2 79/62/1 78/61/1 77/60/1 76/59/1 75/64/1 72/14/1 69/58/1 70/21/1\nf 74/65/2 73/17/4 86/64/4 85/59/4 84/60/4 83/61/4 82/62/4 81/63/4 71/22/4\nf 81/57/43 82/67/44 79/66/44 80/56/43\nf 82/67/44 83/69/45 78/68/45 79/66/44\nf 83/69/45 84/71/46 77/70/46 78/68/45\nf 84/71/46 85/73/47 76/72/47 77/70/46\nf 85/73/47 86/75/48 75/74/48 76/72/47\nf 86/75/48 73/17/49 72/14/49 75/74/48\nf 90/9/50 99/77/51 98/76/51 91/12/50\nf 87/78/1 91/12/1 98/80/1 97/79/1 96/84/1 95/83/1 94/82/1 93/81/1 88/20/1\nf 104/81/4 103/82/4 102/83/4 101/84/4 100/79/4 99/80/4 90/9/4 92/85/4 89/23/4\nf 99/77/51 100/87/52 97/86/52 98/76/51\nf 100/87/52 101/89/53 96/88/53 97/86/52\nf 101/89/53 102/91/54 95/90/54 96/88/53\nf 102/91/54 103/93/55 94/92/55 95/90/54\nf 103/93/55 104/95/56 93/94/56 94/92/55\nf 104/95/56 89/23/42 88/20/42 93/94/56\n\nv -14.80749797821045 -2.56458234786987 0.06820003688335\nv -14.80749797821045 -2.56458234786987 0.12007328867912\nv 13.05556869506836 -2.56458234786987 15.21544075012207\nv 13.05556869506836 -2.56458234786987 15.25115966796875\nv 13.05556869506836 2.8786358833313 15.21544075012207\nv 13.05556869506836 2.8786358833313 15.25115966796875\nv -14.80749797821045 2.8786358833313 0.06820003688335\nv -14.80749797821045 2.8786358833313 0.12007328867912\nv -10.3766450881958 2.8786358833313 0.12007328867912\nv -10.3766450881958 2.8786358833313 0.06820003688335\nv -10.3766450881958 -2.56458234786987 0.06820003688335\nv -10.3766450881958 -2.56458234786987 0.12007328867912\nv 8.33759689331055 2.8786358833313 15.25115966796875\nv 8.33759689331055 -2.56458234786987 15.25115966796875\nv 8.33759689331055 -2.56458234786987 15.21544075012207\nv 8.33759689331055 2.8786358833313 15.21544075012207\n# 16 vertices\n\nvn -0.33345052599907 0.94276762008667 0\nvn 0.33369651436806 -0.94268053770065 0\n# 2 normals\n\nvt 0.21950633823872 1 0\nvt 0.65553259849548 1 0\nvt 0.65553259849548 0 0\nvt 0.21950633823872 0 0\nvt 0.34446743130684 1 0\nvt 0.78049367666244 1 0\nvt 0.78049367666244 0 0\nvt 0.34446743130684 0 0\n# 8 texture coordinates\n\no 2\nusemtl escalator2\nf 115/99/1 119/98/1 118/97/1 116/96/1\nf 109/1/3 110/3/3 108/8/3 107/26/3\nf 120/103/4 114/102/4 113/101/4 117/100/4\nf 105/1/5 106/3/5 112/8/5 111/26/5\nf 116/99/57 118/98/57 117/97/57 113/96/57\nf 114/102/4 111/1/4 112/3/4 113/101/4\nf 115/96/58 105/8/8 111/26/8 114/99/58\nf 116/96/1 106/8/1 105/26/1 115/99/1\nf 113/96/57 112/8/6 106/26/6 116/99/57\nf 118/98/57 108/1/6 110/3/6 117/97/57\nf 119/98/1 107/1/1 108/3/1 118/97/1\nf 117/100/4 110/8/4 109/26/4 120/103/4\n\nusemtl escalator3\nf 114/99/58 120/98/58 119/97/58 115/96/58\nf 120/98/58 109/1/8 107/3/8 119/97/58\n\nv -10.38787460327148 -2.46053695678711 0.05786377936602\nv -10.38787460327148 -3.11886811256409 0.05786377936602\nv 8.37319946289062 -2.46053695678711 15.20390701293945\nv 8.37319946289062 -3.11886811256409 15.20390701293945\nv -15.11080265045166 -3.11886811256409 4.95054340362549\nv -15.11080265045166 -2.46053695678711 4.95054340362549\nv -17.63106727600098 -2.46053695678711 2.51569700241089\nv -17.63106727600098 -3.11886811256409 2.51569700241089\nv -15.63636589050293 -3.11886811256409 4.89701271057129\nv -16.17062377929688 -3.11886811256409 4.72479200363159\nv -16.67029190063477 -3.11886811256409 4.42842483520508\nv -17.09063148498535 -3.11886811256409 4.02233219146729\nv -17.39739608764648 -3.11886811256409 3.53959894180298\nv -17.57565879821777 -3.11886811256409 3.02344822883606\nv -15.63636589050293 -2.46053695678711 4.89701271057129\nv -16.17062377929688 -2.46053695678711 4.72479200363159\nv -16.67029190063477 -2.46053695678711 4.42842483520508\nv -17.09063148498535 -2.46053695678711 4.02233219146729\nv -17.39739608764648 -2.46053695678711 3.53959894180298\nv -17.57565879821777 -2.46053695678711 3.02344822883606\nv -15.11080265045166 -2.46053695678711 0.05786377936602\nv -15.11080265045166 -3.11886811256409 0.05786377936602\nv -17.63106727600098 -2.46053695678711 2.49271011352539\nv -17.63106727600098 -3.11886811256409 2.49271011352539\nv -15.63636589050293 -2.46053695678711 0.11139420419931\nv -16.17062377929688 -2.46053695678711 0.28361487388611\nv -16.67029190063477 -2.46053695678711 0.57998245954514\nv -17.09063148498535 -2.46053695678711 0.9860748052597\nv -17.39739608764648 -2.46053695678711 1.4688081741333\nv -17.57565879821777 -2.46053695678711 1.98495888710022\nv -15.63636589050293 -3.11886811256409 0.11139420419931\nv -16.17062377929688 -3.11886811256409 0.28361487388611\nv -16.67029190063477 -3.11886811256409 0.57998245954514\nv -17.09063148498535 -3.11886811256409 0.9860748052597\nv -17.39739608764648 -3.11886811256409 1.4688081741333\nv -17.57565879821777 -3.11886811256409 1.98495888710022\nv 13.17253494262695 -2.46053695678711 20.09658622741699\nv 13.17253494262695 -3.11886811256409 20.09658622741699\nv 15.69279861450195 -3.11886811256409 17.66173934936523\nv 15.69279861450195 -2.46053695678711 17.66173934936523\nv 13.69809818267822 -2.46053695678711 20.04305648803711\nv 14.23235607147217 -2.46053695678711 19.87083435058594\nv 14.73202419281006 -2.46053695678711 19.5744686126709\nv 15.15236282348633 -2.46053695678711 19.16837501525879\nv 15.45912742614746 -2.46053695678711 18.68564224243164\nv 15.63739013671875 -2.46053695678711 18.16949081420898\nv 13.69809818267822 -3.11886811256409 20.04305648803711\nv 14.23235607147217 -3.11886811256409 19.87083435058594\nv 14.73202419281006 -3.11886811256409 19.5744686126709\nv 15.15236282348633 -3.11886811256409 19.16837501525879\nv 15.45912742614746 -3.11886811256409 18.68564224243164\nv 15.63739013671875 -3.11886811256409 18.16949081420898\nv 13.17253494262695 -3.11886811256409 15.20390701293945\nv 13.17253494262695 -2.46053695678711 15.20390701293945\nv 15.69279861450195 -3.11886811256409 17.63875389099121\nv 15.69279861450195 -2.46053695678711 17.63875389099121\nv 13.69809818267822 -3.11886811256409 15.25743770599365\nv 14.23235607147217 -3.11886811256409 15.42965793609619\nv 14.73202419281006 -3.11886811256409 15.72602558135986\nv 15.15236282348633 -3.11886811256409 16.13211822509766\nv 15.45912742614746 -3.11886811256409 16.6148509979248\nv 15.63739013671875 -3.11886811256409 17.13100242614746\nv 13.69809818267822 -2.46053695678711 15.25743770599365\nv 14.23235607147217 -2.46053695678711 15.42965793609619\nv 14.73202419281006 -2.46053695678711 15.72602558135986\nv 15.15236282348633 -2.46053695678711 16.13211822509766\nv 15.45912742614746 -2.46053695678711 16.6148509979248\nv 15.63739013671875 -2.46053695678711 17.13100242614746\nv -10.38787460327148 -3.11886811256409 4.22026777267456\nv -9.80783653259277 -3.11886811256409 5.41881465911865\nv -9.80783653259277 -2.46053695678711 5.41881465911865\nv -11.14376926422119 -3.11886811256409 4.95054340362549\nv -11.14376926422119 -2.46053695678711 4.95054340362549\nv -10.38787460327148 -2.46053695678711 4.22026777267456\nv -10.93948745727539 -3.11886811256409 4.96024227142334\nv -10.7346715927124 -3.11886811256409 4.98972845077515\nv -10.53240394592285 -3.11886811256409 5.03915452957153\nv -10.33578205108643 -3.11886811256409 5.10807466506958\nv -10.14776611328125 -3.11886811256409 5.19545078277588\nv -9.97102928161621 -3.11886811256409 5.29970645904541\nv -9.97102928161621 -2.46053695678711 5.29970645904541\nv -10.14776611328125 -2.46053695678711 5.19545078277588\nv -10.33578205108643 -2.46053695678711 5.10807466506958\nv -10.53240394592285 -2.46053695678711 5.03915452957153\nv -10.7346715927124 -2.46053695678711 4.98972845077515\nv -10.93948745727539 -2.46053695678711 4.96024227142334\nv 8.37319946289062 -3.11886811256409 19.37121200561523\nv 7.79705476760864 -3.11886811256409 19.6314582824707\nv 7.79705476760864 -2.46053695678711 19.6314582824707\nv 9.12402153015137 -2.46053695678711 20.09658622741699\nv 9.12402153015137 -3.11886811256409 20.09658622741699\nv 8.37319946289062 -2.46053695678711 19.37121200561523\nv 7.95915222167969 -3.11886811256409 19.7497673034668\nv 8.13470268249512 -3.11886811256409 19.85332298278809\nv 8.32145690917969 -3.11886811256409 19.94011306762695\nv 8.51675891876221 -3.11886811256409 20.00856971740723\nv 8.71766948699951 -3.11886811256409 20.05766487121582\nv 8.92111110687256 -3.11886811256409 20.08695220947266\nv 8.92111110687256 -2.46053695678711 20.08695220947266\nv 8.71766948699951 -2.46053695678711 20.05766487121582\nv 8.51675891876221 -2.46053695678711 20.00856971740723\nv 8.32145690917969 -2.46053695678711 19.94011306762695\nv 8.13470268249512 -2.46053695678711 19.85332298278809\nv 7.95915222167969 -2.46053695678711 19.7497673034668\n# 104 vertices\n\n# 0 normal\n\n# 0 texture coordinate\n\no 3\nusemtl escalator3\nf 124/2/2 173/2/1 177/8/1 178/26/1 179/3/1 180/1/1 181/26/1 182/1/1 175/3/1 159/26/1 172/3/1 171/1/1 170/3/1 169/3/1 168/2/1 167/1/1 158/8/1 211/2/1 207/8/1\nf 176/7/3 160/6/3 159/5/3 175/4/3\nf 123/24/2 212/3/4 210/3/4 157/8/4 161/1/4 162/3/4 163/26/4 164/3/4 165/1/4 166/8/4 160/3/4 176/1/4 188/3/4 187/3/4 186/3/4 185/3/4 184/1/4 183/1/4 174/8/4\nf 144/7/5 128/6/5 127/5/5 143/4/5\nf 211/12/6 158/11/6 157/10/6 210/9/6\nf 123/2/7 174/11/8 173/10/8 124/13/7\nf 193/17/6 126/16/6 125/15/6 192/14/6\nf 121/41/2 141/8/4 145/26/4 146/1/4 147/3/4 148/3/4 149/1/4 150/3/4 143/3/4 127/1/4 140/3/4 139/8/4 138/26/4 137/1/4 136/3/4 135/3/4 126/3/4 193/1/4 194/3/4\nf 122/19/7 142/16/8 141/15/8 121/18/7\nf 189/1/2 192/1/1 125/8/1 129/3/1 130/26/1 131/1/1 132/3/1 133/1/1 134/3/1 128/3/1 144/1/1 156/8/1 155/3/1 154/3/1 153/26/1 152/3/1 151/26/1 142/1/1 122/18/1\nf 209/23/9 191/22/9 190/21/9 208/20/9\nf 123/24/2 121/41/4 194/3/4 191/8/4 209/3/4 212/24/4\nf 124/13/7 122/19/7 121/18/7 123/2/7\nf 207/1/2 208/3/1 190/1/1 189/3/1 122/18/1 124/2/1\nf 126/16/10 135/28/11 129/27/11 125/15/10\nf 135/28/11 136/30/12 130/29/12 129/27/11\nf 136/30/12 137/32/13 131/31/13 130/29/12\nf 137/32/13 138/34/14 132/33/14 131/31/13\nf 138/34/14 139/36/15 133/35/15 132/33/14\nf 139/36/15 140/38/16 134/37/16 133/35/15\nf 140/38/16 127/40/17 128/39/17 134/37/16\nf 142/16/18 151/28/19 145/27/19 141/15/18\nf 151/28/19 152/30/20 146/29/20 145/27/19\nf 152/30/20 153/32/21 147/31/21 146/29/20\nf 153/32/21 154/34/22 148/33/22 147/31/21\nf 154/34/22 155/36/23 149/35/23 148/33/22\nf 155/36/23 156/38/24 150/37/24 149/35/23\nf 156/38/24 144/40/25 143/39/25 150/37/24\nf 158/11/26 167/43/27 161/42/27 157/10/26\nf 167/43/27 168/45/28 162/44/28 161/42/27\nf 168/45/28 169/47/29 163/46/29 162/44/28\nf 169/47/29 170/49/30 164/48/30 163/46/29\nf 170/49/30 171/51/31 165/50/31 164/48/30\nf 171/51/31 172/53/32 166/52/32 165/50/31\nf 172/53/32 159/55/33 160/54/33 166/52/32\nf 174/11/34 183/43/35 177/42/35 173/10/34\nf 183/43/35 184/45/36 178/44/36 177/42/35\nf 184/45/36 185/47/37 179/46/37 178/44/36\nf 185/47/37 186/49/38 180/48/38 179/46/37\nf 186/49/38 187/51/39 181/50/39 180/48/38\nf 187/51/39 188/53/40 182/52/40 181/50/39\nf 188/53/40 176/55/41 175/54/41 182/52/40\nf 191/22/42 201/57/43 200/56/43 190/21/42\nf 200/63/2 199/62/1 198/61/1 197/60/1 196/59/1 195/64/1 192/14/1 189/58/1 190/21/1\nf 194/65/2 193/17/4 206/64/4 205/59/4 204/60/4 203/61/4 202/62/4 201/63/4 191/22/4\nf 201/57/43 202/67/44 199/66/44 200/56/43\nf 202/67/44 203/69/45 198/68/45 199/66/44\nf 203/69/45 204/71/46 197/70/46 198/68/45\nf 204/71/46 205/73/47 196/72/47 197/70/46\nf 205/73/47 206/75/48 195/74/48 196/72/47\nf 206/75/48 193/17/49 192/14/49 195/74/48\nf 210/9/50 219/77/51 218/76/51 211/12/50\nf 207/78/1 211/12/1 218/80/1 217/79/1 216/84/1 215/83/1 214/82/1 213/81/1 208/20/1\nf 224/81/4 223/82/4 222/83/4 221/84/4 220/79/4 219/80/4 210/9/4 212/85/4 209/23/4\nf 219/77/51 220/87/52 217/86/52 218/76/51\nf 220/87/52 221/89/53 216/88/53 217/86/52\nf 221/89/53 222/91/54 215/90/54 216/88/53\nf 222/91/54 223/93/55 214/92/55 215/90/54\nf 223/93/55 224/95/56 213/94/56 214/92/55\nf 224/95/56 209/23/42 208/20/42 213/94/56\n\n# 0 vertex\n\n# 0 normal\n\n# 0 texture coordinate\n\no 1_1\nusemtl escalator3\nf 4/2/2 53/2/1 57/8/1 58/26/1 59/3/1 60/1/1 61/26/1 62/1/1 55/3/1 39/26/1 52/3/1 51/1/1 50/3/1 49/3/1 48/2/1 47/1/1 38/8/1 91/2/1 87/8/1\nf 56/7/3 40/6/3 39/5/3 55/4/3\nf 3/24/2 92/3/4 90/3/4 37/8/4 41/1/4 42/3/4 43/26/4 44/3/4 45/1/4 46/8/4 40/3/4 56/1/4 68/3/4 67/3/4 66/3/4 65/3/4 64/1/4 63/1/4 54/8/4\nf 24/7/5 8/6/5 7/5/5 23/4/5\nf 91/12/6 38/11/6 37/10/6 90/9/6\nf 3/2/7 54/11/8 53/10/8 4/13/7\nf 73/17/6 6/16/6 5/15/6 72/14/6\nf 1/41/2 21/8/4 25/26/4 26/1/4 27/3/4 28/3/4 29/1/4 30/3/4 23/3/4 7/1/4 20/3/4 19/8/4 18/26/4 17/1/4 16/3/4 15/3/4 6/3/4 73/1/4 74/3/4\nf 2/19/7 22/16/8 21/15/8 1/18/7\nf 69/1/2 72/1/1 5/8/1 9/3/1 10/26/1 11/1/1 12/3/1 13/1/1 14/3/1 8/3/1 24/1/1 36/8/1 35/3/1 34/3/1 33/26/1 32/3/1 31/26/1 22/1/1 2/18/1\nf 89/23/9 71/22/9 70/21/9 88/20/9\nf 3/24/2 1/41/4 74/3/4 71/8/4 89/3/4 92/24/4\nf 4/13/7 2/19/7 1/18/7 3/2/7\nf 87/1/2 88/3/1 70/1/1 69/3/1 2/18/1 4/2/1\nf 6/16/10 15/28/11 9/27/11 5/15/10\nf 15/28/11 16/30/12 10/29/12 9/27/11\nf 16/30/12 17/32/13 11/31/13 10/29/12\nf 17/32/13 18/34/14 12/33/14 11/31/13\nf 18/34/14 19/36/15 13/35/15 12/33/14\nf 19/36/15 20/38/16 14/37/16 13/35/15\nf 20/38/16 7/40/17 8/39/17 14/37/16\nf 22/16/18 31/28/19 25/27/19 21/15/18\nf 31/28/19 32/30/20 26/29/20 25/27/19\nf 32/30/20 33/32/21 27/31/21 26/29/20\nf 33/32/21 34/34/22 28/33/22 27/31/21\nf 34/34/22 35/36/23 29/35/23 28/33/22\nf 35/36/23 36/38/24 30/37/24 29/35/23\nf 36/38/24 24/40/25 23/39/25 30/37/24\nf 38/11/26 47/43/27 41/42/27 37/10/26\nf 47/43/27 48/45/28 42/44/28 41/42/27\nf 48/45/28 49/47/29 43/46/29 42/44/28\nf 49/47/29 50/49/30 44/48/30 43/46/29\nf 50/49/30 51/51/31 45/50/31 44/48/30\nf 51/51/31 52/53/32 46/52/32 45/50/31\nf 52/53/32 39/55/33 40/54/33 46/52/32\nf 54/11/34 63/43/35 57/42/35 53/10/34\nf 63/43/35 64/45/36 58/44/36 57/42/35\nf 64/45/36 65/47/37 59/46/37 58/44/36\nf 65/47/37 66/49/38 60/48/38 59/46/37\nf 66/49/38 67/51/39 61/50/39 60/48/38\nf 67/51/39 68/53/40 62/52/40 61/50/39\nf 68/53/40 56/55/41 55/54/41 62/52/40\nf 71/22/42 81/57/43 80/56/43 70/21/42\nf 80/63/2 79/62/1 78/61/1 77/60/1 76/59/1 75/64/1 72/14/1 69/58/1 70/21/1\nf 74/65/2 73/17/4 86/64/4 85/59/4 84/60/4 83/61/4 82/62/4 81/63/4 71/22/4\nf 81/57/43 82/67/44 79/66/44 80/56/43\nf 82/67/44 83/69/45 78/68/45 79/66/44\nf 83/69/45 84/71/46 77/70/46 78/68/45\nf 84/71/46 85/73/47 76/72/47 77/70/46\nf 85/73/47 86/75/48 75/74/48 76/72/47\nf 86/75/48 73/17/49 72/14/49 75/74/48\nf 90/9/50 99/77/51 98/76/51 91/12/50\nf 87/78/1 91/12/1 98/80/1 97/79/1 96/84/1 95/83/1 94/82/1 93/81/1 88/20/1\nf 104/81/4 103/82/4 102/83/4 101/84/4 100/79/4 99/80/4 90/9/4 92/85/4 89/23/4\nf 99/77/51 100/87/52 97/86/52 98/76/51\nf 100/87/52 101/89/53 96/88/53 97/86/52\nf 101/89/53 102/91/54 95/90/54 96/88/53\nf 102/91/54 103/93/55 94/92/55 95/90/54\nf 103/93/55 104/95/56 93/94/56 94/92/55\nf 104/95/56 89/23/42 88/20/42 93/94/56\n\n# 0 vertex\n\n# 0 normal\n\n# 0 texture coordinate\n\no 2_1\nusemtl escalator2\nf 115/99/1 119/98/1 118/97/1 116/96/1\nf 109/1/3 110/3/3 108/8/3 107/26/3\nf 120/103/4 114/102/4 113/101/4 117/100/4\nf 105/1/5 106/3/5 112/8/5 111/26/5\nf 116/99/57 118/98/57 117/97/57 113/96/57\nf 114/102/4 111/1/4 112/3/4 113/101/4\nf 115/96/58 105/8/8 111/26/8 114/99/58\nf 116/96/1 106/8/1 105/26/1 115/99/1\nf 113/96/57 112/8/6 106/26/6 116/99/57\nf 118/98/57 108/1/6 110/3/6 117/97/57\nf 119/98/1 107/1/1 108/3/1 118/97/1\nf 117/100/4 110/8/4 109/26/4 120/103/4\n\nusemtl escalator3\nf 114/99/58 120/98/58 119/97/58 115/96/58\nf 120/98/58 109/1/8 107/3/8 119/97/58\n\n# 0 vertex\n\n# 0 normal\n\n# 0 texture coordinate\n\no 3_1\nusemtl escalator3\nf 124/2/2 173/2/1 177/8/1 178/26/1 179/3/1 180/1/1 181/26/1 182/1/1 175/3/1 159/26/1 172/3/1 171/1/1 170/3/1 169/3/1 168/2/1 167/1/1 158/8/1 211/2/1 207/8/1\nf 176/7/3 160/6/3 159/5/3 175/4/3\nf 123/24/2 212/3/4 210/3/4 157/8/4 161/1/4 162/3/4 163/26/4 164/3/4 165/1/4 166/8/4 160/3/4 176/1/4 188/3/4 187/3/4 186/3/4 185/3/4 184/1/4 183/1/4 174/8/4\nf 144/7/5 128/6/5 127/5/5 143/4/5\nf 211/12/6 158/11/6 157/10/6 210/9/6\nf 123/2/7 174/11/8 173/10/8 124/13/7\nf 193/17/6 126/16/6 125/15/6 192/14/6\nf 121/41/2 141/8/4 145/26/4 146/1/4 147/3/4 148/3/4 149/1/4 150/3/4 143/3/4 127/1/4 140/3/4 139/8/4 138/26/4 137/1/4 136/3/4 135/3/4 126/3/4 193/1/4 194/3/4\nf 122/19/7 142/16/8 141/15/8 121/18/7\nf 189/1/2 192/1/1 125/8/1 129/3/1 130/26/1 131/1/1 132/3/1 133/1/1 134/3/1 128/3/1 144/1/1 156/8/1 155/3/1 154/3/1 153/26/1 152/3/1 151/26/1 142/1/1 122/18/1\nf 209/23/9 191/22/9 190/21/9 208/20/9\nf 123/24/2 121/41/4 194/3/4 191/8/4 209/3/4 212/24/4\nf 124/13/7 122/19/7 121/18/7 123/2/7\nf 207/1/2 208/3/1 190/1/1 189/3/1 122/18/1 124/2/1\nf 126/16/10 135/28/11 129/27/11 125/15/10\nf 135/28/11 136/30/12 130/29/12 129/27/11\nf 136/30/12 137/32/13 131/31/13 130/29/12\nf 137/32/13 138/34/14 132/33/14 131/31/13\nf 138/34/14 139/36/15 133/35/15 132/33/14\nf 139/36/15 140/38/16 134/37/16 133/35/15\nf 140/38/16 127/40/17 128/39/17 134/37/16\nf 142/16/18 151/28/19 145/27/19 141/15/18\nf 151/28/19 152/30/20 146/29/20 145/27/19\nf 152/30/20 153/32/21 147/31/21 146/29/20\nf 153/32/21 154/34/22 148/33/22 147/31/21\nf 154/34/22 155/36/23 149/35/23 148/33/22\nf 155/36/23 156/38/24 150/37/24 149/35/23\nf 156/38/24 144/40/25 143/39/25 150/37/24\nf 158/11/26 167/43/27 161/42/27 157/10/26\nf 167/43/27 168/45/28 162/44/28 161/42/27\nf 168/45/28 169/47/29 163/46/29 162/44/28\nf 169/47/29 170/49/30 164/48/30 163/46/29\nf 170/49/30 171/51/31 165/50/31 164/48/30\nf 171/51/31 172/53/32 166/52/32 165/50/31\nf 172/53/32 159/55/33 160/54/33 166/52/32\nf 174/11/34 183/43/35 177/42/35 173/10/34\nf 183/43/35 184/45/36 178/44/36 177/42/35\nf 184/45/36 185/47/37 179/46/37 178/44/36\nf 185/47/37 186/49/38 180/48/38 179/46/37\nf 186/49/38 187/51/39 181/50/39 180/48/38\nf 187/51/39 188/53/40 182/52/40 181/50/39\nf 188/53/40 176/55/41 175/54/41 182/52/40\nf 191/22/42 201/57/43 200/56/43 190/21/42\nf 200/63/2 199/62/1 198/61/1 197/60/1 196/59/1 195/64/1 192/14/1 189/58/1 190/21/1\nf 194/65/2 193/17/4 206/64/4 205/59/4 204/60/4 203/61/4 202/62/4 201/63/4 191/22/4\nf 201/57/43 202/67/44 199/66/44 200/56/43\nf 202/67/44 203/69/45 198/68/45 199/66/44\nf 203/69/45 204/71/46 197/70/46 198/68/45\nf 204/71/46 205/73/47 196/72/47 197/70/46\nf 205/73/47 206/75/48 195/74/48 196/72/47\nf 206/75/48 193/17/49 192/14/49 195/74/48\nf 210/9/50 219/77/51 218/76/51 211/12/50\nf 207/78/1 211/12/1 218/80/1 217/79/1 216/84/1 215/83/1 214/82/1 213/81/1 208/20/1\nf 224/81/4 223/82/4 222/83/4 221/84/4 220/79/4 219/80/4 210/9/4 212/85/4 209/23/4\nf 219/77/51 220/87/52 217/86/52 218/76/51\nf 220/87/52 221/89/53 216/88/53 217/86/52\nf 221/89/53 222/91/54 215/90/54 216/88/53\nf 222/91/54 223/93/55 214/92/55 215/90/54\nf 223/93/55 224/95/56 213/94/56 214/92/55\nf 224/95/56 209/23/42 208/20/42 213/94/56\n\n"},function(t,e,n){var i=function(t){"use strict";function e(t,e,n,o){var r=e&&e.prototype instanceof i?e:i,a=Object.create(r.prototype),l=new d(o||[]);return a._invoke=s(t,n,l),a}function n(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function i(){}function o(){}function r(){}function a(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function l(t,e){function i(o,r,a,l){var s=n(t[o],t,r);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&_.call(c,"__await")?e.resolve(c.__await).then(function(t){i("next",t,a,l)},function(t){i("throw",t,a,l)}):e.resolve(c).then(function(t){u.value=t,a(u)},function(t){return i("throw",t,a,l)})}l(s.arg)}function o(t,n){function o(){return new e(function(e,o){i(t,n,e,o)})}return r=r?r.then(o,o):o()}var r;this._invoke=o}function s(t,e,i){var o=S;return function(r,a){if(o===E)throw new Error("Generator is already running");if(o===T){if("throw"===r)throw a;return v()}for(i.method=r,i.arg=a;;){var l=i.delegate;if(l){var s=u(l,i);if(s){if(s===I)continue;return s}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(o===S)throw o=T,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);o=E;var c=n(t,e,i);if("normal"===c.type){if(o=i.done?T:w,c.arg===I)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(o=T,i.method="throw",i.arg=c.arg)}}}function u(t,e){var i=t.iterator[e.method];if(i===p){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=p,u(t,e),"throw"===e.method))return I;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return I}var o=n(i,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,I;var r=o.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=p),e.delegate=null,I):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,I)}function c(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function f(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function d(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(c,this),this.reset(!0)}function h(t){if(t){var e=t[y];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(_.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=p,e.done=!0,e};return i.next=i}}return{next:v}}function v(){return{value:p,done:!0}}var p,m=Object.prototype,_=m.hasOwnProperty,g="function"==typeof Symbol?Symbol:{},y=g.iterator||"@@iterator",x=g.asyncIterator||"@@asyncIterator",b=g.toStringTag||"@@toStringTag";t.wrap=e;var S="suspendedStart",w="suspendedYield",E="executing",T="completed",I={},A={};A[y]=function(){return this};var k=Object.getPrototypeOf,P=k&&k(k(h([])));P&&P!==m&&_.call(P,y)&&(A=P);var M=r.prototype=i.prototype=Object.create(A);return o.prototype=M.constructor=r,r.constructor=o,r[b]=o.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===o||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,r):(t.__proto__=r,b in t||(t[b]="GeneratorFunction")),t.prototype=Object.create(M),t},t.awrap=function(t){return{__await:t}},a(l.prototype),l.prototype[x]=function(){return this},t.AsyncIterator=l,t.async=function(n,i,o,r,a){void 0===a&&(a=Promise);var s=new l(e(n,i,o,r),a);return t.isGeneratorFunction(i)?s:s.next().then(function(t){return t.done?t.value:s.next()})},a(M),M[b]="Generator",M[y]=function(){return this},M.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},t.values=h,d.prototype={constructor:d,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=p,this.done=!1,this.delegate=null,this.method="next",this.arg=p,this.tryEntries.forEach(f),!t)for(var e in this)"t"===e.charAt(0)&&_.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=p)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,i){return r.type="throw",r.arg=t,n.next=e,i&&(n.method="next",n.arg=p),!!i}if(this.done)throw t;for(var n=this,i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],r=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=_.call(o,"catchLoc"),l=_.call(o,"finallyLoc");if(a&&l){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&_.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=t,r.arg=e,o?(this.method="next",this.next=o.finallyLoc,I):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),I},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),f(n),I}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var o=i.arg;f(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:h(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=p),I}},t}(t.exports);try{regeneratorRuntime=i}catch(t){Function("r","regeneratorRuntime = r")(i)}},function(t,e){t.exports='<div class="floor-control indoor-control">  <img class="arr-top" src="">  <img class="arr-bottom" src="">  <div class="floor-control-wrapper">    <ul class="floor-control-list transition-animate">      <%Array.prototype.forEach.call(obj.floors, function(fl, idx){%>      <li class="floor-control-item marked-pseudo-background-color" data-index="<%= idx%>" data-floor="<%= fl%>"><%= fl%></li>      <%});%>    </ul>  </div></div>'},function(t,e){t.exports='<div class="rotate-circle">\t\t<div class="compass-circle-background"></div>\t\t<div class="compass-circle">\t\t\t<img class="compass-img" src=""/>\t\t</div>\t\t<div class="rotate-panel">\t\t\t<div class="rotate-left clickable-rotate-left">\t\t\t\t<img class="rotate-left-img" src=""/>\t\t\t</div>\t\t\t<div class="rotate-top  clickable-rotate-top">\t\t\t\t<img class="rotate-top-img" src=""/>\t\t\t</div>\t\t\t<div class="rotate-right  clickable-rotate-right">\t\t\t\t<img class="rotate-right-img" src=""/>\t\t\t</div>\t\t\t<div class="rotate-bottom  clickable-rotate-bottom">\t\t\t\t<img class="rotate-bottom-img" src=""/>\t\t\t</div>\t\t</div>\t</div>'},function(t,e){t.exports='<div class="tmap-zoom-control">    <div class="tmap-zoom-in"></div>    <div class="tmap-zoom-spliter"></div>    <div class="tmap-zoom-out"></div></div>'},,function(t,e,n){var i=n(874);"string"==typeof i&&(i=[[t.i,i,""]]);n(264)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){var i=n(875);"string"==typeof i&&(i=[[t.i,i,""]]);n(264)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){var i=n(876);"string"==typeof i&&(i=[[t.i,i,""]]);n(264)(i,{});i.locals&&(t.exports=i.locals)},,,function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAAAgCAYAAAD+Fz2gAAABmElEQVR4AeTVMYrqUBjH0VtZzizBFbiEWYRby7osRRVEFE1SCqqJQvQ8biOveLxp7oXJ5JRJuh//LyElfKI2XDU+wk+GqeGahj5AYXiK0BcYYWY4ZhiFPsEYlUzu97vX6+U78ZvMSoxDH2GCk8SaprFcLu12u/8GOB6Pttut5/MpkxMmoc/whVZCj8fDer02n8/t93v/UpZlfB9DattWBg2+wlv/I51Sn7jVahUjOBwO/lZVVXxusVi43W4yOPU2zjfnrpJQXEZcSIwRz1lU13XuOCUm4TfCGLMc/6MYZbPZvONcr1cZzDAOvxlGKKQTlxKjvONcLhcZFBiFocAUtUTiYuKSzuezxGpMwxDhEwU6CXRdJ6EOBT7C0OFPe3RMwyAUBkD4X3GBBFhYkYMJEhyghPUJwAIbEwYw8IY2vaFbhybta8Nwl3wKrkHCVUpo4iVHtVhwx7+7YUEbb3NUjRE7ft2OEXV8lLM6TFiR8W0ZKyZ0UTRnVegxYEbChgMn8tOJAxsSZgzoUUXBzMzMzMzMzMzMzMzsAXLnMf6Zx2aAAAAAAElFTkSuQmCC"},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAAAgCAYAAAD+Fz2gAAACU0lEQVR4AezRIQ4AIBADQeD4/5uxDQnucDPJyqoOLgAAAADAbI0vh6yoov2ostg2HeaYPOO0Xw6wcwRRGK8dlDGLGHUbFrFRxGZju4pdI3ZSxmlY27bPWOTWm7v3db5gk2O18z9+Z+zM+94vb2berGvXri1yHGdHGIb74jg+Wq/Xr4jIK/X4DqCqHhEffM/v+Bv/w//yGnXtdo7BsboC+ztNoNRqta1RFB0WkZtMPv5fEcfimBz7z2FNwCRQMpnMKpXAAyLyEZrFOTgX52yB1QpqAqZarW5US9Jl5g1Tr4aa+xJjGHdQrUvZrEqlsoF7BQZEjIUxMbbWpW+squbBgwdL4zg+yZxg8FRXsZ24e/fukjGopvblzHGc3QAKSFFhGEKDCoy107I3knDOnj27gFWDlGVZFt68eQPDMKBDjJmxjxakZjizPn/+vEpEniBl2bYNwnn9+jX4ME0TOtRoNJ7SA720QBp+OPl8fp2I5JGyVC+TwPnx4wf4ys+sKB2iB3oZckjNcKrV6g4AqWfMcZwETrlchhKXuAQSK0uTrGKxuFN5m90EaQjhzKYRAAFSluu6ePv2LQhDzdH0W7VanQpI/hBCaq4cteSs11E5vu8ncAqFAjqpUqkkkDzP01ZJ9Dgky10znOfPn68RkQI0KIoifPz4EblcDr3EZS+TyUCnuCfR64BDaoZz8ODBRTzxaO72MSiiV3oeXEjNTeicMAxPYcxEz/Te1CcNWPUwsNnqFLUXYyp6Zw6YiyQvg7S0Xb58eYWIFDGmovfz588vT3Op+wWhHSH6nVaMlQAAAABJRU5ErkJggg=="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAACnklEQVR4AWJwL/ABNGcOPnMFURSv7ai2+Vc07KyS2oxq22ZcI6gdVGGtsLaj6rMxvaf5brL69OYskpzsXZ33m7mjd58n5RgzNNPnWys6l+Hz3ZPXTxnGFIj+iJ7LZ7dEJ0Qzc4PBDl6vU6sf548c2TXTmF2ijwJha6Fy0WP53zI7cmRrOiBMpYe2V/SQddRv6dUFds6cxhRAafVYMf0Fc7K+iPdwz4DW2rpishlmCVRpls83r7aASGlTad15mCRDcq2jdtashjUGxMwMM0gaZI0A5Ycrkw0XpvlVAmYZM0J+VObR/E2Gz3cKQux1TEZPnIhxJz/44bX1WJDVC7HL7MYSFAMoXyx1HENz1AuxixfWyQjADL+/jZj+dTRdoqaIXRdz3XG0xSucZ6HPt1YBERNm9TJ4aXqfOBqiB7eGDZdthBn9+D8gThrYzAk9uE8BERMAy8GG9M4imEEHFBAxwxNsGNAnGGbwUUCmJ8xukczOKiBikuctpOM5KcVXFRAxyfM5zP6wWquArKyADYAFJLM7YT14l+RZgCXhE8nsqQIiZniCDem4R0rxCwVETPK8xzycflBAxAxPsDH2TdXvrFCoD4SYBLgWW90wDiBfKA4gJYSJwheKA+HHrT0E01fZgcAACDEBcFf4gbW7fFjoYpjl882FF4R7Xdf1D2UWBdQ073Zs8SW7bl09CLHj5NgOpkjAkSPbOR77oXeQo8ev8AKTAur6NSUNJsfY6m7c96YQcHO1lQXp3voZPt/1FPTceRSsalY8Gj++VTIhsaWhcFCr8ht6MgnpLkMtyKmAiYkjJhkJgPuBWhCjBKxL0B7XxRyqWMqWIqX0Ijp2HIB62LvLRU9QwUCZJWFV/nDhFBTxGMKYz/EeQ+De1uUxxD/5bqFw0Zjc3QAAAABJRU5ErkJggg=="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAAAsCAYAAAA+RMe5AAAiFElEQVR42u2dB5RcxZWGtTJgDHgdcADbu7ZxWGyzjmDjuM5e28dhMTYmGUwOJoNBwgSRgw2IKCOBACEkhEBZQiiC0ihP7Ik9STPTPaEnz3Seu/ez6i5vmunuNyMhvOeozvnVo/fqVderuv9NVe/1uGxl27ZtBwa75diqzsR5lZF4aXV3SvRTEukh8Zbm/qSUdsSlLKLofB2lHpQYuuOyozkhBVVJKahOSqFeV9yldfpSUtKbKCrtTZ1bPiBfWSNywLj9ZX/5Zypz5sjbKjsSZwS7U1tqupKphkGR6q60VKgQV+UgRiDigxxKgu3NcdlYnZCNNQkxYhT9gxxpqYyLFPcmU6X9yc2FPYnTbxYZP25/2V/e6hJoHzgy2Jlc2NgvUtcrSoSEVHbEQVZitHiIkZMcQAmwtTkm62tisiEYEyOGkQMU9ySkPCpSHhNIMq+ktf+D4/aX/eWtKnVtckRNZ3Jb06ASoj0OIIQvYpQZMfKQo8wR49WaQXktODiMGKDI0L0b6nFBlC1FffKB0d6PiLxNcYAPUO9fuIZPxYGKTyu+5c4drDhL0aCgtCteUXxVcbjit4pvKg4RHxaO78h1bm/C5zhRdzz3auCYj3rjPd/1I8XTilqH5xUXyCgtvrX/FmH8iPFEdXt8UbORAmSSIw8xyiP5yQExtrREZU1wQNbWDigxYrhXecmxsys2f82aNQeMYoA/oVimiCi6s6BH0ayYpTjVkeRris0KGRoaSurHVMUZCkmlUpJIJADnOLRCUcbfQEu5YrLi4zkE6x2Knyg+qDgo4/xBimMVp+0FnK74b4jLpOcRRBTArYq1ilLGwymC92TUO0HxmBufIsUT7jt+oIgyPslkUgB/c4x2RkFO5uxxxUbFTsWOfQS+a6biQsmMbWs7Eqfv6hNRcoCs5KgeiRh9Roz85IAYBaFBWVXbJ6vr+mSnIwYoBt1JKVJyFvWmhpEDt2pnZ/QUn4P8LrQ7whqLxfLBJrFecSfWIJ1OS1NTkwSDQY53IPz9/f0yY8YM+cMf/iB/+tOfJBAI2LlocXGxVFdXSzQaFVcqFJ8bYeKPYtJp35V5CC7nHSnXy94vEcUl2ayHiHxZUcJYQfh4PI5g27UTFIe5ej+1sbF6jJsrdyuSCxYskOuuu07AE0/AGUlDHp9zhoXeprD29yW893zROCtlqqlq2uLbG3uGIEUWcuQmRsCIkYccARX2TaEBeaW+R1Y09LxOjN60FEV1hlp7JLhogZQHqpQcSTFyEHMUdse36Mgd6EPz/FxQBTt2yMUXX5wVF110kVx++eXywgsvUH1AsZVJWbx4sZx//vlyzz33SF9fn1A6Ojpk2rRpcuaZZ8qECROkqqpKKJy/66675PTTT5cbbrhBysrKxJUT6UsGKeoRwMLCQunp6bF68xXvVfxCkaqrq5N169btMV577TUpKSkRR0IswfuzjNeZCPyGDRvkzjvvlOuvv164z8HBQa57SXGkq3ezIv7iiy/KLbfcIn/5y19k7ty51v40+j5r1iw577zzBNx///3iyhI/xLA5q6yslJtuukluvPFGPvcJ+K7HHnvM7mXrOCvBlsSxdZFkKtieECVIDnLkIIaeK/dBDoixMdwvyxo6ZXljl+zoSUuxzkGgqk6aH7lbBn52jBrUcVKzbJEUDog3ICcQT5b1J77ogxiXIYDLly+Xs846S5ioc8899w2wSXz00UfFSmlpqZx99tkCsAzz588X2mppaZEHHnhAIMbtt98u9fX1Qnn11VflqquuEupfcMEFTKw19StzYXBJmHMGvqCgAEJCJshGPRPAexAuhI0+7ynOOOMMQcghmnPx/ivLeGEVosuWLZNLL71UuD8I0t3dzXUFio+5ek9xANJwn3zH1KlTzWpMNWKgUICHGIt9kIKY7myBwWvXyqmnnio2R+ecc86bCvse7sesxjgrNe2J85v7BVKAnOSo6chGDILz/OQIdCZkQ2ufLFAsDvdK2aYCab/+Akkc/36BEKD/F8dogN4t29qjUtQZs7jDpXITZ/ogxiUI8yuvvCIILMJ/4YUXypVXXilXXHGFAISeAWES0RautCIQuAF//OMfBUCCSCQiuFVYBATnkUcekdbWVsENQwCsLkLT2dlp8UYh7oHr0w/RylgThI8Jof69994r7e3t4spshOull16iv3sK7httaMQIKL6TZbyuUwy+/PLLctlll9EvSGvE2OQhxnQFY8NY0j73uzeJcZYpGqwv9wABmadsuOSSSwB/jwUoKBsv5uSNxAi2xcrrIykIkYUcuYkR8hAjFzkgRZkScF1br6xfOFeaz/65pD5/0G5CfGacDH1OPz85TiofuFNWaoC+oalHCiOvEyMwoG5IV3zxaInBRCHgCDcaHRfj6aefRsiHEWNgYEB27twp+Mpcx2Dhaj3//POCe8VAolkmT54saH6OQzIT9Dm6AKRJDGlraxNXfur68z2IYW6CTQbX/PWvfxWIZ2X16tVy2223jQm4ONdccw2E/6cmBmOSjxiMKS4rrhtj78WiRYtk3rx5MnPmTJk9e7YsXLiQY35h7dB/5jQ7MeojaYEIQUVWcuQhRrkRYyRyOEIE2gak4cXZ0n3St2ToaEigZPgshAC7yRH9+vtkZUGpLK+JyKaWXil0FgOU/CMgjzWMlhhoHtwgV1JaBNcBd8NLDOKGU045heMmvAgZBAJ2DHIQhHOMAR0m6L/97W8FIXPlUpdpOsyld4UgHYGlXbvmb3/7m7lVWQuWJRQKAYtPRip8N/3fm8T46N4ghhuDI1yQ/X3F1xXvy0YMxhilQcznyqCLA+MKaWxslPvuu0/oT01NjYyy0BYJFCxOdmLUqVB7UZuBYIdB/z9CjBHWdG2VS+V6UamEqOwXJUpUGufMlP4TvopzIfIpiPBGQJTgNefKkmCPvFobkZ3tg1KmgXepQ6AvpZ+xuj0kRgkDsGTJkkxiYFGoixaxAN1MLvUYQD75P8dHDOgZYLQ+xeXxD3b9ertipQWYBHxeQiFIuGaubFGsc2nLCJYMy2Wk9dxLvadeLdkVNKJPYtg6zwQELgsxNig+6eo+OUZiLFMc54J3BqZPYWWGSzwcMBIxcDW5JxcjXaOYpFih3zmEtWauuFfGnYRGb29vNqBMLKHA9z8EOcgm5iRGMjUkOZEeDqOFFa0CWYYDauvx6OolEjvpmzKkZIAUEGAkYDlSXzhYKl5dLwGNPcLdgxJNpoW24g6JtN5NMt2/h8QIZCMGWvm5554TzLOBCXjooYeox+ARp+CGcZzzmSClawF4VHGaNy/OAqCRo6KigpjFAkwCZYs3MAf/6rmmhgklBUo97oX+mmB56l2l8EUMNLXi24rfKJ6hr5nE6OrqsjjpSifYs3IQ4/EcxCjjH3NVSWLgypIOd9r/evqUhRiWKVoNQRWXKzq5nvGiDmOC+/jggw/K448/Ln//+99HAmOGy2Xx38N0Jy8x5E0oQ4Gdkr7kBFymDAuR3Vp0nfdLKQv3SUNbjwzEEjJSSQ4NRfeQGGVZiJG1rFq1irpMhGWw/JRGxb1CBOWKx3IsNVNO2vPmm28WBIbbQ5tRz+N+BHMQY7an3vV+iOFW8e8RT0H4uM6IQVaqublZMkolVbMQY0YmMXAP0dSQHSXAeEMWBBE31MaRa3MQw6xo0FxR4rE77rjDm22kL9xzJrgXA21ynVkN2orvU2IMdbRK6u6rJf2lw2ToExZD+MBnxkvt4oVS0davqaEBtVRpGakk0mMjBgGzK7sQBE+MwSQxiWh6YgAvCLIJ3G0i0D4czwnaIWvlym2Kz7vtI1/n060WtynQnsQN/Blz2yje9SYTA+1fxILl5s2bRXcTCGsYZNpwSbhu4sSJBKeshaAUvMkEyDASMSr4h2DYiIFGx7JCfPpjigVB5h4YR1eezUUM+mmLfuXl5fLwww8j6EYKXEyCdPps4Lv5HJZ1oj3ux5UbFL37jBipJbMl9cNPyNBRCLo/QgAsSt8p35ZAU6fU6wJffzQuWQquXGwsWSm0YENDg2DCEV4mkeDZSMOi2AknnEAO3QsmiTa88QDHc+J3v/sd2tG00xIXA2SWaMb/6xVHZlqXPMSY5al3nU9inIg1I/vG+gtxiwmiN3VJGxw/8cQTUQ4QIJMYCDekgdgQHEFmrK0NxtfcHepbomJUxODe2VFg6yz0yxIXtMm80j8SJ1gmQDCOa8j9UZc5Y7HWkazTLWp20eecxGjvSQpoy0Tv62gF7u9URvCd1kFL3X7pbpfpP/wTwsA1Reqbr2vQLJSuX9T3xIWt7E0ZaB5MS+NAMjSWdQy0B77o1VdfLYABYdCMGBs3bpTTTjvNu/BjkwwyF5tscgD17LwJFVbIAtgYAWRtbS2WxAsmES1o/nzK7ZP6qOJLDt9QVOUgxnzqOUv0APfsgxgnKBqKiopoE6GhLv0f8V4hztatW8UKfjzEoM6kSZP4Pxoa92iYArFFM+pee+21cuutt6LFR20xIAUZOyyakcKSIdYWbhpj7ArjScxhC5HEhba9J4W1cGPQnZcYteG4GIJetGp61oNqBSldAnJv+fOytJxz0uPS/5+H2nqEbxCQR359rCwtDcmKynbZ3NQnxWwTicQFFHtQ2p1iwS84FmKYwHrNumkvzDMah8FnotGKpAo5ZwKDueYcIE2I9jKCkKGCXFzHeQQXF8RSjbQNGU1reoFgMrGuPOT2T9V70MKke4kxZcoUq9+gQPJrFc1odR/E+Aldgph33303yoJ7I75A2IYpEb4TV4WtNbQDmVgvsXp8hxHLaxEA44PVJEmxfft2YhbuEysyWmIQVzA3HMOtZQsPpDRLRH9Y78B6kcalLseoj3vodaGWudTwDxQ9eYlRrwJf50GtF6xveED61kuM+aUi77xeI7pJIr++cIW0fukIyDEqa7HtySdlaU23rKvtlKLWwaxb1gM9KSnpjNWOgRgsxBGAM1kIPVqOwRgx+GaA2Apig4tJxtXyZlfYDsF52kcIOJ9RehRbqA4x0FoIEe0BIxXXE7Saq4J1YHINuH+smEMs05D0H0HlnNXbtWsXATyxQT5iHOlSnoK1QmgRfAgNwbmObNnKlSuF41u2bMHaIZC0+warYP7+n//8Z+EezYJCuiEtLqHQRlxHVmgMxGA3AWPEmNv9YMUgh2ULqY+C45hZPKwVC4EWwBergvm8+64f+yOGWge/5KjzECMyIPLF+zS3qMQ4/EaRQybp6F+2XeqOO0rkaH/WouM3x8uysrCsUmuxVa1FaUcsy5b1sRPDsiQcQyDY+MckjZCVimGGWcH2Di5BJGTAAgDaQNhJa5rmhHj4tR63qFwxURFCaJlkAlHbHIcQ2oSQ5jVisL8L0hoskKQfJnRMJsLrOY+rAim43k+69mzFGkWNopUKnnQtQm330aEYIrOEO8Q5xsUT+EJSUty4ogi79dGbBdysuE8xJmIw7pAD0se0uEU+saweq/2e/U5GXP4mtex1saa77fWHu50I3b6I4ZccXmLcuFzkHddBitdxqJLj2CsrpPJrn8lLjvRn3yYFs1+Ql6u7ZL1ai+LWwZxb1o0Ye5iu7UW4ly5dOowY1McPZTBNmwO04PTp0wXBwRUwrFixAuuD20E9IyB1CUQt0EPowkwOAgqZ0NLAXJIMYrBjlbYyweQZ7PsMCAFEQ6tyz74W+HgexGnOyYxJlgW+BYoILgrEYCywjq7fjKkRCIHgPjLXMSw1evkYiWHjaAVStMMPlA0WDWJaf2zejBjPPvssm0LtXsQpggddGn3QFzH8kANADMYhoFP+oVtE3nMDhHgjOb54dVACxx+TlRwE6lVn/0zmV7TLGrUW25r7JNARy7llvVyJUQYx9u7KNz4p2SrMMBNnvqvXXSC4zIQ3k2PaiusRIEy4xRibnXCUOivSqaA/9CuTGFxHnzLhJcZI52xPl29iWCFEzLElhOCnh1Q2/cJXd7EX7aNErN8bEIosC3wrFFfvicUwF5PsF1YCNxerxvfQX0Cb5m7avDAOzMVTTz0lpKaxOt6SN13bACF8kqNeiZFWofvDLHWdJkCEkXHYP8hRI1VfO/oN5CAGiX35UJm57GVZpKTYVNslJa3RHLty95gY3okKIbBGDMtKkcsn1WpZDCbFyIHA4AZluDg2qLbwx0KdLTbh6tjmwGLF0S7bdJRiaQ5ikIHB4njBpFrqEWFAcAmE7TwTTBwCCbivvblXarmDlWwr31NyrHyjFM5RkHKFGJkJhJnZiIH7izBzHURgDrDQtAFQTriw9ImYg1iIeSTWoI+WGOCTcSaZALGf1JgWi8M2krzE8EuOsAro8oohebdaivdmIYXXchx3ZbnUH/dxyDBslXvrhAvlwYomzUS1aoq2X8rbY3m3rJd3j50YCL+3mC9u59avXw8xyIvzN3EG53EdcFHIjRtYB7EMjWknBpmJQWujvZlEI0YAUnj6t3AkYhCcunPbFUkPepgwMkcjZKV6XJ0En1rISu1NYqx3GZxfKdaOYa/UkItltjMfZjE4zzYbV17MRgyyf7i3tEUqnWttgyer2NwrKW8smqewuMouZ1wpi40AbdIG7aNscMXyE8MPOYwgP5wyJIdNNALkJ8d3L90ubV/6gEAO0SxU5/c/JtM27pQpZfWyrr5TAm3RvFvWQQXEiIwt+Cb9iP+PWWVyEWo7BzEQeJ6FQJMQbKJ10EgIOFrZlagD6UfL1GA9yAzZE31MFuSygV7iXbhjDS4HMW536xI/AQhkngW+Za7eL5FZ29qxl3fXftjVmzoGYhC7RYgTWFAk8WAJDbJgrjydhxh8ItBYYRIhWAfGm4U9gn7cK/5vfbZCsM71xINYdKwL7bA2g2XJT4xGSOGDHCEVzsc3JEnPIvS+8Q4lx/9csEIGjjlEIMbSqVPk4UCzTC9vkK0tffYGkjzkGDsxMgNWb5BmMQYBsu1uRZgYRAQM04tgZhY0EtqIOvjLEGKE0uoC3AN9EuOejHs5IA8xnvPUu1bxZhDjQ3uy7Zz7wr3D4llCA2FEWPle4o9crhRxBaRivFFatjZkfTHrTFaO1W3GlbQuFp97CofDzC33g/JjCwznIRPt5idGPnIAFv2+/fCQpWdHBdY5Ljp5quzUbeWPluySaSX18lwwJIWtg2xZ90UOiBEYGzH4xBwDBt7y75npWqQBM2tBOAEdgo+GY0ABfzMRJiBYDFscBGgnNJVlUb5Pn/wSQzF+zHul9j4xVit+51Kcz4yBGAgyWh7ra0kNLK25P2HFcTmC70w3iZuZ5txNwZKcdNJJtM09A7t3+shYQQS7doeiX2FKEHc4NzGaQnFpCu/GLg8aDUqKVhXMJzaO3lqAd/9FcYPa+2f7ZMrOBpla1CAzKlpkboMGmupG8fBTtaIqA5WR4ahSYlR0xoNjcKXIOOESYT4xwQg4QpBJjBBCaPFFtu0gBs4ZvMchn02ICzzf/v+MGLYFvsvtEi5wMcbQWIjBVnwUDfEa7iya35XpjE2O5zFMWIsUv3Zu5je5H1NgxBEoImJDLDjfzfXMAfu8PLsKJrmt9hcpHlHE8qZrC5r65f/QPBybgPv7u4+lR0WM9yoZqP/puxNy+eI2ebKwTp4oapQZgRaZU9ch83Z1yRp1pV4L9ctrYYV+vpqBtWEHzrcNyqut/c0+iHEFxCCbYcE3e2copjEy1zFcaSEvT8zBRkCCcb9gMowsaDC2hLhyoeLg0bhS+5gY12YSgwwQriELa8RL5j0q0rmIYQQAuDVWWLkmYcFKPW26MkvxEXuCL8/zGCsVh7i65/Jd3l0KxDB8Bxks7hc3iRiCFLOn/z/wfNfPfK18L6zvFrDA0DAcS5u65Y6N/Wh+f4RQQIgjJqXlxBk98lDBLnm6sEGmFzXJzIpWmauLefMau2V+Y4+8pJ/gRbArN15q0nx6U3eHD2JMsA11TKAn2GOUi3I8j5G2rAauEFkmH8B3xQrZNpNMYlwwCmLc4lyX611sMn4PiEGwS/9sW/j3Rhirg9ymun4jBgKJz47Qk/lB8/P0mw9ikDZmjQEQFFtWai7f78a2RfGC4lR7nY9PYuDS/aviA4onmR/6wRhCRuaS72PhlJgE8o1Q1ngepf2RL2Isq++VTCz14JVdvfKjaf7cKOIPiPGDKQNy15qQPKuEeKawSZ4rDcvcqojMr+uRhQ29sqBxNxYqFgH+zgarqxZtcVNfm49XPN7BgLLZjAkk943JdanNpRYQep7HwIpABu8eJD/gNTr4q5CJuIPvGwsxTMAQnHZFTFHjSFI1BmJQl60irPzalvZfevrwHmfJ1mZsCcFtRPBtHQAXlHjDDzFqszys9SHFFxWLXUYv5FyjAiesJ9s2FR/E+IjiecacDBX9oy+4aKzzMEaQmj5DajKLZCEhjCPpr0a1VyrYEhNDjSG0G/WtMVlSEpcP3IzA5yCEWpN3Kb71YFwmr4zIqtIWWRMIy2uVHbJFyVDUPCBlYTXN2t765kG1TP2ySLFTjwXaYlLmUArad6MkA6WRpBS1R+t9EGMqE4Y/yw2zwxKS4EUxsFgTI4a5WWQoWNgjezIKcA1xC2Z8zMRg7cMKm/rI91sqU1HugxgHuxcvEFfx/Qg4mTXrRz/nXd0jFE+5+IEVf2Iq7iVzhR3Bw+qw7SMfMWjvs+5Vpjc5XMQxDxEjMnKpgByKU3wQ40iSAPSZxdSTTz5ZLJliAThunK1ZWNIFt9k2ghPP+LYYBN9e7HIgAG/TIPjCOWk5ZGJ2lwlCfH1yXO5c1imri0OyUQmxsaJDdtR1S0AJUR2Ovb4JUVHQHJWFdQOyWFHWqgTkLSQeDAvAPajuSrEQWOuDGC8yYWSKuGH2EbFb1AnIZAXEeMMC3+9//3sGdjTgGq7dE2JAYASaABLNR7bFNBwaPeCDGLiPJyjYDYuw2GQjvFaXto5SHK+oxNrRDgEr45PxTiqEDaHBT0dgMomRuSVkWp45wWIQZ0BAYh82/7EvzO6TIPw3uWIMG0PiR9shgAuLUmJuITcLn4whO325d9ohVuQeXLnWtfFdX8QIt6chwjA0KpqVGNuDCTnqDvZEDQ+qWeDj88dTEnL/yi5ZVRSSTeVhCKHXdEvZrn6pDkXFXssDaty29U27orKgZlAWBwellGc9crwrF1Q4VCkxKtqjjT7ecL6BmyQtiObE1DKATkteqfC6UlgMJg2BxPyOBlxDgEe+nEXD0RLDnl0wNwawdmICs94PMSjuIac+XEH3EJY9porvb+01OpemCQHEolDHuzuVviO4rDNwTwi+WljrSwoS45pyHavXTpjqMFZ4ZBlY7rBJwe4ASGvb/b37pWZD7BxvCalUTHTu4r1uh0AzJ+xduowRCQOsG6TBtSW+InPFmNjSh2tjkq+3hOxqiZeF2lLDrAVoVwG9bVnKWQvIASEIqofkN9Nj8tzmbqlq6pCiYJtsLFcLoYQINCohWqISDMeyPs+xqTEm8yujsqgqKqVhiJH7RdKGYO8QFmORD4vRwWAhcLY9msHhuOJ8RWaMwaCwYY2JyAqCOjIgxBS0D9zEsVfJgm8mllfo+CUGfTTYGwpHZTEozhps4B7QnN73YOF28LwI59z2kRQWinGxbRJYAdpFi3rWDjqcYH+HjJm9uxYLY+OKAPopEAzrZS4O5HrmmWfs9LSRLAYKwsbXxScxz+dYStza8PVeqaaWxHmRbhnmSrGmEWyKy3H3DwmbBQ+dqCN/e1rOeGZAFu3s0nikQxpaO6Wpo1fJ0SsQokYtRG04//McmxqUGOVKjIqolIWMGPnJwS87lXdE872i8wiEin1K3KybQJvsdiNGlqxUmQKH/6URwPECJoo3FTLJaE/AmgiksMct0bqebSQ/zLXA530MlEliWwp9dwWfqsInMd6huMo0s/XFFjHtuRKKBdsIJ+0S07DFBcJ7ngx8VHGM4r2enwDoYgUa62Zt4/rZqnMOECwT69n90gbvqbX9XhcrTvIQwzb9ERvSP8Z8b4H2APOW+02ELS2Jr7SEk6nmUEKMHG0qxDMLkgIhjp+clpsWDcqSbe2yReOH2lCnNHf0SaQvKtF4UsKdCT0W8/08x6b6uMwvi8miQEwgRhBS5CEHv+xU1ZlMlrX153up84+w/GhwW/VGaDlGAJiHGHMU7yTQGwFHK2ZhMZyLhrAZTDujfdF0FrAG7f21WYhhz1LgB+MCmE9tef7D/aRrrThBLqINUqaeRUr+9l6H+wd5yTjZ2FB2OAv374pDMwhNdqkJ4SHzY8TwkC8XMp8nIajHGhgJjyOF6yGGtQmZ3izkf3etytBBzS3xbW0dQ9LUspsYLar5N1clZPbmpFQ1ajaprku2qrtUWN0lkd6oxBIpsZcidPQkpS7k43kOI0adEkMzXYtK41LWYvFHbnLU9QoE2cwP3OQhxq0IBoIGMTx7/4ec5r/YiIFmZ1C8gpaj3X9TPAcxcE1sy4gHCJ/3Tei2KfBdGe3MM2IwOWSkWGX2EGKJszKHglESY7zbVNiN0LHAafFABjEG01rMOjjf+xtOARyYY31oqiJJChgrbBZ5FLAtNPj/5tY97OLCsxRYEeIQ6u5T0K9MYliccVqkUyDGMHK0qsA2aMxQ1dAvlYo6zSglkjam4iGG/+c5NtUqMYqUGCUeYuQkR0Ia+pQY7fHf+3hz9kr8WbQ22Qm0m5LJ9i1d4VZOCY4JPhE4W+OgTM7R7qEIurkhI72xkIyQbSZ0weqnRniB8UQEEzKgremrK0vJltjPlXnWJ2ohBvdi/jnZNleeH6Gfb3epz1b7ARzcM/L6nrTwpW47+fexSlzj8yfS3m37lGiXVxCRcGAMyW7lAXUZO3sqL+3il/d4fh+DNQcyV9wv1+wL8F0kYGwuCjJv+oDm5viCrh4vOYDLUrXEFKRw3aOtGcSoD/l7nqOedG1Q/fTCuCwujkvAiJGDHP/4TcC2+ItoFh+Td5sC9hMc82nauN6tnH7BaUw7bwMSJg+fp+2f2IP9XJMBc0kaFXfgehgpMscZzesJIFcpfkqAnlnfHYO1Fuxbn803vyZHZu54Jtllbuw+zV36KkTIRYY8lhPLm/D8tBj9ygebC1NSU4wUFKdENjOG1t6+hFkL2+07rLTqr6OGQokt2chhQXkqCzH8POwEMTbXxGXhzoQsLkpADFysrOTgNwFrIolN1SF5v8+JO8CRY60jQ7ULJD/icTc+5zR0kzu/HEuCYPrYbvJhxQQXGN/rQH71bucnH55H4KwPH7UXGuf4XrMaM1w/zf3YTNqRdvL0lWuxQne5RbLXSOva942xGPHIIj3iyFerqMsD6mxjnBxpx2f5DT4UQbG9GmgfATmZT/Iiq/KFHOFwch5uVVuHiCcg90GMfOQwYiRk0Y6ELC10xGgfTgx+2alRydnYKxKMJOdW9ykp9pf95a0usLlFY47WttSmUDiZjHSJtEKS1qS0tKUEa+gtXb26QKjHM9EI2nejoQPo8UhKttWmlBQpWV6ckqpwSur1WF1HUhq79Tv6lAwdiWRdZ2qj4mRBu+0v+8s/U8GsRCLyWV38O7E5nJjaFIqtbQnHVieSQzuTSd62MVSif5dGupIb6kPRVQ3h2Kr6fGiNrdpek1y7rDC57pWi5LqKltjqOj1W0x5bWxtJ/L0hEj+xvk8+M2eOmrT9ZX95C8v/Aua/AlScebjXAAAAAElFTkSuQmCC"},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAAAsCAQAAACUTQ8yAAAUiUlEQVR4Ae3cBZRUV6Lo/d/e51RVKw5BEoLFFQLRycT9Tua6u7u7u7u7u437TGQkTjzECJYgIWh7VZ2z92e9Ft1YgGvfe29+taxc/nVcginyQte6w2qzZSdjt4e8x3r7+bRTF7JJ/T7Pl04s31EfzF3ByWiaExcXxTP+0rskn/YfjHGWnxy78tHwbHdYW3Jyol5zrGleWsV/8/OGHEuhdLhaBUpNM+3VcY5vMhMbvN/zBg3Ypy35r1QIsvoYtw26zsX6ZE96v3FHFxROVZIIGc7y57tO/2B3a46i4ORlCefHW8vBd/gJw44ULXWLlRoyk4LaTu/3skFf6loX+2vv9msTZ3crmprD4fv9gCXWe4+H7FQzKVos22sC0G+mpjdX26VrupkudJ6G5CkvOABmW22VQmW9zT6n/rHuREYrx/f5XtnhCotd7EzZqQje8JhtIdPrT3Zd8y+dfRr+Y7rO8HmNwb/xMyqHm+ev6otHuiGbptnsebH+o+Kt7tgTOmnxmJdc/rGJjaLzXJnLV8eXb60XFjN7wiu+3dMyCG72kzo+6s/tFCz1Dd7qdLXjC4b8nn8w4pDCj6ev6IachFYK/+BH0Ofn6s+ucs4hNCfChxWb7ny608YtYc4+NxpzuAv9XlrV6ThFjSLuCD9ZCj537KoPdfdr+I9q2Ob++q7PCR/wkMMtyqu3DD8gmCpbXr1lRfGz43FT+lSOvrS3Z22eeMN20QqC5S/W/2p5vW703FXNz/CyMQS3+vHxxQfq074tzvML9vrizlftGh3rBMeXDQ4s+uG4y/skJs23bqcNEx3R1Y2Zl2nquMxlW+uXurWma8q+K23fm140IbuWpMeY6Zqur85+fmizwqnIel0zt+f7SvN9+XpbcsN/hqan0tn9Z3+Jp4ybKpiv87oXNU1Vya7oNsp91QeMKX04353bOkrZoMJo/YiWzRY7tzamRuFOP3+w/2OdTa46cPXnhCV+2rLRsQ/Vr4mOr7a0/sLmwDr3GWbSDIN70lNGNF2aZzLDHgv1b0/rdQ1anfsqKSiVkgDZ4XqtGmk/4wWFU9OxOvWcGV3bXvFMFf1nSR6vXGWJwyUKpVKQJAmlQoS8xFKlbKs93cqEIDtNiK94HbOdrxlcbyF63DUy46PdF4z5ZHhg3Do/rUMQj3spNZSSOulTOCTLUaGhFCAjyVGpoRCcgCCafI8oOCQIguMJGhqaIql0x456WHSqakkpMCnalQ7MmfVWGx1V5VxrtFSe9jQoHKh36hMlo+53mmFR9qp96QFR0rRTe2zp6p6b/LXajmaeqVLq+BSday52ZlHP1VWAwKTskGFtBEj+82WgttwSBZO6uvocW7DfBjWgtGa/CQ0nL0uyuVbabruSSR0H61mX+XNHlc2wVDPl+Cog2ONewxKSl2xUC0oPoCsojLjPIvOrniv8k1F/17z5msWxflCh61Ny/ZbBwXRnSgWy0LZXxoDZOSOHkLrxvTb6T5IRFWYYsNu4KZLl1im7KchCWb7gHnOss1ThCDnVZbnJC1NizKnb6ZSGh5al8ZLGivH+8A8hO6TWyRY4jtT0u/nL9JqUVCoBZDWgQgBZpSIDXvEDvT957YqhtAGVT0nhrWOtR3Vkhau3978zdwWXxVsmPGxUMLNcFwtHV8kOybrIji2Y43RXu965BjztF6w3RSGm+LPxgJZrfd5zE3scsNVXmWm6EJqj8V4XFSvUJpWyk5TVBq2MF5dLR+LTereu2KpkUpDVNB1fjUnZgLNMCIhGbUa2Qp/MpGyeVvSGCfCgH2386B0XFvUzOau8kbtzG5Vvw9nOz4N1nQSZlj/2CH4wr3M0SwxapSUDsh6X2qNfclQhm+kPndfpjKaDaSKvuLT5wz5PNt2u8Y29X+lLNg5tEVC4XzRdX75j0I22m6J0UirBrLC6PD/PGXKfvzXqj59vdKvSqQsW9ywOAsgbxl8WnOYz9Q5IDsk4u3uJx8GjjR9u/cZtK0J6Jp/jrqLxin8HpWCqEgRHilb7UeeZq12MAmVtpXc4WH+06Dokq01KhoqhFXvHdnnFHmO+p55/tmiayFW932Xd5oP3h1Elxm1gUgAMuKUuh4RTjJFVFoaLi4vywCbv9X4v4SuHl77QLpyMoFFbGxsBFHYYnQCicU+AQZu0RpKpkjPW9f1ceJu55so63t+8+5ZFM+Marc317/oYFE5Y03dOrNnU7u4rbVEjed7M8TQ+uzjzAjNyAmR9FpUJoieN2FHvF0WllkB0uOibRrobhx8JOzVQaEogoiujdnEoJ9LT8axTiFHL5oUrGufVfS/6Jx+2E5Te9lw1KjhxwX4v1K2r6+4boqS03jMiyMhKbLFFFkzV8aWdlSv9upXmSJjQ2yqvbRhL7wvvdHTZsUSLhjrvzmOCqCFIPibruKQ+c5GQOxAVeW//q4NP1R0BjwoKLbXCse0af7c9ag1k/W7XA0pb3CNLlnhL9lL8K7960jEq/dYU6/LAi/7JOxxg0i3t815MlYYTV9pml9ilI4BaVwQFAmpkhQySDLoyOd25tdiXAshZ3WyfUzYvQ6+mWpYdkvXpUciOpg6aaoFJTQQNshgRjPk3VR6pJxBQSio9Ftin61hG7dAQVUrBiO2uoxQPdDbJ6HOTntrf2y6eZIzaKtdb/Lq/9W92O6Tps3b0vtZpODldbRAF1M7SJwomPI2sz9laeNq4IFhouRq1WUGu6+fq5xRMiuZafE71S+XVallhfqiBnDT8rAnMUDiqIAgyICBiX/VKtUGNZAeiAJhtuWVhcd7vndqOJSgEKy33KSOyhxxwc7XfB70uyG6ylPd7n9M5qRiVy9xeFHt9redNd5ErH6uSwsnIBs0QgjxsCJXzXYIJ70dWuMSNshDm5Y9pq3Sc5QxZrkLHg/mGbpwQEREwkc3Mb99dpgzSPlkQjNvTreZBzv3Z4SqPzFnxFWWdG/WzHjah9DlmBaGb3mebAIiiArWsdreFuRzR3w6OI5jlmnBR1dAoPmlYbYOtgiFws4tz+IQf0+GkYlTOdYdOqgebn7/xF7VNseqLX5uxqR2dnMo5btBMOXzC/SAK5VD1IS8jWWqttkw+zw5PKrzhPe62pIiv+oim2Ge2KOiYkAUIw+Hd9Q4FICB7znMk4LMdoeOXi945lygsnhFjJugP87pGRmd3c6UUEMy1OKwKe9KjxlGEcp8f9PX5Kl3HkCzwlWmwtt8bq9fOGn+fgxhBULnamhj3uN8cB6STiFEbdIPgXVn59i9fNegnjTDpYjc/1m0rnawsFR7Mq3MDorad1cdsF9CU3CsBkiAr7fEvLq3POXPeNzcfb4xdM/eyHHKsXqwfNCY4XAAE2XEN+14NZ/u9sFQXQvSa9+bvzRO9Sm1Jn88Nc5lY38oZUNshOo6ov9C106qxRbvHt4sCaoWsdNDLafHcWT9no0/apH3CMVhrfvORzkty/rf67s8eLP2oEcBX7Jz5Ujs4JYUHXBgaUNjgE0aUaoXaNluYFJTIGHOfp9LbJlZcEP56YPlAj4blM2aFhElBlgAFyEiAcLwJWHRI0ikaF7ZbtudnJQh2254vUzEpOq6gWw83R5bv62y1QVshCwYNofScDc7MZ0+cfuacs/o6XpdPKEa2wOUOdh4QBRvzu6rPurs/+xFjuMSNT1QTSqckuVCZQfSaEYXaIrtlpSaTso5s0ByvKO13gK73eVKPpX7cVRIgDPbe1hlPAiG96mG1YJV1oQ7AaekpxxAcEnRt6N16xSzFSJCPujk1m1A7pmC7TxjKB+sxQURhlfPMs92ztiHaapPBevb4rHDJglY6oRi1y7UaH+0OKdGwKb+j+uy7+zp+VNdXb5/9bLt0KgrNyvWxETMQ1Ga4zut2C1a6PlQhC0J6yhMqs3yW9R73hgxN2bip48fgjca/nX6b09Vq/UX9CJgXVkSjCnRSn+BENLzia9zmS8NMtSNlA9U3lReFKjuWgzbKgkIyzzlWmqe/EBZVq+zwlM2ShjEjtuW+fIkTiFFZ6AI7us8JgNIr+Z3153xua8iT+aYHOuMaTl602bsVzZxeV0iSAVdbbUH4y5z1WBUXdL0myJY+GnNumK+/5+qJC7xinhzCARAdErS9099rYYWfqk+ToA5qP+EpfE392QonIpiwwVmyY+l1957Gc2lEoYLkMFEp6bfcKgvsMOaguu5TxllhVl6e9tnkJa+LksyJxChcqlk8Uk/9yRtezu+r3/bFjc99vvFyLp2Kwh57SCZ1XaPVjY2Dea+kaX7KsV4C0Ws5a5lPm9nWiCGut9mRgtoO0FLlwKRgl80YceIyCsdWHIh/mWqF2kLN4FnJFNmga8OZYZ6y0zBePmmHpiAaTDPMMM8ZrnJ5PlC8lLfpyfnNY2SzXGp7/byGQ2otg7nRPNC6r64VTk1QiJIkgbIV32Xd5jPqOmp7QAhKCIZR2WBzzpJFrog9L6uOO+aPposgOFGFM/Rqyo4p51FRVrpcf/Rx2TSLLTkY2vZ4n4Xpa6uJti6CYbvQdbOritZDpy05bTD3hMaWN49RW61ZPFR3lYAaS1xvRTlSvccepZPUSjJqS52jWaZqo1eAynlmbU5djHvRIQU6tiKq7bE69ZwvSv6L5NoSf670YW3HFPTq0bAmXtoqPuVvZcFUKfyW+7z2ev9p39vrPP3aurq6Kl1tidLfetLaek15U1gsHTdGNsOFdtWbFSCrzbXWGo3GK9177FI6SUFP0kWy2OUh7jJ3PLx86O2aY1qCo6vUggjJ0VVOSIZ4rI1LRT5Q7p85s5yzRO2QINY62pJMHGy9vY4WlDPHPOTHDDtMEnd4TXna59VfMza+ztWlmDpDDhh10B4LQhg1Ypf3lk+4WeC4MWqrzIgPplENNQatdamB5r7Og91ndBVOQY9cCSjUZXxn+pLcCxS0hDtMOLqO5zwmOo7gbJ/lNH8oOY6gUmf9SiYVLtQMGZJ77MudfHOakx0SjHl9VWugrjJzYt7Y+tQ5Kw3ZZodH7XM0EfPd+Eb6iFpv1dJr0Cx9TrNOozCRviBusE8Ljhsja7nQwfSsqDLHeS432BjufqKz3pBC4RQEA0kHWUsMuiaVNqX983IqcnSkpN/ZdsmOI5vjB51R9xa93qt2pGBSRyebqwEKX2SNteaN1jWSF2WzRFOFwn7vmLtw7moDcn6m/rXyU8711S5zkbtFe73fvY7UMKubdhoVEDT1aGhqidWannPv8k4f401jJAstix9NI+a5zAUGGwe693Sfs0+pdIqiWSmPC7KW6JDCi56tC0dXm+dMteMJWWvrisfqBe1r7/S42pEmKFEYM1q5wkw7NXyjr889W4rHqu25K6ChRnaEx8a/pXeWkjBUblOble44EDtomB3jMvfIDte2pyfMNIGAyjCgY0k+u1vM4QRiZKt184jbrdaMu9MD3Q2GBQ1OXTC7zhPI+oRoikrbsWN0vJmNPpl2pxFrg6bC0WwJaU6R0bUtL8vFN/t5w27b3/ev9VB3AgHQ65ywOEimKuTe7bYDokHrJhofGtuukH1ZmD/LDNl0wZBn5l7/JbkdRozaa8iIIcPaghKSILxJjNocy+rG6Ntnyi94Jm0xoVD6Dwrm13lMUOoJxiWTkiVyKEyXs0mDoimCw2SPybLsONYXnTMbn0DpGUvaZ90abnCvJRP1rhyRFFoGrI7n66/ssMkZzVCoZOOV5X7HVNm8bnvYmEItkTVMEVnmy7Av/uHALQNnzC0ksozasGF9Gtk8X2K2bIpSME2y0ozmXq/kJ+3VOelRUxYVdEwXLO3mIQxoRlt0TOq6NKyt1IJDOnrbRcoQ7LdDRAEdR8hq9BkIupKj2RqeXnjN6ek1pYM+ZE84uznvduNktZZ+S8KFxaoYhmzzCe9VumZWiGh7Jg305nUOs7HeqxAUWnQcFEyqdGL8QSCTQpZMMWAAneD7oEzd2iRK+4qBmKfecMC7643FiOIUR02FZrDbdD2WTuSDoplahW26gkm54cOeFk0irYy3PNC/Kwew324NbQs0Cy9JpqklMyx2Ybmq4b12iI7mg31XXBnfoVYY8iEH3VbHcb0t85wdL2jM6Xjdy+6Z3Lo/2/5FRaM7LlnvOT3ZNLVRSVBZrCd7SVcAShsNC7U3V0NhSDJJ6fHZb+1RCYBgoyQqnaqmmYX1prsoN/bmLJujL05fjx8aHvHXpvpJC3cefEkEQUPXoIv1tKv7ywyCmCQdM53uwvLcEA94ym8cc4z6Dp+x8i1r2k+olEqlVMcnB++8qXtOc3DC8+me+KT7dAH7bR64cmVYnwvBhAmHC4JKaa1mdJ8oAMGrtjoZQSkASh9YfMNgtVdhkkLh1CUL46x9Pm66z27n5yRdi/T3eNAcoVap1dAQJYcUcq1SgCw51xXOnOk3ywdkMOz12XGBS5xbLCriJh/yAZuMuoCsVgkSQQB0/Hzrd25deWb7PrsltZy9PPDxtQs96kNejDtN9/suuumcWK1XObraQle7uBkf9Q6lTkAlO1lZFx1Q+kRr00Ur7qkK/zmiNaUHbTfdbmFRXoDlpVdtsyfkpd4imSsWhmRTxJ0O3lheUZtUhgXFQPZH/lQC7PXgwrvvagzExhYf8U92GAP71DOcoxYsivY6CMg2+JHip8+/YMHY7vS6hULwhH/Q6w1DjrTVT7R+5/r5q6qd2o5mnsVxfk94zI8Z0/TyQHN1e67gVGT9eqOXQw6+dOwn/6Xemkv/cR1r413t8LUeMt1F/qbTF7LQ6Phl/yD7i+qKnIllscl3e8ZU83yzz9Mng2DMev/kfmMO6XOX623393ZPuT2mX3FnJ2ZB0dv4uG8w6pAlbvClzqgalE/4Mh3Hc5Hvcm1KtaNpFF71Dv/uNXC2X0/n112nqIhxmx/77zqMLLrARQqVp72ki37nOw/7PWC/ZLqmOUqTTBg1IZsuaqp1TdfjRpcrVLb6pI2mi3otdoHdnjbizfSabbVZgsNlL9poRAUIZrjQSsmpiHZ51IH/+gMsP+1//tDjT/vf5KD8T8eAT5+u4n/U/wXa0/2K2qv7yQAAAABJRU5ErkJggg=="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAoCAYAAAD32nqhAAADEklEQVR4AbWWNZgkZRCG3+rZOV3D3Z3za9xJcHc6wXsXi4jIyNAYmfw5C3HIcc7dMnzd/f/Y6+efembOtdrtra++qhVOaAxedvOH/Rdc+yEHiYQDhObd0RgU2oPUvuf8iAHDU5OZiUYza+zr68+OGADWJkAIRNsRAYYW3JkKloIwQGhp71kL0sNXEMj9PCJCID8sgO54sjExMiQMQyhCyHTavMZDAsZ6+zJBI+CfAkhq7BHZYZSgXBJgmIFEEWZGUMgPChi//v5UkJpF62okFFAp7Wi5Mj2wghByJCRBhFiVYMR7rsIBbp6CMsxT4qEIEghl/7mZNYCJkTE3D2K2ahesrqONNjqa7QPAQm61rkleguGqCq6mQl4H0C2PpIhUqslW86GIUL8m7ZhzfuqAALl/6CfyBYwI985MTZEXAD35ZCNmGW68sHKZ8lvtzP3xC5p+/YZZb78J5YZojbe0MLOBTrIgNWIxuxkNbzxP+SX3iVmvvwBBDL3zEZIohgoaJ7u7s0SQu+g4Aw0P3c3eMeOpB/Ekvidv2PbJe0xJKAQEKIirW1soUx+TJ7ey+/tVSBDiuyZIlCQVdyaiu3v72Du6untRVOmjbuGzhNa5y8xsMBqPBP/818m/HV1MTExObxP8/W8Hf/7dUVsBZslg69wZyw1g09ZdnwUpV4iNCyJIQCE3HoUkQMU5ZpWbrl3YlgCUoIKo7bPLrJts7xQkCRUfpKuuunQ1xmqA+mkuQF47ojreq29IF66OAE9RqPCBQhQfSxgFyBVYzF4HKJ3SvAzToMsUHq4GEAw2zSot2wcw7/TTBw1bhvC5rw2LTDMtmzdv3mA9wK+SStVA7asgqiq7/H0AC6fNNNnqav340FQ7k0ybd9Xqg/1WLgySaooGN1JE8w4GKNG6LEkY9F9p/iveps1j2T4J2TdYu2H7Z1LIg+QKBJXrlsxrO6gCV1EuVTDz+iUolZIKRxJrNmz9/fd1W/Tb2s2aPv5+xP8fJFCxqMKwyhEDyqVTlpkxCBqcVT5lGUcTqzdu+2D1+i0fcCLjf0XElF4DYemFAAAAAElFTkSuQmCC"},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAICAYAAADwdn+XAAAASklEQVR4AWPAB9JKWqNAmIEckFHS2pBW1PofhEFssjUjG0KGZkxDyNGMaQhhzYQNwQhtkAQpGCV20ovbQtKL2r4RqxmkFqQHpBcA3gqccd9+wbMAAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAiCAYAAABr0zihAAABkUlEQVR4AWKgCsgs61RPK2p9llbVLwnopBwe5AiiMB7nGtu2nXNs28kwLMQY1atYp+SWY2xbf8ga17V7G4t+vdtVsztofr+Hr5AWECDwwASMAJGX9GJ6s0+QQJkDQGYsZnRSA2ZUR+z8QwRW+4qP3b/f3Yxa4AYCVLz3BYIUNiOx+Q9SURs4c3WYT/3wyAs4ECRbiK3mzBeFrQGWxbHYry44OoP5XiFqnstNnvrlQxVgZv/qrT9fAZh/qAvw66NtsWEYHU37KputlN9CTMSCBD64+zKv4zZw4rzoj6IxkULZTVutHkxgkv0gQuVc1CCDoHI6mORG1CCHlRpAnMAZxBQ1QIDgDNfHKgGrZjcQ4ddnqDMwsRuPKizWZJAbkK1cLlUD9OoyBBC5RQlECYzzzJu4ErCnNhHFzYB4iwQ+1v5vAojI0QMU7rvLOnYO+mqshQO4D7lDCRw7fW2IPefb1AcVf1zbS2X4rOyp2yLDqCwGh/TbJBXVrvF4l45b71zACy0QIbeGmsInZnlP0Y7X3k89HCaJpH6+oPwAAAAASUVORK5CYII="},,,,function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFNWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHRpZmY6T3JpZW50YXRpb249IjEiIHhtcDpDcmVhdGVEYXRlPSIyMDIwLTA1LTI2VDE2OjUyOjAxKzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMC0wOC0wN1QxMDo0OTo1OCswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMC0wOC0wN1QxMDo0OTo1OCswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5OGM1MjA3My00NzRmLTQ5YTUtYTBiMy04YTBiNjUxOTg4MTkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OThjNTIwNzMtNDc0Zi00OWE1LWEwYjMtOGEwYjY1MTk4ODE5IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6OThjNTIwNzMtNDc0Zi00OWE1LWEwYjMtOGEwYjY1MTk4ODE5Ij4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OThjNTIwNzMtNDc0Zi00OWE1LWEwYjMtOGEwYjY1MTk4ODE5IiBzdEV2dDp3aGVuPSIyMDIwLTA4LTA3VDEwOjQ5OjU4KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+BNIWNwAAANBJREFUOI2lk7FtwzAQRZ9UpPIGAtyr8RaZwMgA2SGtN/AGadMZaTyFao9gQJ1bw0AKPTdHwTBCkUgO+MDxePcIkneNSsE64Dv8LTAuZqtLelcv6i10iVi2JrexUo8PoGcdI6cK+KqOC7CkMXKzwFb9VK8VsKRr1LSJ08SnbIADsC79UMbOwBtwatQd8AG8/BGW7AfYN+qtJjH84sEl4HyVWBefps3EJ+AL6B9ghN/H3vRrZW071LbXMzDbsLUDkIDFkSpoHlHUQe3+AUvq1OEOLQ87IC/d1y4AAAAASUVORK5CYII="},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e,n){(function(t){function i(t,n){var i={seen:[],stylize:r};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),v(n)?i.showHidden=n:n&&e._extend(i,n),x(i.showHidden)&&(i.showHidden=!1),x(i.depth)&&(i.depth=2),x(i.colors)&&(i.colors=!1),x(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=o),l(i,t,i.depth)}function o(t,e){var n=i.styles[e];return n?"["+i.colors[n][0]+"m"+t+"["+i.colors[n][1]+"m":t}function r(t,e){return t}function a(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function l(t,n,i){if(t.customInspect&&n&&T(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(i,t);return g(o)||(o=l(t,o,i)),o}var r=s(t,n);if(r)return r;var v=Object.keys(n),p=a(v);if(t.showHidden&&(v=Object.getOwnPropertyNames(n)),E(n)&&(v.indexOf("message")>=0||v.indexOf("description")>=0))return u(n);if(0===v.length){if(T(n)){var m=n.name?": "+n.name:"";return t.stylize("[Function"+m+"]","special")}if(b(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return t.stylize(Date.prototype.toString.call(n),"date");if(E(n))return u(n)}var _="",y=!1,x=["{","}"];if(h(n)&&(y=!0,x=["[","]"]),T(n)){_=" [Function"+(n.name?": "+n.name:"")+"]"}if(b(n)&&(_=" "+RegExp.prototype.toString.call(n)),w(n)&&(_=" "+Date.prototype.toUTCString.call(n)),E(n)&&(_=" "+u(n)),0===v.length&&(!y||0==n.length))return x[0]+_+x[1];if(i<0)return b(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var S;return S=y?c(t,n,i,p,v):v.map(function(e){return f(t,n,i,p,e,y)}),t.seen.pop(),d(S,_,x)}function s(t,e){if(x(e))return t.stylize("undefined","undefined");if(g(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return _(e)?t.stylize(""+e,"number"):v(e)?t.stylize(""+e,"boolean"):p(e)?t.stylize("null","null"):void 0}function u(t){return"["+Error.prototype.toString.call(t)+"]"}function c(t,e,n,i,o){for(var r=[],a=0,l=e.length;a<l;++a)M(e,String(a))?r.push(f(t,e,n,i,String(a),!0)):r.push("");return o.forEach(function(o){o.match(/^\d+$/)||r.push(f(t,e,n,i,o,!0))}),r}function f(t,e,n,i,o,r){var a,s,u;if(u=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]},u.get?s=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(s=t.stylize("[Setter]","special")),M(i,o)||(a="["+o+"]"),s||(t.seen.indexOf(u.value)<0?(s=p(n)?l(t,u.value,null):l(t,u.value,n-1),s.indexOf("\n")>-1&&(s=r?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n"))):s=t.stylize("[Circular]","special")),x(a)){if(r&&o.match(/^\d+$/))return s;a=JSON.stringify(""+o),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function d(t,e,n){var i=0;return t.reduce(function(t,e){return i++,e.indexOf("\n")>=0&&i++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function h(t){return Array.isArray(t)}function v(t){return"boolean"==typeof t}function p(t){return null===t}function m(t){return null==t}function _(t){return"number"==typeof t}function g(t){return"string"==typeof t}function y(t){return"symbol"==typeof t}function x(t){return void 0===t}function b(t){return S(t)&&"[object RegExp]"===A(t)}function S(t){return"object"==typeof t&&null!==t}function w(t){return S(t)&&"[object Date]"===A(t)}function E(t){return S(t)&&("[object Error]"===A(t)||t instanceof Error)}function T(t){return"function"==typeof t}function I(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function A(t){return Object.prototype.toString.call(t)}function k(t){return t<10?"0"+t.toString(10):t.toString(10)}function P(){var t=new Date,e=[k(t.getHours()),k(t.getMinutes()),k(t.getSeconds())].join(":");return[t.getDate(),B[t.getMonth()],e].join(" ")}function M(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function L(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}function C(e){function n(){for(var n=[],i=0;i<arguments.length;i++)n.push(arguments[i]);var o=n.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var r=this,a=function(){return o.apply(r,arguments)};e.apply(this,n).then(function(e){t.nextTick(a,null,e)},function(e){t.nextTick(L,e,a)})}if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Object.defineProperties(n,N(e)),n}var N=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},i=0;i<e.length;i++)n[e[i]]=Object.getOwnPropertyDescriptor(t,e[i]);return n},O=/%[sdj%]/g;e.format=function(t){if(!g(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(i(arguments[n]));return e.join(" ")}for(var n=1,o=arguments,r=o.length,a=String(t).replace(O,function(t){if("%%"===t)return"%";if(n>=r)return t;switch(t){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(t){return"[Circular]"}default:return t}}),l=o[n];n<r;l=o[++n])p(l)||!S(l)?a+=" "+l:a+=" "+i(l);return a},e.deprecate=function(n,i){function o(){if(!r){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),r=!0}return n.apply(this,arguments)}if(void 0!==t&&!0===t.noDeprecation)return n;if(void 0===t)return function(){return e.deprecate(n,i).apply(this,arguments)};var r=!1;return o};var R,V={};e.debuglog=function(n){if(x(R)&&(R=t.env.NODE_DEBUG||""),n=n.toUpperCase(),!V[n])if(new RegExp("\\b"+n+"\\b","i").test(R)){var i=t.pid;V[n]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",n,i,t)}}else V[n]=function(){};return V[n]},e.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=h,e.isBoolean=v,e.isNull=p,e.isNullOrUndefined=m,e.isNumber=_,e.isString=g,e.isSymbol=y,e.isUndefined=x,e.isRegExp=b,e.isObject=S,e.isDate=w,e.isError=E,e.isFunction=T,e.isPrimitive=I,e.isBuffer=n(915);var B=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",P(),e.format.apply(e,arguments))},e.inherits=n(878),e._extend=function(t,e){if(!e||!S(e))return t;for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t};var F="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;e.promisify=function(t){function e(){for(var e,n,i=new Promise(function(t,i){e=t,n=i}),o=[],r=0;r<arguments.length;r++)o.push(arguments[r]);o.push(function(t,i){t?n(t):e(i)});try{t.apply(this,o)}catch(t){n(t)}return i}if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(F&&t[F]){var e=t[F];if("function"!=typeof e)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,F,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),F&&Object.defineProperty(e,F,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,N(t))},e.promisify.custom=F,e.callbackify=C}).call(e,n(891))}]);